require=function t(e,n,i){function o(s,a){if(!n[s]){if(!e[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){var n=e[s][1][t];return o(n?n:t)},u,u.exports,t,e,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e,n){(function(n){var i="undefined"!=typeof e&&e.exports&&"undefined"!=typeof n?n:this||window;(i._gsQueue||(i._gsQueue=[])).push(function(){"use strict";i._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(t,e){var n,o,r,s,a=function(){t.call(this,"css"),this._overwriteProps.length=0,this.setRatio=a.prototype.setRatio},l=i._gsDefine.globals,c={},u=a.prototype=new t("css");u.constructor=a,a.version="1.16.1",a.API=2,a.defaultTransformPerspective=0,a.defaultSkewType="compensated",u="px",a.suffixMap={top:u,right:u,bottom:u,left:u,width:u,height:u,fontSize:u,padding:u,margin:u,perspective:u,lineHeight:""};var h,d,f,p,g,m,v=/(?:\d|\-\d|\.\d|\-\.\d)+/g,y=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,w=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,b=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,C=/(?:\d|\-|\+|=|#|\.)*/g,x=/opacity *= *([^)]*)/i,S=/opacity:([^;]*)/i,T=/alpha\(opacity *=.+?\)/i,_=/^(rgb|hsl)/,E=/([A-Z])/g,k=/-([a-z])/gi,R=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,A=function(t,e){return e.toUpperCase()},P=/(?:Left|Right|Width)/i,N=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,O=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,D=/,(?=[^\)]*(?:\(|$))/gi,M=Math.PI/180,H=180/Math.PI,I={},L=document,F=function(t){return L.createElementNS?L.createElementNS("http://www.w3.org/1999/xhtml",t):L.createElement(t)},z=F("div"),B=F("img"),V=a._internals={_specialProps:c},W=navigator.userAgent,j=function(){var t=W.indexOf("Android"),e=F("a");return f=-1!==W.indexOf("Safari")&&-1===W.indexOf("Chrome")&&(-1===t||Number(W.substr(t+8,1))>3),g=f&&Number(W.substr(W.indexOf("Version/")+8,1))<6,p=-1!==W.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(W)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(W))&&(m=parseFloat(RegExp.$1)),e?(e.style.cssText="top:1px;opacity:.55;",/^0.55/.test(e.style.opacity)):!1}(),U=function(t){return x.test("string"==typeof t?t:(t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100:1},X=function(t){window.console&&console.log(t)},Y="",q="",G=function(t,e){e=e||z;var n,i,o=e.style;if(void 0!==o[t])return t;for(t=t.charAt(0).toUpperCase()+t.substr(1),n=["O","Moz","ms","Ms","Webkit"],i=5;--i>-1&&void 0===o[n[i]+t];);return i>=0?(q=3===i?"ms":n[i],Y="-"+q.toLowerCase()+"-",q+t):null},$=L.defaultView?L.defaultView.getComputedStyle:function(){},K=a.getStyle=function(t,e,n,i,o){var r;return j||"opacity"!==e?(!i&&t.style[e]?r=t.style[e]:(n=n||$(t))?r=n[e]||n.getPropertyValue(e)||n.getPropertyValue(e.replace(E,"-$1").toLowerCase()):t.currentStyle&&(r=t.currentStyle[e]),null==o||r&&"none"!==r&&"auto"!==r&&"auto auto"!==r?r:o):U(t)},Q=V.convertToPixels=function(t,n,i,o,r){if("px"===o||!o)return i;if("auto"===o||!i)return 0;var s,l,c,u=P.test(n),h=t,d=z.style,f=0>i;if(f&&(i=-i),"%"===o&&-1!==n.indexOf("border"))s=i/100*(u?t.clientWidth:t.clientHeight);else{if(d.cssText="border:0 solid red;position:"+K(t,"position")+";line-height:0;","%"!==o&&h.appendChild)d[u?"borderLeftWidth":"borderTopWidth"]=i+o;else{if(h=t.parentNode||L.body,l=h._gsCache,c=e.ticker.frame,l&&u&&l.time===c)return l.width*i/100;d[u?"width":"height"]=i+o}h.appendChild(z),s=parseFloat(z[u?"offsetWidth":"offsetHeight"]),h.removeChild(z),u&&"%"===o&&a.cacheWidths!==!1&&(l=h._gsCache=h._gsCache||{},l.time=c,l.width=s/i*100),0!==s||r||(s=Q(t,n,i,o,!0))}return f?-s:s},Z=V.calculateOffset=function(t,e,n){if("absolute"!==K(t,"position",n))return 0;var i="left"===e?"Left":"Top",o=K(t,"margin"+i,n);return t["offset"+i]-(Q(t,e,parseFloat(o),o.replace(C,""))||0)},J=function(t,e){var n,i,o,r={};if(e=e||$(t,null))if(n=e.length)for(;--n>-1;)o=e[n],-1!==o.indexOf("-transform")&&Tt!==o||(r[o.replace(k,A)]=e.getPropertyValue(o));else for(n in e)-1!==n.indexOf("Transform")&&St!==n||(r[n]=e[n]);else if(e=t.currentStyle||t.style)for(n in e)"string"==typeof n&&void 0===r[n]&&(r[n.replace(k,A)]=e[n]);return j||(r.opacity=U(t)),i=Dt(t,e,!1),r.rotation=i.rotation,r.skewX=i.skewX,r.scaleX=i.scaleX,r.scaleY=i.scaleY,r.x=i.x,r.y=i.y,Et&&(r.z=i.z,r.rotationX=i.rotationX,r.rotationY=i.rotationY,r.scaleZ=i.scaleZ),r.filters&&delete r.filters,r},tt=function(t,e,n,i,o){var r,s,a,l={},c=t.style;for(s in n)"cssText"!==s&&"length"!==s&&isNaN(s)&&(e[s]!==(r=n[s])||o&&o[s])&&-1===s.indexOf("Origin")&&("number"!=typeof r&&"string"!=typeof r||(l[s]="auto"!==r||"left"!==s&&"top"!==s?""!==r&&"auto"!==r&&"none"!==r||"string"!=typeof e[s]||""===e[s].replace(b,"")?r:0:Z(t,s),void 0!==c[s]&&(a=new pt(c,s,c[s],a))));if(i)for(s in i)"className"!==s&&(l[s]=i[s]);return{difs:l,firstMPT:a}},et={width:["Left","Right"],height:["Top","Bottom"]},nt=["marginLeft","marginRight","marginTop","marginBottom"],it=function(t,e,n){var i=parseFloat("width"===e?t.offsetWidth:t.offsetHeight),o=et[e],r=o.length;for(n=n||$(t,null);--r>-1;)i-=parseFloat(K(t,"padding"+o[r],n,!0))||0,i-=parseFloat(K(t,"border"+o[r]+"Width",n,!0))||0;return i},ot=function(t,e){null!=t&&""!==t&&"auto"!==t&&"auto auto"!==t||(t="0 0");var n=t.split(" "),i=-1!==t.indexOf("left")?"0%":-1!==t.indexOf("right")?"100%":n[0],o=-1!==t.indexOf("top")?"0%":-1!==t.indexOf("bottom")?"100%":n[1];return null==o?o="center"===i?"50%":"0":"center"===o&&(o="50%"),("center"===i||isNaN(parseFloat(i))&&-1===(i+"").indexOf("="))&&(i="50%"),t=i+" "+o+(n.length>2?" "+n[2]:""),e&&(e.oxp=-1!==i.indexOf("%"),e.oyp=-1!==o.indexOf("%"),e.oxr="="===i.charAt(1),e.oyr="="===o.charAt(1),e.ox=parseFloat(i.replace(b,"")),e.oy=parseFloat(o.replace(b,"")),e.v=t),e||t},rt=function(t,e){return"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2)):parseFloat(t)-parseFloat(e)},st=function(t,e){return null==t?e:"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2))+e:parseFloat(t)},at=function(t,e,n,i){var o,r,s,a,l,c=1e-6;return null==t?a=e:"number"==typeof t?a=t:(o=360,r=t.split("_"),l="="===t.charAt(1),s=(l?parseInt(t.charAt(0)+"1",10)*parseFloat(r[0].substr(2)):parseFloat(r[0]))*(-1===t.indexOf("rad")?1:H)-(l?0:e),r.length&&(i&&(i[n]=e+s),-1!==t.indexOf("short")&&(s%=o,s!==s%(o/2)&&(s=0>s?s+o:s-o)),-1!==t.indexOf("_cw")&&0>s?s=(s+9999999999*o)%o-(s/o|0)*o:-1!==t.indexOf("ccw")&&s>0&&(s=(s-9999999999*o)%o-(s/o|0)*o)),a=e+s),c>a&&a>-c&&(a=0),a},lt={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},ct=function(t,e,n){return t=0>t?t+1:t>1?t-1:t,255*(1>6*t?e+(n-e)*t*6:.5>t?n:2>3*t?e+(n-e)*(2/3-t)*6:e)+.5|0},ut=a.parseColor=function(t){var e,n,i,o,r,s;return t&&""!==t?"number"==typeof t?[t>>16,t>>8&255,255&t]:(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),lt[t]?lt[t]:"#"===t.charAt(0)?(4===t.length&&(e=t.charAt(1),n=t.charAt(2),i=t.charAt(3),t="#"+e+e+n+n+i+i),t=parseInt(t.substr(1),16),[t>>16,t>>8&255,255&t]):"hsl"===t.substr(0,3)?(t=t.match(v),o=Number(t[0])%360/360,r=Number(t[1])/100,s=Number(t[2])/100,n=.5>=s?s*(r+1):s+r-s*r,e=2*s-n,t.length>3&&(t[3]=Number(t[3])),t[0]=ct(o+1/3,e,n),t[1]=ct(o,e,n),t[2]=ct(o-1/3,e,n),t):(t=t.match(v)||lt.transparent,t[0]=Number(t[0]),t[1]=Number(t[1]),t[2]=Number(t[2]),t.length>3&&(t[3]=Number(t[3])),t)):lt.black},ht="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(u in lt)ht+="|"+u+"\\b";ht=new RegExp(ht+")","gi");var dt=function(t,e,n,i){if(null==t)return function(t){return t};var o,r=e?(t.match(ht)||[""])[0]:"",s=t.split(r).join("").match(w)||[],a=t.substr(0,t.indexOf(s[0])),l=")"===t.charAt(t.length-1)?")":"",c=-1!==t.indexOf(" ")?" ":",",u=s.length,h=u>0?s[0].replace(v,""):"";return u?o=e?function(t){var e,d,f,p;if("number"==typeof t)t+=h;else if(i&&D.test(t)){for(p=t.replace(D,"|").split("|"),f=0;f<p.length;f++)p[f]=o(p[f]);return p.join(",")}if(e=(t.match(ht)||[r])[0],d=t.split(e).join("").match(w)||[],f=d.length,u>f--)for(;++f<u;)d[f]=n?d[(f-1)/2|0]:s[f];return a+d.join(c)+c+e+l+(-1!==t.indexOf("inset")?" inset":"")}:function(t){var e,r,d;if("number"==typeof t)t+=h;else if(i&&D.test(t)){for(r=t.replace(D,"|").split("|"),d=0;d<r.length;d++)r[d]=o(r[d]);return r.join(",")}if(e=t.match(w)||[],d=e.length,u>d--)for(;++d<u;)e[d]=n?e[(d-1)/2|0]:s[d];return a+e.join(c)+l}:function(t){return t}},ft=function(t){return t=t.split(","),function(e,n,i,o,r,s,a){var l,c=(n+"").split(" ");for(a={},l=0;4>l;l++)a[t[l]]=c[l]=c[l]||c[(l-1)/2>>0];return o.parse(e,a,r,s)}},pt=(V._setPluginRatio=function(t){this.plugin.setRatio(t);for(var e,n,i,o,r=this.data,s=r.proxy,a=r.firstMPT,l=1e-6;a;)e=s[a.v],a.r?e=Math.round(e):l>e&&e>-l&&(e=0),a.t[a.p]=e,a=a._next;if(r.autoRotate&&(r.autoRotate.rotation=s.rotation),1===t)for(a=r.firstMPT;a;){if(n=a.t,n.type){if(1===n.type){for(o=n.xs0+n.s+n.xs1,i=1;i<n.l;i++)o+=n["xn"+i]+n["xs"+(i+1)];n.e=o}}else n.e=n.s+n.xs0;a=a._next}},function(t,e,n,i,o){this.t=t,this.p=e,this.v=n,this.r=o,i&&(i._prev=this,this._next=i)}),gt=(V._parseToProxy=function(t,e,n,i,o,r){var s,a,l,c,u,h=i,d={},f={},p=n._transform,g=I;for(n._transform=null,I=e,i=u=n.parse(t,e,i,o),I=g,r&&(n._transform=p,h&&(h._prev=null,h._prev&&(h._prev._next=null)));i&&i!==h;){if(i.type<=1&&(a=i.p,f[a]=i.s+i.c,d[a]=i.s,r||(c=new pt(i,"s",a,c,i.r),i.c=0),1===i.type))for(s=i.l;--s>0;)l="xn"+s,a=i.p+"_"+l,f[a]=i.data[l],d[a]=i[l],r||(c=new pt(i,l,a,c,i.rxp[l]));i=i._next}return{proxy:d,end:f,firstMPT:c,pt:u}},V.CSSPropTween=function(t,e,i,o,r,a,l,c,u,h,d){this.t=t,this.p=e,this.s=i,this.c=o,this.n=l||e,t instanceof gt||s.push(this.n),this.r=c,this.type=a||0,u&&(this.pr=u,n=!0),this.b=void 0===h?i:h,this.e=void 0===d?i+o:d,r&&(this._next=r,r._prev=this)}),mt=a.parseComplex=function(t,e,n,i,o,r,s,a,l,c){n=n||r||"",s=new gt(t,e,0,0,s,c?2:1,null,!1,a,n,i),i+="";var u,d,f,p,g,m,w,b,C,x,S,T,E=n.split(", ").join(",").split(" "),k=i.split(", ").join(",").split(" "),R=E.length,A=h!==!1;for(-1===i.indexOf(",")&&-1===n.indexOf(",")||(E=E.join(" ").replace(D,", ").split(" "),k=k.join(" ").replace(D,", ").split(" "),R=E.length),R!==k.length&&(E=(r||"").split(" "),R=E.length),s.plugin=l,s.setRatio=c,u=0;R>u;u++)if(p=E[u],g=k[u],b=parseFloat(p),b||0===b)s.appendXtra("",b,rt(g,b),g.replace(y,""),A&&-1!==g.indexOf("px"),!0);else if(o&&("#"===p.charAt(0)||lt[p]||_.test(p)))T=","===g.charAt(g.length-1)?"),":")",p=ut(p),g=ut(g),C=p.length+g.length>6,C&&!j&&0===g[3]?(s["xs"+s.l]+=s.l?" transparent":"transparent",s.e=s.e.split(k[u]).join("transparent")):(j||(C=!1),s.appendXtra(C?"rgba(":"rgb(",p[0],g[0]-p[0],",",!0,!0).appendXtra("",p[1],g[1]-p[1],",",!0).appendXtra("",p[2],g[2]-p[2],C?",":T,!0),C&&(p=p.length<4?1:p[3],s.appendXtra("",p,(g.length<4?1:g[3])-p,T,!1)));else if(m=p.match(v)){if(w=g.match(y),!w||w.length!==m.length)return s;for(f=0,d=0;d<m.length;d++)S=m[d],x=p.indexOf(S,f),s.appendXtra(p.substr(f,x-f),Number(S),rt(w[d],S),"",A&&"px"===p.substr(x+S.length,2),0===d),f=x+S.length;s["xs"+s.l]+=p.substr(f)}else s["xs"+s.l]+=s.l?" "+p:p;if(-1!==i.indexOf("=")&&s.data){for(T=s.xs0+s.data.s,u=1;u<s.l;u++)T+=s["xs"+u]+s.data["xn"+u];s.e=T+s["xs"+u]}return s.l||(s.type=-1,s.xs0=s.e),s.xfirst||s},vt=9;for(u=gt.prototype,u.l=u.pr=0;--vt>0;)u["xn"+vt]=0,u["xs"+vt]="";u.xs0="",u._next=u._prev=u.xfirst=u.data=u.plugin=u.setRatio=u.rxp=null,u.appendXtra=function(t,e,n,i,o,r){var s=this,a=s.l;return s["xs"+a]+=r&&a?" "+t:t||"",n||0===a||s.plugin?(s.l++,s.type=s.setRatio?2:1,s["xs"+s.l]=i||"",a>0?(s.data["xn"+a]=e+n,s.rxp["xn"+a]=o,s["xn"+a]=e,s.plugin||(s.xfirst=new gt(s,"xn"+a,e,n,s.xfirst||s,0,s.n,o,s.pr),s.xfirst.xs0=0),s):(s.data={s:e+n},s.rxp={},s.s=e,s.c=n,s.r=o,s)):(s["xs"+a]+=e+(i||""),s)};var yt=function(t,e){e=e||{},this.p=e.prefix?G(t)||t:t,c[t]=c[this.p]=this,this.format=e.formatter||dt(e.defaultValue,e.color,e.collapsible,e.multi),e.parser&&(this.parse=e.parser),this.clrs=e.color,this.multi=e.multi,this.keyword=e.keyword,this.dflt=e.defaultValue,this.pr=e.priority||0},wt=V._registerComplexSpecialProp=function(t,e,n){"object"!=typeof e&&(e={parser:n});var i,o,r=t.split(","),s=e.defaultValue;for(n=n||[s],i=0;i<r.length;i++)e.prefix=0===i&&e.prefix,e.defaultValue=n[i]||s,o=new yt(r[i],e)},bt=function(t){if(!c[t]){var e=t.charAt(0).toUpperCase()+t.substr(1)+"Plugin";wt(t,{parser:function(t,n,i,o,r,s,a){var u=l.com.greensock.plugins[e];return u?(u._cssRegister(),c[i].parse(t,n,i,o,r,s,a)):(X("Error: "+e+" js file not loaded."),r)}})}};u=yt.prototype,u.parseComplex=function(t,e,n,i,o,r){var s,a,l,c,u,h,d=this.keyword;if(this.multi&&(D.test(n)||D.test(e)?(a=e.replace(D,"|").split("|"),l=n.replace(D,"|").split("|")):d&&(a=[e],l=[n])),l){for(c=l.length>a.length?l.length:a.length,s=0;c>s;s++)e=a[s]=a[s]||this.dflt,n=l[s]=l[s]||this.dflt,d&&(u=e.indexOf(d),h=n.indexOf(d),u!==h&&(-1===h?a[s]=a[s].split(d).join(""):-1===u&&(a[s]+=" "+d)));e=a.join(", "),n=l.join(", ")}return mt(t,this.p,e,n,this.clrs,this.dflt,i,this.pr,o,r)},u.parse=function(t,e,n,i,o,s,a){return this.parseComplex(t.style,this.format(K(t,this.p,r,!1,this.dflt)),this.format(e),o,s)},a.registerSpecialProp=function(t,e,n){wt(t,{parser:function(t,i,o,r,s,a,l){var c=new gt(t,o,0,0,s,2,o,!1,n);return c.plugin=a,c.setRatio=e(t,i,r._tween,o),c},priority:n})},a.useSVGTransformAttr=f;var Ct,xt="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),St=G("transform"),Tt=Y+"transform",_t=G("transformOrigin"),Et=null!==G("perspective"),kt=V.Transform=function(){this.perspective=parseFloat(a.defaultTransformPerspective)||0,this.force3D=a.defaultForce3D!==!1&&Et?a.defaultForce3D||"auto":!1},Rt=window.SVGElement,At=function(t,e,n){var i,o=L.createElementNS("http://www.w3.org/2000/svg",t),r=/([a-z])([A-Z])/g;for(i in n)o.setAttributeNS(null,i.replace(r,"$1-$2").toLowerCase(),n[i]);return e.appendChild(o),o},Pt=L.documentElement,Nt=function(){var t,e,n,i=m||/Android/i.test(W)&&!window.chrome;return L.createElementNS&&!i&&(t=At("svg",Pt),e=At("rect",t,{width:100,height:50,x:100}),n=e.getBoundingClientRect().width,e.style[_t]="50% 50%",e.style[St]="scaleX(0.5)",i=n===e.getBoundingClientRect().width&&!(p&&Et),Pt.removeChild(t)),i}(),Ot=function(t,e,n,i){var o,r;i&&(r=i.split(" ")).length||(o=t.getBBox(),e=ot(e).split(" "),r=[(-1!==e[0].indexOf("%")?parseFloat(e[0])/100*o.width:parseFloat(e[0]))+o.x,(-1!==e[1].indexOf("%")?parseFloat(e[1])/100*o.height:parseFloat(e[1]))+o.y]),n.xOrigin=parseFloat(r[0]),n.yOrigin=parseFloat(r[1]),t.setAttribute("data-svg-origin",r.join(" "))},Dt=V.getTransform=function(t,e,n,i){if(t._gsTransform&&n&&!i)return t._gsTransform;var o,s,l,c,u,h,d,f,p,g,m=n?t._gsTransform||new kt:new kt,v=m.scaleX<0,y=2e-5,w=1e5,b=Et?parseFloat(K(t,_t,e,!1,"0 0 0").split(" ")[2])||m.zOrigin||0:0,C=parseFloat(a.defaultTransformPerspective)||0;if(St?s=K(t,Tt,e,!0):t.currentStyle&&(s=t.currentStyle.filter.match(N),s=s&&4===s.length?[s[0].substr(4),Number(s[2].substr(4)),Number(s[1].substr(4)),s[3].substr(4),m.x||0,m.y||0].join(","):""),o=!s||"none"===s||"matrix(1, 0, 0, 1, 0, 0)"===s,m.svg=!!(Rt&&"function"==typeof t.getBBox&&t.getCTM&&(!t.parentNode||t.parentNode.getBBox&&t.parentNode.getCTM)),m.svg&&(o&&-1!==(t.style[St]+"").indexOf("matrix")&&(s=t.style[St],o=!1),Ot(t,K(t,_t,r,!1,"50% 50%")+"",m,t.getAttribute("data-svg-origin")),Ct=a.useSVGTransformAttr||Nt,l=t.getAttribute("transform"),o&&l&&-1!==l.indexOf("matrix")&&(s=l,o=0)),!o){for(l=(s||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[],c=l.length;--c>-1;)u=Number(l[c]),l[c]=(h=u-(u|=0))?(h*w+(0>h?-.5:.5)|0)/w+u:u;if(16===l.length){var x,S,T,_,E,k=l[0],R=l[1],A=l[2],P=l[3],O=l[4],D=l[5],M=l[6],I=l[7],L=l[8],F=l[9],z=l[10],B=l[12],V=l[13],W=l[14],j=l[11],U=Math.atan2(M,z);m.zOrigin&&(W=-m.zOrigin,B=L*W-l[12],V=F*W-l[13],W=z*W+m.zOrigin-l[14]),m.rotationX=U*H,U&&(_=Math.cos(-U),E=Math.sin(-U),x=O*_+L*E,S=D*_+F*E,T=M*_+z*E,L=O*-E+L*_,F=D*-E+F*_,z=M*-E+z*_,j=I*-E+j*_,O=x,D=S,M=T),U=Math.atan2(L,z),m.rotationY=U*H,U&&(_=Math.cos(-U),E=Math.sin(-U),x=k*_-L*E,S=R*_-F*E,T=A*_-z*E,F=R*E+F*_,z=A*E+z*_,j=P*E+j*_,k=x,R=S,A=T),U=Math.atan2(R,k),m.rotation=U*H,U&&(_=Math.cos(-U),E=Math.sin(-U),k=k*_+O*E,S=R*_+D*E,D=R*-E+D*_,M=A*-E+M*_,R=S),m.rotationX&&Math.abs(m.rotationX)+Math.abs(m.rotation)>359.9&&(m.rotationX=m.rotation=0,m.rotationY+=180),m.scaleX=(Math.sqrt(k*k+R*R)*w+.5|0)/w,m.scaleY=(Math.sqrt(D*D+F*F)*w+.5|0)/w,m.scaleZ=(Math.sqrt(M*M+z*z)*w+.5|0)/w,m.skewX=0,m.perspective=j?1/(0>j?-j:j):0,m.x=B,m.y=V,m.z=W,m.svg&&(m.x-=m.xOrigin-(m.xOrigin*k-m.yOrigin*O),m.y-=m.yOrigin-(m.yOrigin*R-m.xOrigin*D))}else if((!Et||i||!l.length||m.x!==l[4]||m.y!==l[5]||!m.rotationX&&!m.rotationY)&&(void 0===m.x||"none"!==K(t,"display",e))){var X=l.length>=6,Y=X?l[0]:1,q=l[1]||0,G=l[2]||0,$=X?l[3]:1;m.x=l[4]||0,m.y=l[5]||0,d=Math.sqrt(Y*Y+q*q),f=Math.sqrt($*$+G*G),p=Y||q?Math.atan2(q,Y)*H:m.rotation||0,g=G||$?Math.atan2(G,$)*H+p:m.skewX||0,Math.abs(g)>90&&Math.abs(g)<270&&(v?(d*=-1,g+=0>=p?180:-180,p+=0>=p?180:-180):(f*=-1,g+=0>=g?180:-180)),m.scaleX=d,m.scaleY=f,m.rotation=p,m.skewX=g,Et&&(m.rotationX=m.rotationY=m.z=0,m.perspective=C,m.scaleZ=1),m.svg&&(m.x-=m.xOrigin-(m.xOrigin*Y-m.yOrigin*q),m.y-=m.yOrigin-(m.yOrigin*$-m.xOrigin*G))}m.zOrigin=b;for(c in m)m[c]<y&&m[c]>-y&&(m[c]=0)}return n&&(t._gsTransform=m,m.svg&&(Ct&&t.style[St]?Lt(t.style,St):!Ct&&t.getAttribute("transform")&&t.removeAttribute("transform"))),m},Mt=function(t){var e,n,i=this.data,o=-i.rotation*M,r=o+i.skewX*M,s=1e5,a=(Math.cos(o)*i.scaleX*s|0)/s,l=(Math.sin(o)*i.scaleX*s|0)/s,c=(Math.sin(r)*-i.scaleY*s|0)/s,u=(Math.cos(r)*i.scaleY*s|0)/s,h=this.t.style,d=this.t.currentStyle;if(d){n=l,l=-c,c=-n,e=d.filter,h.filter="";var f,p,g=this.t.offsetWidth,v=this.t.offsetHeight,y="absolute"!==d.position,w="progid:DXImageTransform.Microsoft.Matrix(M11="+a+", M12="+l+", M21="+c+", M22="+u,b=i.x+g*i.xPercent/100,S=i.y+v*i.yPercent/100;if(null!=i.ox&&(f=(i.oxp?g*i.ox*.01:i.ox)-g/2,p=(i.oyp?v*i.oy*.01:i.oy)-v/2,b+=f-(f*a+p*l),S+=p-(f*c+p*u)),y?(f=g/2,p=v/2,w+=", Dx="+(f-(f*a+p*l)+b)+", Dy="+(p-(f*c+p*u)+S)+")"):w+=", sizingMethod='auto expand')",-1!==e.indexOf("DXImageTransform.Microsoft.Matrix(")?h.filter=e.replace(O,w):h.filter=w+" "+e,0!==t&&1!==t||1===a&&0===l&&0===c&&1===u&&(y&&-1===w.indexOf("Dx=0, Dy=0")||x.test(e)&&100!==parseFloat(RegExp.$1)||-1===e.indexOf(e.indexOf("Alpha"))&&h.removeAttribute("filter")),!y){var T,_,E,k=8>m?1:-1;for(f=i.ieOffsetX||0,p=i.ieOffsetY||0,i.ieOffsetX=Math.round((g-((0>a?-a:a)*g+(0>l?-l:l)*v))/2+b),i.ieOffsetY=Math.round((v-((0>u?-u:u)*v+(0>c?-c:c)*g))/2+S),vt=0;4>vt;vt++)_=nt[vt],T=d[_],n=-1!==T.indexOf("px")?parseFloat(T):Q(this.t,_,parseFloat(T),T.replace(C,""))||0,E=n!==i[_]?2>vt?-i.ieOffsetX:-i.ieOffsetY:2>vt?f-i.ieOffsetX:p-i.ieOffsetY,h[_]=(i[_]=Math.round(n-E*(0===vt||2===vt?1:k)))+"px"}}},Ht=V.set3DTransformRatio=V.setTransformRatio=function(t){var e,n,i,o,r,s,a,l,c,u,h,d,f,g,m,v,y,w,b,C,x,S,T,_=this.data,E=this.t.style,k=_.rotation,R=_.rotationX,A=_.rotationY,P=_.scaleX,N=_.scaleY,O=_.scaleZ,D=_.x,H=_.y,I=_.z,L=_.svg,F=_.perspective,z=_.force3D;if(((1===t||0===t)&&"auto"===z&&(this.tween._totalTime===this.tween._totalDuration||!this.tween._totalTime)||!z)&&!I&&!F&&!A&&!R||Ct&&L||!Et)return void(k||_.skewX||L?(k*=M,S=_.skewX*M,T=1e5,e=Math.cos(k)*P,o=Math.sin(k)*P,n=Math.sin(k-S)*-N,r=Math.cos(k-S)*N,S&&"simple"===_.skewType&&(y=Math.tan(S),y=Math.sqrt(1+y*y),n*=y,r*=y,_.skewY&&(e*=y,o*=y)),L&&(D+=_.xOrigin-(_.xOrigin*e+_.yOrigin*n),H+=_.yOrigin-(_.xOrigin*o+_.yOrigin*r),g=1e-6,g>D&&D>-g&&(D=0),g>H&&H>-g&&(H=0)),b=(e*T|0)/T+","+(o*T|0)/T+","+(n*T|0)/T+","+(r*T|0)/T+","+D+","+H+")",L&&Ct?this.t.setAttribute("transform","matrix("+b):E[St]=(_.xPercent||_.yPercent?"translate("+_.xPercent+"%,"+_.yPercent+"%) matrix(":"matrix(")+b):E[St]=(_.xPercent||_.yPercent?"translate("+_.xPercent+"%,"+_.yPercent+"%) matrix(":"matrix(")+P+",0,0,"+N+","+D+","+H+")");if(p&&(g=1e-4,g>P&&P>-g&&(P=O=2e-5),g>N&&N>-g&&(N=O=2e-5),!F||_.z||_.rotationX||_.rotationY||(F=0)),k||_.skewX)k*=M,m=e=Math.cos(k),v=o=Math.sin(k),_.skewX&&(k-=_.skewX*M,m=Math.cos(k),v=Math.sin(k),"simple"===_.skewType&&(y=Math.tan(_.skewX*M),y=Math.sqrt(1+y*y),m*=y,v*=y,_.skewY&&(e*=y,o*=y))),n=-v,r=m;else{if(!(A||R||1!==O||F||L))return void(E[St]=(_.xPercent||_.yPercent?"translate("+_.xPercent+"%,"+_.yPercent+"%) translate3d(":"translate3d(")+D+"px,"+H+"px,"+I+"px)"+(1!==P||1!==N?" scale("+P+","+N+")":""));e=r=1,n=o=0}c=1,i=s=a=l=u=h=0,d=F?-1/F:0,f=_.zOrigin,g=1e-6,C=",",x="0",k=A*M,k&&(m=Math.cos(k),v=Math.sin(k),a=-v,u=d*-v,i=e*v,s=o*v,c=m,d*=m,e*=m,o*=m),k=R*M,k&&(m=Math.cos(k),v=Math.sin(k),y=n*m+i*v,w=r*m+s*v,l=c*v,h=d*v,i=n*-v+i*m,s=r*-v+s*m,c*=m,d*=m,n=y,r=w),1!==O&&(i*=O,s*=O,c*=O,d*=O),1!==N&&(n*=N,r*=N,l*=N,h*=N),1!==P&&(e*=P,o*=P,a*=P,u*=P),(f||L)&&(f&&(D+=i*-f,H+=s*-f,I+=c*-f+f),L&&(D+=_.xOrigin-(_.xOrigin*e+_.yOrigin*n),H+=_.yOrigin-(_.xOrigin*o+_.yOrigin*r)),g>D&&D>-g&&(D=x),g>H&&H>-g&&(H=x),g>I&&I>-g&&(I=0)),b=_.xPercent||_.yPercent?"translate("+_.xPercent+"%,"+_.yPercent+"%) matrix3d(":"matrix3d(",b+=(g>e&&e>-g?x:e)+C+(g>o&&o>-g?x:o)+C+(g>a&&a>-g?x:a),b+=C+(g>u&&u>-g?x:u)+C+(g>n&&n>-g?x:n)+C+(g>r&&r>-g?x:r),R||A?(b+=C+(g>l&&l>-g?x:l)+C+(g>h&&h>-g?x:h)+C+(g>i&&i>-g?x:i),b+=C+(g>s&&s>-g?x:s)+C+(g>c&&c>-g?x:c)+C+(g>d&&d>-g?x:d)+C):b+=",0,0,0,0,1,0,",b+=D+C+H+C+I+C+(F?1+-I/F:1)+")",E[St]=b};u=kt.prototype,u.x=u.y=u.z=u.skewX=u.skewY=u.rotation=u.rotationX=u.rotationY=u.zOrigin=u.xPercent=u.yPercent=0,u.scaleX=u.scaleY=u.scaleZ=1,wt("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent",{parser:function(t,e,n,i,o,s,l){if(i._lastParsedTransform===l)return o;i._lastParsedTransform=l;var c,u,h,d,f,p,g,m=i._transform=Dt(t,r,!0,l.parseTransform),v=t.style,y=1e-6,w=xt.length,b=l,C={};if("string"==typeof b.transform&&St)h=z.style,h[St]=b.transform,h.display="block",h.position="absolute",L.body.appendChild(z),c=Dt(z,null,!1),L.body.removeChild(z);else if("object"==typeof b){if(c={scaleX:st(null!=b.scaleX?b.scaleX:b.scale,m.scaleX),scaleY:st(null!=b.scaleY?b.scaleY:b.scale,m.scaleY),scaleZ:st(b.scaleZ,m.scaleZ),x:st(b.x,m.x),y:st(b.y,m.y),z:st(b.z,m.z),xPercent:st(b.xPercent,m.xPercent),yPercent:st(b.yPercent,m.yPercent),perspective:st(b.transformPerspective,m.perspective)},g=b.directionalRotation,null!=g)if("object"==typeof g)for(h in g)b[h]=g[h];else b.rotation=g;"string"==typeof b.x&&-1!==b.x.indexOf("%")&&(c.x=0,c.xPercent=st(b.x,m.xPercent)),"string"==typeof b.y&&-1!==b.y.indexOf("%")&&(c.y=0,c.yPercent=st(b.y,m.yPercent)),c.rotation=at("rotation"in b?b.rotation:"shortRotation"in b?b.shortRotation+"_short":"rotationZ"in b?b.rotationZ:m.rotation,m.rotation,"rotation",C),Et&&(c.rotationX=at("rotationX"in b?b.rotationX:"shortRotationX"in b?b.shortRotationX+"_short":m.rotationX||0,m.rotationX,"rotationX",C),c.rotationY=at("rotationY"in b?b.rotationY:"shortRotationY"in b?b.shortRotationY+"_short":m.rotationY||0,m.rotationY,"rotationY",C)),c.skewX=null==b.skewX?m.skewX:at(b.skewX,m.skewX),c.skewY=null==b.skewY?m.skewY:at(b.skewY,m.skewY),(u=c.skewY-m.skewY)&&(c.skewX+=u,c.rotation+=u)}for(Et&&null!=b.force3D&&(m.force3D=b.force3D,p=!0),m.skewType=b.skewType||m.skewType||a.defaultSkewType,f=m.force3D||m.z||m.rotationX||m.rotationY||c.z||c.rotationX||c.rotationY||c.perspective,f||null==b.scale||(c.scaleZ=1);--w>-1;)n=xt[w],d=c[n]-m[n],(d>y||-y>d||null!=b[n]||null!=I[n])&&(p=!0,o=new gt(m,n,m[n],d,o),n in C&&(o.e=C[n]),o.xs0=0,o.plugin=s,i._overwriteProps.push(o.n));return d=b.transformOrigin,m.svg&&(d||b.svgOrigin)&&(Ot(t,ot(d),c,b.svgOrigin),o=new gt(m,"xOrigin",m.xOrigin,c.xOrigin-m.xOrigin,o,-1,"transformOrigin"),o.b=m.xOrigin,o.e=o.xs0=c.xOrigin,o=new gt(m,"yOrigin",m.yOrigin,c.yOrigin-m.yOrigin,o,-1,"transformOrigin"),o.b=m.yOrigin,o.e=o.xs0=c.yOrigin,d=Ct?null:"0px 0px"),(d||Et&&f&&m.zOrigin)&&(St?(p=!0,n=_t,d=(d||K(t,n,r,!1,"50% 50%"))+"",o=new gt(v,n,0,0,o,-1,"transformOrigin"),o.b=v[n],o.plugin=s,Et?(h=m.zOrigin,d=d.split(" "),m.zOrigin=(d.length>2&&(0===h||"0px"!==d[2])?parseFloat(d[2]):h)||0,o.xs0=o.e=d[0]+" "+(d[1]||"50%")+" 0px",o=new gt(m,"zOrigin",0,0,o,-1,o.n),o.b=h,o.xs0=o.e=m.zOrigin):o.xs0=o.e=d):ot(d+"",m)),p&&(i._transformType=m.svg&&Ct||!f&&3!==this._transformType?2:3),o},prefix:!0}),wt("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),wt("borderRadius",{defaultValue:"0px",parser:function(t,e,n,i,s,a){e=this.format(e);var l,c,u,h,d,f,p,g,m,v,y,w,b,C,x,S,T=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],_=t.style;for(m=parseFloat(t.offsetWidth),v=parseFloat(t.offsetHeight),l=e.split(" "),c=0;c<T.length;c++)this.p.indexOf("border")&&(T[c]=G(T[c])),d=h=K(t,T[c],r,!1,"0px"),-1!==d.indexOf(" ")&&(h=d.split(" "),d=h[0],h=h[1]),f=u=l[c],p=parseFloat(d),w=d.substr((p+"").length),b="="===f.charAt(1),b?(g=parseInt(f.charAt(0)+"1",10),f=f.substr(2),g*=parseFloat(f),y=f.substr((g+"").length-(0>g?1:0))||""):(g=parseFloat(f),y=f.substr((g+"").length)),""===y&&(y=o[n]||w),y!==w&&(C=Q(t,"borderLeft",p,w),x=Q(t,"borderTop",p,w),"%"===y?(d=C/m*100+"%",h=x/v*100+"%"):"em"===y?(S=Q(t,"borderLeft",1,"em"),d=C/S+"em",h=x/S+"em"):(d=C+"px",h=x+"px"),b&&(f=parseFloat(d)+g+y,u=parseFloat(h)+g+y)),s=mt(_,T[c],d+" "+h,f+" "+u,!1,"0px",s);return s},prefix:!0,formatter:dt("0px 0px 0px 0px",!1,!0)}),wt("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,n,i,o,s){var a,l,c,u,h,d,f="background-position",p=r||$(t,null),g=this.format((p?m?p.getPropertyValue(f+"-x")+" "+p.getPropertyValue(f+"-y"):p.getPropertyValue(f):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),v=this.format(e);if(-1!==g.indexOf("%")!=(-1!==v.indexOf("%"))&&(d=K(t,"backgroundImage").replace(R,""),d&&"none"!==d)){for(a=g.split(" "),l=v.split(" "),B.setAttribute("src",d),c=2;--c>-1;)g=a[c],u=-1!==g.indexOf("%"),u!==(-1!==l[c].indexOf("%"))&&(h=0===c?t.offsetWidth-B.width:t.offsetHeight-B.height,a[c]=u?parseFloat(g)/100*h+"px":parseFloat(g)/h*100+"%");g=a.join(" ")}return this.parseComplex(t.style,g,v,o,s)},formatter:ot}),wt("backgroundSize",{defaultValue:"0 0",formatter:ot}),wt("perspective",{defaultValue:"0px",prefix:!0}),wt("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),wt("transformStyle",{prefix:!0}),wt("backfaceVisibility",{prefix:!0}),wt("userSelect",{prefix:!0}),wt("margin",{parser:ft("marginTop,marginRight,marginBottom,marginLeft")}),wt("padding",{parser:ft("paddingTop,paddingRight,paddingBottom,paddingLeft")}),wt("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,n,i,o,s){var a,l,c;return 9>m?(l=t.currentStyle,c=8>m?" ":",",a="rect("+l.clipTop+c+l.clipRight+c+l.clipBottom+c+l.clipLeft+")",e=this.format(e).split(",").join(c)):(a=this.format(K(t,this.p,r,!1,this.dflt)),e=this.format(e)),this.parseComplex(t.style,a,e,o,s)}}),wt("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),wt("autoRound,strictUnits",{parser:function(t,e,n,i,o){return o}}),wt("border",{defaultValue:"0px solid #000",parser:function(t,e,n,i,o,s){return this.parseComplex(t.style,this.format(K(t,"borderTopWidth",r,!1,"0px")+" "+K(t,"borderTopStyle",r,!1,"solid")+" "+K(t,"borderTopColor",r,!1,"#000")),this.format(e),o,s)},color:!0,formatter:function(t){var e=t.split(" ");return e[0]+" "+(e[1]||"solid")+" "+(t.match(ht)||["#000"])[0]}}),wt("borderWidth",{parser:ft("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),wt("float,cssFloat,styleFloat",{parser:function(t,e,n,i,o,r){var s=t.style,a="cssFloat"in s?"cssFloat":"styleFloat";return new gt(s,a,0,0,o,-1,n,!1,0,s[a],e)}});var It=function(t){var e,n=this.t,i=n.filter||K(this.data,"filter")||"",o=this.s+this.c*t|0;100===o&&(-1===i.indexOf("atrix(")&&-1===i.indexOf("radient(")&&-1===i.indexOf("oader(")?(n.removeAttribute("filter"),e=!K(this.data,"filter")):(n.filter=i.replace(T,""),e=!0)),e||(this.xn1&&(n.filter=i=i||"alpha(opacity="+o+")"),-1===i.indexOf("pacity")?0===o&&this.xn1||(n.filter=i+" alpha(opacity="+o+")"):n.filter=i.replace(x,"opacity="+o))};wt("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,n,i,o,s){var a=parseFloat(K(t,"opacity",r,!1,"1")),l=t.style,c="autoAlpha"===n;return"string"==typeof e&&"="===e.charAt(1)&&(e=("-"===e.charAt(0)?-1:1)*parseFloat(e.substr(2))+a),c&&1===a&&"hidden"===K(t,"visibility",r)&&0!==e&&(a=0),j?o=new gt(l,"opacity",a,e-a,o):(o=new gt(l,"opacity",100*a,100*(e-a),o),o.xn1=c?1:0,l.zoom=1,o.type=2,o.b="alpha(opacity="+o.s+")",o.e="alpha(opacity="+(o.s+o.c)+")",o.data=t,o.plugin=s,o.setRatio=It),c&&(o=new gt(l,"visibility",0,0,o,-1,null,!1,0,0!==a?"inherit":"hidden",0===e?"hidden":"inherit"),o.xs0="inherit",i._overwriteProps.push(o.n),i._overwriteProps.push(n)),o}});var Lt=function(t,e){e&&(t.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),t.removeProperty(e.replace(E,"-$1").toLowerCase())):t.removeAttribute(e))},Ft=function(t){if(this.t._gsClassPT=this,1===t||0===t){this.t.setAttribute("class",0===t?this.b:this.e);for(var e=this.data,n=this.t.style;e;)e.v?n[e.p]=e.v:Lt(n,e.p),e=e._next;1===t&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};wt("className",{parser:function(t,e,i,o,s,a,l){var c,u,h,d,f,p=t.getAttribute("class")||"",g=t.style.cssText;if(s=o._classNamePT=new gt(t,i,0,0,s,2),s.setRatio=Ft,s.pr=-11,n=!0,s.b=p,u=J(t,r),h=t._gsClassPT){for(d={},f=h.data;f;)d[f.p]=1,f=f._next;h.setRatio(1)}return t._gsClassPT=s,s.e="="!==e.charAt(1)?e:p.replace(new RegExp("\\s*\\b"+e.substr(2)+"\\b"),"")+("+"===e.charAt(0)?" "+e.substr(2):""),t.setAttribute("class",s.e),c=tt(t,u,J(t),l,d),t.setAttribute("class",p),s.data=c.firstMPT,t.style.cssText=g,s=s.xfirst=o.parse(t,c.difs,s,a)}});var zt=function(t){if((1===t||0===t)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var e,n,i,o,r,s=this.t.style,a=c.transform.parse;if("all"===this.e)s.cssText="",o=!0;else for(e=this.e.split(" ").join("").split(","),i=e.length;--i>-1;)n=e[i],c[n]&&(c[n].parse===a?o=!0:n="transformOrigin"===n?_t:c[n].p),Lt(s,n);o&&(Lt(s,St),r=this.t._gsTransform,r&&(r.svg&&this.t.removeAttribute("data-svg-origin"),delete this.t._gsTransform))}};for(wt("clearProps",{parser:function(t,e,i,o,r){return r=new gt(t,i,0,0,r,2),r.setRatio=zt,r.e=e,r.pr=-10,r.data=o._tween,n=!0,r}}),u="bezier,throwProps,physicsProps,physics2D".split(","),vt=u.length;vt--;)bt(u[vt]);u=a.prototype,u._firstPT=u._lastParsedTransform=u._transform=null,u._onInitTween=function(t,e,i){if(!t.nodeType)return!1;this._target=t,this._tween=i,this._vars=e,h=e.autoRound,n=!1,o=e.suffixMap||a.suffixMap,r=$(t,""),s=this._overwriteProps;var l,u,p,m,v,y,w,b,C,x=t.style;if(d&&""===x.zIndex&&(l=K(t,"zIndex",r),"auto"!==l&&""!==l||this._addLazySet(x,"zIndex",0)),"string"==typeof e&&(m=x.cssText,l=J(t,r),x.cssText=m+";"+e,l=tt(t,l,J(t)).difs,!j&&S.test(e)&&(l.opacity=parseFloat(RegExp.$1)),e=l,x.cssText=m),e.className?this._firstPT=u=c.className.parse(t,e.className,"className",this,null,null,e):this._firstPT=u=this.parse(t,e,null),this._transformType){for(C=3===this._transformType,St?f&&(d=!0,""===x.zIndex&&(w=K(t,"zIndex",r),"auto"!==w&&""!==w||this._addLazySet(x,"zIndex",0)),g&&this._addLazySet(x,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(C?"visible":"hidden"))):x.zoom=1,p=u;p&&p._next;)p=p._next;b=new gt(t,"transform",0,0,null,2),this._linkCSSP(b,null,p),b.setRatio=St?Ht:Mt,b.data=this._transform||Dt(t,r,!0),
b.tween=i,b.pr=-1,s.pop()}if(n){for(;u;){for(y=u._next,p=m;p&&p.pr>u.pr;)p=p._next;(u._prev=p?p._prev:v)?u._prev._next=u:m=u,(u._next=p)?p._prev=u:v=u,u=y}this._firstPT=m}return!0},u.parse=function(t,e,n,i){var s,a,l,u,d,f,p,g,m,v,y=t.style;for(s in e)f=e[s],a=c[s],a?n=a.parse(t,f,s,this,n,i,e):(d=K(t,s,r)+"",m="string"==typeof f,"color"===s||"fill"===s||"stroke"===s||-1!==s.indexOf("Color")||m&&_.test(f)?(m||(f=ut(f),f=(f.length>3?"rgba(":"rgb(")+f.join(",")+")"),n=mt(y,s,d,f,!0,"transparent",n,0,i)):!m||-1===f.indexOf(" ")&&-1===f.indexOf(",")?(l=parseFloat(d),p=l||0===l?d.substr((l+"").length):"",""!==d&&"auto"!==d||("width"===s||"height"===s?(l=it(t,s,r),p="px"):"left"===s||"top"===s?(l=Z(t,s,r),p="px"):(l="opacity"!==s?0:1,p="")),v=m&&"="===f.charAt(1),v?(u=parseInt(f.charAt(0)+"1",10),f=f.substr(2),u*=parseFloat(f),g=f.replace(C,"")):(u=parseFloat(f),g=m?f.replace(C,""):""),""===g&&(g=s in o?o[s]:p),f=u||0===u?(v?u+l:u)+g:e[s],p!==g&&""!==g&&(u||0===u)&&l&&(l=Q(t,s,l,p),"%"===g?(l/=Q(t,s,100,"%")/100,e.strictUnits!==!0&&(d=l+"%")):"em"===g?l/=Q(t,s,1,"em"):"px"!==g&&(u=Q(t,s,u,g),g="px"),v&&(u||0===u)&&(f=u+l+g)),v&&(u+=l),!l&&0!==l||!u&&0!==u?void 0!==y[s]&&(f||f+""!="NaN"&&null!=f)?(n=new gt(y,s,u||l||0,0,n,-1,s,!1,0,d,f),n.xs0="none"!==f||"display"!==s&&-1===s.indexOf("Style")?f:d):X("invalid "+s+" tween value: "+e[s]):(n=new gt(y,s,l,u-l,n,0,s,h!==!1&&("px"===g||"zIndex"===s),0,d,f),n.xs0=g)):n=mt(y,s,d,f,!0,null,n,0,i)),i&&n&&!n.plugin&&(n.plugin=i);return n},u.setRatio=function(t){var e,n,i,o=this._firstPT,r=1e-6;if(1!==t||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(t||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-1e-6)for(;o;){if(e=o.c*t+o.s,o.r?e=Math.round(e):r>e&&e>-r&&(e=0),o.type)if(1===o.type)if(i=o.l,2===i)o.t[o.p]=o.xs0+e+o.xs1+o.xn1+o.xs2;else if(3===i)o.t[o.p]=o.xs0+e+o.xs1+o.xn1+o.xs2+o.xn2+o.xs3;else if(4===i)o.t[o.p]=o.xs0+e+o.xs1+o.xn1+o.xs2+o.xn2+o.xs3+o.xn3+o.xs4;else if(5===i)o.t[o.p]=o.xs0+e+o.xs1+o.xn1+o.xs2+o.xn2+o.xs3+o.xn3+o.xs4+o.xn4+o.xs5;else{for(n=o.xs0+e+o.xs1,i=1;i<o.l;i++)n+=o["xn"+i]+o["xs"+(i+1)];o.t[o.p]=n}else-1===o.type?o.t[o.p]=o.xs0:o.setRatio&&o.setRatio(t);else o.t[o.p]=e+o.xs0;o=o._next}else for(;o;)2!==o.type?o.t[o.p]=o.b:o.setRatio(t),o=o._next;else for(;o;)2!==o.type?o.t[o.p]=o.e:o.setRatio(t),o=o._next},u._enableTransforms=function(t){this._transform=this._transform||Dt(this._target,r,!0),this._transformType=this._transform.svg&&Ct||!t&&3!==this._transformType?2:3};var Bt=function(t){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};u._addLazySet=function(t,e,n){var i=this._firstPT=new gt(t,e,0,0,this._firstPT,2);i.e=n,i.setRatio=Bt,i.data=this},u._linkCSSP=function(t,e,n,i){return t&&(e&&(e._prev=t),t._next&&(t._next._prev=t._prev),t._prev?t._prev._next=t._next:this._firstPT===t&&(this._firstPT=t._next,i=!0),n?n._next=t:i||null!==this._firstPT||(this._firstPT=t),t._next=e,t._prev=n),t},u._kill=function(e){var n,i,o,r=e;if(e.autoAlpha||e.alpha){r={};for(i in e)r[i]=e[i];r.opacity=1,r.autoAlpha&&(r.visibility=1)}return e.className&&(n=this._classNamePT)&&(o=n.xfirst,o&&o._prev?this._linkCSSP(o._prev,n._next,o._prev._prev):o===this._firstPT&&(this._firstPT=n._next),n._next&&this._linkCSSP(n._next,n._next._next,o._prev),this._classNamePT=null),t.prototype._kill.call(this,r)};var Vt=function(t,e,n){var i,o,r,s;if(t.slice)for(o=t.length;--o>-1;)Vt(t[o],e,n);else for(i=t.childNodes,o=i.length;--o>-1;)r=i[o],s=r.type,r.style&&(e.push(J(r)),n&&n.push(r)),1!==s&&9!==s&&11!==s||!r.childNodes.length||Vt(r,e,n)};return a.cascadeTo=function(t,n,i){var o,r,s,a,l=e.to(t,n,i),c=[l],u=[],h=[],d=[],f=e._internals.reservedProps;for(t=l._targets||l.target,Vt(t,u,d),l.render(n,!0,!0),Vt(t,h),l.render(0,!0,!0),l._enabled(!0),o=d.length;--o>-1;)if(r=tt(d[o],u[o],h[o]),r.firstMPT){r=r.difs;for(s in i)f[s]&&(r[s]=i[s]);a={};for(s in r)a[s]=u[o][s];c.push(e.fromTo(d[o],n,a,r))}return c},t.activate([a]),a},!0)}),i._gsDefine&&i._gsQueue.pop()(),function(n){"use strict";var o=function(){return(i.GreenSockGlobals||i)[n]};"function"==typeof define&&define.amd?define(["TweenLite"],o):"undefined"!=typeof e&&e.exports&&(t("../editor/TweenLite.js"),e.exports=o())}("CSSPlugin")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../editor/TweenLite.js":"TweenLite"}],2:[function(t,e,n){(function(){var t=this,i=t._,o={},r=Array.prototype,s=Object.prototype,a=Function.prototype,l=r.push,c=r.slice,u=r.concat,h=s.toString,d=s.hasOwnProperty,f=r.forEach,p=r.map,g=r.reduce,m=r.reduceRight,v=r.filter,y=r.every,w=r.some,b=r.indexOf,C=r.lastIndexOf,x=Array.isArray,S=Object.keys,T=a.bind,_=function(t){return t instanceof _?t:this instanceof _?void(this._wrapped=t):new _(t)};"undefined"!=typeof n?("undefined"!=typeof e&&e.exports&&(n=e.exports=_),n._=_):t._=_,_.VERSION="1.6.0";var E=_.each=_.forEach=function(t,e,n){if(null==t)return t;if(f&&t.forEach===f)t.forEach(e,n);else if(t.length===+t.length){for(var i=0,r=t.length;r>i;i++)if(e.call(n,t[i],i,t)===o)return}else for(var s=_.keys(t),i=0,r=s.length;r>i;i++)if(e.call(n,t[s[i]],s[i],t)===o)return;return t};_.map=_.collect=function(t,e,n){var i=[];return null==t?i:p&&t.map===p?t.map(e,n):(E(t,function(t,o,r){i.push(e.call(n,t,o,r))}),i)};var k="Reduce of empty array with no initial value";_.reduce=_.foldl=_.inject=function(t,e,n,i){var o=arguments.length>2;if(null==t&&(t=[]),g&&t.reduce===g)return i&&(e=_.bind(e,i)),o?t.reduce(e,n):t.reduce(e);if(E(t,function(t,r,s){o?n=e.call(i,n,t,r,s):(n=t,o=!0)}),!o)throw new TypeError(k);return n},_.reduceRight=_.foldr=function(t,e,n,i){var o=arguments.length>2;if(null==t&&(t=[]),m&&t.reduceRight===m)return i&&(e=_.bind(e,i)),o?t.reduceRight(e,n):t.reduceRight(e);var r=t.length;if(r!==+r){var s=_.keys(t);r=s.length}if(E(t,function(a,l,c){l=s?s[--r]:--r,o?n=e.call(i,n,t[l],l,c):(n=t[l],o=!0)}),!o)throw new TypeError(k);return n},_.find=_.detect=function(t,e,n){var i;return R(t,function(t,o,r){return e.call(n,t,o,r)?(i=t,!0):void 0}),i},_.filter=_.select=function(t,e,n){var i=[];return null==t?i:v&&t.filter===v?t.filter(e,n):(E(t,function(t,o,r){e.call(n,t,o,r)&&i.push(t)}),i)},_.reject=function(t,e,n){return _.filter(t,function(t,i,o){return!e.call(n,t,i,o)},n)},_.every=_.all=function(t,e,n){e||(e=_.identity);var i=!0;return null==t?i:y&&t.every===y?t.every(e,n):(E(t,function(t,r,s){return(i=i&&e.call(n,t,r,s))?void 0:o}),!!i)};var R=_.some=_.any=function(t,e,n){e||(e=_.identity);var i=!1;return null==t?i:w&&t.some===w?t.some(e,n):(E(t,function(t,r,s){return i||(i=e.call(n,t,r,s))?o:void 0}),!!i)};_.contains=_.include=function(t,e){return null==t?!1:b&&t.indexOf===b?-1!=t.indexOf(e):R(t,function(t){return t===e})},_.invoke=function(t,e){var n=c.call(arguments,2),i=_.isFunction(e);return _.map(t,function(t){return(i?e:t[e]).apply(t,n)})},_.pluck=function(t,e){return _.map(t,_.property(e))},_.where=function(t,e){return _.filter(t,_.matches(e))},_.findWhere=function(t,e){return _.find(t,_.matches(e))},_.max=function(t,e,n){if(!e&&_.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var i=-(1/0),o=-(1/0);return E(t,function(t,r,s){var a=e?e.call(n,t,r,s):t;a>o&&(i=t,o=a)}),i},_.min=function(t,e,n){if(!e&&_.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);var i=1/0,o=1/0;return E(t,function(t,r,s){var a=e?e.call(n,t,r,s):t;o>a&&(i=t,o=a)}),i},_.shuffle=function(t){var e,n=0,i=[];return E(t,function(t){e=_.random(n++),i[n-1]=i[e],i[e]=t}),i},_.sample=function(t,e,n){return null==e||n?(t.length!==+t.length&&(t=_.values(t)),t[_.random(t.length-1)]):_.shuffle(t).slice(0,Math.max(0,e))};var A=function(t){return null==t?_.identity:_.isFunction(t)?t:_.property(t)};_.sortBy=function(t,e,n){return e=A(e),_.pluck(_.map(t,function(t,i,o){return{value:t,index:i,criteria:e.call(n,t,i,o)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index-e.index}),"value")};var P=function(t){return function(e,n,i){var o={};return n=A(n),E(e,function(r,s){var a=n.call(i,r,s,e);t(o,a,r)}),o}};_.groupBy=P(function(t,e,n){_.has(t,e)?t[e].push(n):t[e]=[n]}),_.indexBy=P(function(t,e,n){t[e]=n}),_.countBy=P(function(t,e){_.has(t,e)?t[e]++:t[e]=1}),_.sortedIndex=function(t,e,n,i){n=A(n);for(var o=n.call(i,e),r=0,s=t.length;s>r;){var a=r+s>>>1;n.call(i,t[a])<o?r=a+1:s=a}return r},_.toArray=function(t){return t?_.isArray(t)?c.call(t):t.length===+t.length?_.map(t,_.identity):_.values(t):[]},_.size=function(t){return null==t?0:t.length===+t.length?t.length:_.keys(t).length},_.first=_.head=_.take=function(t,e,n){return null!=t?null==e||n?t[0]:0>e?[]:c.call(t,0,e):void 0},_.initial=function(t,e,n){return c.call(t,0,t.length-(null==e||n?1:e))},_.last=function(t,e,n){return null!=t?null==e||n?t[t.length-1]:c.call(t,Math.max(t.length-e,0)):void 0},_.rest=_.tail=_.drop=function(t,e,n){return c.call(t,null==e||n?1:e)},_.compact=function(t){return _.filter(t,_.identity)};var N=function(t,e,n){return e&&_.every(t,_.isArray)?u.apply(n,t):(E(t,function(t){_.isArray(t)||_.isArguments(t)?e?l.apply(n,t):N(t,e,n):n.push(t)}),n)};_.flatten=function(t,e){return N(t,e,[])},_.without=function(t){return _.difference(t,c.call(arguments,1))},_.partition=function(t,e){var n=[],i=[];return E(t,function(t){(e(t)?n:i).push(t)}),[n,i]},_.uniq=_.unique=function(t,e,n,i){_.isFunction(e)&&(i=n,n=e,e=!1);var o=n?_.map(t,n,i):t,r=[],s=[];return E(o,function(n,i){(e?i&&s[s.length-1]===n:_.contains(s,n))||(s.push(n),r.push(t[i]))}),r},_.union=function(){return _.uniq(_.flatten(arguments,!0))},_.intersection=function(t){var e=c.call(arguments,1);return _.filter(_.uniq(t),function(t){return _.every(e,function(e){return _.contains(e,t)})})},_.difference=function(t){var e=u.apply(r,c.call(arguments,1));return _.filter(t,function(t){return!_.contains(e,t)})},_.zip=function(){for(var t=_.max(_.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;t>n;n++)e[n]=_.pluck(arguments,""+n);return e},_.object=function(t,e){if(null==t)return{};for(var n={},i=0,o=t.length;o>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},_.indexOf=function(t,e,n){if(null==t)return-1;var i=0,o=t.length;if(n){if("number"!=typeof n)return i=_.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,o+n):n}if(b&&t.indexOf===b)return t.indexOf(e,n);for(;o>i;i++)if(t[i]===e)return i;return-1},_.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(C&&t.lastIndexOf===C)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var o=i?n:t.length;o--;)if(t[o]===e)return o;return-1},_.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),o=0,r=new Array(i);i>o;)r[o++]=t,t+=n;return r};var O=function(){};_.bind=function(t,e){var n,i;if(T&&t.bind===T)return T.apply(t,c.call(arguments,1));if(!_.isFunction(t))throw new TypeError;return n=c.call(arguments,2),i=function(){if(!(this instanceof i))return t.apply(e,n.concat(c.call(arguments)));O.prototype=t.prototype;var o=new O;O.prototype=null;var r=t.apply(o,n.concat(c.call(arguments)));return Object(r)===r?r:o}},_.partial=function(t){var e=c.call(arguments,1);return function(){for(var n=0,i=e.slice(),o=0,r=i.length;r>o;o++)i[o]===_&&(i[o]=arguments[n++]);for(;n<arguments.length;)i.push(arguments[n++]);return t.apply(this,i)}},_.bindAll=function(t){var e=c.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return E(e,function(e){t[e]=_.bind(t[e],t)}),t},_.memoize=function(t,e){var n={};return e||(e=_.identity),function(){var i=e.apply(this,arguments);return _.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},_.delay=function(t,e){var n=c.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},_.defer=function(t){return _.delay.apply(_,[t,1].concat(c.call(arguments,1)))},_.throttle=function(t,e,n){var i,o,r,s=null,a=0;n||(n={});var l=function(){a=n.leading===!1?0:_.now(),s=null,r=t.apply(i,o),i=o=null};return function(){var c=_.now();a||n.leading!==!1||(a=c);var u=e-(c-a);return i=this,o=arguments,0>=u?(clearTimeout(s),s=null,a=c,r=t.apply(i,o),i=o=null):s||n.trailing===!1||(s=setTimeout(l,u)),r}},_.debounce=function(t,e,n){var i,o,r,s,a,l=function(){var c=_.now()-s;e>c?i=setTimeout(l,e-c):(i=null,n||(a=t.apply(r,o),r=o=null))};return function(){r=this,o=arguments,s=_.now();var c=n&&!i;return i||(i=setTimeout(l,e)),c&&(a=t.apply(r,o),r=o=null),a}},_.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},_.wrap=function(t,e){return _.partial(e,t)},_.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},_.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},_.keys=function(t){if(!_.isObject(t))return[];if(S)return S(t);var e=[];for(var n in t)_.has(t,n)&&e.push(n);return e},_.values=function(t){for(var e=_.keys(t),n=e.length,i=new Array(n),o=0;n>o;o++)i[o]=t[e[o]];return i},_.pairs=function(t){for(var e=_.keys(t),n=e.length,i=new Array(n),o=0;n>o;o++)i[o]=[e[o],t[e[o]]];return i},_.invert=function(t){for(var e={},n=_.keys(t),i=0,o=n.length;o>i;i++)e[t[n[i]]]=n[i];return e},_.functions=_.methods=function(t){var e=[];for(var n in t)_.isFunction(t[n])&&e.push(n);return e.sort()},_.extend=function(t){return E(c.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},_.pick=function(t){var e={},n=u.apply(r,c.call(arguments,1));return E(n,function(n){n in t&&(e[n]=t[n])}),e},_.omit=function(t){var e={},n=u.apply(r,c.call(arguments,1));for(var i in t)_.contains(n,i)||(e[i]=t[i]);return e},_.defaults=function(t){return E(c.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},_.clone=function(t){return _.isObject(t)?_.isArray(t)?t.slice():_.extend({},t):t},_.tap=function(t,e){return e(t),t};var D=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof _&&(t=t._wrapped),e instanceof _&&(e=e._wrapped);var o=h.call(t);if(o!=h.call(e))return!1;switch(o){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var r=n.length;r--;)if(n[r]==t)return i[r]==e;var s=t.constructor,a=e.constructor;if(s!==a&&!(_.isFunction(s)&&s instanceof s&&_.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1;n.push(t),i.push(e);var l=0,c=!0;if("[object Array]"==o){if(l=t.length,c=l==e.length)for(;l--&&(c=D(t[l],e[l],n,i)););}else{for(var u in t)if(_.has(t,u)&&(l++,!(c=_.has(e,u)&&D(t[u],e[u],n,i))))break;if(c){for(u in e)if(_.has(e,u)&&!l--)break;c=!l}}return n.pop(),i.pop(),c};_.isEqual=function(t,e){return D(t,e,[],[])},_.isEmpty=function(t){if(null==t)return!0;if(_.isArray(t)||_.isString(t))return 0===t.length;for(var e in t)if(_.has(t,e))return!1;return!0},_.isElement=function(t){return!(!t||1!==t.nodeType)},_.isArray=x||function(t){return"[object Array]"==h.call(t)},_.isObject=function(t){return t===Object(t)},E(["Arguments","Function","String","Number","Date","RegExp"],function(t){_["is"+t]=function(e){return h.call(e)=="[object "+t+"]"}}),_.isArguments(arguments)||(_.isArguments=function(t){return!(!t||!_.has(t,"callee"))}),"function"!=typeof/./&&(_.isFunction=function(t){return"function"==typeof t}),_.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},_.isNaN=function(t){return _.isNumber(t)&&t!=+t},_.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==h.call(t)},_.isNull=function(t){return null===t},_.isUndefined=function(t){return void 0===t},_.has=function(t,e){return d.call(t,e)},_.noConflict=function(){return t._=i,this},_.identity=function(t){return t},_.constant=function(t){return function(){return t}},_.property=function(t){return function(e){return e[t]}},_.matches=function(t){return function(e){if(e===t)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0}},_.times=function(t,e,n){for(var i=Array(Math.max(0,t)),o=0;t>o;o++)i[o]=e.call(n,o);return i},_.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},_.now=Date.now||function(){return(new Date).getTime()};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};M.unescape=_.invert(M.escape);var H={escape:new RegExp("["+_.keys(M.escape).join("")+"]","g"),unescape:new RegExp("("+_.keys(M.unescape).join("|")+")","g")};_.each(["escape","unescape"],function(t){_[t]=function(e){return null==e?"":(""+e).replace(H[t],function(e){return M[t][e]})}}),_.result=function(t,e){if(null!=t){var n=t[e];return _.isFunction(n)?n.call(t):n}},_.mixin=function(t){E(_.functions(t),function(e){var n=_[e]=t[e];_.prototype[e]=function(){var t=[this._wrapped];return l.apply(t,arguments),B.call(this,n.apply(_,t))}})};var I=0;_.uniqueId=function(t){var e=++I+"";return t?t+e:e},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},z=/\\|'|\r|\n|\t|\u2028|\u2029/g;_.template=function(t,e,n){var i;n=_.defaults({},n,_.templateSettings);var o=new RegExp([(n.escape||L).source,(n.interpolate||L).source,(n.evaluate||L).source].join("|")+"|$","g"),r=0,s="__p+='";t.replace(o,function(e,n,i,o,a){return s+=t.slice(r,a).replace(z,function(t){return"\\"+F[t]}),n&&(s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(s+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),o&&(s+="';\n"+o+"\n__p+='"),r=a+e.length,e}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{i=new Function(n.variable||"obj","_",s)}catch(a){throw a.source=s,a}if(e)return i(e,_);var l=function(t){return i.call(this,t,_)};return l.source="function("+(n.variable||"obj")+"){\n"+s+"}",l},_.chain=function(t){return _(t).chain()};var B=function(t){return this._chain?_(t).chain():t};_.mixin(_),E(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=r[t];_.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],B.call(this,n)}}),E(["concat","join","slice"],function(t){var e=r[t];_.prototype[t]=function(){return B.call(this,e.apply(this._wrapped,arguments))}}),_.extend(_.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return _})}).call(this)},{}],Draggable:[function(t,e,n){(function(n){var i="undefined"!=typeof e&&e.exports&&"undefined"!=typeof n?n:this||window;(i._gsQueue||(i._gsQueue=[])).push(function(){"use strict";i._gsDefine("utils.Draggable",["events.EventDispatcher","TweenLite"],function(t,e){var n,o,r,s,a,l={css:{}},c={css:{}},u={css:{}},h={css:{}},d=i._gsDefine.globals,f={},p=document,g=p.documentElement||{},m=[],v=function(){return!1},y=180/Math.PI,w=999999999999999,b=Date.now||function(){return(new Date).getTime()},C=!(p.addEventListener||!p.all),x=p.createElement("div"),S=[],T={},_=0,E=/^(?:a|input|textarea|button|select)$/i,k=0,R=-1!==navigator.userAgent.toLowerCase().indexOf("android"),A=0,P={},N=function(t){if("string"==typeof t&&(t=e.selector(t)),!t||t.nodeType)return[t];var n,i=[],o=t.length;for(n=0;n!==o;i.push(t[n++]));return i},O=function(){for(var t=S.length;--t>-1;)S[t]()},D=function(t){S.push(t),1===S.length&&e.ticker.addEventListener("tick",O,this,!1,1)},M=function(t){for(var n=S.length;--n>-1;)S[n]===t&&S.splice(n,1);e.to(H,0,{overwrite:"all",delay:15,onComplete:H})},H=function(){S.length||e.ticker.removeEventListener("tick",O)},I=function(t,e){var n;for(n in e)void 0===t[n]&&(t[n]=e[n]);return t},L=function(){return null!=window.pageYOffset?window.pageYOffset:null!=p.scrollTop?p.scrollTop:g.scrollTop||p.body.scrollTop||0},F=function(){return null!=window.pageXOffset?window.pageXOffset:null!=p.scrollLeft?p.scrollLeft:g.scrollLeft||p.body.scrollLeft||0},z=function(t,e){Tt(t,"scroll",e),V(t.parentNode)||z(t.parentNode,e)},B=function(t,e){_t(t,"scroll",e),V(t.parentNode)||B(t.parentNode,e)},V=function(t){return!(t&&t!==g&&t!==p&&t!==p.body&&t!==window&&t.nodeType&&t.parentNode)},W=function(t,e){var n="x"===e?"Width":"Height",i="scroll"+n,o="client"+n,r=p.body;return Math.max(0,V(t)?Math.max(g[i],r[i])-(window["inner"+n]||g[o]||r[o]):t[i]-t[o])},j=function(t){var e=V(t),n=W(t,"x"),i=W(t,"y");e?t=P:j(t.parentNode),t._gsMaxScrollX=n,t._gsMaxScrollY=i,t._gsScrollX=t.scrollLeft||0,t._gsScrollY=t.scrollTop||0},U=function(t,e){return t=t||window.event,f.pageX=t.clientX+p.body.scrollLeft+g.scrollLeft,f.pageY=t.clientY+p.body.scrollTop+g.scrollTop,e&&(t.returnValue=!1),f},X=function(t){return t?("string"==typeof t&&(t=e.selector(t)),t.length&&t!==window&&t[0]&&t[0].style&&!t.nodeType&&(t=t[0]),t===window||t.nodeType&&t.style?t:null):t},Y=function(t,e){var i,o,r,s=t.style;if(void 0===s[e]){for(r=["O","Moz","ms","Ms","Webkit"],o=5,i=e.charAt(0).toUpperCase()+e.substr(1);--o>-1&&void 0===s[r[o]+i];);if(0>o)return"";n=3===o?"ms":r[o],e=n+i}return e},q=function(t,e,n){var i=t.style;i&&(void 0===i[e]&&(e=Y(t,e)),null==n?i.removeProperty?i.removeProperty(e.replace(/([A-Z])/g,"-$1").toLowerCase()):i.removeAttribute(e):void 0!==i[e]&&(i[e]=n))},G=p.defaultView?p.defaultView.getComputedStyle:v,$=/(?:Left|Right|Width)/i,K=/(?:\d|\-|\+|=|#|\.)*/g,Q=function(t,e,n,i,o){if("px"===i||!i)return n;if("auto"===i||!n)return 0;var r,s=$.test(e),a=t,l=nt.style,c=0>n;return c&&(n=-n),"%"===i&&-1!==e.indexOf("border")?r=n/100*(s?t.clientWidth:t.clientHeight):(l.cssText="border:0 solid red;position:"+J(t,"position",!0)+";line-height:0;","%"!==i&&a.appendChild?l[s?"borderLeftWidth":"borderTopWidth"]=n+i:(a=t.parentNode||p.body,l[s?"width":"height"]=n+i),a.appendChild(nt),r=parseFloat(nt[s?"offsetWidth":"offsetHeight"]),a.removeChild(nt),0!==r||o||(r=Q(t,e,n,i,!0))),c?-r:r},Z=function(t,e){if("absolute"!==J(t,"position",!0))return 0;var n="left"===e?"Left":"Top",i=J(t,"margin"+n,!0);return t["offset"+n]-(Q(t,e,parseFloat(i),(i+"").replace(K,""))||0)},J=function(t,e,n){var i,o=(t._gsTransform||{})[e];return o||0===o?o:(t.style[e]?o=t.style[e]:(i=G(t))?(o=i.getPropertyValue(e.replace(/([A-Z])/g,"-$1").toLowerCase()),o=o||i.length?o:i[e]):t.currentStyle&&(o=t.currentStyle[e]),"auto"!==o||"top"!==e&&"left"!==e||(o=Z(t,e)),n?o:parseFloat(o)||0)},tt=function(t,e,n){var i=t.vars,o=i[n],r=t._listeners[e];"function"==typeof o&&o.apply(i[n+"Scope"]||t,i[n+"Params"]||[t.pointerEvent]),r&&t.dispatchEvent(e)},et=function(t,e){var n,i,o,r=X(t);return r?wt(r,e):void 0!==t.left?(o=pt(e),{left:t.left-o.x,top:t.top-o.y,width:t.width,height:t.height}):(i=t.min||t.minX||t.minRotation||0,n=t.min||t.minY||0,{left:i,top:n,width:(t.max||t.maxX||t.maxRotation||0)-i,height:(t.max||t.maxY||0)-n})},nt=p.createElement("div"),it=""!==Y(nt,"perspective"),ot=Y(nt,"transformOrigin").replace(/^ms/g,"Ms").replace(/([A-Z])/g,"-$1").toLowerCase(),rt=Y(nt,"transform"),st=rt.replace(/^ms/g,"Ms").replace(/([A-Z])/g,"-$1").toLowerCase(),at={},lt={},ct=function(){if(!C){var t="http://www.w3.org/2000/svg",e=p.createElementNS(t,"svg"),n=p.createElementNS(t,"rect");return n.setAttributeNS(null,"width","10"),n.setAttributeNS(null,"height","10"),e.appendChild(n),e}}(),ut=window.SVGElement,ht=function(t){return!!(ut&&"function"==typeof t.getBBox&&t.getCTM&&(!t.parentNode||t.parentNode.getBBox&&t.parentNode.getCTM))},dt=["class","viewBox","width","height","xml:space"],ft=function(t){if(!t.getBoundingClientRect||!t.parentNode)return{offsetTop:0,offsetLeft:0,scaleX:1,scaleY:1,offsetParent:g};if(t._gsSVGData&&t._gsSVGData.lastUpdate===e.ticker.frame)return t._gsSVGData;var n,i,o,r,s,a,l=t,c=t.style.cssText,u=t._gsSVGData=t._gsSVGData||{};if("svg"!==(t.nodeName+"").toLowerCase()&&t.getBBox){for(l=t.parentNode,n=t.getBBox();l&&"svg"!==(l.nodeName+"").toLowerCase();)l=l.parentNode;return u=ft(l),{offsetTop:n.y*u.scaleY,offsetLeft:n.x*u.scaleX,scaleX:u.scaleX,scaleY:u.scaleY,offsetParent:l||g}}for(;!l.offsetParent&&l.parentNode;)l=l.parentNode;for(t.parentNode.insertBefore(ct,t),t.parentNode.removeChild(t),ct.style.cssText=c,ct.style[rt]="none",s=dt.length;--s>-1;)a=t.getAttribute(dt[s]),a?ct.setAttribute(dt[s],a):ct.removeAttribute(dt[s]);return n=ct.getBoundingClientRect(),r=ct.firstChild.getBoundingClientRect(),o=l.offsetParent,o?(o===p.body&&g&&(o=g),i=o.getBoundingClientRect()):i={top:-L(),left:-F()},ct.parentNode.insertBefore(t,ct),t.parentNode.removeChild(ct),u.scaleX=r.width/10,u.scaleY=r.height/10,u.offsetLeft=n.left-i.left,u.offsetTop=n.top-i.top,u.offsetParent=l.offsetParent||g,u.lastUpdate=e.ticker.frame,u},pt=function(t,n){if(n=n||{},!t||t===g||!t.parentNode)return{x:0,y:0};var i=G(t),o=ot&&i?i.getPropertyValue(ot):"50% 50%",r=o.split(" "),s=-1!==o.indexOf("left")?"0%":-1!==o.indexOf("right")?"100%":r[0],a=-1!==o.indexOf("top")?"0%":-1!==o.indexOf("bottom")?"100%":r[1];return"center"!==a&&null!=a||(a="50%"),("center"===s||isNaN(parseFloat(s)))&&(s="50%"),t.getBBox&&ht(t)?(t._gsTransform||(e.set(t,{x:"+=0",overwrite:!1}),void 0===t._gsTransform.xOrigin&&console.log("Draggable requires at least GSAP 1.16.1")),o=t.getBBox(),r=ft(t),n.x=(t._gsTransform.xOrigin-o.x)*r.scaleX,n.y=(t._gsTransform.yOrigin-o.y)*r.scaleY):(n.x=-1!==s.indexOf("%")?t.offsetWidth*parseFloat(s)/100:parseFloat(s),n.y=-1!==a.indexOf("%")?t.offsetHeight*parseFloat(a)/100:parseFloat(a)),n},gt=function(t,e,n){var i,o,r,a,l,c;return t!==window&&t&&t.parentNode?(i=G(t),o=i?i.getPropertyValue(st):t.currentStyle?t.currentStyle[rt]:"1,0,0,1,0,0",o=(o+"").match(/(?:\-|\b)[\d\-\.e]+\b/g)||[1,0,0,1,0,0],o.length>6&&(o=[o[0],o[1],o[4],o[5],o[12],o[13]]),e&&(r=t.parentNode,c=t.getBBox&&ht(t)||void 0===t.offsetLeft&&"svg"===(t.nodeName+"").toLowerCase()?ft(t):t,a=c.offsetParent,l=r===g||r===p.body,void 0===s&&p.body&&rt&&(s=function(){var t,e,n=p.createElement("div"),i=p.createElement("div");return i.style.position="absolute",p.body.appendChild(n),n.appendChild(i),t=i.offsetParent,n.style[rt]="rotate(1deg)",e=i.offsetParent===t,p.body.removeChild(n),e}()),o[4]=Number(o[4])+e.x+(c.offsetLeft||0)-n.x-(l?0:r.scrollLeft)+(a?parseInt(J(a,"borderLeftWidth"),10)||0:0),o[5]=Number(o[5])+e.y+(c.offsetTop||0)-n.y-(l?0:r.scrollTop)+(a?parseInt(J(a,"borderTopWidth"),10)||0:0),!r||r.offsetParent!==a||s&&"100100"!==gt(r).join("")||(o[4]-=r.offsetLeft||0,o[5]-=r.offsetTop||0),r&&"fixed"===J(t,"position",!0)&&(o[4]+=F(),o[5]+=L())),o):[1,0,0,1,0,0]},mt=function(t,e){if(!t||t===window||!t.parentNode)return[1,0,0,1,0,0];for(var n,i,o,r,s,a,l,c,u=pt(t,at),h=pt(t.parentNode,lt),d=gt(t,u,h);(t=t.parentNode)&&t.parentNode&&t!==g;)u=h,h=pt(t.parentNode,u===at?lt:at),l=gt(t,u,h),n=d[0],i=d[1],o=d[2],r=d[3],s=d[4],a=d[5],d[0]=n*l[0]+i*l[2],d[1]=n*l[1]+i*l[3],d[2]=o*l[0]+r*l[2],d[3]=o*l[1]+r*l[3],d[4]=s*l[0]+a*l[2]+l[4],d[5]=s*l[1]+a*l[3]+l[5];return e&&(n=d[0],i=d[1],o=d[2],r=d[3],s=d[4],a=d[5],c=n*r-i*o,d[0]=r/c,d[1]=-i/c,d[2]=-o/c,d[3]=n/c,d[4]=(o*a-r*s)/c,d[5]=-(n*a-i*s)/c),d},vt=function(t,e,n){var i=mt(t),o=e.x,r=e.y;return n=n===!0?e:n||{},n.x=o*i[0]+r*i[2]+i[4],n.y=o*i[1]+r*i[3]+i[5],n},yt=function(t,e,n){var i=t.x*e[0]+t.y*e[2]+e[4],o=t.x*e[1]+t.y*e[3]+e[5];return t.x=i*n[0]+o*n[2]+n[4],t.y=i*n[1]+o*n[3]+n[5],t},wt=function(t,e){var n,i,o,r,s,a,l,c,u,h,d;return t===window?(r=L(),i=F(),o=i+(g.clientWidth||t.innerWidth||p.body.clientWidth||0),s=r+((t.innerHeight||0)-20<g.clientHeight?g.clientHeight:t.innerHeight||p.body.clientHeight||0)):(n=pt(t),i=-n.x,o=i+t.offsetWidth,r=-n.y,s=r+t.offsetHeight),t===e?{left:i,top:r,width:o-i,height:s-r}:(a=mt(t),l=mt(e,!0),c=yt({x:i,y:r},a,l),u=yt({x:o,y:r},a,l),h=yt({x:o,y:s},a,l),d=yt({x:i,y:s},a,l),i=Math.min(c.x,u.x,h.x,d.x),r=Math.min(c.y,u.y,h.y,d.y),{left:i,top:r,width:Math.max(c.x,u.x,h.x,d.x)-i,height:Math.max(c.y,u.y,h.y,d.y)-r})},bt=function(t){return!!(t.length&&t[0]&&(t[0].nodeType&&t[0].style&&!t.nodeType||t[0].length&&t[0][0]))},Ct=function(t){var e,n,i,o=[],r=t.length;for(e=0;r>e;e++)if(n=t[e],bt(n))for(i=n.length,i=0;i<n.length;i++)o.push(n[i]);else o.push(n);return o},xt="ontouchstart"in g&&"orientation"in window,St=function(t){for(var e=t.split(","),n=(void 0!==nt.onpointerdown?"pointerdown,pointermove,pointerup,pointercancel":void 0!==nt.onmspointerdown?"MSPointerDown,MSPointerMove,MSPointerUp,MSPointerCancel":t).split(","),i={},o=8;--o>-1;)i[e[o]]=n[o],i[n[o]]=e[o];return i}("touchstart,touchmove,touchend,touchcancel"),Tt=function(t,e,n,i){t.addEventListener?t.addEventListener(St[e]||e,n,i):t.attachEvent&&t.attachEvent("on"+e,n)},_t=function(t,e,n){t.removeEventListener?t.removeEventListener(St[e]||e,n):t.detachEvent&&t.detachEvent("on"+e,n)},Et=function(t){o=t.touches&&k<t.touches.length,_t(t.target,"touchend",Et)},kt=function(t){o=t.touches&&k<t.touches.length,Tt(t.target,"touchend",Et)},Rt=function(t,e,n,i,o,r){var s,a,l,c={};if(e)if(1!==o&&e instanceof Array){for(c.end=s=[],l=e.length,a=0;l>a;a++)s[a]=e[a]*o;n+=1.1,i-=1.1}else"function"==typeof e?c.end=function(n){return e.call(t,n)*o}:c.end=e;return(n||0===n)&&(c.max=n),(i||0===i)&&(c.min=i),r&&(c.velocity=0),c},At=function(t){var e;return t&&t.getAttribute&&"BODY"!==t.nodeName?"true"===(e=t.getAttribute("data-clickable"))||"false"!==e&&(t.onclick||E.test(t.nodeName+"")||"true"===t.getAttribute("contentEditable"))?!0:At(t.parentNode):!1},Pt=function(t,e){for(var n,i=t.length;--i>-1;)n=t[i],n.ondragstart=n.onselectstart=e?null:v,q(n,"userSelect",e?"text":"none")},Nt=function(){var t,e=p.createElement("div"),n=p.createElement("div"),i=n.style,o=p.body||nt;return i.display="inline-block",i.position="relative",e.style.cssText=n.innerHTML="width:90px; height:40px; padding:10px; overflow:auto; visibility: hidden",e.appendChild(n),o.appendChild(e),a=n.offsetHeight+18>e.scrollHeight,i.width="100%",rt||(i.paddingRight="500px",t=e.scrollLeft=e.scrollWidth-e.clientWidth,i.left="-90px",t=t!==e.scrollLeft),o.removeChild(e),t}(),Ot=function(t,n){t=X(t),n=n||{};var i,o,r,s,l,c,u=p.createElement("div"),h=u.style,d=t.firstChild,f=0,g=0,m=t.scrollTop,v=t.scrollLeft,y=t.scrollWidth,w=t.scrollHeight,b=0,x=0,S=0;it&&n.force3D!==!1?(l="translate3d(",c="px,0px)"):rt&&(l="translate(",c="px)"),this.scrollTop=function(t,e){return arguments.length?void this.top(-t,e):-this.top()},this.scrollLeft=function(t,e){return arguments.length?void this.left(-t,e):-this.left()},this.left=function(i,o){if(!arguments.length)return-(t.scrollLeft+g);var r=t.scrollLeft-v,s=g;return(r>2||-2>r)&&!o?(v=t.scrollLeft,e.killTweensOf(this,!0,{left:1,scrollLeft:1}),this.left(-v),void(n.onKill&&n.onKill())):(i=-i,0>i?(g=i-.5|0,i=0):i>x?(g=i-x|0,i=x):g=0,(g||s)&&(l?this._suspendTransforms||(h[rt]=l+-g+"px,"+-f+c):h.left=-g+"px",Nt&&g+b>=0&&(h.paddingRight=g+b+"px")),t.scrollLeft=0|i,void(v=t.scrollLeft))},this.top=function(i,o){if(!arguments.length)return-(t.scrollTop+f);var r=t.scrollTop-m,s=f;return(r>2||-2>r)&&!o?(m=t.scrollTop,e.killTweensOf(this,!0,{top:1,scrollTop:1}),this.top(-m),void(n.onKill&&n.onKill())):(i=-i,0>i?(f=i-.5|0,i=0):i>S?(f=i-S|0,i=S):f=0,(f||s)&&(l?this._suspendTransforms||(h[rt]=l+-g+"px,"+-f+c):h.top=-f+"px"),t.scrollTop=0|i,void(m=t.scrollTop))},this.maxScrollTop=function(){return S},this.maxScrollLeft=function(){return x},this.disable=function(){for(d=u.firstChild;d;)s=d.nextSibling,t.appendChild(d),d=s;t===u.parentNode&&t.removeChild(u)},this.enable=function(){if(d=t.firstChild,d!==u){for(;d;)s=d.nextSibling,u.appendChild(d),d=s;t.appendChild(u),this.calibrate()}},this.calibrate=function(e){var n,s,l=t.clientWidth===i;m=t.scrollTop,v=t.scrollLeft,l&&t.clientHeight===o&&u.offsetHeight===r&&y===t.scrollWidth&&w===t.scrollHeight&&!e||((f||g)&&(n=this.left(),s=this.top(),this.left(-t.scrollLeft),this.top(-t.scrollTop)),
l&&!e||(h.display="block",h.width="auto",h.paddingRight="0px",b=Math.max(0,t.scrollWidth-t.clientWidth),b&&(b+=J(t,"paddingLeft")+(a?J(t,"paddingRight"):0))),h.display="inline-block",h.position="relative",h.overflow="visible",h.verticalAlign="top",h.width="100%",h.paddingRight=b+"px",a&&(h.paddingBottom=J(t,"paddingBottom",!0)),C&&(h.zoom="1"),i=t.clientWidth,o=t.clientHeight,y=t.scrollWidth,w=t.scrollHeight,x=t.scrollWidth-i,S=t.scrollHeight-o,r=u.offsetHeight,h.display="block",(n||s)&&(this.left(n),this.top(s)))},this.content=u,this.element=t,this._suspendTransforms=!1,this.enable()},Dt=function(n,i){t.call(this,n),n=X(n),r||(r=d.com.greensock.plugins.ThrowPropsPlugin),this.vars=i=i||{},this.target=n,this.x=this.y=this.rotation=0,this.dragResistance=parseFloat(i.dragResistance)||0,this.edgeResistance=isNaN(i.edgeResistance)?1:parseFloat(i.edgeResistance)||0,this.lockAxis=i.lockAxis,this.autoScroll=i.autoScroll||0,this.lockedAxis=null,this.allowEventDefault=!!i.allowEventDefault;var s,a,f,v,S,E,O,H,L,F,W,Y,G,$,K,Q,Z,nt,it,ot,rt,st,at,lt,ct,ut,ht,dt,ft,pt,gt,yt=(i.type||(C?"top,left":"x,y")).toLowerCase(),wt=-1!==yt.indexOf("x")||-1!==yt.indexOf("y"),bt=-1!==yt.indexOf("rotation"),Ct=bt?"rotation":wt?"x":"left",Et=wt?"y":"top",Nt=-1!==yt.indexOf("x")||-1!==yt.indexOf("left")||"scroll"===yt,Mt=-1!==yt.indexOf("y")||-1!==yt.indexOf("top")||"scroll"===yt,It=i.minimumMovement||2,Lt=this,Ft=N(i.trigger||i.handle||n),zt={},Bt=0,Vt=!1,Wt=i.clickableTest||At,jt=function(t){if(Lt.autoScroll&&Lt.isDragging&&(nt||Vt)){var e,i,o,r,s,l,c,u,h=n,d=15*Lt.autoScroll;for(Vt=!1,P.scrollTop=null!=window.pageYOffset?window.pageYOffset:null!=g.scrollTop?g.scrollTop:p.body.scrollTop,P.scrollLeft=null!=window.pageXOffset?window.pageXOffset:null!=g.scrollLeft?g.scrollLeft:p.body.scrollLeft,r=Lt.pointerX-P.scrollLeft,s=Lt.pointerY-P.scrollTop;h&&!i;)i=V(h.parentNode),e=i?P:h.parentNode,o=i?{bottom:Math.max(g.clientHeight,window.innerHeight||0),right:Math.max(g.clientWidth,window.innerWidth||0),left:0,top:0}:e.getBoundingClientRect(),l=c=0,Mt&&(s>o.bottom-40&&(u=e._gsMaxScrollY-e.scrollTop)?(Vt=!0,c=Math.min(u,d*(1-Math.max(0,o.bottom-s)/40)|0)):s<o.top+40&&e.scrollTop&&(Vt=!0,c=-Math.min(e.scrollTop,d*(1-Math.max(0,s-o.top)/40)|0)),c&&(e.scrollTop+=c)),Nt&&(r>o.right-40&&(u=e._gsMaxScrollX-e.scrollLeft)?(Vt=!0,l=Math.min(u,d*(1-Math.max(0,o.right-r)/40)|0)):r<o.left+40&&e.scrollLeft&&(Vt=!0,l=-Math.min(e.scrollLeft,d*(1-Math.max(0,r-o.left)/40)|0)),l&&(e.scrollLeft+=l)),i&&(l||c)&&(window.scrollTo(e.scrollLeft,e.scrollTop),Jt(Lt.pointerX+l,Lt.pointerY+c)),h=e}if(nt){var f=Lt.x,m=Lt.y,v=1e-6;v>f&&f>-v&&(f=0),v>m&&m>-v&&(m=0),bt?(ft.data.rotation=Lt.rotation=f,ft.setRatio(1)):a?(Mt&&a.top(m),Nt&&a.left(f)):wt?(Mt&&(ft.data.y=m),Nt&&(ft.data.x=f),ft.setRatio(1)):(Mt&&(n.style.top=m+"px"),Nt&&(n.style.left=f+"px")),H&&!t&&tt(Lt,"drag","onDrag")}nt=!1},Ut=function(t,o){var r;n._gsTransform||!wt&&!bt||e.set(n,{x:"+=0",overwrite:!1}),wt?(Lt.y=n._gsTransform.y,Lt.x=n._gsTransform.x):bt?Lt.x=Lt.rotation=n._gsTransform.rotation:a?(Lt.y=a.top(),Lt.x=a.left()):(Lt.y=parseInt(n.style.top,10)||0,Lt.x=parseInt(n.style.left,10)||0),!ot&&!rt||o||(ot&&(r=ot(Lt.x),r!==Lt.x&&(Lt.x=r,bt&&(Lt.rotation=r),nt=!0)),rt&&(r=rt(Lt.y),r!==Lt.y&&(Lt.y=r,nt=!0)),nt&&jt(!0)),i.onThrowUpdate&&!t&&i.onThrowUpdate.apply(i.onThrowUpdateScope||Lt,i.onThrowUpdateParams||m)},Xt=function(){var t,e,o,r;O=!1,a?(a.calibrate(),Lt.minX=F=-a.maxScrollLeft(),Lt.minY=Y=-a.maxScrollTop(),Lt.maxX=L=Lt.maxY=W=0,O=!0):i.bounds&&(t=et(i.bounds,n.parentNode),bt?(Lt.minX=F=t.left,Lt.maxX=L=t.left+t.width,Lt.minY=Y=Lt.maxY=W=0):void 0!==i.bounds.maxX||void 0!==i.bounds.maxY?(t=i.bounds,Lt.minX=F=t.minX,Lt.minY=Y=t.minY,Lt.maxX=L=t.maxX,Lt.maxY=W=t.maxY):(e=et(n,n.parentNode),Lt.minX=F=J(n,Ct)+t.left-e.left,Lt.minY=Y=J(n,Et)+t.top-e.top,Lt.maxX=L=F+(t.width-e.width),Lt.maxY=W=Y+(t.height-e.height)),F>L&&(Lt.minX=L,Lt.maxX=L=F,F=Lt.minX),Y>W&&(Lt.minY=W,Lt.maxY=W=Y,Y=Lt.minY),bt&&(Lt.minRotation=F,Lt.maxRotation=L),O=!0),i.liveSnap&&(o=i.liveSnap===!0?i.snap||{}:i.liveSnap,r=o instanceof Array||"function"==typeof o,bt?(ot=Kt(r?o:o.rotation,F,L,1),rt=null):(Nt&&(ot=Kt(r?o:o.x||o.left||o.scrollLeft,F,L,a?-1:1)),Mt&&(rt=Kt(r?o:o.y||o.top||o.scrollTop,Y,W,a?-1:1))))},Yt=function(t,e){var o,s,l;t&&r?(t===!0&&(o=i.snap||{},s=o instanceof Array||"function"==typeof o,t={resistance:(i.throwResistance||i.resistance||1e3)/(bt?10:1)},bt?t.rotation=Rt(Lt,s?o:o.rotation,L,F,1,e):(Nt&&(t[Ct]=Rt(Lt,s?o:o.x||o.left||o.scrollLeft,L,F,a?-1:1,e||"x"===Lt.lockedAxis)),Mt&&(t[Et]=Rt(Lt,s?o:o.y||o.top||o.scrollTop,W,Y,a?-1:1,e||"y"===Lt.lockedAxis)))),Lt.tween=l=r.to(a||n,{throwProps:t,ease:i.ease||d.Power3.easeOut,onComplete:i.onThrowComplete,onCompleteParams:i.onThrowCompleteParams,onCompleteScope:i.onThrowCompleteScope||Lt,onUpdate:i.fastMode?i.onThrowUpdate:Ut,onUpdateParams:i.fastMode?i.onThrowUpdateParams:null,onUpdateScope:i.onThrowUpdateScope||Lt},isNaN(i.maxDuration)?2:i.maxDuration,isNaN(i.minDuration)?.5:i.minDuration,isNaN(i.overshootTolerance)?1-Lt.edgeResistance+.2:i.overshootTolerance),i.fastMode||(a&&(a._suspendTransforms=!0),l.render(l.duration(),!0,!0),Ut(!0,!0),Lt.endX=Lt.x,Lt.endY=Lt.y,bt&&(Lt.endRotation=Lt.x),l.play(0),Ut(!0,!0),a&&(a._suspendTransforms=!1))):O&&Lt.applyBounds()},qt=function(){lt=mt(n.parentNode,!0),lt[1]||lt[2]||1!=lt[0]||1!=lt[3]||0!=lt[4]||0!=lt[5]||(lt=null)},Gt=function(){var t=1-Lt.edgeResistance;qt(),a?(Xt(),E=a.top(),S=a.left()):($t()?(Ut(!0,!0),Xt()):Lt.applyBounds(),bt?(Z=vt(n,{x:0,y:0}),Ut(!0,!0),S=Lt.x,E=Lt.y=Math.atan2(Z.y-v,f-Z.x)*y):(ht=n.parentNode?n.parentNode.scrollTop||0:0,dt=n.parentNode?n.parentNode.scrollLeft||0:0,E=J(n,Et),S=J(n,Ct))),O&&t&&(S>L?S=L+(S-L)/t:F>S&&(S=F-(F-S)/t),bt||(E>W?E=W+(E-W)/t:Y>E&&(E=Y-(Y-E)/t)))},$t=function(){return Lt.tween&&Lt.tween.isActive()},Kt=function(t,e,n,i){return"function"==typeof t?function(o){var r=Lt.isPressed?1-Lt.edgeResistance:1;return t.call(Lt,o>n?n+(o-n)*r:e>o?e+(o-e)*r:o)*i}:t instanceof Array?function(i){for(var o,r,s=t.length,a=0,l=w;--s>-1;)o=t[s],r=o-i,0>r&&(r=-r),l>r&&o>=e&&n>=o&&(a=s,l=r);return t[a]}:isNaN(t)?function(t){return t}:function(){return t*i}},Qt=function(t){var o,r;if(s&&!Lt.isPressed&&t&&!("mousedown"===t.type&&b()-ut<30&&St[Lt.pointerEvent.type])){if(ct=$t(),Lt.pointerEvent=t,St[t.type]?(at=-1!==t.type.indexOf("touch")?t.currentTarget:p,Tt(at,"touchend",te),Tt(at,"touchmove",Zt),Tt(at,"touchcancel",te),Tt(p,"touchstart",kt)):(at=null,Tt(p,"mousemove",Zt)),gt=null,Tt(p,"mouseup",te),t&&t.target&&Tt(t.target,"mouseup",te),st=Wt.call(Lt,t.target)&&!i.dragClickables)return Tt(t.target,"change",te),tt(Lt,"press","onPress"),void Pt(Ft,!0);if(pt=!at||Nt===Mt||a||Lt.vars.allowNativeTouchScrolling===!1?!1:Nt?"y":"x",C?t=U(t,!0):pt||Lt.allowEventDefault||(t.preventDefault(),t.preventManipulation&&t.preventManipulation()),t.changedTouches?(t=K=t.changedTouches[0],Q=t.identifier):t.pointerId?Q=t.pointerId:K=null,k++,D(jt),v=Lt.pointerY=t.pageY,f=Lt.pointerX=t.pageX,(pt||Lt.autoScroll)&&j(n.parentNode),!Lt.autoScroll||bt||a||!n.parentNode||n.getBBox||!n.parentNode._gsMaxScrollX||x.parentNode||(x.style.width=n.parentNode.scrollWidth+"px",n.parentNode.appendChild(x)),Gt(),lt&&(o=f*lt[0]+v*lt[2]+lt[4],v=f*lt[1]+v*lt[3]+lt[5],f=o),Lt.tween&&Lt.tween.kill(),e.killTweensOf(a||n,!0,zt),a&&e.killTweensOf(n,!0,{scrollTo:1}),Lt.tween=Lt.lockedAxis=null,(i.zIndexBoost||!bt&&!a&&i.zIndexBoost!==!1)&&(n.style.zIndex=Dt.zIndex++),Lt.isPressed=!0,H=!(!i.onDrag&&!Lt._listeners.drag),!bt)for(r=Ft.length;--r>-1;)q(Ft[r],"cursor",i.cursor||"move");tt(Lt,"press","onPress")}},Zt=function(t){var e,n,i,r,a=t;if(s&&!o&&Lt.isPressed&&t){if(Lt.pointerEvent=t,e=t.changedTouches){if(t=e[0],t!==K&&t.identifier!==Q){for(r=e.length;--r>-1&&(t=e[r]).identifier!==Q;);if(0>r)return}}else if(t.pointerId&&Q&&t.pointerId!==Q)return;if(C)t=U(t,!0);else{if(at&&pt&&!gt&&(n=t.pageX,i=t.pageY,lt&&(r=n*lt[0]+i*lt[2]+lt[4],i=n*lt[1]+i*lt[3]+lt[5],n=r),gt=Math.abs(n-f)>Math.abs(i-v)&&Nt?"x":"y",Lt.vars.lockAxisOnTouchScroll!==!1&&(Lt.lockedAxis="x"===gt?"y":"x","function"==typeof Lt.vars.onLockAxis&&Lt.vars.onLockAxis.call(Lt,a)),R&&pt===gt))return void te(a);Lt.allowEventDefault||pt&&(!gt||pt===gt)||a.cancelable===!1||(a.preventDefault(),a.preventManipulation&&a.preventManipulation())}Lt.autoScroll&&(Vt=!0),Jt(t.pageX,t.pageY)}},Jt=function(t,e){var n,i,o,r,s,a,l=1-Lt.dragResistance,c=1-Lt.edgeResistance;Lt.pointerX=t,Lt.pointerY=e,bt?(r=Math.atan2(Z.y-e,t-Z.x)*y,s=Lt.y-r,Lt.y=r,s>180?E-=360:-180>s&&(E+=360),o=S+(E-r)*l):(lt&&(a=t*lt[0]+e*lt[2]+lt[4],e=t*lt[1]+e*lt[3]+lt[5],t=a),i=e-v,n=t-f,It>i&&i>-It&&(i=0),It>n&&n>-It&&(n=0),(Lt.lockAxis||Lt.lockedAxis)&&(n||i)&&(a=Lt.lockedAxis,a||(Lt.lockedAxis=a=Nt&&Math.abs(n)>Math.abs(i)?"y":Mt?"x":null,a&&"function"==typeof Lt.vars.onLockAxis&&Lt.vars.onLockAxis.call(Lt,Lt.pointerEvent)),"y"===a?i=0:"x"===a&&(n=0)),o=S+n*l,r=E+i*l),ot||rt?(ot&&(o=ot(o)),rt&&(r=rt(r))):O&&(o>L?o=L+(o-L)*c:F>o&&(o=F+(o-F)*c),bt||(r>W?r=W+(r-W)*c:Y>r&&(r=Y+(r-Y)*c))),bt||(o=Math.round(o),r=Math.round(r)),(Lt.x!==o||Lt.y!==r&&!bt)&&(Lt.x=Lt.endX=o,bt?Lt.endRotation=o:Lt.y=Lt.endY=r,nt=!0,Lt.isDragging||(Lt.isDragging=!0,tt(Lt,"dragstart","onDragStart")))},te=function(t,e){if(s&&Lt.isPressed&&(!t||!Q||e||!t.pointerId||t.pointerId===Q)){Lt.isPressed=!1;var o,r,a,l,c=t,u=Lt.isDragging;if(at?(_t(at,"touchend",te),_t(at,"touchmove",Zt),_t(at,"touchcancel",te),_t(p,"touchstart",kt)):_t(p,"mousemove",Zt),_t(p,"mouseup",te),t&&t.target&&_t(t.target,"mouseup",te),nt=!1,x.parentNode&&x.parentNode.removeChild(x),st)return t&&_t(t.target,"change",te),Pt(Ft,!1),tt(Lt,"release","onRelease"),tt(Lt,"click","onClick"),void(st=!1);if(M(jt),!bt)for(r=Ft.length;--r>-1;)q(Ft[r],"cursor",i.cursor||"move");if(u&&(Bt=A=b(),Lt.isDragging=!1),k--,t){if(C&&(t=U(t,!1)),o=t.changedTouches,o&&(t=o[0],t!==K&&t.identifier!==Q)){for(r=o.length;--r>-1&&(t=o[r]).identifier!==Q;);if(0>r)return}Lt.pointerEvent=c,Lt.pointerX=t.pageX,Lt.pointerY=t.pageY}return c&&!u?(ct&&(i.snap||i.bounds)&&Yt(i.throwProps),tt(Lt,"release","onRelease"),R&&"touchmove"===c.type||(tt(Lt,"click","onClick"),l=c.target||c.srcElement||n,l.click?l.click():p.createEvent&&(a=p.createEvent("MouseEvents"),a.initEvent("click",!0,!0),l.dispatchEvent(a)),ut=b())):(Yt(i.throwProps),C||Lt.allowEventDefault||!c||!i.dragClickables&&Wt.call(Lt,c.target)||!u||pt&&(!gt||pt!==gt)||c.cancelable===!1||(c.preventDefault(),c.preventManipulation&&c.preventManipulation()),tt(Lt,"release","onRelease")),u&&tt(Lt,"dragend","onDragEnd"),!0}},ee=function(t){if(t&&Lt.isDragging){var e=t.target||t.srcElement||n.parentNode,i=e.scrollLeft-e._gsScrollX,o=e.scrollTop-e._gsScrollY;(i||o)&&(f-=i,v-=o,e._gsScrollX+=i,e._gsScrollY+=o,Jt(Lt.pointerX,Lt.pointerY))}},ne=function(t){var e=b(),n=40>e-ut,i=40>e-Bt;(Lt.isPressed||i||n)&&(t.preventDefault?(t.preventDefault(),(n||i&&Lt.vars.suppressClickOnDrag!==!1)&&t.stopImmediatePropagation()):t.returnValue=!1,t.preventManipulation&&t.preventManipulation())};it=Dt.get(this.target),it&&it.kill(),this.startDrag=function(t){Qt(t),Lt.isDragging||(Lt.isDragging=!0,tt(Lt,"dragstart","onDragStart"))},this.drag=Zt,this.endDrag=function(t){te(t,!0)},this.timeSinceDrag=function(){return Lt.isDragging?0:(b()-Bt)/1e3},this.hitTest=function(t,e){return Dt.hitTest(Lt.target,t,e)},this.getDirection=function(t,e){var n,i,o,s,a,l,c="velocity"===t&&r?t:"object"!=typeof t||bt?"start":"element";return"element"===c&&(a=Ht(Lt.target),l=Ht(t)),n="start"===c?Lt.x-S:"velocity"===c?r.getVelocity(this.target,Ct):a.left+a.width/2-(l.left+l.width/2),bt?0>n?"counter-clockwise":"clockwise":(e=e||2,i="start"===c?Lt.y-E:"velocity"===c?r.getVelocity(this.target,Et):a.top+a.height/2-(l.top+l.height/2),o=Math.abs(n/i),s=1/e>o?"":0>n?"left":"right",e>o&&(""!==s&&(s+="-"),s+=0>i?"up":"down"),s)},this.applyBounds=function(t){var e,n;return t&&i.bounds!==t?(i.bounds=t,Lt.update(!0)):(Ut(!0),Xt(),O&&(e=Lt.x,n=Lt.y,O&&(e>L?e=L:F>e&&(e=F),n>W?n=W:Y>n&&(n=Y)),Lt.x===e&&Lt.y===n||(Lt.x=Lt.endX=e,bt?Lt.endRotation=e:Lt.y=Lt.endY=n,nt=!0,jt())),Lt)},this.update=function(t){var e=Lt.x,n=Lt.y;return qt(),t?Lt.applyBounds():(nt&&jt(),Ut(!0)),Lt.isPressed&&(Nt&&Math.abs(e-Lt.x)>.01||Mt&&Math.abs(n-Lt.y)>.01&&!bt)&&Gt(),Lt},this.enable=function(t){var o,l,c;if("soft"!==t){for(l=Ft.length;--l>-1;)c=Ft[l],Tt(c,"mousedown",Qt),Tt(c,"touchstart",Qt),Tt(c,"click",ne,!0),bt||q(c,"cursor",i.cursor||"move"),q(c,"touchCallout","none"),q(c,"touchAction",Nt===Mt||a?"none":Nt?"pan-y":"pan-x");Pt(Ft,!1)}return z(Lt.target,ee),s=!0,r&&"soft"!==t&&r.track(a||n,wt?"x,y":bt?"rotation":"top,left"),a&&a.enable(),n._gsDragID=o="d"+_++,T[o]=this,a&&(a.element._gsDragID=o),e.set(n,{x:"+=0",overwrite:!1}),ft={t:n,data:C?$:n._gsTransform,tween:{},setRatio:C?function(){e.set(n,G)}:CSSPlugin._internals.setTransformRatio||CSSPlugin._internals.set3DTransformRatio},this.update(!0),Lt},this.disable=function(t){var e,i,o=this.isDragging;if(!bt)for(e=Ft.length;--e>-1;)q(Ft[e],"cursor",null);if("soft"!==t){for(e=Ft.length;--e>-1;)i=Ft[e],q(i,"touchCallout",null),q(i,"touchAction",null),_t(i,"mousedown",Qt),_t(i,"touchstart",Qt),_t(i,"click",ne);Pt(Ft,!0),at&&(_t(at,"touchcancel",te),_t(at,"touchend",te),_t(at,"touchmove",Zt)),_t(p,"mouseup",te),_t(p,"mousemove",Zt)}return B(n,ee),s=!1,r&&"soft"!==t&&r.untrack(a||n,wt?"x,y":bt?"rotation":"top,left"),a&&a.disable(),M(jt),this.isDragging=this.isPressed=st=!1,o&&tt(this,"dragend","onDragEnd"),Lt},this.enabled=function(t,e){return arguments.length?t?this.enable(e):this.disable(e):s},this.kill=function(){return e.killTweensOf(a||n,!0,zt),Lt.disable(),delete T[n._gsDragID],Lt},-1!==yt.indexOf("scroll")&&(a=this.scrollProxy=new Ot(n,I({onKill:function(){Lt.isPressed&&te(null)}},i)),n.style.overflowY=Mt&&!xt?"auto":"hidden",n.style.overflowX=Nt&&!xt?"auto":"hidden",n=a.content),i.force3D!==!1&&e.set(n,{force3D:!0}),bt?zt.rotation=1:(Nt&&(zt[Ct]=1),Mt&&(zt[Et]=1)),bt?(G=h,$=G.css,G.overwrite=!1):wt&&(G=Nt&&Mt?l:Nt?c:u,$=G.css,G.overwrite=!1),this.enable()},Mt=Dt.prototype=new t;Mt.constructor=Dt,Mt.pointerX=Mt.pointerY=0,Mt.isDragging=Mt.isPressed=!1,Dt.version="0.13.0",Dt.zIndex=1e3,Tt(p,"touchcancel",function(){}),Tt(p,"contextmenu",function(t){var e;for(e in T)T[e].isPressed&&T[e].endDrag()}),Dt.create=function(t,n){"string"==typeof t&&(t=e.selector(t));for(var i=bt(t)?Ct(t):[t],o=i.length;--o>-1;)i[o]=new Dt(i[o],n);return i},Dt.get=function(t){return T[(X(t)||{})._gsDragID]},Dt.timeSinceDrag=function(){return(b()-A)/1e3};var Ht=function(t,e){var n=t.pageX!==e?{left:t.pageX,top:t.pageY,right:t.pageX+1,bottom:t.pageY+1}:t.nodeType||t.left===e||t.top===e?X(t).getBoundingClientRect():t;return n.right===e&&n.width!==e?(n.right=n.left+n.width,n.bottom=n.top+n.height):n.width===e&&(n={width:n.right-n.left,height:n.bottom-n.top,right:n.right,left:n.left,bottom:n.bottom,top:n.top}),n};return Dt.hitTest=function(t,e,n){if(t===e)return!1;var i,o,r,s=Ht(t),a=Ht(e),l=a.left>s.right||a.right<s.left||a.top>s.bottom||a.bottom<s.top;return l||!n?!l:(r=-1!==(n+"").indexOf("%"),n=parseFloat(n)||0,i={left:Math.max(s.left,a.left),top:Math.max(s.top,a.top)},i.width=Math.min(s.right,a.right)-i.left,i.height=Math.min(s.bottom,a.bottom)-i.top,i.width<0||i.height<0?!1:r?(n*=.01,o=i.width*i.height,o>=s.width*s.height*n||o>=a.width*a.height*n):i.width>n&&i.height>n)},x.style.cssText="visibility:hidden;height:1px;top:-1px;pointer-events:none;position:relative;clear:both;",Dt},!0)}),i._gsDefine&&i._gsQueue.pop()(),function(n){"use strict";var o=function(){return(i.GreenSockGlobals||i)[n]};"function"==typeof define&&define.amd?define(["TweenLite"],o):"undefined"!=typeof e&&e.exports&&(t("TweenLite"),t("../plugins/CSSPlugin.js"),e.exports=o())}("Draggable")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../plugins/CSSPlugin.js":1,TweenLite:"TweenLite"}],Dropzone:[function(t,e,n){e.exports=function(){var t,n,i,o,r,s,a,l,c=[].slice,u={}.hasOwnProperty,h=function(t,e){function n(){this.constructor=t}for(var i in e)u.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};return a=function(){},n=function(){function t(){}return t.prototype.addEventListener=t.prototype.on,t.prototype.on=function(t,e){return this._callbacks=this._callbacks||{},this._callbacks[t]||(this._callbacks[t]=[]),this._callbacks[t].push(e),this},t.prototype.emit=function(){var t,e,n,i,o,r;if(i=arguments[0],t=2<=arguments.length?c.call(arguments,1):[],this._callbacks=this._callbacks||{},n=this._callbacks[i])for(o=0,r=n.length;r>o;o++)e=n[o],e.apply(this,t);return this},t.prototype.removeListener=t.prototype.off,t.prototype.removeAllListeners=t.prototype.off,t.prototype.removeEventListener=t.prototype.off,t.prototype.off=function(t,e){var n,i,o,r,s;if(!this._callbacks||0===arguments.length)return this._callbacks={},this;if(i=this._callbacks[t],!i)return this;if(1===arguments.length)return delete this._callbacks[t],this;for(o=r=0,s=i.length;s>r;o=++r)if(n=i[o],n===e){i.splice(o,1);break}return this},t}(),t=function(t){function e(t,n){var o,r,s;if(this.element=t,this.version=e.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(e.instances.push(this),this.element.dropzone=this,o=null!=(s=e.optionsForElement(this.element))?s:{},this.options=i({},this.defaultOptions,o,null!=n?n:{}),this.options.forceFallback||!e.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(r=this.getExistingFallback())&&r.parentNode&&r.parentNode.removeChild(r),this.options.previewsContainer!==!1&&(this.options.previewsContainer?this.previewsContainer=e.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element),this.options.clickable&&(this.options.clickable===!0?this.clickableElements=[this.element]:this.clickableElements=e.getElements(this.options.clickable,"clickable")),this.init()}var i,o;return h(e,t),e.prototype.Emitter=n,e.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],e.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1e3,maxFiles:null,filesizeBase:1e3,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,capture:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(t,e){return e()},init:function(){return a},forceFallback:!1,fallback:function(){var t,n,i,o,r,s;for(this.element.className=""+this.element.className+" dz-browser-not-supported",s=this.element.getElementsByTagName("div"),o=0,r=s.length;r>o;o++)t=s[o],/(^| )dz-message($| )/.test(t.className)&&(n=t,t.className="dz-message");return n||(n=e.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(n)),i=n.getElementsByTagName("span")[0],i&&(i.textContent=this.options.dictFallbackMessage),this.element.appendChild(this.getFallbackForm())},resize:function(t){var e,n,i;return e={srcX:0,srcY:0,srcWidth:t.width,srcHeight:t.height},n=t.width/t.height,e.optWidth=this.options.thumbnailWidth,e.optHeight=this.options.thumbnailHeight,null==e.optWidth&&null==e.optHeight?(e.optWidth=e.srcWidth,e.optHeight=e.srcHeight):null==e.optWidth?e.optWidth=n*e.optHeight:null==e.optHeight&&(e.optHeight=1/n*e.optWidth),i=e.optWidth/e.optHeight,t.height<e.optHeight||t.width<e.optWidth?(e.trgHeight=e.srcHeight,e.trgWidth=e.srcWidth):n>i?(e.srcHeight=t.height,e.srcWidth=e.srcHeight*i):(e.srcWidth=t.width,e.srcHeight=e.srcWidth/i),e.srcX=(t.width-e.srcWidth)/2,e.srcY=(t.height-e.srcHeight)/2,e},drop:function(t){return this.element.classList.remove("dz-drag-hover")},dragstart:a,dragend:function(t){return this.element.classList.remove("dz-drag-hover")},dragenter:function(t){return this.element.classList.add("dz-drag-hover")},dragover:function(t){return this.element.classList.add("dz-drag-hover")},dragleave:function(t){return this.element.classList.remove("dz-drag-hover")},paste:a,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(t){var n,i,o,r,s,a,l,c,u,h,d,f,p;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){for(t.previewElement=e.createElement(this.options.previewTemplate.trim()),t.previewTemplate=t.previewElement,this.previewsContainer.appendChild(t.previewElement),h=t.previewElement.querySelectorAll("[data-dz-name]"),r=0,l=h.length;l>r;r++)n=h[r],n.textContent=t.name;for(d=t.previewElement.querySelectorAll("[data-dz-size]"),s=0,c=d.length;c>s;s++)n=d[s],n.innerHTML=this.filesize(t.size);for(this.options.addRemoveLinks&&(t._removeLink=e.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),t.previewElement.appendChild(t._removeLink)),i=function(n){return function(i){return i.preventDefault(),i.stopPropagation(),t.status===e.UPLOADING?e.confirm(n.options.dictCancelUploadConfirmation,function(){return n.removeFile(t)}):n.options.dictRemoveFileConfirmation?e.confirm(n.options.dictRemoveFileConfirmation,function(){return n.removeFile(t)}):n.removeFile(t)}}(this),f=t.previewElement.querySelectorAll("[data-dz-remove]"),p=[],a=0,u=f.length;u>a;a++)o=f[a],p.push(o.addEventListener("click",i));return p}},removedfile:function(t){var e;return t.previewElement&&null!=(e=t.previewElement)&&e.parentNode.removeChild(t.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(t,e){var n,i,o,r;if(t.previewElement){for(t.previewElement.classList.remove("dz-file-preview"),r=t.previewElement.querySelectorAll("[data-dz-thumbnail]"),i=0,o=r.length;o>i;i++)n=r[i],n.alt=t.name,n.src=e;return setTimeout(function(e){return function(){return t.previewElement.classList.add("dz-image-preview")}}(this),1)}},error:function(t,e){var n,i,o,r,s;if(t.previewElement){for(t.previewElement.classList.add("dz-error"),"String"!=typeof e&&e.error&&(e=e.error),r=t.previewElement.querySelectorAll("[data-dz-errormessage]"),s=[],i=0,o=r.length;o>i;i++)n=r[i],s.push(n.textContent=e);return s}},errormultiple:a,processing:function(t){return t.previewElement&&(t.previewElement.classList.add("dz-processing"),t._removeLink)?t._removeLink.textContent=this.options.dictCancelUpload:void 0},processingmultiple:a,uploadprogress:function(t,e,n){var i,o,r,s,a;if(t.previewElement){for(s=t.previewElement.querySelectorAll("[data-dz-uploadprogress]"),a=[],o=0,r=s.length;r>o;o++)i=s[o],"PROGRESS"===i.nodeName?a.push(i.value=e):a.push(i.style.width=""+e+"%");return a}},totaluploadprogress:a,sending:a,sendingmultiple:a,success:function(t){return t.previewElement?t.previewElement.classList.add("dz-success"):void 0},successmultiple:a,canceled:function(t){return this.emit("error",t,"Upload canceled.")},canceledmultiple:a,complete:function(t){return t._removeLink&&(t._removeLink.textContent=this.options.dictRemoveFile),t.previewElement?t.previewElement.classList.add("dz-complete"):void 0},completemultiple:a,maxfilesexceeded:a,maxfilesreached:a,queuecomplete:a,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'},i=function(){var t,e,n,i,o,r,s;for(i=arguments[0],n=2<=arguments.length?c.call(arguments,1):[],r=0,s=n.length;s>r;r++){e=n[r];for(t in e)o=e[t],i[t]=o}return i},e.prototype.getAcceptedFiles=function(){var t,e,n,i,o;for(i=this.files,o=[],e=0,n=i.length;n>e;e++)t=i[e],t.accepted&&o.push(t);return o},e.prototype.getRejectedFiles=function(){var t,e,n,i,o;for(i=this.files,o=[],e=0,n=i.length;n>e;e++)t=i[e],t.accepted||o.push(t);return o},e.prototype.getFilesWithStatus=function(t){var e,n,i,o,r;for(o=this.files,r=[],n=0,i=o.length;i>n;n++)e=o[n],e.status===t&&r.push(e);return r},e.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(e.QUEUED)},e.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(e.UPLOADING)},e.prototype.getActiveFiles=function(){var t,n,i,o,r;for(o=this.files,r=[],n=0,i=o.length;i>n;n++)t=o[n],t.status!==e.UPLOADING&&t.status!==e.QUEUED||r.push(t);return r},e.prototype.init=function(){var t,n,i,o,r,s,a;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(e.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(i=function(t){return function(){return t.hiddenFileInput&&document.body.removeChild(t.hiddenFileInput),t.hiddenFileInput=document.createElement("input"),t.hiddenFileInput.setAttribute("type","file"),(null==t.options.maxFiles||t.options.maxFiles>1)&&t.hiddenFileInput.setAttribute("multiple","multiple"),t.hiddenFileInput.className="dz-hidden-input",null!=t.options.acceptedFiles&&t.hiddenFileInput.setAttribute("accept",t.options.acceptedFiles),null!=t.options.capture&&t.hiddenFileInput.setAttribute("capture",t.options.capture),t.hiddenFileInput.style.visibility="hidden",t.hiddenFileInput.style.position="absolute",t.hiddenFileInput.style.top="0",t.hiddenFileInput.style.left="0",t.hiddenFileInput.style.height="0",t.hiddenFileInput.style.width="0",document.body.appendChild(t.hiddenFileInput),t.hiddenFileInput.addEventListener("change",function(){var e,n,o,r;if(n=t.hiddenFileInput.files,n.length)for(o=0,r=n.length;r>o;o++)e=n[o],t.addFile(e);return i()})}}(this))(),this.URL=null!=(s=window.URL)?s:window.webkitURL,a=this.events,o=0,r=a.length;r>o;o++)t=a[o],this.on(t,this.options[t]);return this.on("uploadprogress",function(t){return function(){return t.updateTotalUploadProgress()}}(this)),this.on("removedfile",function(t){return function(){return t.updateTotalUploadProgress()}}(this)),this.on("canceled",function(t){return function(e){return t.emit("complete",e)}}(this)),this.on("complete",function(t){return function(e){return 0===t.getUploadingFiles().length&&0===t.getQueuedFiles().length?setTimeout(function(){return t.emit("queuecomplete")},0):void 0}}(this)),n=function(t){return t.stopPropagation(),t.preventDefault?t.preventDefault():t.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(t){return function(e){return t.emit("dragstart",e)}}(this),dragenter:function(t){return function(e){return n(e),t.emit("dragenter",e)}}(this),dragover:function(t){return function(e){var i;try{i=e.dataTransfer.effectAllowed}catch(o){}return e.dataTransfer.dropEffect="move"===i||"linkMove"===i?"move":"copy",n(e),t.emit("dragover",e)}}(this),dragleave:function(t){return function(e){return t.emit("dragleave",e)}}(this),drop:function(t){return function(e){return n(e),t.drop(e)}}(this),dragend:function(t){return function(e){return t.emit("dragend",e)}}(this)}}],this.clickableElements.forEach(function(t){return function(n){return t.listeners.push({element:n,events:{click:function(i){return n!==t.element||i.target===t.element||e.elementInside(i.target,t.element.querySelector(".dz-message"))?t.hiddenFileInput.click():void 0;
}}})}}(this)),this.enable(),this.options.init.call(this)},e.prototype.destroy=function(){var t;return this.disable(),this.removeAllFiles(!0),(null!=(t=this.hiddenFileInput)?t.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,e.instances.splice(e.instances.indexOf(this),1)},e.prototype.updateTotalUploadProgress=function(){var t,e,n,i,o,r,s,a;if(i=0,n=0,t=this.getActiveFiles(),t.length){for(a=this.getActiveFiles(),r=0,s=a.length;s>r;r++)e=a[r],i+=e.upload.bytesSent,n+=e.upload.total;o=100*i/n}else o=100;return this.emit("totaluploadprogress",o,n,i)},e.prototype._getParamName=function(t){return"function"==typeof this.options.paramName?this.options.paramName(t):""+this.options.paramName+(this.options.uploadMultiple?"["+t+"]":"")},e.prototype.getFallbackForm=function(){var t,n,i,o;return(t=this.getExistingFallback())?t:(i='<div class="dz-fallback">',this.options.dictFallbackText&&(i+="<p>"+this.options.dictFallbackText+"</p>"),i+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',n=e.createElement(i),"FORM"!==this.element.tagName?(o=e.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),o.appendChild(n)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=o?o:n)},e.prototype.getExistingFallback=function(){var t,e,n,i,o,r;for(e=function(t){var e,n,i;for(n=0,i=t.length;i>n;n++)if(e=t[n],/(^| )fallback($| )/.test(e.className))return e},r=["div","form"],i=0,o=r.length;o>i;i++)if(n=r[i],t=e(this.element.getElementsByTagName(n)))return t},e.prototype.setupEventListeners=function(){var t,e,n,i,o,r,s;for(r=this.listeners,s=[],i=0,o=r.length;o>i;i++)t=r[i],s.push(function(){var i,o;i=t.events,o=[];for(e in i)n=i[e],o.push(t.element.addEventListener(e,n,!1));return o}());return s},e.prototype.removeEventListeners=function(){var t,e,n,i,o,r,s;for(r=this.listeners,s=[],i=0,o=r.length;o>i;i++)t=r[i],s.push(function(){var i,o;i=t.events,o=[];for(e in i)n=i[e],o.push(t.element.removeEventListener(e,n,!1));return o}());return s},e.prototype.disable=function(){var t,e,n,i,o;for(this.clickableElements.forEach(function(t){return t.classList.remove("dz-clickable")}),this.removeEventListeners(),i=this.files,o=[],e=0,n=i.length;n>e;e++)t=i[e],o.push(this.cancelUpload(t));return o},e.prototype.enable=function(){return this.clickableElements.forEach(function(t){return t.classList.add("dz-clickable")}),this.setupEventListeners()},e.prototype.filesize=function(t){var e,n,i,o,r,s,a,l;for(s=["TB","GB","MB","KB","b"],i=o=null,n=a=0,l=s.length;l>a;n=++a)if(r=s[n],e=Math.pow(this.options.filesizeBase,4-n)/10,t>=e){i=t/Math.pow(this.options.filesizeBase,4-n),o=r;break}return i=Math.round(10*i)/10,"<strong>"+i+"</strong> "+o},e.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},e.prototype.drop=function(t){var e,n;t.dataTransfer&&(this.emit("drop",t),e=t.dataTransfer.files,e.length&&(n=t.dataTransfer.items,n&&n.length&&null!=n[0].webkitGetAsEntry?this._addFilesFromItems(n):this.handleFiles(e)))},e.prototype.paste=function(t){var e,n;if(null!=(null!=t&&null!=(n=t.clipboardData)?n.items:void 0))return this.emit("paste",t),e=t.clipboardData.items,e.length?this._addFilesFromItems(e):void 0},e.prototype.handleFiles=function(t){var e,n,i,o;for(o=[],n=0,i=t.length;i>n;n++)e=t[n],o.push(this.addFile(e));return o},e.prototype._addFilesFromItems=function(t){var e,n,i,o,r;for(r=[],i=0,o=t.length;o>i;i++)n=t[i],null!=n.webkitGetAsEntry&&(e=n.webkitGetAsEntry())?e.isFile?r.push(this.addFile(n.getAsFile())):e.isDirectory?r.push(this._addFilesFromDirectory(e,e.name)):r.push(void 0):null!=n.getAsFile&&(null==n.kind||"file"===n.kind)?r.push(this.addFile(n.getAsFile())):r.push(void 0);return r},e.prototype._addFilesFromDirectory=function(t,e){var n,i;return n=t.createReader(),i=function(t){return function(n){var i,o,r;for(o=0,r=n.length;r>o;o++)i=n[o],i.isFile?i.file(function(n){return t.options.ignoreHiddenFiles&&"."===n.name.substring(0,1)?void 0:(n.fullPath=""+e+"/"+n.name,t.addFile(n))}):i.isDirectory&&t._addFilesFromDirectory(i,""+e+"/"+i.name)}}(this),n.readEntries(i,function(t){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log(t):void 0})},e.prototype.accept=function(t,n){return t.size>1024*this.options.maxFilesize*1024?n(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(t.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):e.isValidFile(t,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(n(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",t)):this.options.accept.call(this,t,n):n(this.options.dictInvalidFileType)},e.prototype.addFile=function(t){return t.upload={progress:0,total:t.size,bytesSent:0},this.files.push(t),t.status=e.ADDED,this.emit("addedfile",t),this._enqueueThumbnail(t),this.accept(t,function(e){return function(n){return n?(t.accepted=!1,e._errorProcessing([t],n)):(t.accepted=!0,e.options.autoQueue&&e.enqueueFile(t)),e._updateMaxFilesReachedClass()}}(this))},e.prototype.enqueueFiles=function(t){var e,n,i;for(n=0,i=t.length;i>n;n++)e=t[n],this.enqueueFile(e);return null},e.prototype.enqueueFile=function(t){if(t.status!==e.ADDED||t.accepted!==!0)throw new Error("This file can't be queued because it has already been processed or was rejected.");return t.status=e.QUEUED,this.options.autoProcessQueue?setTimeout(function(t){return function(){return t.processQueue()}}(this),0):void 0},e.prototype._thumbnailQueue=[],e.prototype._processingThumbnail=!1,e.prototype._enqueueThumbnail=function(t){return this.options.createImageThumbnails&&t.type.match(/image.*/)&&t.size<=1024*this.options.maxThumbnailFilesize*1024?(this._thumbnailQueue.push(t),setTimeout(function(t){return function(){return t._processThumbnailQueue()}}(this),0)):void 0},e.prototype._processThumbnailQueue=function(){return this._processingThumbnail||0===this._thumbnailQueue.length?void 0:(this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(t){return function(){return t._processingThumbnail=!1,t._processThumbnailQueue()}}(this)))},e.prototype.removeFile=function(t){return t.status===e.UPLOADING&&this.cancelUpload(t),this.files=l(this.files,t),this.emit("removedfile",t),0===this.files.length?this.emit("reset"):void 0},e.prototype.removeAllFiles=function(t){var n,i,o,r;for(null==t&&(t=!1),r=this.files.slice(),i=0,o=r.length;o>i;i++)n=r[i],(n.status!==e.UPLOADING||t)&&this.removeFile(n);return null},e.prototype.createThumbnail=function(t,e){var n;return n=new FileReader,n.onload=function(i){return function(){return"image/svg+xml"===t.type?(i.emit("thumbnail",t,n.result),void(null!=e&&e())):i.createThumbnailFromUrl(t,n.result,e)}}(this),n.readAsDataURL(t)},e.prototype.createThumbnailFromUrl=function(t,e,n){var i;return i=document.createElement("img"),i.onload=function(e){return function(){var o,r,a,l,c,u,h,d;return t.width=i.width,t.height=i.height,a=e.options.resize.call(e,t),null==a.trgWidth&&(a.trgWidth=a.optWidth),null==a.trgHeight&&(a.trgHeight=a.optHeight),o=document.createElement("canvas"),r=o.getContext("2d"),o.width=a.trgWidth,o.height=a.trgHeight,s(r,i,null!=(c=a.srcX)?c:0,null!=(u=a.srcY)?u:0,a.srcWidth,a.srcHeight,null!=(h=a.trgX)?h:0,null!=(d=a.trgY)?d:0,a.trgWidth,a.trgHeight),l=o.toDataURL("image/png"),e.emit("thumbnail",t,l),null!=n?n():void 0}}(this),null!=n&&(i.onerror=n),i.src=e},e.prototype.processQueue=function(){var t,e,n,i;if(e=this.options.parallelUploads,n=this.getUploadingFiles().length,t=n,!(n>=e)&&(i=this.getQueuedFiles(),i.length>0)){if(this.options.uploadMultiple)return this.processFiles(i.slice(0,e-n));for(;e>t;){if(!i.length)return;this.processFile(i.shift()),t++}}},e.prototype.processFile=function(t){return this.processFiles([t])},e.prototype.processFiles=function(t){var n,i,o;for(i=0,o=t.length;o>i;i++)n=t[i],n.processing=!0,n.status=e.UPLOADING,this.emit("processing",n);return this.options.uploadMultiple&&this.emit("processingmultiple",t),this.uploadFiles(t)},e.prototype._getFilesWithXhr=function(t){var e,n;return n=function(){var n,i,o,r;for(o=this.files,r=[],n=0,i=o.length;i>n;n++)e=o[n],e.xhr===t&&r.push(e);return r}.call(this)},e.prototype.cancelUpload=function(t){var n,i,o,r,s,a,l;if(t.status===e.UPLOADING){for(i=this._getFilesWithXhr(t.xhr),o=0,s=i.length;s>o;o++)n=i[o],n.status=e.CANCELED;for(t.xhr.abort(),r=0,a=i.length;a>r;r++)n=i[r],this.emit("canceled",n);this.options.uploadMultiple&&this.emit("canceledmultiple",i)}else(l=t.status)!==e.ADDED&&l!==e.QUEUED||(t.status=e.CANCELED,this.emit("canceled",t),this.options.uploadMultiple&&this.emit("canceledmultiple",[t]));return this.options.autoProcessQueue?this.processQueue():void 0},o=function(){var t,e;return e=arguments[0],t=2<=arguments.length?c.call(arguments,1):[],"function"==typeof e?e.apply(this,t):e},e.prototype.uploadFile=function(t){return this.uploadFiles([t])},e.prototype.uploadFiles=function(t){var n,r,s,a,l,c,u,h,d,f,p,g,m,v,y,w,b,C,x,S,T,_,E,k,R,A,P,N,O,D,M,H,I,L;for(x=new XMLHttpRequest,S=0,k=t.length;k>S;S++)n=t[S],n.xhr=x;g=o(this.options.method,t),b=o(this.options.url,t),x.open(g,b,!0),x.withCredentials=!!this.options.withCredentials,y=null,s=function(e){return function(){var i,o,r;for(r=[],i=0,o=t.length;o>i;i++)n=t[i],r.push(e._errorProcessing(t,y||e.options.dictResponseError.replace("{{statusCode}}",x.status),x));return r}}(this),w=function(e){return function(i){var o,r,s,a,l,c,u,h,d;if(null!=i)for(r=100*i.loaded/i.total,s=0,c=t.length;c>s;s++)n=t[s],n.upload={progress:r,total:i.total,bytesSent:i.loaded};else{for(o=!0,r=100,a=0,u=t.length;u>a;a++)n=t[a],100===n.upload.progress&&n.upload.bytesSent===n.upload.total||(o=!1),n.upload.progress=r,n.upload.bytesSent=n.upload.total;if(o)return}for(d=[],l=0,h=t.length;h>l;l++)n=t[l],d.push(e.emit("uploadprogress",n,r,n.upload.bytesSent));return d}}(this),x.onload=function(n){return function(i){var o;if(t[0].status!==e.CANCELED&&4===x.readyState){if(y=x.responseText,x.getResponseHeader("content-type")&&~x.getResponseHeader("content-type").indexOf("application/json"))try{y=JSON.parse(y)}catch(r){i=r,y="Invalid JSON response from server."}return w(),200<=(o=x.status)&&300>o?n._finished(t,y,i):s()}}}(this),x.onerror=function(n){return function(){return t[0].status!==e.CANCELED?s():void 0}}(this),v=null!=(O=x.upload)?O:x,v.onprogress=w,c={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&i(c,this.options.headers);for(a in c)l=c[a],x.setRequestHeader(a,l);if(r=new FormData,this.options.params){D=this.options.params;for(p in D)C=D[p],r.append(p,C)}for(T=0,R=t.length;R>T;T++)n=t[T],this.emit("sending",n,x,r);if(this.options.uploadMultiple&&this.emit("sendingmultiple",t,x,r),"FORM"===this.element.tagName)for(M=this.element.querySelectorAll("input, textarea, select, button"),_=0,A=M.length;A>_;_++)if(h=M[_],d=h.getAttribute("name"),f=h.getAttribute("type"),"SELECT"===h.tagName&&h.hasAttribute("multiple"))for(H=h.options,E=0,P=H.length;P>E;E++)m=H[E],m.selected&&r.append(d,m.value);else(!f||"checkbox"!==(I=f.toLowerCase())&&"radio"!==I||h.checked)&&r.append(d,h.value);for(u=N=0,L=t.length-1;L>=0?L>=N:N>=L;u=L>=0?++N:--N)r.append(this._getParamName(u),t[u],t[u].name);return x.send(r)},e.prototype._finished=function(t,n,i){var o,r,s;for(r=0,s=t.length;s>r;r++)o=t[r],o.status=e.SUCCESS,this.emit("success",o,n,i),this.emit("complete",o);return this.options.uploadMultiple&&(this.emit("successmultiple",t,n,i),this.emit("completemultiple",t)),this.options.autoProcessQueue?this.processQueue():void 0},e.prototype._errorProcessing=function(t,n,i){var o,r,s;for(r=0,s=t.length;s>r;r++)o=t[r],o.status=e.ERROR,this.emit("error",o,n,i),this.emit("complete",o);return this.options.uploadMultiple&&(this.emit("errormultiple",t,n,i),this.emit("completemultiple",t)),this.options.autoProcessQueue?this.processQueue():void 0},e}(n),t.version="4.0.1",t.options={},t.optionsForElement=function(e){return e.getAttribute("id")?t.options[i(e.getAttribute("id"))]:void 0},t.instances=[],t.forElement=function(t){if("string"==typeof t&&(t=document.querySelector(t)),null==(null!=t?t.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return t.dropzone},t.autoDiscover=!0,t.discover=function(){var e,n,i,o,r,s;for(document.querySelectorAll?i=document.querySelectorAll(".dropzone"):(i=[],e=function(t){var e,n,o,r;for(r=[],n=0,o=t.length;o>n;n++)e=t[n],/(^| )dropzone($| )/.test(e.className)?r.push(i.push(e)):r.push(void 0);return r},e(document.getElementsByTagName("div")),e(document.getElementsByTagName("form"))),s=[],o=0,r=i.length;r>o;o++)n=i[o],t.optionsForElement(n)!==!1?s.push(new t(n)):s.push(void 0);return s},t.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],t.isBrowserSupported=function(){var e,n,i,o,r;if(e=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(r=t.blacklistedBrowsers,i=0,o=r.length;o>i;i++)n=r[i],n.test(navigator.userAgent)&&(e=!1);else e=!1;else e=!1;return e},l=function(t,e){var n,i,o,r;for(r=[],i=0,o=t.length;o>i;i++)n=t[i],n!==e&&r.push(n);return r},i=function(t){return t.replace(/[\-_](\w)/g,function(t){return t.charAt(1).toUpperCase()})},t.createElement=function(t){var e;return e=document.createElement("div"),e.innerHTML=t,e.childNodes[0]},t.elementInside=function(t,e){if(t===e)return!0;for(;t=t.parentNode;)if(t===e)return!0;return!1},t.getElement=function(t,e){var n;if("string"==typeof t?n=document.querySelector(t):null!=t.nodeType&&(n=t),null==n)throw new Error("Invalid `"+e+"` option provided. Please provide a CSS selector or a plain HTML element.");return n},t.getElements=function(t,e){var n,i,o,r,s,a,l,c;if(t instanceof Array){o=[];try{for(r=0,a=t.length;a>r;r++)i=t[r],o.push(this.getElement(i,e))}catch(u){n=u,o=null}}else if("string"==typeof t)for(o=[],c=document.querySelectorAll(t),s=0,l=c.length;l>s;s++)i=c[s],o.push(i);else null!=t.nodeType&&(o=[t]);if(null==o||!o.length)throw new Error("Invalid `"+e+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return o},t.confirm=function(t,e,n){return window.confirm(t)?e():null!=n?n():void 0},t.isValidFile=function(t,e){var n,i,o,r,s;if(!e)return!0;for(e=e.split(","),i=t.type,n=i.replace(/\/.*$/,""),r=0,s=e.length;s>r;r++)if(o=e[r],o=o.trim(),"."===o.charAt(0)){if(-1!==t.name.toLowerCase().indexOf(o.toLowerCase(),t.name.length-o.length))return!0}else if(/\/\*$/.test(o)){if(n===o.replace(/\/.*$/,""))return!0}else if(i===o)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(e){return this.each(function(){return new t(this,e)})}),"undefined"!=typeof e&&null!==e?e.exports=t:window.Dropzone=t,t.ADDED="added",t.QUEUED="queued",t.ACCEPTED=t.QUEUED,t.UPLOADING="uploading",t.PROCESSING=t.UPLOADING,t.CANCELED="canceled",t.ERROR="error",t.SUCCESS="success",r=function(t){var e,n,i,o,r,s,a,l,c,u;for(a=t.naturalWidth,s=t.naturalHeight,n=document.createElement("canvas"),n.width=1,n.height=s,i=n.getContext("2d"),i.drawImage(t,0,0),o=i.getImageData(0,0,1,s).data,u=0,r=s,l=s;l>u;)e=o[4*(l-1)+3],0===e?r=l:u=l,l=r+u>>1;return c=l/s,0===c?1:c},s=function(t,e,n,i,o,s,a,l,c,u){var h;return h=r(e),t.drawImage(e,n,i,o,s,a,l,c,u/h)},o=function(t,e){var n,i,o,r,s,a,l,c,u;if(o=!1,u=!0,i=t.document,c=i.documentElement,n=i.addEventListener?"addEventListener":"attachEvent",l=i.addEventListener?"removeEventListener":"detachEvent",a=i.addEventListener?"":"on",r=function(n){return"readystatechange"!==n.type||"complete"===i.readyState?(("load"===n.type?t:i)[l](a+n.type,r,!1),!o&&(o=!0)?e.call(t,n.type||n):void 0):void 0},s=function(){var t;try{c.doScroll("left")}catch(e){return t=e,void setTimeout(s,50)}return r("poll")},"complete"!==i.readyState){if(i.createEventObject&&c.doScroll){try{u=!t.frameElement}catch(h){}u&&s()}return i[n](a+"DOMContentLoaded",r,!1),i[n](a+"readystatechange",r,!1),t[n](a+"load",r,!1)}},t._autoDiscoverFunction=function(){return t.autoDiscover?t.discover():void 0},t}.call(this)},{}],EasePack:[function(t,e,n){(function(t){var n="undefined"!=typeof e&&e.exports&&"undefined"!=typeof t?t:this||window;(n._gsQueue||(n._gsQueue=[])).push(function(){"use strict";n._gsDefine("easing.Back",["easing.Ease"],function(t){var e,i,o,r=n.GreenSockGlobals||n,s=r.com.greensock,a=2*Math.PI,l=Math.PI/2,c=s._class,u=function(e,n){var i=c("easing."+e,function(){},!0),o=i.prototype=new t;return o.constructor=i,o.getRatio=n,i},h=t.register||function(){},d=function(t,e,n,i,o){var r=c("easing."+t,{easeOut:new e,easeIn:new n,easeInOut:new i},!0);return h(r,t),r},f=function(t,e,n){this.t=t,this.v=e,n&&(this.next=n,n.prev=this,this.c=n.v-e,this.gap=n.t-t)},p=function(e,n){var i=c("easing."+e,function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1},!0),o=i.prototype=new t;return o.constructor=i,o.getRatio=n,o.config=function(t){return new i(t)},i},g=d("Back",p("BackOut",function(t){return(t-=1)*t*((this._p1+1)*t+this._p1)+1}),p("BackIn",function(t){return t*t*((this._p1+1)*t-this._p1)}),p("BackInOut",function(t){return(t*=2)<1?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)})),m=c("easing.SlowMo",function(t,e,n){e=e||0===e?e:.7,null==t?t=.7:t>1&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=n===!0},!0),v=m.prototype=new t;return v.constructor=m,v.getRatio=function(t){var e=t+(.5-t)*this._p;return t<this._p1?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},m.ease=new m(.7,.7),v.config=m.config=function(t,e,n){return new m(t,e,n)},e=c("easing.SteppedEase",function(t){t=t||1,this._p1=1/t,this._p2=t+1},!0),v=e.prototype=new t,v.constructor=e,v.getRatio=function(t){return 0>t?t=0:t>=1&&(t=.999999999),(this._p2*t>>0)*this._p1},v.config=e.config=function(t){return new e(t)},i=c("easing.RoughEase",function(e){e=e||{};for(var n,i,o,r,s,a,l=e.taper||"none",c=[],u=0,h=0|(e.points||20),d=h,p=e.randomize!==!1,g=e.clamp===!0,m=e.template instanceof t?e.template:null,v="number"==typeof e.strength?.4*e.strength:.4;--d>-1;)n=p?Math.random():1/h*d,i=m?m.getRatio(n):n,"none"===l?o=v:"out"===l?(r=1-n,o=r*r*v):"in"===l?o=n*n*v:.5>n?(r=2*n,o=r*r*.5*v):(r=2*(1-n),o=r*r*.5*v),p?i+=Math.random()*o-.5*o:d%2?i+=.5*o:i-=.5*o,g&&(i>1?i=1:0>i&&(i=0)),c[u++]={x:n,y:i};for(c.sort(function(t,e){return t.x-e.x}),a=new f(1,1,null),d=h;--d>-1;)s=c[d],a=new f(s.x,s.y,a);this._prev=new f(0,0,0!==a.t?a:a.next)},!0),v=i.prototype=new t,v.constructor=i,v.getRatio=function(t){var e=this._prev;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&t<=e.t;)e=e.prev;return this._prev=e,e.v+(t-e.t)/e.gap*e.c},v.config=function(t){return new i(t)},i.ease=new i,d("Bounce",u("BounceOut",function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}),u("BounceIn",function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:2/2.75>t?1-(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}),u("BounceInOut",function(t){var e=.5>t;return t=e?1-2*t:2*t-1,t=1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5})),d("Circ",u("CircOut",function(t){return Math.sqrt(1-(t-=1)*t)}),u("CircIn",function(t){return-(Math.sqrt(1-t*t)-1)}),u("CircInOut",function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)})),o=function(e,n,i){var o=c("easing."+e,function(t,e){this._p1=t>=1?t:1,this._p2=(e||i)/(1>t?t:1),this._p3=this._p2/a*(Math.asin(1/this._p1)||0),this._p2=a/this._p2},!0),r=o.prototype=new t;return r.constructor=o,r.getRatio=n,r.config=function(t,e){return new o(t,e)},o},d("Elastic",o("ElasticOut",function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*this._p2)+1},.3),o("ElasticIn",function(t){return-(this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2))},.3),o("ElasticInOut",function(t){return(t*=2)<1?-.5*(this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2)):this._p1*Math.pow(2,-10*(t-=1))*Math.sin((t-this._p3)*this._p2)*.5+1},.45)),d("Expo",u("ExpoOut",function(t){return 1-Math.pow(2,-10*t)}),u("ExpoIn",function(t){return Math.pow(2,10*(t-1))-.001}),u("ExpoInOut",function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))})),d("Sine",u("SineOut",function(t){return Math.sin(t*l)}),u("SineIn",function(t){return-Math.cos(t*l)+1}),u("SineInOut",function(t){return-.5*(Math.cos(Math.PI*t)-1)})),c("easing.EaseLookup",{find:function(e){return t.map[e]}},!0),h(r.SlowMo,"SlowMo","ease,"),h(i,"RoughEase","ease,"),h(e,"SteppedEase","ease,"),g},!0)}),n._gsDefine&&n._gsQueue.pop()()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],TimelineLite:[function(t,e,n){(function(n){var i="undefined"!=typeof e&&e.exports&&"undefined"!=typeof n?n:this||window;(i._gsQueue||(i._gsQueue=[])).push(function(){"use strict";i._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,n){var o=function(t){e.call(this,t),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var n,i,o=this.vars;for(i in o)n=o[i],c(n)&&-1!==n.join("").indexOf("{self}")&&(o[i]=this._swapSelfInParams(n));c(o.tweens)&&this.add(o.tweens,0,o.align,o.stagger)},r=1e-10,s=n._internals,a=o._internals={},l=s.isSelector,c=s.isArray,u=s.lazyTweens,h=s.lazyRender,d=[],f=i._gsDefine.globals,p=function(t){var e,n={};for(e in t)n[e]=t[e];return n},g=a.pauseCallback=function(t,e,n,i){var o,s=t._timeline,a=s._totalTime,l=t._startTime,c=t._rawPrevTime<0||0===t._rawPrevTime&&s._reversed,u=c?0:r,h=c?r:0;if(e||!this._forcingPlayhead){for(s.pause(l),o=t._prev;o&&o._startTime===l;)o._rawPrevTime=h,o=o._prev;for(o=t._next;o&&o._startTime===l;)o._rawPrevTime=u,o=o._next;e&&e.apply(i||s,n||d),!this._forcingPlayhead&&s._paused||s.seek(a)}},m=function(t){var e,n=[],i=t.length;for(e=0;e!==i;n.push(t[e++]));return n},v=o.prototype=new e;return o.version="1.16.1",v.constructor=o,v.kill()._gc=v._forcingPlayhead=!1,v.to=function(t,e,i,o){var r=i.repeat&&f.TweenMax||n;return e?this.add(new r(t,e,i),o):this.set(t,i,o)},v.from=function(t,e,i,o){return this.add((i.repeat&&f.TweenMax||n).from(t,e,i),o)},v.fromTo=function(t,e,i,o,r){var s=o.repeat&&f.TweenMax||n;return e?this.add(s.fromTo(t,e,i,o),r):this.set(t,o,r)},v.staggerTo=function(t,e,i,r,s,a,c,u){var h,d=new o({onComplete:a,onCompleteParams:c,onCompleteScope:u,smoothChildTiming:this.smoothChildTiming});for("string"==typeof t&&(t=n.selector(t)||t),t=t||[],l(t)&&(t=m(t)),r=r||0,0>r&&(t=m(t),t.reverse(),r*=-1),h=0;h<t.length;h++)i.startAt&&(i.startAt=p(i.startAt)),d.to(t[h],e,p(i),h*r);return this.add(d,s)},v.staggerFrom=function(t,e,n,i,o,r,s,a){return n.immediateRender=0!=n.immediateRender,n.runBackwards=!0,this.staggerTo(t,e,n,i,o,r,s,a)},v.staggerFromTo=function(t,e,n,i,o,r,s,a,l){return i.startAt=n,i.immediateRender=0!=i.immediateRender&&0!=n.immediateRender,this.staggerTo(t,e,i,o,r,s,a,l)},v.call=function(t,e,i,o){return this.add(n.delayedCall(0,t,e,i),o)},v.set=function(t,e,i){return i=this._parseTimeOrLabel(i,0,!0),null==e.immediateRender&&(e.immediateRender=i===this._time&&!this._paused),this.add(new n(t,0,e),i)},o.exportRoot=function(t,e){t=t||{},null==t.smoothChildTiming&&(t.smoothChildTiming=!0);var i,r,s=new o(t),a=s._timeline;for(null==e&&(e=!0),a._remove(s,!0),s._startTime=0,s._rawPrevTime=s._time=s._totalTime=a._time,i=a._first;i;)r=i._next,e&&i instanceof n&&i.target===i.vars.onComplete||s.add(i,i._startTime-i._delay),i=r;return a.add(s,0),s},v.add=function(i,r,s,a){var l,u,h,d,f,p;if("number"!=typeof r&&(r=this._parseTimeOrLabel(r,0,!0,i)),!(i instanceof t)){if(i instanceof Array||i&&i.push&&c(i)){for(s=s||"normal",a=a||0,l=r,u=i.length,h=0;u>h;h++)c(d=i[h])&&(d=new o({tweens:d})),this.add(d,l),"string"!=typeof d&&"function"!=typeof d&&("sequence"===s?l=d._startTime+d.totalDuration()/d._timeScale:"start"===s&&(d._startTime-=d.delay())),l+=a;return this._uncache(!0)}if("string"==typeof i)return this.addLabel(i,r);if("function"!=typeof i)throw"Cannot add "+i+" into the timeline; it is not a tween, timeline, function, or string.";i=n.delayedCall(0,i)}if(e.prototype.add.call(this,i,r),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(f=this,p=f.rawTime()>i._startTime;f._timeline;)p&&f._timeline.smoothChildTiming?f.totalTime(f._totalTime,!0):f._gc&&f._enabled(!0,!1),f=f._timeline;return this},v.remove=function(e){if(e instanceof t)return this._remove(e,!1);if(e instanceof Array||e&&e.push&&c(e)){for(var n=e.length;--n>-1;)this.remove(e[n]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},v._remove=function(t,n){e.prototype._remove.call(this,t,n);var i=this._last;return i?this._time>i._startTime+i._totalDuration/i._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},v.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},v.insert=v.insertMultiple=function(t,e,n,i){return this.add(t,e||0,n,i)},v.appendMultiple=function(t,e,n,i){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),n,i)},v.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},v.addPause=function(t,e,i,o){var r=n.delayedCall(0,g,["{self}",e,i,o],this);return r.data="isPause",this.add(r,t)},v.removeLabel=function(t){return delete this._labels[t],this},v.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},v._parseTimeOrLabel=function(e,n,i,o){var r;if(o instanceof t&&o.timeline===this)this.remove(o);else if(o&&(o instanceof Array||o.push&&c(o)))for(r=o.length;--r>-1;)o[r]instanceof t&&o[r].timeline===this&&this.remove(o[r]);if("string"==typeof n)return this._parseTimeOrLabel(n,i&&"number"==typeof e&&null==this._labels[n]?e-this.duration():0,i);if(n=n||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=this.duration());else{if(r=e.indexOf("="),-1===r)return null==this._labels[e]?i?this._labels[e]=this.duration()+n:n:this._labels[e]+n;n=parseInt(e.charAt(r-1)+"1",10)*Number(e.substr(r+1)),e=r>1?this._parseTimeOrLabel(e.substr(0,r-1),0,i):this.duration()}return Number(e)+n},v.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),e!==!1)},v.stop=function(){return this.paused(!0)},v.gotoAndPlay=function(t,e){return this.play(t,e)},v.gotoAndStop=function(t,e){return this.pause(t,e)},v.render=function(t,e,n){this._gc&&this._enabled(!0,!1);var i,o,s,a,l,c=this._dirty?this.totalDuration():this._totalDuration,f=this._time,p=this._startTime,g=this._timeScale,m=this._paused;if(t>=c)this._totalTime=this._time=c,this._reversed||this._hasPausedChild()||(o=!0,a="onComplete",l=!!this._timeline.autoRemoveChildren,0===this._duration&&(0===t||this._rawPrevTime<0||this._rawPrevTime===r)&&this._rawPrevTime!==t&&this._first&&(l=!0,this._rawPrevTime>r&&(a="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,t=c+1e-4;else if(1e-7>t)if(this._totalTime=this._time=0,(0!==f||0===this._duration&&this._rawPrevTime!==r&&(this._rawPrevTime>0||0>t&&this._rawPrevTime>=0))&&(a="onReverseComplete",o=this._reversed),0>t)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(l=o=!0,a="onReverseComplete"):this._rawPrevTime>=0&&this._first&&(l=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,0===t&&o)for(i=this._first;i&&0===i._startTime;)i._duration||(o=!1),i=i._next;t=0,this._initted||(l=!0)}else this._totalTime=this._time=this._rawPrevTime=t;if(this._time!==f&&this._first||n||l){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==f&&t>0&&(this._active=!0),0===f&&this.vars.onStart&&0!==this._time&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||d)),this._time>=f)for(i=this._first;i&&(s=i._next,!this._paused||m);)(i._active||i._startTime<=this._time&&!i._paused&&!i._gc)&&(i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(t-i._startTime)*i._timeScale,e,n):i.render((t-i._startTime)*i._timeScale,e,n)),i=s;else for(i=this._last;i&&(s=i._prev,!this._paused||m);)(i._active||i._startTime<=f&&!i._paused&&!i._gc)&&(i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(t-i._startTime)*i._timeScale,e,n):i.render((t-i._startTime)*i._timeScale,e,n)),i=s;this._onUpdate&&(e||(u.length&&h(),this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||d))),a&&(this._gc||p!==this._startTime&&g===this._timeScale||(0===this._time||c>=this.totalDuration())&&(o&&(u.length&&h(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[a]&&this.vars[a].apply(this.vars[a+"Scope"]||this,this.vars[a+"Params"]||d)))}},v._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof o&&t._hasPausedChild())return!0;t=t._next}return!1},v.getChildren=function(t,e,i,o){o=o||-9999999999;for(var r=[],s=this._first,a=0;s;)s._startTime<o||(s instanceof n?e!==!1&&(r[a++]=s):(i!==!1&&(r[a++]=s),t!==!1&&(r=r.concat(s.getChildren(!0,e,i)),a=r.length))),s=s._next;return r},v.getTweensOf=function(t,e){var i,o,r=this._gc,s=[],a=0;for(r&&this._enabled(!0,!0),i=n.getTweensOf(t),o=i.length;--o>-1;)(i[o].timeline===this||e&&this._contains(i[o]))&&(s[a++]=i[o]);return r&&this._enabled(!1,!0),s},v.recent=function(){return this._recent},v._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},v.shiftChildren=function(t,e,n){n=n||0;for(var i,o=this._first,r=this._labels;o;)o._startTime>=n&&(o._startTime+=t),o=o._next;if(e)for(i in r)r[i]>=n&&(r[i]+=t);return this._uncache(!0)},v._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);for(var n=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),i=n.length,o=!1;--i>-1;)n[i]._kill(t,e)&&(o=!0);return o},v.clear=function(t){var e=this.getChildren(!1,!0,!0),n=e.length;for(this._time=this._totalTime=0;--n>-1;)e[n]._enabled(!1,!1);return t!==!1&&(this._labels={}),this._uncache(!0)},v.invalidate=function(){for(var e=this._first;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},v._enabled=function(t,n){if(t===this._gc)for(var i=this._first;i;)i._enabled(t,!0),i=i._next;return e.prototype._enabled.call(this,t,n)},v.totalTime=function(e,n,i){this._forcingPlayhead=!0;var o=t.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,o},v.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},v.totalDuration=function(t){if(!arguments.length){if(this._dirty){for(var e,n,i=0,o=this._last,r=999999999999;o;)e=o._prev,o._dirty&&o.totalDuration(),o._startTime>r&&this._sortChildren&&!o._paused?this.add(o,o._startTime-o._delay):r=o._startTime,
o._startTime<0&&!o._paused&&(i-=o._startTime,this._timeline.smoothChildTiming&&(this._startTime+=o._startTime/this._timeScale),this.shiftChildren(-o._startTime,!1,-9999999999),r=0),n=o._startTime+o._totalDuration/o._timeScale,n>i&&(i=n),o=e;this._duration=this._totalDuration=i,this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==t&&this.timeScale(this._totalDuration/t),this},v.paused=function(e){if(!e)for(var n=this._first,i=this._time;n;)n._startTime===i&&"isPause"===n.data&&(n._rawPrevTime=0),n=n._next;return t.prototype.paused.apply(this,arguments)},v.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===t._rootFramesTimeline},v.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},o},!0)}),i._gsDefine&&i._gsQueue.pop()(),function(n){"use strict";var o=function(){return(i.GreenSockGlobals||i)[n]};"function"==typeof define&&define.amd?define(["TweenLite"],o):"undefined"!=typeof e&&e.exports&&(t("./TweenLite.js"),e.exports=o())}("TimelineLite")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./TweenLite.js":"TweenLite"}],TweenLite:[function(t,e,n){(function(t){!function(t,n){"use strict";var i=t.GreenSockGlobals=t.GreenSockGlobals||t;if(!i.TweenLite){var o,r,s,a,l,c=function(t){var e,n=t.split("."),o=i;for(e=0;e<n.length;e++)o[n[e]]=o=o[n[e]]||{};return o},u=c("com.greensock"),h=1e-10,d=function(t){var e,n=[],i=t.length;for(e=0;e!==i;n.push(t[e++]));return n},f=function(){},p=function(){var t=Object.prototype.toString,e=t.call([]);return function(n){return null!=n&&(n instanceof Array||"object"==typeof n&&!!n.push&&t.call(n)===e)}}(),g={},m=function(o,r,s,a){this.sc=g[o]?g[o].sc:[],g[o]=this,this.gsClass=null,this.func=s;var l=[];this.check=function(u){for(var h,d,f,p,v=r.length,y=v;--v>-1;)(h=g[r[v]]||new m(r[v],[])).gsClass?(l[v]=h.gsClass,y--):u&&h.sc.push(this);if(0===y&&s)for(d=("com.greensock."+o).split("."),f=d.pop(),p=c(d.join("."))[f]=this.gsClass=s.apply(s,l),a&&(i[f]=p,"function"==typeof define&&define.amd?define((t.GreenSockAMDPath?t.GreenSockAMDPath+"/":"")+o.split(".").pop(),[],function(){return p}):o===n&&"undefined"!=typeof e&&e.exports&&(e.exports=p)),v=0;v<this.sc.length;v++)this.sc[v].check()},this.check(!0)},v=t._gsDefine=function(t,e,n,i){return new m(t,e,n,i)},y=u._class=function(t,e,n){return e=e||function(){},v(t,[],function(){return e},n),e};v.globals=i;var w=[0,0,1,1],b=[],C=y("easing.Ease",function(t,e,n,i){this._func=t,this._type=n||0,this._power=i||0,this._params=e?w.concat(e):w},!0),x=C.map={},S=C.register=function(t,e,n,i){for(var o,r,s,a,l=e.split(","),c=l.length,h=(n||"easeIn,easeOut,easeInOut").split(",");--c>-1;)for(r=l[c],o=i?y("easing."+r,null,!0):u.easing[r]||{},s=h.length;--s>-1;)a=h[s],x[r+"."+a]=x[a+r]=o[a]=t.getRatio?t:t[a]||new t};for(s=C.prototype,s._calcEnd=!1,s.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,n=this._power,i=1===e?1-t:2===e?t:.5>t?2*t:2*(1-t);return 1===n?i*=i:2===n?i*=i*i:3===n?i*=i*i*i:4===n&&(i*=i*i*i*i),1===e?1-i:2===e?i:.5>t?i/2:1-i/2},o=["Linear","Quad","Cubic","Quart","Quint,Strong"],r=o.length;--r>-1;)s=o[r]+",Power"+r,S(new C(null,null,1,r),s,"easeOut",!0),S(new C(null,null,2,r),s,"easeIn"+(0===r?",easeNone":"")),S(new C(null,null,3,r),s,"easeInOut");x.linear=u.easing.Linear.easeIn,x.swing=u.easing.Quad.easeInOut;var T=y("events.EventDispatcher",function(t){this._listeners={},this._eventTarget=t||this});s=T.prototype,s.addEventListener=function(t,e,n,i,o){o=o||0;var r,s,c=this._listeners[t],u=0;for(null==c&&(this._listeners[t]=c=[]),s=c.length;--s>-1;)r=c[s],r.c===e&&r.s===n?c.splice(s,1):0===u&&r.pr<o&&(u=s+1);c.splice(u,0,{c:e,s:n,up:i,pr:o}),this!==a||l||a.wake()},s.removeEventListener=function(t,e){var n,i=this._listeners[t];if(i)for(n=i.length;--n>-1;)if(i[n].c===e)return void i.splice(n,1)},s.dispatchEvent=function(t){var e,n,i,o=this._listeners[t];if(o)for(e=o.length,n=this._eventTarget;--e>-1;)i=o[e],i&&(i.up?i.c.call(i.s||n,{type:t,target:n}):i.c.call(i.s||n))};var _=t.requestAnimationFrame,E=t.cancelAnimationFrame,k=Date.now||function(){return(new Date).getTime()},R=k();for(o=["ms","moz","webkit","o"],r=o.length;--r>-1&&!_;)_=t[o[r]+"RequestAnimationFrame"],E=t[o[r]+"CancelAnimationFrame"]||t[o[r]+"CancelRequestAnimationFrame"];y("Ticker",function(t,e){var n,i,o,r,s,c=this,u=k(),d=e!==!1&&_,p=500,g=33,m="tick",v=function(t){var e,a,l=k()-R;l>p&&(u+=l-g),R+=l,c.time=(R-u)/1e3,e=c.time-s,(!n||e>0||t===!0)&&(c.frame++,s+=e+(e>=r?.004:r-e),a=!0),t!==!0&&(o=i(v)),a&&c.dispatchEvent(m)};T.call(c),c.time=c.frame=0,c.tick=function(){v(!0)},c.lagSmoothing=function(t,e){p=t||1/h,g=Math.min(e,p,0)},c.sleep=function(){null!=o&&(d&&E?E(o):clearTimeout(o),i=f,o=null,c===a&&(l=!1))},c.wake=function(){null!==o?c.sleep():c.frame>10&&(R=k()-p+5),i=0===n?f:d&&_?_:function(t){return setTimeout(t,1e3*(s-c.time)+1|0)},c===a&&(l=!0),v(2)},c.fps=function(t){return arguments.length?(n=t,r=1/(n||60),s=this.time+r,void c.wake()):n},c.useRAF=function(t){return arguments.length?(c.sleep(),d=t,void c.fps(n)):d},c.fps(t),setTimeout(function(){d&&c.frame<5&&c.useRAF(!1)},1500)}),s=u.Ticker.prototype=new u.events.EventDispatcher,s.constructor=u.Ticker;var A=y("core.Animation",function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=e.immediateRender===!0,this.data=e.data,this._reversed=e.reversed===!0,U){l||a.wake();var n=this.vars.useFrames?j:U;n.add(this,n._time),this.vars.paused&&this.paused(!0)}});a=A.ticker=new u.Ticker,s=A.prototype,s._dirty=s._gc=s._initted=s._paused=!1,s._totalTime=s._time=0,s._rawPrevTime=-1,s._next=s._last=s._onUpdate=s._timeline=s.timeline=null,s._paused=!1;var P=function(){l&&k()-R>2e3&&a.wake(),setTimeout(P,2e3)};P(),s.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},s.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},s.resume=function(t,e){return null!=t&&this.seek(t,e),this.paused(!1)},s.seek=function(t,e){return this.totalTime(Number(t),e!==!1)},s.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,e!==!1,!0)},s.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},s.render=function(t,e,n){},s.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,!this._gc&&this.timeline||this._enabled(!0),this},s.isActive=function(){var t,e=this._timeline,n=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime())>=n&&t<n+this.totalDuration()/this._timeScale},s._enabled=function(t,e){return l||a.wake(),this._gc=!t,this._active=this.isActive(),e!==!0&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},s._kill=function(t,e){return this._enabled(!1,!1)},s.kill=function(t,e){return this._kill(t,e),this},s._uncache=function(t){for(var e=t?this:this.timeline;e;)e._dirty=!0,e=e.timeline;return this},s._swapSelfInParams=function(t){for(var e=t.length,n=t.concat();--e>-1;)"{self}"===t[e]&&(n[e]=this);return n},s.eventCallback=function(t,e,n,i){if("on"===(t||"").substr(0,2)){var o=this.vars;if(1===arguments.length)return o[t];null==e?delete o[t]:(o[t]=e,o[t+"Params"]=p(n)&&-1!==n.join("").indexOf("{self}")?this._swapSelfInParams(n):n,o[t+"Scope"]=i),"onUpdate"===t&&(this._onUpdate=e)}return this},s.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},s.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},s.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},s.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},s.totalTime=function(t,e,n){if(l||a.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>t&&!n&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var i=this._totalDuration,o=this._timeline;if(t>i&&!n&&(t=i),this._startTime=(this._paused?this._pauseTime:o._time)-(this._reversed?i-t:t)/this._timeScale,o._dirty||this._uncache(!1),o._timeline)for(;o._timeline;)o._timeline._time!==(o._startTime+o._totalTime)/o._timeScale&&o.totalTime(o._totalTime,!0),o=o._timeline}this._gc&&this._enabled(!0,!1),this._totalTime===t&&0!==this._duration||(this.render(t,e,!1),H.length&&Y())}return this},s.progress=s.totalProgress=function(t,e){return arguments.length?this.totalTime(this.duration()*t,e):this._time/this.duration()},s.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},s.endTime=function(t){return this._startTime+(0!=t?this.totalDuration():this.duration())/this._timeScale},s.timeScale=function(t){if(!arguments.length)return this._timeScale;if(t=t||h,this._timeline&&this._timeline.smoothChildTiming){var e=this._pauseTime,n=e||0===e?e:this._timeline.totalTime();this._startTime=n-(n-this._startTime)*this._timeScale/t}return this._timeScale=t,this._uncache(!1)},s.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},s.paused=function(t){if(!arguments.length)return this._paused;var e,n,i=this._timeline;return t!=this._paused&&i&&(l||t||a.wake(),e=i.rawTime(),n=e-this._pauseTime,!t&&i.smoothChildTiming&&(this._startTime+=n,this._uncache(!1)),this._pauseTime=t?e:null,this._paused=t,this._active=this.isActive(),!t&&0!==n&&this._initted&&this.duration()&&this.render(i.smoothChildTiming?this._totalTime:(e-this._startTime)/this._timeScale,!0,!0)),this._gc&&!t&&this._enabled(!0,!1),this};var N=y("core.SimpleTimeline",function(t){A.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0});s=N.prototype=new A,s.constructor=N,s.kill()._gc=!1,s._first=s._last=s._recent=null,s._sortChildren=!1,s.add=s.insert=function(t,e,n,i){var o,r;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=t._startTime+(this.rawTime()-t._startTime)/t._timeScale),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),o=this._last,this._sortChildren)for(r=t._startTime;o&&o._startTime>r;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=o,this._recent=t,this._timeline&&this._uncache(!0),this},s._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),t._next=t._prev=t.timeline=null,t===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},s.render=function(t,e,n){var i,o=this._first;for(this._totalTime=this._time=this._rawPrevTime=t;o;)i=o._next,(o._active||t>=o._startTime&&!o._paused)&&(o._reversed?o.render((o._dirty?o.totalDuration():o._totalDuration)-(t-o._startTime)*o._timeScale,e,n):o.render((t-o._startTime)*o._timeScale,e,n)),o=i},s.rawTime=function(){return l||a.wake(),this._totalTime};var O=y("TweenLite",function(e,n,i){if(A.call(this,n,i),this.render=O.prototype.render,null==e)throw"Cannot tween a null target.";this.target=e="string"!=typeof e?e:O.selector(e)||e;var o,r,s,a=e.jquery||e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType),l=this.vars.overwrite;if(this._overwrite=l=null==l?W[O.defaultOverwrite]:"number"==typeof l?l>>0:W[l],(a||e instanceof Array||e.push&&p(e))&&"number"!=typeof e[0])for(this._targets=s=d(e),this._propLookup=[],this._siblings=[],o=0;o<s.length;o++)r=s[o],r?"string"!=typeof r?r.length&&r!==t&&r[0]&&(r[0]===t||r[0].nodeType&&r[0].style&&!r.nodeType)?(s.splice(o--,1),this._targets=s=s.concat(d(r))):(this._siblings[o]=q(r,this,!1),1===l&&this._siblings[o].length>1&&$(r,this,null,1,this._siblings[o])):(r=s[o--]=O.selector(r),"string"==typeof r&&s.splice(o+1,1)):s.splice(o--,1);else this._propLookup={},this._siblings=q(e,this,!1),1===l&&this._siblings.length>1&&$(e,this,null,1,this._siblings);(this.vars.immediateRender||0===n&&0===this._delay&&this.vars.immediateRender!==!1)&&(this._time=-h,this.render(-this._delay))},!0),D=function(e){return e&&e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType)},M=function(t,e){var n,i={};for(n in t)V[n]||n in e&&"transform"!==n&&"x"!==n&&"y"!==n&&"width"!==n&&"height"!==n&&"className"!==n&&"border"!==n||!(!F[n]||F[n]&&F[n]._autoCSS)||(i[n]=t[n],delete t[n]);t.css=i};s=O.prototype=new A,s.constructor=O,s.kill()._gc=!1,s.ratio=0,s._firstPT=s._targets=s._overwrittenProps=s._startAt=null,s._notifyPluginsOfEnabled=s._lazy=!1,O.version="1.16.1",O.defaultEase=s._ease=new C(null,null,1,1),O.defaultOverwrite="auto",O.ticker=a,O.autoSleep=120,O.lagSmoothing=function(t,e){a.lagSmoothing(t,e)},O.selector=t.$||t.jQuery||function(e){var n=t.$||t.jQuery;return n?(O.selector=n,n(e)):"undefined"==typeof document?e:document.querySelectorAll?document.querySelectorAll(e):document.getElementById("#"===e.charAt(0)?e.substr(1):e)};var H=[],I={},L=O._internals={isArray:p,isSelector:D,lazyTweens:H},F=O._plugins={},z=L.tweenLookup={},B=0,V=L.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1},W={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},j=A._rootFramesTimeline=new N,U=A._rootTimeline=new N,X=30,Y=L.lazyRender=function(){var t,e=H.length;for(I={};--e>-1;)t=H[e],t&&t._lazy!==!1&&(t.render(t._lazy[0],t._lazy[1],!0),t._lazy=!1);H.length=0};U._startTime=a.time,j._startTime=a.frame,U._active=j._active=!0,setTimeout(Y,1),A._updateRoot=O.render=function(){var t,e,n;if(H.length&&Y(),U.render((a.time-U._startTime)*U._timeScale,!1,!1),j.render((a.frame-j._startTime)*j._timeScale,!1,!1),H.length&&Y(),a.frame>=X){X=a.frame+(parseInt(O.autoSleep,10)||120);for(n in z){for(e=z[n].tweens,t=e.length;--t>-1;)e[t]._gc&&e.splice(t,1);0===e.length&&delete z[n]}if(n=U._first,(!n||n._paused)&&O.autoSleep&&!j._first&&1===a._listeners.tick.length){for(;n&&n._paused;)n=n._next;n||a.sleep()}}},a.addEventListener("tick",A._updateRoot);var q=function(t,e,n){var i,o,r=t._gsTweenID;if(z[r||(t._gsTweenID=r="t"+B++)]||(z[r]={target:t,tweens:[]}),e&&(i=z[r].tweens,i[o=i.length]=e,n))for(;--o>-1;)i[o]===e&&i.splice(o,1);return z[r].tweens},G=function(t,e,n,i){var o,r,s=t.vars.onOverwrite;return s&&(o=s(t,e,n,i)),s=O.onOverwrite,s&&(r=s(t,e,n,i)),o!==!1&&r!==!1},$=function(t,e,n,i,o){var r,s,a,l;if(1===i||i>=4){for(l=o.length,r=0;l>r;r++)if((a=o[r])!==e)a._gc||G(a,e)&&a._enabled(!1,!1)&&(s=!0);else if(5===i)break;return s}var c,u=e._startTime+h,d=[],f=0,p=0===e._duration;for(r=o.length;--r>-1;)(a=o[r])===e||a._gc||a._paused||(a._timeline!==e._timeline?(c=c||K(e,0,p),0===K(a,c,p)&&(d[f++]=a)):a._startTime<=u&&a._startTime+a.totalDuration()/a._timeScale>u&&((p||!a._initted)&&u-a._startTime<=2e-10||(d[f++]=a)));for(r=f;--r>-1;)if(a=d[r],2===i&&a._kill(n,t,e)&&(s=!0),2!==i||!a._firstPT&&a._initted){if(2!==i&&!G(a,e))continue;a._enabled(!1,!1)&&(s=!0)}return s},K=function(t,e,n){for(var i=t._timeline,o=i._timeScale,r=t._startTime;i._timeline;){if(r+=i._startTime,o*=i._timeScale,i._paused)return-100;i=i._timeline}return r/=o,r>e?r-e:n&&r===e||!t._initted&&2*h>r-e?h:(r+=t.totalDuration()/t._timeScale/o)>e+h?0:r-e-h};s._init=function(){var t,e,n,i,o,r=this.vars,s=this._overwrittenProps,a=this._duration,l=!!r.immediateRender,c=r.ease;if(r.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),o={};for(i in r.startAt)o[i]=r.startAt[i];if(o.overwrite=!1,o.immediateRender=!0,o.lazy=l&&r.lazy!==!1,o.startAt=o.delay=null,this._startAt=O.to(this.target,0,o),l)if(this._time>0)this._startAt=null;else if(0!==a)return}else if(r.runBackwards&&0!==a)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(l=!1),n={};for(i in r)V[i]&&"autoCSS"!==i||(n[i]=r[i]);if(n.overwrite=0,n.data="isFromStart",n.lazy=l&&r.lazy!==!1,n.immediateRender=l,this._startAt=O.to(this.target,0,n),l){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=c=c?c instanceof C?c:"function"==typeof c?new C(c,r.easeParams):x[c]||O.defaultEase:O.defaultEase,r.easeParams instanceof Array&&c.config&&(this._ease=c.config.apply(c,r.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(t=this._targets.length;--t>-1;)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],s?s[t]:null)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,s);if(e&&O._onPluginEvent("_onInitAllProps",this),s&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),r.runBackwards)for(n=this._firstPT;n;)n.s+=n.c,n.c=-n.c,n=n._next;this._onUpdate=r.onUpdate,this._initted=!0},s._initProps=function(e,n,i,o){var r,s,a,l,c,u;if(null==e)return!1;I[e._gsTweenID]&&Y(),this.vars.css||e.style&&e!==t&&e.nodeType&&F.css&&this.vars.autoCSS!==!1&&M(this.vars,e);for(r in this.vars){if(u=this.vars[r],V[r])u&&(u instanceof Array||u.push&&p(u))&&-1!==u.join("").indexOf("{self}")&&(this.vars[r]=u=this._swapSelfInParams(u,this));else if(F[r]&&(l=new F[r])._onInitTween(e,this.vars[r],this)){for(this._firstPT=c={_next:this._firstPT,t:l,p:"setRatio",s:0,c:1,f:!0,n:r,pg:!0,pr:l._priority},s=l._overwriteProps.length;--s>-1;)n[l._overwriteProps[s]]=this._firstPT;(l._priority||l._onInitAllProps)&&(a=!0),(l._onDisable||l._onEnable)&&(this._notifyPluginsOfEnabled=!0)}else this._firstPT=n[r]=c={_next:this._firstPT,t:e,p:r,f:"function"==typeof e[r],n:r,pg:!1,pr:0},c.s=c.f?e[r.indexOf("set")||"function"!=typeof e["get"+r.substr(3)]?r:"get"+r.substr(3)]():parseFloat(e[r]),c.c="string"==typeof u&&"="===u.charAt(1)?parseInt(u.charAt(0)+"1",10)*Number(u.substr(2)):Number(u)-c.s||0;c&&c._next&&(c._next._prev=c)}return o&&this._kill(o,e)?this._initProps(e,n,i,o):this._overwrite>1&&this._firstPT&&i.length>1&&$(e,this,n,this._overwrite,i)?(this._kill(n,e),this._initProps(e,n,i,o)):(this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)&&(I[e._gsTweenID]=!0),a)},s.render=function(t,e,n){var i,o,r,s,a=this._time,l=this._duration,c=this._rawPrevTime;if(t>=l)this._totalTime=this._time=l,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(i=!0,o="onComplete",n=n||this._timeline.autoRemoveChildren),0===l&&(this._initted||!this.vars.lazy||n)&&(this._startTime===this._timeline._duration&&(t=0),(0===t||0>c||c===h&&"isPause"!==this.data)&&c!==t&&(n=!0,c>h&&(o="onReverseComplete")),this._rawPrevTime=s=!e||t||c===t?t:h);else if(1e-7>t)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==a||0===l&&c>0)&&(o="onReverseComplete",i=this._reversed),0>t&&(this._active=!1,0===l&&(this._initted||!this.vars.lazy||n)&&(c>=0&&(c!==h||"isPause"!==this.data)&&(n=!0),this._rawPrevTime=s=!e||t||c===t?t:h)),this._initted||(n=!0);else if(this._totalTime=this._time=t,this._easeType){var u=t/l,d=this._easeType,f=this._easePower;(1===d||3===d&&u>=.5)&&(u=1-u),3===d&&(u*=2),1===f?u*=u:2===f?u*=u*u:3===f?u*=u*u*u:4===f&&(u*=u*u*u*u),1===d?this.ratio=1-u:2===d?this.ratio=u:.5>t/l?this.ratio=u/2:this.ratio=1-u/2}else this.ratio=this._ease.getRatio(t/l);if(this._time!==a||n){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!n&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=a,this._rawPrevTime=c,H.push(this),void(this._lazy=[t,e]);this._time&&!i?this.ratio=this._ease.getRatio(this._time/l):i&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==a&&t>=0&&(this._active=!0),0===a&&(this._startAt&&(t>=0?this._startAt.render(t,e,n):o||(o="_dummyGS")),this.vars.onStart&&(0===this._time&&0!==l||e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||b))),r=this._firstPT;r;)r.f?r.t[r.p](r.c*this.ratio+r.s):r.t[r.p]=r.c*this.ratio+r.s,r=r._next;this._onUpdate&&(0>t&&this._startAt&&t!==-1e-4&&this._startAt.render(t,e,n),e||(this._time!==a||i)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||b)),o&&(this._gc&&!n||(0>t&&this._startAt&&!this._onUpdate&&t!==-1e-4&&this._startAt.render(t,e,n),i&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[o]&&this.vars[o].apply(this.vars[o+"Scope"]||this,this.vars[o+"Params"]||b),0===l&&this._rawPrevTime===h&&s!==h&&(this._rawPrevTime=0)))}},s._kill=function(t,e,n){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._lazy=!1,this._enabled(!1,!1);e="string"!=typeof e?e||this._targets||this.target:O.selector(e)||e;var i,o,r,s,a,l,c,u,h;if((p(e)||D(e))&&"number"!=typeof e[0])for(i=e.length;--i>-1;)this._kill(t,e[i])&&(l=!0);else{if(this._targets){for(i=this._targets.length;--i>-1;)if(e===this._targets[i]){a=this._propLookup[i]||{},this._overwrittenProps=this._overwrittenProps||[],o=this._overwrittenProps[i]=t?this._overwrittenProps[i]||{}:"all";break}}else{if(e!==this.target)return!1;a=this._propLookup,o=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(a){if(c=t||a,u=t!==o&&"all"!==o&&t!==a&&("object"!=typeof t||!t._tempKill),n&&(O.onOverwrite||this.vars.onOverwrite)){for(r in c)a[r]&&(h||(h=[]),h.push(r));if(!G(this,n,e,h))return!1}for(r in c)(s=a[r])&&(s.pg&&s.t._kill(c)&&(l=!0),s.pg&&0!==s.t._overwriteProps.length||(s._prev?s._prev._next=s._next:s===this._firstPT&&(this._firstPT=s._next),s._next&&(s._next._prev=s._prev),s._next=s._prev=null),delete a[r]),u&&(o[r]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return l},s.invalidate=function(){return this._notifyPluginsOfEnabled&&O._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],A.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-h,this.render(-this._delay)),this},s._enabled=function(t,e){if(l||a.wake(),t&&this._gc){var n,i=this._targets;if(i)for(n=i.length;--n>-1;)this._siblings[n]=q(i[n],this,!0);else this._siblings=q(this.target,this,!0)}return A.prototype._enabled.call(this,t,e),this._notifyPluginsOfEnabled&&this._firstPT?O._onPluginEvent(t?"_onEnable":"_onDisable",this):!1},O.to=function(t,e,n){return new O(t,e,n)},O.from=function(t,e,n){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,new O(t,e,n)},O.fromTo=function(t,e,n,i){return i.startAt=n,i.immediateRender=0!=i.immediateRender&&0!=n.immediateRender,new O(t,e,i)},O.delayedCall=function(t,e,n,i,o){return new O(e,0,{delay:t,onComplete:e,onCompleteParams:n,onCompleteScope:i,onReverseComplete:e,onReverseCompleteParams:n,onReverseCompleteScope:i,immediateRender:!1,lazy:!1,useFrames:o,overwrite:0})},O.set=function(t,e){return new O(t,0,e)},O.getTweensOf=function(t,e){if(null==t)return[];t="string"!=typeof t?t:O.selector(t)||t;var n,i,o,r;if((p(t)||D(t))&&"number"!=typeof t[0]){for(n=t.length,i=[];--n>-1;)i=i.concat(O.getTweensOf(t[n],e));for(n=i.length;--n>-1;)for(r=i[n],o=n;--o>-1;)r===i[o]&&i.splice(n,1)}else for(i=q(t).concat(),n=i.length;--n>-1;)(i[n]._gc||e&&!i[n].isActive())&&i.splice(n,1);return i},O.killTweensOf=O.killDelayedCallsTo=function(t,e,n){"object"==typeof e&&(n=e,e=!1);for(var i=O.getTweensOf(t,e),o=i.length;--o>-1;)i[o]._kill(n,t)};var Q=y("plugins.TweenPlugin",function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=Q.prototype},!0);if(s=Q.prototype,Q.version="1.10.1",Q.API=2,s._firstPT=null,s._addTween=function(t,e,n,i,o,r){var s,a;return null!=i&&(s="number"==typeof i||"="!==i.charAt(1)?Number(i)-n:parseInt(i.charAt(0)+"1",10)*Number(i.substr(2)))?(this._firstPT=a={_next:this._firstPT,t:t,p:e,s:n,c:s,f:"function"==typeof t[e],n:o||e,r:r},a._next&&(a._next._prev=a),a):void 0},s.setRatio=function(t){for(var e,n=this._firstPT,i=1e-6;n;)e=n.c*t+n.s,n.r?e=Math.round(e):i>e&&e>-i&&(e=0),n.f?n.t[n.p](e):n.t[n.p]=e,n=n._next},s._kill=function(t){var e,n=this._overwriteProps,i=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else for(e=n.length;--e>-1;)null!=t[n[e]]&&n.splice(e,1);for(;i;)null!=t[i.n]&&(i._next&&(i._next._prev=i._prev),i._prev?(i._prev._next=i._next,i._prev=null):this._firstPT===i&&(this._firstPT=i._next)),i=i._next;return!1},s._roundProps=function(t,e){for(var n=this._firstPT;n;)(t[this._propName]||null!=n.n&&t[n.n.split(this._propName+"_").join("")])&&(n.r=e),n=n._next},O._onPluginEvent=function(t,e){var n,i,o,r,s,a=e._firstPT;if("_onInitAllProps"===t){for(;a;){for(s=a._next,i=o;i&&i.pr>a.pr;)i=i._next;(a._prev=i?i._prev:r)?a._prev._next=a:o=a,(a._next=i)?i._prev=a:r=a,a=s}a=e._firstPT=o}for(;a;)a.pg&&"function"==typeof a.t[t]&&a.t[t]()&&(n=!0),a=a._next;return n},Q.activate=function(t){for(var e=t.length;--e>-1;)t[e].API===Q.API&&(F[(new t[e])._propName]=t[e]);return!0},v.plugin=function(t){if(!(t&&t.propName&&t.init&&t.API))throw"illegal plugin definition.";var e,n=t.propName,i=t.priority||0,o=t.overwriteProps,r={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},s=y("plugins."+n.charAt(0).toUpperCase()+n.substr(1)+"Plugin",function(){Q.call(this,n,i),this._overwriteProps=o||[]},t.global===!0),a=s.prototype=new Q(n);a.constructor=s,s.API=t.API;for(e in r)"function"==typeof t[e]&&(a[r[e]]=t[e]);return s.version=t.version,Q.activate([s]),s},o=t._gsQueue){for(r=0;r<o.length;r++)o[r]();for(s in g)g[s].func||t.console.log("GSAP encountered missing dependency: com.greensock."+s)}l=!1}}("undefined"!=typeof e&&e.exports&&"undefined"!=typeof t?t:this||window,"TweenLite")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],backbone:[function(t,e,n){(function(e){!function(i){var o="object"==typeof self&&self.self==self&&self||"object"==typeof e&&e.global==e&&e;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(t,e,n){o.Backbone=i(o,n,t,e)});else if("undefined"!=typeof n){var r,s=t("underscore");i(o,n,s,r)}else o.Backbone=i(o,{},o._,o.jQuery||o.Zepto||o.ender||o.$)}(function(t,e,n,i){var o=t.Backbone,r=[].slice;e.VERSION="1.2.1",e.$=i,e.noConflict=function(){return t.Backbone=o,this},e.emulateHTTP=!1,e.emulateJSON=!1;var s=function(t,e,i){switch(t){case 1:return function(){return n[e](this[i])};case 2:return function(t){return n[e](this[i],t)};case 3:return function(t,o){return n[e](this[i],l(t,this),o)};case 4:return function(t,o,r){return n[e](this[i],l(t,this),o,r)};default:return function(){var t=r.call(arguments);return t.unshift(this[i]),n[e].apply(n,t)}}},a=function(t,e,i){n.each(e,function(e,o){n[o]&&(t.prototype[o]=s(e,o,i))})},l=function(t,e){return n.isFunction(t)?t:n.isObject(t)&&!e._isModel(t)?c(t):n.isString(t)?function(e){return e.get(t)}:t},c=function(t){var e=n.matches(t);return function(t){return e(t.attributes)}},u=e.Events={},h=/\s+/,d=function(t,e,i,o,r){var s,a=0;if(i&&"object"==typeof i){void 0!==o&&"context"in r&&void 0===r.context&&(r.context=o);for(s=n.keys(i);a<s.length;a++)e=d(t,e,s[a],i[s[a]],r)}else if(i&&h.test(i))for(s=i.split(h);a<s.length;a++)e=t(e,s[a],o,r);else e=t(e,i,o,r);return e};u.on=function(t,e,n){return f(this,t,e,n)};var f=function(t,e,n,i,o){if(t._events=d(p,t._events||{},e,n,{context:i,ctx:t,listening:o}),o){var r=t._listeners||(t._listeners={});r[o.id]=o}return t};u.listenTo=function(t,e,i){if(!t)return this;var o=t._listenId||(t._listenId=n.uniqueId("l")),r=this._listeningTo||(this._listeningTo={}),s=r[o];if(!s){var a=this._listenId||(this._listenId=n.uniqueId("l"));s=r[o]={obj:t,objId:o,id:a,listeningTo:r,count:0}}return f(t,e,i,this,s),this};var p=function(t,e,n,i){if(n){var o=t[e]||(t[e]=[]),r=i.context,s=i.ctx,a=i.listening;a&&a.count++,o.push({callback:n,context:r,ctx:r||s,listening:a})}return t};u.off=function(t,e,n){return this._events?(this._events=d(g,this._events,t,e,{context:n,listeners:this._listeners}),this):this},u.stopListening=function(t,e,i){var o=this._listeningTo;if(!o)return this;for(var r=t?[t._listenId]:n.keys(o),s=0;s<r.length;s++){var a=o[r[s]];if(!a)break;a.obj.off(e,i,this)}return n.isEmpty(o)&&(this._listeningTo=void 0),this};var g=function(t,e,i,o){if(t){var r,s=0,a=o.context,l=o.listeners;if(e||i||a){for(var c=e?[e]:n.keys(t);s<c.length;s++){e=c[s];var u=t[e];if(!u)break;for(var h=[],d=0;d<u.length;d++){var f=u[d];i&&i!==f.callback&&i!==f.callback._callback||a&&a!==f.context?h.push(f):(r=f.listening,r&&0===--r.count&&(delete l[r.id],delete r.listeningTo[r.objId]))}h.length?t[e]=h:delete t[e]}return n.size(t)?t:void 0}for(var p=n.keys(l);s<p.length;s++)r=l[p[s]],delete l[r.id],delete r.listeningTo[r.objId]}};u.once=function(t,e,i){var o=d(m,{},t,e,n.bind(this.off,this));return this.on(o,void 0,i)},u.listenToOnce=function(t,e,i){var o=d(m,{},e,i,n.bind(this.stopListening,this,t));return this.listenTo(t,o)};var m=function(t,e,i,o){if(i){var r=t[e]=n.once(function(){o(e,r),i.apply(this,arguments)});r._callback=i}return t};u.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),n=Array(e),i=0;e>i;i++)n[i]=arguments[i+1];return d(v,this._events,t,void 0,n),this};var v=function(t,e,n,i){if(t){var o=t[e],r=t.all;o&&r&&(r=r.slice()),o&&y(o,i),r&&y(r,[e].concat(i))}return t},y=function(t,e){var n,i=-1,o=t.length,r=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++i<o;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<o;)(n=t[i]).callback.call(n.ctx,r);return;case 2:for(;++i<o;)(n=t[i]).callback.call(n.ctx,r,s);return;case 3:for(;++i<o;)(n=t[i]).callback.call(n.ctx,r,s,a);return;default:for(;++i<o;)(n=t[i]).callback.apply(n.ctx,e);return}};u.bind=u.on,u.unbind=u.off,n.extend(e,u);var w=e.Model=function(t,e){var i=t||{};e||(e={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(i=this.parse(i,e)||{}),i=n.defaults({},i,n.result(this,"defaults")),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(w.prototype,u,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!n.iteratee(t,this)(this.attributes)},set:function(t,e,i){if(null==t)return this;var o;if("object"==typeof t?(o=t,i=e):(o={})[t]=e,i||(i={}),!this._validate(o,i))return!1;var r=i.unset,s=i.silent,a=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=n.clone(this.attributes),this.changed={});var c=this.attributes,u=this.changed,h=this._previousAttributes;
for(var d in o)e=o[d],n.isEqual(c[d],e)||a.push(d),n.isEqual(h[d],e)?delete u[d]:u[d]=e,r?delete c[d]:c[d]=e;if(this.id=this.get(this.idAttribute),!s){a.length&&(this._pending=i);for(var f=0;f<a.length;f++)this.trigger("change:"+a[f],this,c[a[f]],i)}if(l)return this;if(!s)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?n.clone(this.changed):!1;var e=this._changing?this._previousAttributes:this.attributes,i={};for(var o in t){var r=t[o];n.isEqual(e[o],r)||(i[o]=r)}return n.size(i)?i:!1},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=n.extend({parse:!0},t);var e=this,i=t.success;return t.success=function(n){var o=t.parse?e.parse(n,t):n;return e.set(o,t)?(i&&i.call(t.context,e,n,t),void e.trigger("sync",e,n,t)):!1},B(this,t),this.sync("read",this,t)},save:function(t,e,i){var o;null==t||"object"==typeof t?(o=t,i=e):(o={})[t]=e,i=n.extend({validate:!0,parse:!0},i);var r=i.wait;if(o&&!r){if(!this.set(o,i))return!1}else if(!this._validate(o,i))return!1;var s=this,a=i.success,l=this.attributes;i.success=function(t){s.attributes=l;var e=i.parse?s.parse(t,i):t;return r&&(e=n.extend({},o,e)),e&&!s.set(e,i)?!1:(a&&a.call(i.context,s,t,i),void s.trigger("sync",s,t,i))},B(this,i),o&&r&&(this.attributes=n.extend({},l,o));var c=this.isNew()?"create":i.patch?"patch":"update";"patch"!==c||i.attrs||(i.attrs=o);var u=this.sync(c,this,i);return this.attributes=l,u},destroy:function(t){t=t?n.clone(t):{};var e=this,i=t.success,o=t.wait,r=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(n){o&&r(),i&&i.call(t.context,e,n,t),e.isNew()||e.trigger("sync",e,n,t)};var s=!1;return this.isNew()?n.defer(t.success):(B(this,t),s=this.sync("delete",this,t)),o||r(),s},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||z();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.defaults({validate:!0},t))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return i?(this.trigger("invalid",this,i,n.extend(e,{validationError:i})),!1):!0}});var b={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};a(w,b,"attributes");var C=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},x={add:!0,remove:!0,merge:!0},S={add:!0,remove:!1};n.extend(C.prototype,u,{model:w,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,S))},remove:function(t,e){e=n.extend({},e);var i=!n.isArray(t);t=i?[t]:n.clone(t);var o=this._removeModels(t,e);return!e.silent&&o&&this.trigger("update",this,e),i?o[0]:o},set:function(t,e){e=n.defaults({},e,x),e.parse&&!this._isModel(t)&&(t=this.parse(t,e));var i=!n.isArray(t);t=i?t?[t]:[]:t.slice();var o,r,s,a,l,c=e.at;null!=c&&(c=+c),0>c&&(c+=this.length+1);for(var u=this.comparator&&null==c&&e.sort!==!1,h=n.isString(this.comparator)?this.comparator:null,d=[],f=[],p={},g=e.add,m=e.merge,v=e.remove,y=!u&&g&&v?[]:!1,w=!1,b=0;b<t.length;b++){if(s=t[b],a=this.get(s))v&&(p[a.cid]=!0),m&&s!==a&&(s=this._isModel(s)?s.attributes:s,e.parse&&(s=a.parse(s,e)),a.set(s,e),u&&!l&&a.hasChanged(h)&&(l=!0)),t[b]=a;else if(g){if(r=t[b]=this._prepareModel(s,e),!r)continue;d.push(r),this._addReference(r,e)}r=a||r,r&&(o=this.modelId(r.attributes),!y||!r.isNew()&&p[o]||(y.push(r),w=w||!this.models[b]||r.cid!==this.models[b].cid),p[o]=!0)}if(v){for(var b=0;b<this.length;b++)p[(r=this.models[b]).cid]||f.push(r);f.length&&this._removeModels(f,e)}if(d.length||w)if(u&&(l=!0),this.length+=d.length,null!=c)for(var b=0;b<d.length;b++)this.models.splice(c+b,0,d[b]);else{y&&(this.models.length=0);for(var C=y||d,b=0;b<C.length;b++)this.models.push(C[b])}if(l&&this.sort({silent:!0}),!e.silent){for(var S=null!=c?n.clone(e):e,b=0;b<d.length;b++)null!=c&&(S.index=c+b),(r=d[b]).trigger("add",r,this,S);(l||w)&&this.trigger("sort",this,e),(d.length||f.length)&&this.trigger("update",this,e)}return i?t[0]:t},reset:function(t,e){e=e?n.clone(e):{};for(var i=0;i<this.models.length;i++)this._removeReference(this.models[i],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return r.apply(this.models,arguments)},get:function(t){if(null!=t){var e=this.modelId(this._isModel(t)?t.attributes:t);return this._byId[t]||this._byId[e]||this._byId[t.cid]}},at:function(t){return 0>t&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return n.invoke(this.models,"get",t)},fetch:function(t){t=n.extend({parse:!0},t);var e=t.success,i=this;return t.success=function(n){var o=t.reset?"reset":"set";i[o](n,t),e&&e.call(t.context,i,n,t),i.trigger("sync",i,n,t)},B(this,t),this.sync("read",this,t)},create:function(t,e){e=e?n.clone(e):{};var i=e.wait;if(t=this._prepareModel(t,e),!t)return!1;i||this.add(t,e);var o=this,r=e.success;return e.success=function(t,e,n){i&&o.add(t,n),r&&r.call(n.context,t,e,n)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;e=e?n.clone(e):{},e.collection=this;var i=new this.model(t,e);return i.validationError?(this.trigger("invalid",this,i.validationError,e),!1):i},_removeModels:function(t,e){for(var n=[],i=0;i<t.length;i++){var o=this.get(t[i]);if(o){var r=this.indexOf(o);this.models.splice(r,1),this.length--,e.silent||(e.index=r,o.trigger("remove",o,this,e)),n.push(o),this._removeReference(o,e)}}return n.length?n:!1},_isModel:function(t){return t instanceof w},_addReference:function(t,e){this._byId[t.cid]=t;var n=this.modelId(t.attributes);null!=n&&(this._byId[n]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var n=this.modelId(t.attributes);null!=n&&delete this._byId[n],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){if("add"!==t&&"remove"!==t||n===this){if("destroy"===t&&this.remove(e,i),"change"===t){var o=this.modelId(e.previousAttributes()),r=this.modelId(e.attributes);o!==r&&(null!=o&&delete this._byId[o],null!=r&&(this._byId[r]=e))}this.trigger.apply(this,arguments)}}});var T={forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:2,contains:2,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3};a(C,T,"models");var _=e.View=function(t){this.cid=n.uniqueId("view"),n.extend(this,n.pick(t,k)),this._ensureElement(),this.initialize.apply(this,arguments)},E=/^(\S+)\s*(.*)$/,k=["model","collection","el","id","attributes","className","tagName","events"];n.extend(_.prototype,u,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=n.result(this,"events")),!t)return this;this.undelegateEvents();for(var e in t){var i=t[e];if(n.isFunction(i)||(i=this[i]),i){var o=e.match(E);this.delegate(o[1],o[2],n.bind(i,this))}}return this},delegate:function(t,e,n){return this.$el.on(t+".delegateEvents"+this.cid,e,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,n){return this.$el.off(t+".delegateEvents"+this.cid,e,n),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t["class"]=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,i,o){var r=R[t];n.defaults(o||(o={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var s={type:r,dataType:"json"};if(o.url||(s.url=n.result(i,"url")||z()),null!=o.data||!i||"create"!==t&&"update"!==t&&"patch"!==t||(s.contentType="application/json",s.data=JSON.stringify(o.attrs||i.toJSON(o))),o.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),o.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){s.type="POST",o.emulateJSON&&(s.data._method=r);var a=o.beforeSend;o.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",r),a?a.apply(this,arguments):void 0}}"GET"===s.type||o.emulateJSON||(s.processData=!1);var l=o.error;o.error=function(t,e,n){o.textStatus=e,o.errorThrown=n,l&&l.call(o.context,t,e,n)};var c=o.xhr=e.ajax(n.extend(s,o));return i.trigger("request",i,c,o),c};var R={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var A=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},P=/\((.*?)\)/g,N=/(\(\?)?:\w+/g,O=/\*\w+/g,D=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(A.prototype,u,{initialize:function(){},route:function(t,i,o){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(i)&&(o=i,i=""),o||(o=this[i]);var r=this;return e.history.route(t,function(n){var s=r._extractParameters(t,n);r.execute(o,s,i)!==!1&&(r.trigger.apply(r,["route:"+i].concat(s)),r.trigger("route",i,s),e.history.trigger("route",r,i,s))}),this},execute:function(t,e,n){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(D,"\\$&").replace(P,"(?:$1)?").replace(N,function(t,e){return e?t:"([^/?]+)"}).replace(O,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return n.map(i,function(t,e){return e===i.length-1?t||null:t?decodeURIComponent(t):null})}});var M=e.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},H=/^[#\/]|\s+$/g,I=/^\/+|\/+$/g,L=/#.*$/;M.started=!1,n.extend(M.prototype,u,{interval:50,atRoot:function(){var t=this.location.pathname.replace(/[^\/]$/,"$&/");return t===this.root&&!this.getSearch()},matchRoot:function(){var t=this.decodeFragment(this.location.pathname),e=t.slice(0,this.root.length-1)+"/";return e===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(H,"")},start:function(t){if(M.started)throw new Error("Backbone.history has already been started");if(M.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window,this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(I,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var i=document.body,o=i.insertBefore(this.iframe,i.firstChild).contentWindow;o.document.open(),o.document.close(),o.location.hash="#"+this.fragment}var r=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};return this._usePushState?r("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?r("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.options.silent?void 0:this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),M.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(t){return this.matchRoot()?(t=this.fragment=this.getFragment(t),n.some(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})):!1},navigate:function(t,e){if(!M.started)return!1;e&&e!==!0||(e={trigger:!!e}),t=this.getFragment(t||"");var n=this.root;""!==t&&"?"!==t.charAt(0)||(n=n.slice(0,-1)||"/");var i=n+t;if(t=this.decodeFragment(t.replace(L,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var o=this.iframe.contentWindow;e.replace||(o.document.open(),o.document.close()),this._updateHash(o.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),e.history=new M;var F=function(t,e){var i,o=this;i=t&&n.has(t,"constructor")?t.constructor:function(){return o.apply(this,arguments)},n.extend(i,o,e);var r=function(){this.constructor=i};return r.prototype=o.prototype,i.prototype=new r,t&&n.extend(i.prototype,t),i.__super__=o.prototype,i};w.extend=C.extend=A.extend=_.extend=M.extend=F;var z=function(){throw new Error('A "url" property or function must be specified')},B=function(t,e){var n=e.error;e.error=function(i){n&&n.call(e.context,t,i,e),t.trigger("error",t,i,e)}};return e})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{underscore:2}],"chartist-plugin-tooltip":[function(t,e,n){!function(i,o){"function"==typeof define&&define.amd?define(["chartist"],function(t){return i.returnExportsGlobal=o(t)}):"object"==typeof n?e.exports=o(t("chartist")):i["Chartist.plugins.tooltip"]=o(i.Chartist)}(this,function(t){"use strict";var e={valueTransform:t.noop,seriesName:!0};return t.plugins=t.plugins||{},t.plugins.tooltip=function(n){return n=t.extend({},e,n),function(e){var i=".ct-point";e instanceof t.Bar?i=".ct-bar":e instanceof t.Pie&&(i="[class^=ct-slice]");var o=$(e.container),r=o.append('<div class="ct-tooltip"></div>').find(".ct-tooltip").hide();o.on("mouseenter",i,function(){var t=$(this),e=t.parent().attr("ct:series-name"),i="";n.seriesName&&e&&(i+=e+"<br>"),t.attr("ct:meta")&&(i+=t.attr("ct:meta")+"<br>");var o=t.attr("ct:value")||"0";i+=n.valueTransform(o),r.html(i).show()}),o.on("mouseleave",i,function(){r.hide()}),o.on("mousemove",function(t){var e=$(t.target).parents(".ct-chart").siblings(".chart-title").height()+$(t.target).parents(".ct-chart").siblings(".chart-subtitle").height();navigator.userAgent.toLowerCase().indexOf("firefox")>-1?(e-="ct-slice-pie"===$(t.target).attr("class")||"ct-slice-donut"===$(t.target).attr("class")?22*$(t.target).parents(".ct-chart").height()/250:10*$(t.target).parents(".ct-chart").height()/250,r.css({left:t.originalEvent.layerX-r.width()/2-8,top:t.originalEvent.layerY-r.height()+e-r.height()-10})):r.css({left:(t.offsetX||t.originalEvent.layerX)-r.width()/2-8,top:(t.offsetY||t.originalEvent.layerY)+e-r.height()-10})})}},t.plugins.tooltip})},{chartist:"chartist"}],chartist:[function(t,e,n){!function(t,i){"function"==typeof define&&define.amd?define([],function(){return t.Chartist=i()}):"object"==typeof n?e.exports=i():t.Chartist=i()}(this,function(){var t={version:"0.9.1"};return function(t,e,n){"use strict";n.noop=function(t){return t},n.alphaNumerate=function(t){return String.fromCharCode(97+t%26)},n.extend=function(t){t=t||{};var e=Array.prototype.slice.call(arguments,1);return e.forEach(function(e){for(var i in e)"object"!=typeof e[i]||null===e[i]||e[i]instanceof Array?t[i]=e[i]:t[i]=n.extend({},t[i],e[i])}),t},n.replaceAll=function(t,e,n){return t.replace(new RegExp(e,"g"),n)},n.stripUnit=function(t){return"string"==typeof t&&(t=t.replace(/[^0-9\+-\.]/g,"")),+t},n.ensureUnit=function(t,e){return"number"==typeof t&&(t+=e),t},n.querySelector=function(t){return t instanceof Node?t:e.querySelector(t)},n.times=function(t){return Array.apply(null,new Array(t))},n.sum=function(t,e){return t+(e?e:0)},n.mapMultiply=function(t){return function(e){return e*t}},n.mapAdd=function(t){return function(e){return e+t}},n.serialMap=function(t,e){var i=[],o=Math.max.apply(null,t.map(function(t){return t.length}));return n.times(o).forEach(function(n,o){var r=t.map(function(t){return t[o]});i[o]=e.apply(null,r)}),i},n.roundWithPrecision=function(t,e){var i=Math.pow(10,e||n.precision);return Math.round(t*i)/i},n.precision=8,n.escapingMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"},n.serialize=function(t){return null===t||void 0===t?t:("number"==typeof t?t=""+t:"object"==typeof t&&(t=JSON.stringify({data:t})),Object.keys(n.escapingMap).reduce(function(t,e){return n.replaceAll(t,e,n.escapingMap[e])},t))},n.deserialize=function(t){if("string"!=typeof t)return t;t=Object.keys(n.escapingMap).reduce(function(t,e){return n.replaceAll(t,n.escapingMap[e],e)},t);try{t=JSON.parse(t),t=void 0!==t.data?t.data:t}catch(e){}return t},n.createSvg=function(t,e,i,o){var r;return e=e||"100%",i=i||"100%",Array.prototype.slice.call(t.querySelectorAll("svg")).filter(function(t){return t.getAttributeNS("http://www.w3.org/2000/xmlns/",n.xmlNs.prefix)}).forEach(function(e){t.removeChild(e)}),r=new n.Svg("svg").attr({width:e,height:i}).addClass(o).attr({style:"width: "+e+"; height: "+i+";"}),t.appendChild(r._node),r},n.reverseData=function(t){t.labels.reverse(),t.series.reverse();for(var e=0;e<t.series.length;e++)"object"==typeof t.series[e]&&void 0!==t.series[e].data?t.series[e].data.reverse():t.series[e]instanceof Array&&t.series[e].reverse()},n.getDataArray=function(t,e,i){function o(t){return n.isFalseyButZero(t)?void 0:(t.data||t)instanceof Array?(t.data||t).map(o):t.hasOwnProperty("value")?o(t.value):i?{x:n.getNumberOrUndefined(t.x),y:t.hasOwnProperty("y")?n.getNumberOrUndefined(t.y):n.getNumberOrUndefined(t)}:n.getNumberOrUndefined(t)}return(e&&!t.reversed||!e&&t.reversed)&&(n.reverseData(t),t.reversed=!t.reversed),t.series.map(o)},n.normalizePadding=function(t,e){return e=e||0,"number"==typeof t?{top:t,right:t,bottom:t,left:t}:{top:"number"==typeof t.top?t.top:e,right:"number"==typeof t.right?t.right:e,bottom:"number"==typeof t.bottom?t.bottom:e,left:"number"==typeof t.left?t.left:e}},n.getMetaData=function(t,e){var i=t.data?t.data[e]:t[e];return i?n.serialize(i.meta):void 0},n.orderOfMagnitude=function(t){return Math.floor(Math.log(Math.abs(t))/Math.LN10)},n.projectLength=function(t,e,n){return e/n.range*t},n.getAvailableHeight=function(t,e){return Math.max((n.stripUnit(e.height)||t.height())-(e.chartPadding.top+e.chartPadding.bottom)-e.axisX.offset,0)},n.getHighLow=function(t,e,i){function o(t){if(void 0!==t)if(t instanceof Array)for(var e=0;e<t.length;e++)o(t[e]);else{var n=i?+t[i]:+t;s&&n>r.high&&(r.high=n),a&&n<r.low&&(r.low=n)}}e=n.extend({},e,i?e["axis"+i.toUpperCase()]:{});var r={high:void 0===e.high?-Number.MAX_VALUE:+e.high,low:void 0===e.low?Number.MAX_VALUE:+e.low},s=void 0===e.high,a=void 0===e.low;return(s||a)&&o(t),r.high<=r.low&&(0===r.low?r.high=1:r.low<0?r.high=0:r.low=0),r},n.isNum=function(t){return!isNaN(t)&&isFinite(t)},n.isFalseyButZero=function(t){return!t&&0!==t},n.getNumberOrUndefined=function(t){return isNaN(+t)?void 0:+t},n.getMultiValue=function(t,e){return n.isNum(t)?+t:t?t[e]||0:0},n.rho=function(t){function e(t,n){return t%n===0?n:e(n,t%n)}function n(t){return t*t+1}if(1===t)return t;var i,o=2,r=2;if(t%2===0)return 2;do o=n(o)%t,r=n(n(r))%t,i=e(Math.abs(o-r),t);while(1===i);return i},n.getBounds=function(t,e,i,o,r){var s,a,l,c=0,u={high:e.high,low:e.low};(o||0===o)&&(u.high=Math.max(o,u.high),u.low=Math.min(o,u.low)),u.valueRange=u.high-u.low,u.oom=n.orderOfMagnitude(u.valueRange),u.step=Math.pow(10,u.oom),u.min=Math.floor(u.low/u.step)*u.step,u.max=Math.ceil(u.high/u.step)*u.step,u.range=u.max-u.min,u.numberOfSteps=Math.round(u.range/u.step);var h=n.projectLength(t,u.step,u),d=i>h,f=r?n.rho(u.range):0;if(r&&n.projectLength(t,1,u)>=i)u.step=1;else if(r&&f<u.step&&n.projectLength(t,f,u)>=i)u.step=f;else for(;;){if(d&&n.projectLength(t,u.step,u)<=i)u.step*=2;else{if(d||!(n.projectLength(t,u.step/2,u)>=i))break;if(u.step/=2,r&&u.step%1!==0){u.step*=2;break}}if(c++>1e3)throw new Error("Exceeded maximum number of iterations while optimizing scale step!")}for(a=u.min,l=u.max;a+u.step<=u.low;)a+=u.step;for(;l-u.step>=u.high;)l-=u.step;for(u.min=a,u.max=l,u.range=u.max-u.min,u.values=[],s=u.min;s<=u.max;s+=u.step)u.values.push(n.roundWithPrecision(s));return u},n.polarToCartesian=function(t,e,n,i){var o=(i-90)*Math.PI/180;return{x:t+n*Math.cos(o),y:e+n*Math.sin(o)}},n.createChartRect=function(t,e,i){var o=!(!e.axisX&&!e.axisY),r=o?e.axisY.offset:0,s=o?e.axisX.offset:0,a=t.width()||n.stripUnit(e.width)||0,l=t.height()||n.stripUnit(e.height)||0,c=n.normalizePadding(e.chartPadding,i);a=Math.max(a,r+c.left+c.right),l=Math.max(l,s+c.top+c.bottom);var u={padding:c,width:function(){return this.x2-this.x1},height:function(){return this.y1-this.y2}};return o?("start"===e.axisX.position?(u.y2=c.top+s,u.y1=Math.max(l-c.bottom,u.y2+1)):(u.y2=c.top,u.y1=Math.max(l-c.bottom-s,u.y2+1)),"start"===e.axisY.position?(u.x1=c.left+r,u.x2=Math.max(a-c.right,u.x1+1)):(u.x1=c.left,u.x2=Math.max(a-c.right-r,u.x1+1))):(u.x1=c.left,u.x2=Math.max(a-c.right,u.x1+1),u.y2=c.top,u.y1=Math.max(l-c.bottom,u.y2+1)),u},n.createGrid=function(t,e,i,o,r,s,a,l){var c={};c[i.units.pos+"1"]=t,c[i.units.pos+"2"]=t,c[i.counterUnits.pos+"1"]=o,c[i.counterUnits.pos+"2"]=o+r;var u=s.elem("line",c,a.join(" "));l.emit("draw",n.extend({type:"grid",axis:i,index:e,group:s,element:u},c))},n.createLabel=function(t,e,i,o,r,s,a,l,c,u,h){var d,f={};if(f[r.units.pos]=t+a[r.units.pos],f[r.counterUnits.pos]=a[r.counterUnits.pos],f[r.units.len]=e,f[r.counterUnits.len]=s-10,u){var p='<span class="'+c.join(" ")+'" style="'+r.units.len+": "+Math.round(f[r.units.len])+"px; "+r.counterUnits.len+": "+Math.round(f[r.counterUnits.len])+'px">'+o[i]+"</span>";d=l.foreignObject(p,n.extend({style:"overflow: visible;"},f))}else d=l.elem("text",f,c.join(" ")).text(o[i]);h.emit("draw",n.extend({type:"label",axis:r,index:i,group:l,element:d,text:o[i]},f))},n.getSeriesOption=function(t,e,n){if(t.name&&e.series&&e.series[t.name]){var i=e.series[t.name];return i.hasOwnProperty(n)?i[n]:e[n]}return e[n]},n.optionsProvider=function(e,i,o){function r(e){var r=a;if(a=n.extend({},c),i)for(l=0;l<i.length;l++){var s=t.matchMedia(i[l][0]);s.matches&&(a=n.extend(a,i[l][1]))}o&&!e&&o.emit("optionsChanged",{previousOptions:r,currentOptions:a})}function s(){u.forEach(function(t){t.removeListener(r)})}var a,l,c=n.extend({},e),u=[];if(!t.matchMedia)throw"window.matchMedia not found! Make sure you're using a polyfill.";if(i)for(l=0;l<i.length;l++){var h=t.matchMedia(i[l][0]);h.addListener(r),u.push(h)}return r(!0),{removeMediaQueryListeners:s,getCurrentOptions:function(){return n.extend({},a)}}}}(window,document,t),function(t,e,n){"use strict";n.Interpolation={},n.Interpolation.none=function(){return function(t,e){for(var i=new n.Svg.Path,o=!0,r=1;r<t.length;r+=2){var s=e[(r-1)/2];void 0===s.value?o=!0:o?(i.move(t[r-1],t[r],!1,s),o=!1):i.line(t[r-1],t[r],!1,s)}return i}},n.Interpolation.simple=function(t){var e={divisor:2};t=n.extend({},e,t);var i=1/Math.max(1,t.divisor);return function(t,e){for(var o=new n.Svg.Path,r=!0,s=2;s<t.length;s+=2){var a=t[s-2],l=t[s-1],c=t[s],u=t[s+1],h=(c-a)*i,d=e[s/2-1],f=e[s/2];void 0===d.value?r=!0:(r&&o.move(a,l,!1,d),void 0!==f.value&&(o.curve(a+h,l,c-h,u,c,u,!1,f),r=!1))}return o}},n.Interpolation.cardinal=function(t){function e(t,e){for(var n=[],i=!0,o=0;o<t.length;o+=2)void 0===e[o/2].value?i=!0:(i&&(n.push({pathCoordinates:[],valueData:[]}),i=!1),n[n.length-1].pathCoordinates.push(t[o],t[o+1]),n[n.length-1].valueData.push(e[o/2]));return n}var i={tension:1};t=n.extend({},i,t);var o=Math.min(1,Math.max(0,t.tension)),r=1-o;return function s(t,i){var a=e(t,i);if(a.length>1){var l=[];return a.forEach(function(t){l.push(s(t.pathCoordinates,t.valueData))}),n.Svg.Path.join(l)}if(t=a[0].pathCoordinates,i=a[0].valueData,t.length<=4)return n.Interpolation.none()(t,i);for(var c,u=(new n.Svg.Path).move(t[0],t[1],!1,i[0]),h=0,d=t.length;d-2*!c>h;h+=2){var f=[{x:+t[h-2],y:+t[h-1]},{x:+t[h],y:+t[h+1]},{x:+t[h+2],y:+t[h+3]},{x:+t[h+4],y:+t[h+5]}];c?h?d-4===h?f[3]={x:+t[0],y:+t[1]}:d-2===h&&(f[2]={x:+t[0],y:+t[1]},f[3]={x:+t[2],y:+t[3]}):f[0]={x:+t[d-2],y:+t[d-1]}:d-4===h?f[3]=f[2]:h||(f[0]={x:+t[h],y:+t[h+1]}),u.curve(o*(-f[0].x+6*f[1].x+f[2].x)/6+r*f[2].x,o*(-f[0].y+6*f[1].y+f[2].y)/6+r*f[2].y,o*(f[1].x+6*f[2].x-f[3].x)/6+r*f[2].x,o*(f[1].y+6*f[2].y-f[3].y)/6+r*f[2].y,f[2].x,f[2].y,!1,i[(h+2)/2])}return u}},n.Interpolation.step=function(t){var e={postpone:!0};return t=n.extend({},e,t),function(e,i){for(var o=new n.Svg.Path,r=!0,s=2;s<e.length;s+=2){var a=e[s-2],l=e[s-1],c=e[s],u=e[s+1],h=i[s/2-1],d=i[s/2];void 0===h.value?r=!0:(r&&o.move(a,l,!1,h),void 0!==d.value&&(t.postpone?o.line(c,l,!1,h):o.line(a,u,!1,d),o.line(c,u,!1,d),r=!1))}return o}}}(window,document,t),function(t,e,n){"use strict";n.EventEmitter=function(){function t(t,e){i[t]=i[t]||[],i[t].push(e)}function e(t,e){i[t]&&(e?(i[t].splice(i[t].indexOf(e),1),0===i[t].length&&delete i[t]):delete i[t])}function n(t,e){i[t]&&i[t].forEach(function(t){t(e)}),i["*"]&&i["*"].forEach(function(n){n(t,e)})}var i=[];return{addEventHandler:t,removeEventHandler:e,emit:n}}}(window,document,t),function(t,e,n){"use strict";function i(t){var e=[];if(t.length)for(var n=0;n<t.length;n++)e.push(t[n]);return e}function o(t,e){var i=e||this.prototype||n.Class,o=Object.create(i);n.Class.cloneDefinitions(o,t);var r=function(){var t,e=o.constructor||function(){};return t=this===n?Object.create(o):this,e.apply(t,Array.prototype.slice.call(arguments,0)),t};return r.prototype=o,r["super"]=i,r.extend=this.extend,r}function r(){var t=i(arguments),e=t[0];return t.splice(1,t.length-1).forEach(function(t){Object.getOwnPropertyNames(t).forEach(function(n){delete e[n],Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}),e}n.Class={extend:o,cloneDefinitions:r}}(window,document,t),function(t,e,n){"use strict";function i(t,e,i){return t&&(this.data=t,this.eventEmitter.emit("data",{type:"update",data:this.data})),e&&(this.options=n.extend({},i?this.options:this.defaultOptions,e),this.initializeTimeoutId||(this.optionsProvider.removeMediaQueryListeners(),this.optionsProvider=n.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter))),this.initializeTimeoutId||this.createChart(this.optionsProvider.getCurrentOptions()),this}function o(){return this.initializeTimeoutId?t.clearTimeout(this.initializeTimeoutId):(t.removeEventListener("resize",this.resizeListener),this.optionsProvider.removeMediaQueryListeners()),this}function r(t,e){return this.eventEmitter.addEventHandler(t,e),this}function s(t,e){return this.eventEmitter.removeEventHandler(t,e),this}function a(){t.addEventListener("resize",this.resizeListener),this.optionsProvider=n.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter),this.eventEmitter.addEventHandler("optionsChanged",function(){this.update()}.bind(this)),this.options.plugins&&this.options.plugins.forEach(function(t){t instanceof Array?t[0](this,t[1]):t(this)}.bind(this)),this.eventEmitter.emit("data",{type:"initial",data:this.data}),this.createChart(this.optionsProvider.getCurrentOptions()),this.initializeTimeoutId=void 0}function l(t,e,i,o,r){this.container=n.querySelector(t),this.data=e,this.defaultOptions=i,this.options=o,this.responsiveOptions=r,this.eventEmitter=n.EventEmitter(),this.supportsForeignObject=n.Svg.isSupported("Extensibility"),this.supportsAnimations=n.Svg.isSupported("AnimationEventsAttribute"),this.resizeListener=function(){this.update()}.bind(this),this.container&&(this.container.__chartist__&&this.container.__chartist__.detach(),this.container.__chartist__=this),this.initializeTimeoutId=setTimeout(a.bind(this),0)}n.Base=n.Class.extend({constructor:l,optionsProvider:void 0,container:void 0,svg:void 0,eventEmitter:void 0,createChart:function(){throw new Error("Base chart type can't be instantiated!")},update:i,detach:o,on:r,off:s,version:n.version,supportsForeignObject:!1})}(window,document,t),function(t,e,n){"use strict";function i(t,i,o,r,s){t instanceof Element?this._node=t:(this._node=e.createElementNS(_,t),"svg"===t&&this._node.setAttributeNS(E,n.xmlNs.qualifiedName,n.xmlNs.uri),
i&&this.attr(i),o&&this.addClass(o),r&&(s&&r._node.firstChild?r._node.insertBefore(this._node,r._node.firstChild):r._node.appendChild(this._node)))}function o(t,e){return"string"==typeof t?e?this._node.getAttributeNS(e,t):this._node.getAttribute(t):(Object.keys(t).forEach(function(i){void 0!==t[i]&&(e?this._node.setAttributeNS(e,[n.xmlNs.prefix,":",i].join(""),t[i]):this._node.setAttribute(i,t[i]))}.bind(this)),this)}function r(t,e,i,o){return new n.Svg(t,e,i,this,o)}function s(){return this._node.parentNode instanceof SVGElement?new n.Svg(this._node.parentNode):null}function a(){for(var t=this._node;"svg"!==t.nodeName;)t=t.parentNode;return new n.Svg(t)}function l(t){var e=this._node.querySelector(t);return e?new n.Svg(e):null}function c(t){var e=this._node.querySelectorAll(t);return e.length?new n.Svg.List(e):null}function u(t,n,i,o){if("string"==typeof t){var r=e.createElement("div");r.innerHTML=t,t=r.firstChild}t.setAttribute("xmlns",k);var s=this.elem("foreignObject",n,i,o);return s._node.appendChild(t),s}function h(t){return this._node.appendChild(e.createTextNode(t)),this}function d(){for(;this._node.firstChild;)this._node.removeChild(this._node.firstChild);return this}function f(){return this._node.parentNode.removeChild(this._node),this.parent()}function p(t){return this._node.parentNode.replaceChild(t._node,this._node),t}function g(t,e){return e&&this._node.firstChild?this._node.insertBefore(t._node,this._node.firstChild):this._node.appendChild(t._node),this}function m(){return this._node.getAttribute("class")?this._node.getAttribute("class").trim().split(/\s+/):[]}function v(t){return this._node.setAttribute("class",this.classes(this._node).concat(t.trim().split(/\s+/)).filter(function(t,e,n){return n.indexOf(t)===e}).join(" ")),this}function y(t){var e=t.trim().split(/\s+/);return this._node.setAttribute("class",this.classes(this._node).filter(function(t){return-1===e.indexOf(t)}).join(" ")),this}function w(){return this._node.setAttribute("class",""),this}function b(t,e){try{return t.getBBox()[e]}catch(n){}return 0}function C(){return this._node.clientHeight||Math.round(b(this._node,"height"))||this._node.parentNode.clientHeight}function x(){return this._node.clientWidth||Math.round(b(this._node,"width"))||this._node.parentNode.clientWidth}function S(t,e,i){return void 0===e&&(e=!0),Object.keys(t).forEach(function(o){function r(t,e){var r,s,a,l={};t.easing&&(a=t.easing instanceof Array?t.easing:n.Svg.Easing[t.easing],delete t.easing),t.begin=n.ensureUnit(t.begin,"ms"),t.dur=n.ensureUnit(t.dur,"ms"),a&&(t.calcMode="spline",t.keySplines=a.join(" "),t.keyTimes="0;1"),e&&(t.fill="freeze",l[o]=t.from,this.attr(l),s=n.stripUnit(t.begin||0),t.begin="indefinite"),r=this.elem("animate",n.extend({attributeName:o},t)),e&&setTimeout(function(){try{r._node.beginElement()}catch(e){l[o]=t.to,this.attr(l),r.remove()}}.bind(this),s),i&&r._node.addEventListener("beginEvent",function(){i.emit("animationBegin",{element:this,animate:r._node,params:t})}.bind(this)),r._node.addEventListener("endEvent",function(){i&&i.emit("animationEnd",{element:this,animate:r._node,params:t}),e&&(l[o]=t.to,this.attr(l),r.remove())}.bind(this))}t[o]instanceof Array?t[o].forEach(function(t){r.bind(this)(t,!1)}.bind(this)):r.bind(this)(t[o],e)}.bind(this)),this}function T(t){var e=this;this.svgElements=[];for(var i=0;i<t.length;i++)this.svgElements.push(new n.Svg(t[i]));Object.keys(n.Svg.prototype).filter(function(t){return-1===["constructor","parent","querySelector","querySelectorAll","replace","append","classes","height","width"].indexOf(t)}).forEach(function(t){e[t]=function(){var i=Array.prototype.slice.call(arguments,0);return e.svgElements.forEach(function(e){n.Svg.prototype[t].apply(e,i)}),e}})}var _="http://www.w3.org/2000/svg",E="http://www.w3.org/2000/xmlns/",k="http://www.w3.org/1999/xhtml";n.xmlNs={qualifiedName:"xmlns:ct",prefix:"ct",uri:"http://gionkunz.github.com/chartist-js/ct"},n.Svg=n.Class.extend({constructor:i,attr:o,elem:r,parent:s,root:a,querySelector:l,querySelectorAll:c,foreignObject:u,text:h,empty:d,remove:f,replace:p,append:g,classes:m,addClass:v,removeClass:y,removeAllClasses:w,height:C,width:x,animate:S}),n.Svg.isSupported=function(t){return e.implementation.hasFeature("www.http://w3.org/TR/SVG11/feature#"+t,"1.1")};var R={easeInSine:[.47,0,.745,.715],easeOutSine:[.39,.575,.565,1],easeInOutSine:[.445,.05,.55,.95],easeInQuad:[.55,.085,.68,.53],easeOutQuad:[.25,.46,.45,.94],easeInOutQuad:[.455,.03,.515,.955],easeInCubic:[.55,.055,.675,.19],easeOutCubic:[.215,.61,.355,1],easeInOutCubic:[.645,.045,.355,1],easeInQuart:[.895,.03,.685,.22],easeOutQuart:[.165,.84,.44,1],easeInOutQuart:[.77,0,.175,1],easeInQuint:[.755,.05,.855,.06],easeOutQuint:[.23,1,.32,1],easeInOutQuint:[.86,0,.07,1],easeInExpo:[.95,.05,.795,.035],easeOutExpo:[.19,1,.22,1],easeInOutExpo:[1,0,0,1],easeInCirc:[.6,.04,.98,.335],easeOutCirc:[.075,.82,.165,1],easeInOutCirc:[.785,.135,.15,.86],easeInBack:[.6,-.28,.735,.045],easeOutBack:[.175,.885,.32,1.275],easeInOutBack:[.68,-.55,.265,1.55]};n.Svg.Easing=R,n.Svg.List=n.Class.extend({constructor:T})}(window,document,t),function(t,e,n){"use strict";function i(t,e,i,o,r,s){var a=n.extend({command:r?t.toLowerCase():t.toUpperCase()},e,s?{data:s}:{});i.splice(o,0,a)}function o(t,e){t.forEach(function(n,i){b[n.command.toLowerCase()].forEach(function(o,r){e(n,o,i,r,t)})})}function r(t,e){this.pathElements=[],this.pos=0,this.close=t,this.options=n.extend({},C,e)}function s(t){return void 0!==t?(this.pos=Math.max(0,Math.min(this.pathElements.length,t)),this):this.pos}function a(t){return this.pathElements.splice(this.pos,t),this}function l(t,e,n,o){return i("M",{x:+t,y:+e},this.pathElements,this.pos++,n,o),this}function c(t,e,n,o){return i("L",{x:+t,y:+e},this.pathElements,this.pos++,n,o),this}function u(t,e,n,o,r,s,a,l){return i("C",{x1:+t,y1:+e,x2:+n,y2:+o,x:+r,y:+s},this.pathElements,this.pos++,a,l),this}function h(t,e,n,o,r,s,a,l,c){return i("A",{rx:+t,ry:+e,xAr:+n,lAf:+o,sf:+r,x:+s,y:+a},this.pathElements,this.pos++,l,c),this}function d(t){var e=t.replace(/([A-Za-z])([0-9])/g,"$1 $2").replace(/([0-9])([A-Za-z])/g,"$1 $2").split(/[\s,]+/).reduce(function(t,e){return e.match(/[A-Za-z]/)&&t.push([]),t[t.length-1].push(e),t},[]);"Z"===e[e.length-1][0].toUpperCase()&&e.pop();var i=e.map(function(t){var e=t.shift(),i=b[e.toLowerCase()];return n.extend({command:e},i.reduce(function(e,n,i){return e[n]=+t[i],e},{}))}),o=[this.pos,0];return Array.prototype.push.apply(o,i),Array.prototype.splice.apply(this.pathElements,o),this.pos+=i.length,this}function f(){var t=Math.pow(10,this.options.accuracy);return this.pathElements.reduce(function(e,n){var i=b[n.command.toLowerCase()].map(function(e){return this.options.accuracy?Math.round(n[e]*t)/t:n[e]}.bind(this));return e+n.command+i.join(",")}.bind(this),"")+(this.close?"Z":"")}function p(t,e){return o(this.pathElements,function(n,i){n[i]*="x"===i[0]?t:e}),this}function g(t,e){return o(this.pathElements,function(n,i){n[i]+="x"===i[0]?t:e}),this}function m(t){return o(this.pathElements,function(e,n,i,o,r){var s=t(e,n,i,o,r);(s||0===s)&&(e[n]=s)}),this}function v(t){var e=new n.Svg.Path(t||this.close);return e.pos=this.pos,e.pathElements=this.pathElements.slice().map(function(t){return n.extend({},t)}),e.options=n.extend({},this.options),e}function y(t){var e=[new n.Svg.Path];return this.pathElements.forEach(function(i){i.command===t.toUpperCase()&&0!==e[e.length-1].pathElements.length&&e.push(new n.Svg.Path),e[e.length-1].pathElements.push(i)}),e}function w(t,e,i){for(var o=new n.Svg.Path(e,i),r=0;r<t.length;r++)for(var s=t[r],a=0;a<s.pathElements.length;a++)o.pathElements.push(s.pathElements[a]);return o}var b={m:["x","y"],l:["x","y"],c:["x1","y1","x2","y2","x","y"],a:["rx","ry","xAr","lAf","sf","x","y"]},C={accuracy:3};n.Svg.Path=n.Class.extend({constructor:r,position:s,remove:a,move:l,line:c,curve:u,arc:h,scale:p,translate:g,transform:m,parse:d,stringify:f,clone:v,splitByCommand:y}),n.Svg.Path.elementDescriptions=b,n.Svg.Path.join=w}(window,document,t),function(t,e,n){"use strict";function i(t,e,n,i){this.units=t,this.counterUnits=t===r.x?r.y:r.x,this.chartRect=e,this.axisLength=e[t.rectEnd]-e[t.rectStart],this.gridOffset=e[t.rectOffset],this.ticks=n,this.options=i}function o(t,e,i,o,r){var s=o["axis"+this.units.pos.toUpperCase()],a=this.ticks.map(this.projectValue.bind(this)),l=this.ticks.map(s.labelInterpolationFnc);a.forEach(function(c,u){var h,d={x:0,y:0};h=a[u+1]?a[u+1]-c:Math.max(this.axisLength-c,30),(l[u]||0===l[u])&&("x"===this.units.pos?(c=this.chartRect.x1+c,d.x=o.axisX.labelOffset.x,"start"===o.axisX.position?d.y=this.chartRect.padding.top+o.axisX.labelOffset.y+(i?5:20):d.y=this.chartRect.y1+o.axisX.labelOffset.y+(i?5:20)):(c=this.chartRect.y1-c,d.y=o.axisY.labelOffset.y-(i?h:0),"start"===o.axisY.position?d.x=i?this.chartRect.padding.left+o.axisY.labelOffset.x:this.chartRect.x1-10:d.x=this.chartRect.x2+o.axisY.labelOffset.x+10),s.showGrid&&n.createGrid(c,u,this,this.gridOffset,this.chartRect[this.counterUnits.len](),t,[o.classNames.grid,o.classNames[this.units.dir]],r),s.showLabel&&n.createLabel(c,h,u,l,this,s.offset,d,e,[o.classNames.label,o.classNames[this.units.dir],o.classNames[s.position]],i,r))}.bind(this))}var r={x:{pos:"x",len:"width",dir:"horizontal",rectStart:"x1",rectEnd:"x2",rectOffset:"y2"},y:{pos:"y",len:"height",dir:"vertical",rectStart:"y2",rectEnd:"y1",rectOffset:"x1"}};n.Axis=n.Class.extend({constructor:i,createGridAndLabels:o,projectValue:function(t,e,n){throw new Error("Base axis can't be instantiated!")}}),n.Axis.units=r}(window,document,t),function(t,e,n){"use strict";function i(t,e,i,o){var r=o.highLow||n.getHighLow(e.normalized,o,t.pos);this.bounds=n.getBounds(i[t.rectEnd]-i[t.rectStart],r,o.scaleMinSpace||20,o.referenceValue,o.onlyInteger),this.range={min:this.bounds.min,max:this.bounds.max},n.AutoScaleAxis["super"].constructor.call(this,t,i,this.bounds.values,o)}function o(t){return this.axisLength*(+n.getMultiValue(t,this.units.pos)-this.bounds.min)/this.bounds.range}n.AutoScaleAxis=n.Axis.extend({constructor:i,projectValue:o})}(window,document,t),function(t,e,n){"use strict";function i(t,e,i,o){var r=n.getHighLow(e.normalized,o,t.pos);this.divisor=o.divisor||1,this.ticks=o.ticks||n.times(this.divisor).map(function(t,e){return r.low+(r.high-r.low)/this.divisor*e}.bind(this)),this.range={min:r.low,max:r.high},n.FixedScaleAxis["super"].constructor.call(this,t,i,this.ticks,o),this.stepLength=this.axisLength/this.divisor}function o(t){return this.axisLength*(+n.getMultiValue(t,this.units.pos)-this.range.min)/(this.range.max-this.range.min)}n.FixedScaleAxis=n.Axis.extend({constructor:i,projectValue:o})}(window,document,t),function(t,e,n){"use strict";function i(t,e,i,o){n.StepAxis["super"].constructor.call(this,t,i,o.ticks,o),this.stepLength=this.axisLength/(o.ticks.length-(o.stretch?1:0))}function o(t,e){return this.stepLength*e}n.StepAxis=n.Axis.extend({constructor:i,projectValue:o})}(window,document,t),function(t,e,n){"use strict";function i(t){var e={raw:this.data,normalized:n.getDataArray(this.data,t.reverseData,!0)};this.svg=n.createSvg(this.container,t.width,t.height,t.classNames.chart);var i,o,s=this.svg.elem("g").addClass(t.classNames.gridGroup),a=this.svg.elem("g"),l=this.svg.elem("g").addClass(t.classNames.labelGroup),c=n.createChartRect(this.svg,t,r.padding);i=void 0===t.axisX.type?new n.StepAxis(n.Axis.units.x,e,c,n.extend({},t.axisX,{ticks:e.raw.labels,stretch:t.fullWidth})):t.axisX.type.call(n,n.Axis.units.x,e,c,t.axisX),o=void 0===t.axisY.type?new n.AutoScaleAxis(n.Axis.units.y,e,c,n.extend({},t.axisY,{high:n.isNum(t.high)?t.high:t.axisY.high,low:n.isNum(t.low)?t.low:t.axisY.low})):t.axisY.type.call(n,n.Axis.units.y,e,c,t.axisY),i.createGridAndLabels(s,l,this.supportsForeignObject,t,this.eventEmitter),o.createGridAndLabels(s,l,this.supportsForeignObject,t,this.eventEmitter),e.raw.series.forEach(function(r,s){var l=a.elem("g");l.attr({"series-name":r.name,meta:n.serialize(r.meta)},n.xmlNs.uri),l.addClass([t.classNames.series,r.className||t.classNames.series+"-"+n.alphaNumerate(s)].join(" "));var u=[],h=[];e.normalized[s].forEach(function(t,a){var l={x:c.x1+i.projectValue(t,a,e.normalized[s]),y:c.y1-o.projectValue(t,a,e.normalized[s])};u.push(l.x,l.y),h.push({value:t,valueIndex:a,meta:n.getMetaData(r,a)})}.bind(this));var d={lineSmooth:n.getSeriesOption(r,t,"lineSmooth"),showPoint:n.getSeriesOption(r,t,"showPoint"),showLine:n.getSeriesOption(r,t,"showLine"),showArea:n.getSeriesOption(r,t,"showArea"),areaBase:n.getSeriesOption(r,t,"areaBase")},f="function"==typeof d.lineSmooth?d.lineSmooth:d.lineSmooth?n.Interpolation.cardinal():n.Interpolation.none(),p=f(u,h);if(d.showPoint&&p.pathElements.forEach(function(e){var i=l.elem("line",{x1:e.x,y1:e.y,x2:e.x+.01,y2:e.y},t.classNames.point).attr({value:void 0===e.data.value.x?e.data.value.y:e.data.value.x+","+e.data.value.y,meta:e.data.meta},n.xmlNs.uri);this.eventEmitter.emit("draw",{type:"point",value:e.data.value,index:e.data.valueIndex,meta:e.data.meta,series:r,seriesIndex:s,group:l,element:i,x:e.x,y:e.y})}.bind(this)),d.showLine){var g=l.elem("path",{d:p.stringify()},t.classNames.line,!0);this.eventEmitter.emit("draw",{type:"line",values:e.normalized[s],path:p.clone(),chartRect:c,index:s,series:r,seriesIndex:s,group:l,element:g})}if(d.showArea&&o.range){var m=Math.max(Math.min(d.areaBase,o.range.max),o.range.min),v=c.y1-o.projectValue(m);p.splitByCommand("M").filter(function(t){return t.pathElements.length>1}).map(function(t){var e=t.pathElements[0],n=t.pathElements[t.pathElements.length-1];return t.clone(!0).position(0).remove(1).move(e.x,v).line(e.x,e.y).position(t.pathElements.length+1).line(n.x,v)}).forEach(function(i){var o=l.elem("path",{d:i.stringify()},t.classNames.area,!0).attr({values:e.normalized[s]},n.xmlNs.uri);this.eventEmitter.emit("draw",{type:"area",values:e.normalized[s],path:i.clone(),series:r,seriesIndex:s,chartRect:c,index:s,group:l,element:o})}.bind(this))}}.bind(this)),this.eventEmitter.emit("created",{bounds:o.bounds,chartRect:c,axisX:i,axisY:o,svg:this.svg,options:t})}function o(t,e,i,o){n.Line["super"].constructor.call(this,t,e,r,n.extend({},r,i),o)}var r={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:n.noop,type:void 0},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:n.noop,type:void 0,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,showLine:!0,showPoint:!0,showArea:!1,areaBase:0,lineSmooth:!0,low:void 0,high:void 0,chartPadding:{top:15,right:15,bottom:5,left:10},fullWidth:!1,reverseData:!1,classNames:{chart:"ct-chart-line",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",line:"ct-line",point:"ct-point",area:"ct-area",grid:"ct-grid",gridGroup:"ct-grids",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};n.Line=n.Base.extend({constructor:o,createChart:i})}(window,document,t),function(t,e,n){"use strict";function i(t){var e,i={raw:this.data,normalized:t.distributeSeries?n.getDataArray(this.data,t.reverseData).map(function(t){return[t]}):n.getDataArray(this.data,t.reverseData)};this.svg=n.createSvg(this.container,t.width,t.height,t.classNames.chart+(t.horizontalBars?" "+t.classNames.horizontalBars:""));var o=this.svg.elem("g").addClass(t.classNames.gridGroup),s=this.svg.elem("g"),a=this.svg.elem("g").addClass(t.classNames.labelGroup);if(t.stackBars){var l=n.serialMap(i.normalized,function(){return Array.prototype.slice.call(arguments).reduce(n.sum,0)});e=n.getHighLow([l],t)}else e=n.getHighLow(i.normalized,t);e.high=+t.high||(0===t.high?0:e.high),e.low=+t.low||(0===t.low?0:e.low);var c,u,h,d,f,p=n.createChartRect(this.svg,t,r.padding);u=t.distributeSeries&&t.stackBars?i.raw.labels.slice(0,1):i.raw.labels,t.horizontalBars?(h=f=new n.StepAxis(n.Axis.units.y,i,p,{ticks:u}),c=d=new n.AutoScaleAxis(n.Axis.units.x,i,p,n.extend({},t.axisX,{highLow:e,referenceValue:0}))):(h=d=new n.StepAxis(n.Axis.units.x,i,p,{ticks:u}),c=f=new n.AutoScaleAxis(n.Axis.units.y,i,p,n.extend({},t.axisY,{highLow:e,referenceValue:0})));var g=t.horizontalBars?p.x1+c.projectValue(0):p.y1-c.projectValue(0),m=[];h.createGridAndLabels(o,a,this.supportsForeignObject,t,this.eventEmitter),c.createGridAndLabels(o,a,this.supportsForeignObject,t,this.eventEmitter),i.raw.series.forEach(function(e,o){var r,a,l=o-(i.raw.series.length-1)/2;r=t.distributeSeries&&!t.stackBars?h.axisLength/i.normalized.length/2:t.distributeSeries&&t.stackBars?h.axisLength/2:h.axisLength/i.normalized[o].length/2,a=s.elem("g"),a.attr({"series-name":e.name,meta:n.serialize(e.meta)},n.xmlNs.uri),a.addClass([t.classNames.series,e.className||t.classNames.series+"-"+n.alphaNumerate(o)].join(" ")),i.normalized[o].forEach(function(s,u){var d,f,v,y;if(y=t.distributeSeries&&!t.stackBars?o:t.distributeSeries&&t.stackBars?0:u,d=t.horizontalBars?{x:p.x1+c.projectValue(s||0,u,i.normalized[o]),y:p.y1-h.projectValue(s||0,y,i.normalized[o])}:{x:p.x1+h.projectValue(s||0,y,i.normalized[o]),y:p.y1-c.projectValue(s||0,u,i.normalized[o])},d[h.units.pos]+=r*(t.horizontalBars?-1:1),d[h.units.pos]+=t.stackBars||t.distributeSeries?0:l*t.seriesBarDistance*(t.horizontalBars?-1:1),v=m[u]||g,m[u]=v-(g-d[h.counterUnits.pos]),void 0!==s){var w={};w[h.units.pos+"1"]=d[h.units.pos],w[h.units.pos+"2"]=d[h.units.pos],w[h.counterUnits.pos+"1"]=t.stackBars?v:g,w[h.counterUnits.pos+"2"]=t.stackBars?m[u]:d[h.counterUnits.pos],f=a.elem("line",w,t.classNames.bar).attr({value:s,meta:n.getMetaData(e,u)},n.xmlNs.uri),this.eventEmitter.emit("draw",n.extend({type:"bar",value:s,index:u,meta:n.getMetaData(e,u),series:e,seriesIndex:o,chartRect:p,group:a,element:f},w))}}.bind(this))}.bind(this)),this.eventEmitter.emit("created",{bounds:c.bounds,chartRect:p,axisX:d,axisY:f,svg:this.svg,options:t})}function o(t,e,i,o){n.Bar["super"].constructor.call(this,t,e,r,n.extend({},r,i),o)}var r={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:n.noop,scaleMinSpace:30,onlyInteger:!1},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:n.noop,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,high:void 0,low:void 0,onlyInteger:!1,chartPadding:{top:15,right:15,bottom:5,left:10},seriesBarDistance:15,stackBars:!1,horizontalBars:!1,distributeSeries:!1,reverseData:!1,classNames:{chart:"ct-chart-bar",horizontalBars:"ct-horizontal-bars",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",bar:"ct-bar",grid:"ct-grid",gridGroup:"ct-grids",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};n.Bar=n.Base.extend({constructor:o,createChart:i})}(window,document,t),function(t,e,n){"use strict";function i(t,e,n){var i=e.x>t.x;return i&&"explode"===n||!i&&"implode"===n?"start":i&&"implode"===n||!i&&"explode"===n?"end":"middle"}function o(t){var e,o,r,a,l=[],c=t.startAngle,u=n.getDataArray(this.data,t.reverseData);this.svg=n.createSvg(this.container,t.width,t.height,t.donut?t.classNames.chartDonut:t.classNames.chartPie),e=n.createChartRect(this.svg,t,s.padding),o=Math.min(e.width()/2,e.height()/2),a=t.total||u.reduce(function(t,e){return t+e},0),o-=t.donut?t.donutWidth/2:0,r="outside"===t.labelPosition||t.donut?o:"center"===t.labelPosition?0:o/2,r+=t.labelOffset;for(var h={x:e.x1+e.width()/2,y:e.y2+e.height()/2},d=1===this.data.series.filter(function(t){return t.hasOwnProperty("value")?0!==t.value:0!==t}).length,f=0;f<this.data.series.length;f++){var p=this.data.series[f];l[f]=this.svg.elem("g",null,null,!0),l[f].attr({"series-name":p.name},n.xmlNs.uri),l[f].addClass([t.classNames.series,p.className||t.classNames.series+"-"+n.alphaNumerate(f)].join(" "));var g=c+u[f]/a*360;g-c===360&&(g-=.01);var m=n.polarToCartesian(h.x,h.y,o,c-(0===f||d?0:.2)),v=n.polarToCartesian(h.x,h.y,o,g),y=new n.Svg.Path(!t.donut).move(v.x,v.y).arc(o,o,0,g-c>180,0,m.x,m.y);t.donut||y.line(h.x,h.y);var w=l[f].elem("path",{d:y.stringify()},t.donut?t.classNames.sliceDonut:t.classNames.slicePie);if(w.attr({value:u[f],meta:n.serialize(p.meta)},n.xmlNs.uri),t.donut&&w.attr({style:"stroke-width: "+ +t.donutWidth+"px"}),this.eventEmitter.emit("draw",{type:"slice",value:u[f],totalDataSum:a,index:f,meta:p.meta,series:p,group:l[f],element:w,path:y.clone(),center:h,radius:o,startAngle:c,endAngle:g}),t.showLabel){var b=n.polarToCartesian(h.x,h.y,r,c+(g-c)/2),C=t.labelInterpolationFnc(this.data.labels?this.data.labels[f]:u[f],f);if(C||0===C){var x=l[f].elem("text",{dx:b.x,dy:b.y,"text-anchor":i(h,b,t.labelDirection)},t.classNames.label).text(""+C);this.eventEmitter.emit("draw",{type:"label",index:f,group:l[f],element:x,text:""+C,x:b.x,y:b.y})}}c=g}this.eventEmitter.emit("created",{chartRect:e,svg:this.svg,options:t})}function r(t,e,i,o){n.Pie["super"].constructor.call(this,t,e,s,n.extend({},s,i),o)}var s={width:void 0,height:void 0,chartPadding:5,classNames:{chartPie:"ct-chart-pie",chartDonut:"ct-chart-donut",series:"ct-series",slicePie:"ct-slice-pie",sliceDonut:"ct-slice-donut",label:"ct-label"},startAngle:0,total:void 0,donut:!1,donutWidth:60,showLabel:!0,labelOffset:0,labelPosition:"inside",labelInterpolationFnc:n.noop,labelDirection:"neutral",reverseData:!1};n.Pie=n.Base.extend({constructor:r,createChart:o,determineAnchorPosition:i})}(window,document,t),t})},{}],handsontable:[function(t,e,n){var i={extension:{},helper:{}};!function(t,i,o){"use strict";function r(){this.refCounter=0,this.init()}function s(){function t(){var t=this;t.registerTimeout("enableObserveChanges",function(){t.updateSettings({observeChanges:!0})},0)}function e(t){return function(e,n){return e[1]===n[1]?0:null===e[1]?1:null===n[1]?-1:e[1]<n[1]?t?-1:1:e[1]>n[1]?t?1:-1:0}}function n(t){return function(e,n){if(e[1]===n[1])return 0;if(null===e[1])return 1;if(null===n[1])return-1;var i=new Date(e[1]),o=new Date(n[1]);return o>i?t?-1:1:i>o?t?1:-1:0}}function i(t){return"undefined"!=typeof t.sortColumn}var o=this;this.init=function(e){var n,i,r=this,l=r.getSettings().columnSorting;if(r.sortingEnabled=!!l,r.sortingEnabled){r.sortIndex=[];var c=s.call(r);"undefined"!=typeof c?(n=c.sortColumn,i=c.sortOrder):(n=l.column,i=l.sortOrder),o.sortByColumn.call(r,n,i),r.sort=function(){var t=Array.prototype.slice.call(arguments);return o.sortByColumn.apply(r,t)},"undefined"==typeof r.getSettings().observeChanges&&t.call(r),"afterInit"==e&&(a.call(r),r.addHook("afterCreateRow",o.afterCreateRow),r.addHook("afterRemoveRow",o.afterRemoveRow),r.addHook("afterLoadData",o.init))}else delete r.sort,r.removeHook("afterCreateRow",o.afterCreateRow),r.removeHook("afterRemoveRow",o.afterRemoveRow),r.removeHook("afterLoadData",o.init)},this.setSortingColumn=function(t,e){var n=this;return"undefined"==typeof t?(delete n.sortColumn,void delete n.sortOrder):(n.sortColumn===t&&"undefined"==typeof e?n.sortOrder=!n.sortOrder:n.sortOrder="undefined"!=typeof e?e:!0,void(n.sortColumn=t))},this.sortByColumn=function(t,e){var n=this;o.setSortingColumn.call(n,t,e),"undefined"!=typeof n.sortColumn&&(n.PluginHooks.run("beforeColumnSort",n.sortColumn,n.sortOrder),o.sort.call(n),n.render(),r.call(n),n.PluginHooks.run("afterColumnSort",n.sortColumn,n.sortOrder))};var r=function(){var t=this,e={};"undefined"!=typeof t.sortColumn&&(e.sortColumn=t.sortColumn),"undefined"!=typeof t.sortOrder&&(e.sortOrder=t.sortOrder),(e.hasOwnProperty("sortColumn")||e.hasOwnProperty("sortOrder"))&&t.PluginHooks.run("persistentStateSave","columnSorting",e)},s=function(){var t=this,e={};return t.PluginHooks.run("persistentStateLoad","columnSorting",e),e.value},a=function(){function t(){var t=n.view.TBODY.querySelector("tr").querySelectorAll("th");return t.length}function e(e){var i=n.view.wt.wtDom.closest(e,"TH");return n.view.wt.wtDom.index(i)-t()}var n=this;n.rootElement.on("click.handsontable",".columnSorting",function(t){if(n.view.wt.wtDom.hasClass(t.target,"columnSorting")){var i=e(t.target);o.sortByColumn.call(n,i)}})};this.sort=function(){var t=this;if("undefined"!=typeof t.sortOrder){t.sortingEnabled=!1,t.sortIndex.length=0;for(var i=this.colOffset(),o=0,r=this.countRows()-t.getSettings().minSpareRows;r>o;o++)this.sortIndex.push([o,t.getDataAtCell(o,this.sortColumn+i)]);var s,a=t.getCellMeta(0,t.sortColumn);switch(a.type){case"date":s=n;break;default:s=e}this.sortIndex.sort(s(t.sortOrder));for(var o=this.sortIndex.length;o<t.countRows();o++)this.sortIndex.push([o,t.getDataAtCell(o,this.sortColumn+i)]);t.sortingEnabled=!0}},this.translateRow=function(t){var e=this;return e.sortingEnabled&&e.sortIndex&&e.sortIndex.length&&e.sortIndex[t]?e.sortIndex[t][0]:t},this.onBeforeGetSet=function(t){var e=this;t.row=o.translateRow.call(e,t.row)},this.untranslateRow=function(t){var e=this;if(e.sortingEnabled&&e.sortIndex&&e.sortIndex.length)for(var n=0;n<e.sortIndex.length;n++)if(e.sortIndex[n][0]==t)return n},this.getColHeader=function(t,e){this.getSettings().columnSorting&&this.view.wt.wtDom.addClass(e.querySelector(".colHeader"),"columnSorting")},this.afterCreateRow=function(t,e){var n=this;if(i(n)){for(var o=0;o<n.sortIndex.length;o++)n.sortIndex[o][0]>=t&&(n.sortIndex[o][0]+=e);for(var o=0;e>o;o++)n.sortIndex.splice(t+o,0,[t+o,n.getData()[t+o][n.sortColumn+n.colOffset()]]);r.call(n)}},this.afterRemoveRow=function(t,e){var n=this;if(i(n)){var s=o.translateRow.call(n,t);n.sortIndex.splice(t,e);for(var a=0;a<n.sortIndex.length;a++)n.sortIndex[a][0]>s&&(n.sortIndex[a][0]-=e);r.call(n)}},this.afterChangeSort=function(t){var e=this,n=!1,i={};if(t){for(var r=0;r<t.length;r++)if(t[r][1]==e.sortColumn){n=!0,i.row=o.translateRow.call(e,t[r][0]),i.col=t[r][1];break}n&&setTimeout(function(){o.sort.call(e),e.render(),e.selectCell(o.untranslateRow.call(e,i.row),i.col)},0)}}}function a(){var e,n,i,o,r,s=document.createElement("DIV"),a=s.style;s.className="ghost",a.position="absolute",a.top="25px",a.left=0,a.width="10px",a.height="10px",a.backgroundColor="#CCC",a.opacity=.7;var l=function(){var t=this;t.PluginHooks.run("persistentStateSave","manualColumnPositions",t.manualColumnPositions)},c=function(){var t=this,e={};return t.PluginHooks.run("persistentStateLoad","manualColumnPositions",e),e.value},u=function(){var c=this;c.rootElement.on("mousemove.manualColumnMove",function(t){e&&(a.left=r+t.pageX-o+6+"px","none"===a.display&&(a.display="block"))}),c.rootElement.on("mouseup.manualColumnMove",function(){e&&(i>n&&i--,c.getSettings().rowHeaders&&(n--,i--),c.manualColumnPositions.splice(i,0,c.manualColumnPositions.splice(n,1)[0]),t(".manualColumnMover.active").removeClass("active"),e=!1,c.forceFullRender=!0,c.view.render(),a.display="none",l.call(c),c.PluginHooks.run("afterColumnMove",n,i))}),c.rootElement.on("mousedown.manualColumnMove",".manualColumnMover",function(t){var l=t.currentTarget,u=c.view.wt.wtDom.closest(l,"TH");n=c.view.wt.wtDom.index(u)+c.colOffset(),i=n,e=!0,o=t.pageX;var h=c.$table[0];h.parentNode.appendChild(s),a.width=c.view.wt.wtDom.outerWidth(u)+"px",a.height=c.view.wt.wtDom.outerHeight(h)+"px",r=parseInt(c.view.wt.wtDom.offset(u).left-c.view.wt.wtDom.offset(h).left,10),a.left=r+6+"px"}),c.rootElement.on("mouseenter.manualColumnMove","td, th",function(){if(e){var t=c.view.THEAD.querySelector(".manualColumnMover.active");t&&c.view.wt.wtDom.removeClass(t,"active"),i=c.view.wt.wtDom.index(this)+c.colOffset();var n=c.view.THEAD.querySelectorAll("th"),o=n[i].querySelector(".manualColumnMover");c.view.wt.wtDom.addClass(o,"active")}}),c.addHook("afterDestroy",h)},h=function(){var t=this;t.rootElement.off("mouseup.manualColumnMove"),t.rootElement.off("mousemove.manualColumnMove"),t.rootElement.off("mousedown.manualColumnMove"),t.rootElement.off("mouseenter.manualColumnMove")};this.beforeInit=function(){this.manualColumnPositions=[]},this.init=function(t){var e=this,n=!!this.getSettings().manualColumnMove;if(n){var i=this.getSettings().manualColumnMove,o=c.call(e);"undefined"!=typeof o?this.manualColumnPositions=o:i instanceof Array?this.manualColumnPositions=i:this.manualColumnPositions=[],e.forceFullRender=!0,"afterInit"==t&&(u.call(this),this.manualColumnPositions.length>0&&(this.forceFullRender=!0,this.render()))}else h.call(this),this.manualColumnPositions=[]},this.modifyCol=function(t){return this.getSettings().manualColumnMove?("undefined"==typeof this.manualColumnPositions[t]&&(this.manualColumnPositions[t]=t),this.manualColumnPositions[t]):t},this.getColHeader=function(t,e){if(this.getSettings().manualColumnMove){var n=document.createElement("DIV");n.className="manualColumnMover",e.firstChild.appendChild(n)}}}function l(){function e(t){a=this,o=t;var e=this.view.wt.wtTable.getCoords(t)[1];if(e>=0){r=e;var n=this.view.wt.wtDom.offset(this.rootElement[0]).left,i=this.view.wt.wtDom.offset(t).left;h=i-n-6,d.style.left=h+parseInt(this.view.wt.wtDom.outerWidth(t),10)+"px",this.rootElement[0].appendChild(d)}}function n(){var t=this;u=parseInt(this.view.wt.wtDom.outerWidth(o),10),t.view.wt.wtDom.addClass(d,"active"),g.height=t.view.wt.wtDom.outerHeight(t.$table[0])+"px",i=t}var i,o,r,s,a,l,c,u,h,d=document.createElement("DIV"),f=document.createElement("DIV"),p=document.createElement("DIV"),g=p.style;d.className="manualColumnResizer",f.className="manualColumnResizerHandle",d.appendChild(f),p.className="manualColumnResizerLine",d.appendChild(p);var m=t(document);m.mousemove(function(t){i&&(s=u+(t.pageX-c),l=b(r,s),d.style.left=h+s+"px")}),m.mouseup(function(){i&&(a.view.wt.wtDom.removeClass(d,"active"),i=!1,l!=u&&(a.forceFullRender=!0,a.view.render(),v.call(a),a.PluginHooks.run("afterColumnResize",r,l)),e.call(a,o))});var v=function(){var t=this;t.PluginHooks.run("persistentStateSave","manualColumnWidths",t.manualColumnWidths)},y=function(){var t=this,e={};return t.PluginHooks.run("persistentStateLoad","manualColumnWidths",e),e.value},w=function(){var t=this,o=0,s=null;this.rootElement.on("mouseenter.handsontable","th",function(n){i||e.call(t,n.currentTarget)}),this.rootElement.on("mousedown.handsontable",".manualColumnResizer",function(){null==s&&(s=setTimeout(function(){o>=2&&(l=t.determineColumnWidth.call(t,r),b(r,l),t.forceFullRender=!0,t.view.render(),t.PluginHooks.run("afterColumnResize",r,l)),o=0,s=null},500)),o++}),this.rootElement.on("mousedown.handsontable",".manualColumnResizer",function(e){c=e.pageX,n.call(t),l=u})};this.beforeInit=function(){this.manualColumnWidths=[]},this.init=function(t){var e=this,n=!!this.getSettings().manualColumnResize;if(n){var i=this.getSettings().manualColumnResize,o=y.call(e);"undefined"!=typeof o?this.manualColumnWidths=o:i instanceof Array?this.manualColumnWidths=i:this.manualColumnWidths=[],"afterInit"==t&&(w.call(this),e.forceFullRender=!0,e.render())}};var b=function(t,e){return e=Math.max(e,20),t=a.PluginHooks.execute("modifyCol",t),a.manualColumnWidths[t]=e,e};this.getColWidth=function(t,e){this.getSettings().manualColumnResize&&this.manualColumnWidths[t]&&(e.width=this.manualColumnWidths[t])}}function c(t){var e,n=function(){i.localStorage[t+"__persistentStateKeys"]=JSON.stringify(e)},o=function(){var n=i.localStorage[t+"__persistentStateKeys"],o="string"==typeof n?JSON.parse(n):void 0;e=o?o:[]},r=function(){e=[],n()};o(),this.saveValue=function(o,r){i.localStorage[t+"_"+o]=JSON.stringify(r),-1==e.indexOf(o)&&(e.push(o),n())},this.loadValue=function(e,n){e="undefined"!=typeof e?e:n;var o=i.localStorage[t+"_"+e];return"undefined"==typeof o?void 0:JSON.parse(o)},this.reset=function(e){i.localStorage.removeItem(t+"_"+e)},this.resetAll=function(){for(var n=0;n<e.length;n++)i.localStorage.removeItem(t+"_"+e[n]);r()}}function u(){this.boundaries=null,this.callback=null}function h(){this.maxOuts=10}function d(e,n){var i;this.instance=e,this.settings=n,this.wtDom=this.instance.wtDom,this.main=document.createElement("div"),i=this.main.style,i.position="absolute",i.top=0,i.left=0;for(var o=0;5>o;o++){var r=document.createElement("DIV");r.className="wtBorder "+(n.className||""),i=r.style,i.backgroundColor=n.border.color,i.height=n.border.width+"px",i.width=n.border.width+"px",
this.main.appendChild(r)}this.top=this.main.childNodes[0],this.left=this.main.childNodes[1],this.bottom=this.main.childNodes[2],this.right=this.main.childNodes[3],this.topStyle=this.top.style,this.leftStyle=this.left.style,this.bottomStyle=this.bottom.style,this.rightStyle=this.right.style,this.corner=this.main.childNodes[4],this.corner.className+=" corner",this.cornerStyle=this.corner.style,this.cornerStyle.width="5px",this.cornerStyle.height="5px",this.cornerStyle.border="2px solid #FFF",this.disappear(),e.wtTable.bordersHolder||(e.wtTable.bordersHolder=document.createElement("div"),e.wtTable.bordersHolder.className="htBorders",e.wtTable.hider.appendChild(e.wtTable.bordersHolder)),e.wtTable.bordersHolder.appendChild(this.main);var s=!1,a=t(document.body);a.on("mousedown.walkontable."+e.guid,function(){s=!0}),a.on("mouseup.walkontable."+e.guid,function(){s=!1}),t(this.main.childNodes).on("mouseenter",function(n){if(s&&e.getSetting("hideBorderOnMouseDownOver")){n.preventDefault(),n.stopImmediatePropagation();var i=this.getBoundingClientRect(),o=t(this);o.hide();var r=function(t){return t.clientY<Math.floor(i.top)?!0:t.clientY>Math.ceil(i.top+i.height)?!0:t.clientX<Math.floor(i.left)?!0:t.clientX>Math.ceil(i.left+i.width)?!0:void 0};a.on("mousemove.border."+e.guid,function(t){r(t)&&(a.off("mousemove.border."+e.guid),o.show())})}})}function f(){this.offset=0,this.total=0,this.fixedCount=0}function p(t){this.instance=t}function g(){this.cache=[]}function m(){this.countTH=0}function v(t,e,n,i){var o,r=0;for(p.apply(this,arguments),this.containerSizeFn=e,this.cellSizesSum=0,this.cellSizes=[],this.cellStretch=[],this.cellCount=0,this.remainingSize=0,this.strategy=i;;){if(o=n(r),void 0===o)break;if(this.cellSizesSum>=this.getContainerSize(this.cellSizesSum+o))break;this.cellSizes.push(o),this.cellSizesSum+=o,this.cellCount++,r++}var s=this.getContainerSize(this.cellSizesSum);this.remainingSize=this.cellSizesSum-s}function y(t){var e=this,n=[];if(this.guid="wt_"+x(),this.wtDom=new b,t.cloneSource?(this.cloneSource=t.cloneSource,this.cloneOverlay=t.cloneOverlay,this.wtSettings=t.cloneSource.wtSettings,this.wtTable=new D(this,t.table),this.wtScroll=new _(this),this.wtViewport=t.cloneSource.wtViewport):(this.wtSettings=new O(this,t),this.wtTable=new D(this,t.table),this.wtScroll=new _(this),this.wtViewport=new M(this),this.wtScrollbars=new P(this),this.wtWheel=new H(this),this.wtEvent=new C(this)),this.wtTable.THEAD.childNodes.length&&this.wtTable.THEAD.childNodes[0].childNodes.length){for(var i=0,o=this.wtTable.THEAD.childNodes[0].childNodes.length;o>i;i++)n.push(this.wtTable.THEAD.childNodes[0].childNodes[i].innerHTML);this.getSetting("columnHeaders").length||this.update("columnHeaders",[function(t,i){e.wtDom.fastInnerText(i,n[t])}])}this.selections={};var r=this.getSetting("selections");if(r)for(var s in r)r.hasOwnProperty(s)&&(this.selections[s]=new N(this,r[s]));this.drawn=!1,this.drawInterrupted=!1}function w(e){this.instance=e,this.init(),this.clone=this.makeClone("debug"),this.clone.wtTable.holder.style.opacity=.4,this.clone.wtTable.holder.style.textShadow="0 0 2px #ff0000";var n,i=this,o=0,r=0,s=i.clone.wtTable.holder.parentNode;t(document.body).on("mousemove."+this.instance.guid,function(t){i.instance.wtTable.holder.parentNode&&(t.clientX-o>-5&&t.clientX-o<5&&t.clientY-r>-5&&t.clientY-r<5||(o=t.clientX,r=t.clientY,b.prototype.addClass(s,"wtDebugHidden"),b.prototype.removeClass(s,"wtDebugVisible"),clearTimeout(n),n=setTimeout(function(){b.prototype.removeClass(s,"wtDebugHidden"),b.prototype.addClass(s,"wtDebugVisible")},1e3)))})}function b(){}function C(e){var n=this;this.instance=e,this.wtDom=this.instance.wtDom;var i,o=[null,null],r=[null,null],s=function(t){var e=n.parentCell(t.target);n.wtDom.hasClass(t.target,"corner")?n.instance.getSetting("onCellCornerMouseDown",t,t.target):e.TD&&"TD"===e.TD.nodeName&&n.instance.hasSetting("onCellMouseDown")&&n.instance.getSetting("onCellMouseDown",t,e.coords,e.TD),2!==t.button&&e.TD&&"TD"===e.TD.nodeName&&(o[0]=e.TD,clearTimeout(r[0]),r[0]=setTimeout(function(){o[0]=null},1e3))},a=function(t){if(n.instance.hasSetting("onCellMouseOver")){var e=n.instance.wtTable.TABLE,o=n.wtDom.closest(t.target,["TD","TH"],e);o&&o!==i&&n.wtDom.isChildOf(o,e)&&(i=o,"TD"===o.nodeName&&n.instance.getSetting("onCellMouseOver",t,n.instance.wtTable.getCoords(o),o))}},l=function(t){if(2!==t.button){var e=n.parentCell(t.target);e.TD===o[0]&&e.TD===o[1]?(n.wtDom.hasClass(t.target,"corner")?n.instance.getSetting("onCellCornerDblClick",t,e.coords,e.TD):e.TD&&n.instance.getSetting("onCellDblClick",t,e.coords,e.TD),o[0]=null,o[1]=null):e.TD===o[0]&&(o[1]=e.TD,clearTimeout(r[1]),r[1]=setTimeout(function(){o[1]=null},500))}};t(this.instance.wtTable.holder).on("mousedown",s),t(this.instance.wtTable.TABLE).on("mouseover",a),t(this.instance.wtTable.holder).on("mouseup",l)}function x(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+t()+t()}function S(){}function T(t,e,n){p.apply(this,arguments),this.containerSizeFn=e,this.sizeAtIndex=n,this.cellSizesSum=0,this.cellSizes=[],this.cellCount=0,this.remainingSize=-(1/0)}function _(t){this.instance=t}function E(){}function k(t){this.instance=t,this.init(),this.clone=this.makeClone("corner")}function R(t){this.instance=t,this.type="horizontal",this.cellSize=50,this.init(),this.clone=this.makeClone("left")}function A(t){this.instance=t,this.type="vertical",this.cellSize=23,this.init(),this.clone=this.makeClone("top")}function P(t){this.instance=t,t.getSetting("nativeScrollbars")?(t.update("scrollbarWidth",t.wtDom.getScrollbarWidth()),t.update("scrollbarHeight",t.wtDom.getScrollbarWidth()),this.vertical=new A(t),this.horizontal=new R(t),this.corner=new k(t),t.getSetting("debug")&&(this.debug=new w(t)),this.registerListeners()):(this.vertical=new q(t),this.horizontal=new G(t))}function N(t,e){this.instance=t,this.settings=e,this.selected=[],e.border&&(this.border=new d(t,e))}function O(t,e){var n=this;this.instance=t,this.defaults={table:void 0,debug:!1,scrollH:"auto",scrollV:"auto",nativeScrollbars:!1,stretchH:"hybrid",currentRowClassName:null,currentColumnClassName:null,data:void 0,offsetRow:0,offsetColumn:0,fixedColumnsLeft:0,fixedRowsTop:0,rowHeaders:function(){return[]},columnHeaders:function(){return[]},totalRows:void 0,totalColumns:void 0,width:null,height:null,cellRenderer:function(t,e,i){var o=n.getSetting("data",t,e);n.instance.wtDom.fastInnerText(i,void 0===o||null===o?"":o)},columnWidth:50,selections:null,hideBorderOnMouseDownOver:!1,onCellMouseDown:null,onCellMouseOver:null,onCellDblClick:null,onCellCornerMouseDown:null,onCellCornerDblClick:null,beforeDraw:null,onDraw:null,onScrollVertically:null,onScrollHorizontally:null,scrollbarWidth:10,scrollbarHeight:10},this.settings={};for(var i in this.defaults)if(this.defaults.hasOwnProperty(i))if(void 0!==e[i])this.settings[i]=e[i];else{if(void 0===this.defaults[i])throw new Error('A required setting "'+i+'" was not provided');this.settings[i]=this.defaults[i]}}function D(t,e){this.instance=t,this.TABLE=e,this.wtDom=this.instance.wtDom,this.wtDom.removeTextNodes(this.TABLE);var n=this.TABLE.parentNode;if(!n||1!==n.nodeType||!this.wtDom.hasClass(n,"wtHolder")){var i=document.createElement("DIV");i.className="wtSpreader",n&&n.insertBefore(i,this.TABLE),i.appendChild(this.TABLE)}if(this.spreader=this.TABLE.parentNode,n=this.spreader.parentNode,!n||1!==n.nodeType||!this.wtDom.hasClass(n,"wtHolder")){var o=document.createElement("DIV");o.className="wtHider",n&&n.insertBefore(o,this.spreader),o.appendChild(this.spreader)}if(this.hider=this.spreader.parentNode,this.hiderStyle=this.hider.style,this.hiderStyle.position="relative",n=this.hider.parentNode,!n||1!==n.nodeType||!this.wtDom.hasClass(n,"wtHolder")){var r=document.createElement("DIV");r.style.position="relative",r.className="wtHolder",n&&n.insertBefore(r,this.hider),r.appendChild(this.hider)}if(this.holder=this.hider.parentNode,this.TBODY=this.TABLE.getElementsByTagName("TBODY")[0],this.TBODY||(this.TBODY=document.createElement("TBODY"),this.TABLE.appendChild(this.TBODY)),this.THEAD=this.TABLE.getElementsByTagName("THEAD")[0],this.THEAD||(this.THEAD=document.createElement("THEAD"),this.TABLE.insertBefore(this.THEAD,this.TBODY)),this.COLGROUP=this.TABLE.getElementsByTagName("COLGROUP")[0],this.COLGROUP||(this.COLGROUP=document.createElement("COLGROUP"),this.TABLE.insertBefore(this.COLGROUP,this.THEAD)),this.instance.getSetting("columnHeaders").length&&!this.THEAD.childNodes.length){var s=document.createElement("TR");this.THEAD.appendChild(s)}this.colgroupChildrenLength=this.COLGROUP.childNodes.length,this.theadChildrenLength=this.THEAD.firstChild?this.THEAD.firstChild.childNodes.length:0,this.tbodyChildrenLength=this.TBODY.childNodes.length,this.oldCellCache=new g,this.currentCellCache=new g,this.rowFilter=new S,this.columnFilter=new m,this.verticalRenderReverse=!1}function M(e){if(this.instance=e,this.resetSettings(),this.instance.getSetting("nativeScrollbars")){var n=this;t(i).on("resize",function(){n.clientHeight=n.getWorkspaceHeight()})}}function H(e){e.getSetting("nativeScrollbars")||t(e.wtTable.spreader).on("mousewheel",function(t,n,i,o){i||o||!n||(o=n),(i||o)&&(o>0&&0===e.getSetting("offsetRow")||0>o&&e.wtTable.isLastRowFullyVisible()||0>i&&0===e.getSetting("offsetColumn")||i>0&&e.wtTable.isLastColumnFullyVisible()||(clearTimeout(e.wheelTimeout),e.wheelTimeout=setTimeout(function(){o?e.wtScrollbars.vertical.visible&&e.scrollVertical(-Math.ceil(o)).draw():i&&e.wtScrollbars.horizontal.visible&&e.scrollHorizontal(Math.ceil(i)).draw()},0),t.preventDefault()))})}Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var e=this.length>>>0,n=Number(arguments[1])||0;for(n=0>n?Math.ceil(n):Math.floor(n),0>n&&(n+=e);e>n;n++)if(n in this&&this[n]===t)return n;return-1}),Array.prototype.filter||(Array.prototype.filter=function(t,e){function n(t){return/NodeList/i.test(t.item)}function i(t){for(var e=[],n=0,i=t.length;i>n;n++)e[n]=t[n];return e}if("undefined"==typeof this||null===this)throw new TypeError;if("function"!=typeof t)throw new TypeError;e=e||this,n(e)&&(e=i(e));var o,r,s=e.length,a=[];for(o=0;s>o;o+=1)e.hasOwnProperty(o)&&(r=e[o],t.call(e,r,o,e)&&a.push(r));return a}),"undefined"==typeof WeakMap&&!function(){var t=Object.defineProperty;try{var e=!0;t(function(){},"foo",{})}catch(n){e=!1}var o=+new Date%1e9,r=function(){this.name="__st"+(1e9*Math.random()>>>0)+(o++ +"__"),e||(this._wmCache=[])};e?r.prototype={set:function(e,n){var i=e[this.name];i&&i[0]===e?i[1]=n:t(e,this.name,{value:[e,n],writable:!0})},get:function(t){var e;return(e=t[this.name])&&e[0]===t?e[1]:void 0},"delete":function(t){this.set(t,void 0)}}:r.prototype={set:function(t,e){if("undefined"!=typeof t&&"undefined"!=typeof e){for(var n=0,i=this._wmCache.length;i>n;n++)if(this._wmCache[n].key==t)return void(this._wmCache[n].value=e);this._wmCache.push({key:t,value:e})}},get:function(t){if("undefined"!=typeof t)for(var e=0,n=this._wmCache.length;n>e;e++)if(this._wmCache[e].key==t)return this._wmCache[e].value},"delete":function(t){if("undefined"!=typeof t)for(var e=0,n=this._wmCache.length;n>e;e++)this._wmCache[e].key==t&&Array.prototype.slice.call(this._wmCache,e,1)}},i.WeakMap=r}(),o.activeGuid=null,o.Core=function(e,n){function r(){var t=!1;return{validatorsInQueue:0,addValidatorToQueue:function(){this.validatorsInQueue++,t=!1},removeValidatorFormQueue:function(){this.validatorsInQueue=this.validatorsInQueue-1<0?0:this.validatorsInQueue-1,this.checkIfQueueIsEmpty()},onQueueEmpty:function(){},checkIfQueueIsEmpty:function(){0==this.validatorsInQueue&&0==t&&(t=!0,this.onQueueEmpty())}}}function s(e,n,i){function o(){var o;e.length&&(o=m.PluginHooks.execute("beforeChange",e,n),"function"==typeof o?t.when(result).then(function(){i()}):o===!1&&e.splice(0,e.length)),"function"!=typeof o&&i()}var s=new r;s.onQueueEmpty=o;for(var a=e.length-1;a>=0;a--)if(null===e[a])e.splice(a,1);else{var l=e[a][0],c=h.propToCol(e[a][1]),u=m.runHooksAndReturn("modifyCol",c),d=m.getCellMeta(l,u);"numeric"===d.type&&"string"==typeof e[a][3]&&e[a][3].length>0&&/^-?[\d\s]*\.?\d*$/.test(e[a][3])&&(e[a][3]=numeral().unformat(e[a][3]||"0")),m.getCellValidator(d)&&(s.addValidatorToQueue(),m.validateCell(e[a][3],d,function(t,n){return function(i){if("boolean"!=typeof i)throw new Error("Validation error: result is not boolean");i===!1&&n.allowInvalid===!1&&(e.splice(t,1),n.valid=!0,--t),s.removeValidatorFormQueue()}}(a,d),n))}s.checkIfQueueIsEmpty()}function a(t,e){var n=t.length-1;if(!(0>n)){for(;n>=0;n--)if(null!==t[n]){if(u.settings.minSpareRows)for(;t[n][0]>m.countRows()-1;)h.createRow();if("array"===m.dataType&&u.settings.minSpareCols)for(;h.propToCol(t[n][1])>m.countCols()-1;)h.createCol();h.set(t[n][0],t[n][1],t[n][3])}else t.splice(n,1);m.forceFullRender=!0,d.adjustRowsAndCols(),f.refreshBorders(null,!0),m.PluginHooks.run("afterChange",t,e||"edit")}}function l(e,n,i){return"object"==typeof e?e:t.isPlainObject(i)?i:[[e,n,i]]}function c(t){if(t.hasOwnProperty("type")){var e,n={};if("object"==typeof t.type)e=t.type;else if("string"==typeof t.type&&(e=o.cellTypes[t.type],void 0===e))throw new Error('You declared cell type "'+t.type+'" as a string that is not mapped to a known object. Cell type must be an object or a string mapped to an object in Handsontable.cellTypes');for(var i in e)e.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(n[i]=e[i]);return n}}var u,h,d,f,p,g,m=this,v=function(){};o.helper.extend(v.prototype,I.prototype),o.helper.extend(v.prototype,n),o.helper.extend(v.prototype,c(n)),this.rootElement=e;var y=t(document.documentElement),w=t(document.body);this.guid="ht_"+o.helper.randomString(),this.rootElement[0].id||(this.rootElement[0].id=this.guid),u={cellSettings:[],columnSettings:[],columnsSettingConflicts:["data","width"],settings:new v,settingsFromDOM:{},selStart:new o.SelectionPoint,selEnd:new o.SelectionPoint,isPopulated:null,scrollable:null,extensions:{},firstRun:!0},d={alter:function(t,e,n,i,r){var s;switch(n=n||1,t){case"insert_row":s=h.createRow(e,n),s&&(u.selStart.exists()&&u.selStart.row()>=e?(u.selStart.row(u.selStart.row()+s),f.transformEnd(s,0)):f.refreshBorders());break;case"insert_col":if(s=h.createCol(e,n)){if(o.helper.isArray(m.getSettings().colHeaders)){var a=[e,0];a.length+=s,Array.prototype.splice.apply(m.getSettings().colHeaders,a)}u.selStart.exists()&&u.selStart.col()>=e?(u.selStart.col(u.selStart.col()+s),f.transformEnd(0,s)):f.refreshBorders()}break;case"remove_row":h.removeRow(e,n),u.cellSettings.splice(e,n),d.adjustRowsAndCols(),f.refreshBorders();break;case"remove_col":h.removeCol(e,n);for(var l=0,c=h.getAll().length;c>l;l++)l in u.cellSettings&&u.cellSettings[l].splice(e,n);o.helper.isArray(m.getSettings().colHeaders)&&("undefined"==typeof e&&(e=-1),m.getSettings().colHeaders.splice(e,n)),u.columnSettings.splice(e,n),d.adjustRowsAndCols(),f.refreshBorders();break;default:throw new Error('There is no such action "'+t+'"')}r||d.adjustRowsAndCols()},adjustRowsAndCols:function(){var t,e,n,i=m.countEmptyRows(!0);if(e=m.countRows(),e<u.settings.minRows)for(t=0;t<u.settings.minRows-e;t++)h.createRow(m.countRows(),1,!0);if(i<u.settings.minSpareRows)for(;i<u.settings.minSpareRows&&m.countRows()<u.settings.maxRows;i++)h.createRow(m.countRows(),1,!0);if(n=m.countEmptyCols(!0),!u.settings.columns&&m.countCols()<u.settings.minCols)for(;m.countCols()<u.settings.minCols;n++)h.createCol(m.countCols(),1,!0);if(!u.settings.columns&&"array"===m.dataType&&n<u.settings.minSpareCols)for(;n<u.settings.minSpareCols&&m.countCols()<u.settings.maxCols;n++)h.createCol(m.countCols(),1,!0);if(u.settings.enterBeginsEditing)for(;(u.settings.minRows||u.settings.minSpareRows)&&m.countRows()>u.settings.minRows&&u.settings.minSpareRows&&i>u.settings.minSpareRows;i--)h.removeRow();if(u.settings.enterBeginsEditing&&!u.settings.columns)for(;(u.settings.minCols||u.settings.minSpareCols)&&m.countCols()>u.settings.minCols&&u.settings.minSpareCols&&n>u.settings.minSpareCols;n--)h.removeCol();var o=m.countRows(),r=m.countCols();if(0!==o&&0!==r||f.deselect(),u.selStart.exists()){var s,a=u.selStart.row(),l=u.selStart.col(),c=u.selEnd.row(),d=u.selEnd.col();a>o-1?(a=o-1,s=!0,c>a&&(c=a)):c>o-1&&(c=o-1,s=!0,a>c&&(a=c)),l>r-1?(l=r-1,s=!0,d>l&&(d=l)):d>r-1&&(d=r-1,s=!0,l>d&&(l=d)),s&&m.selectCell(a,l,c,d)}},populateFromArray:function(t,e,n,i,r){var s,a,l,c,h=[],d={};if(a=e.length,0===a)return!1;var f,p,g,v;switch(r){case"shift_down":for(f=n?n.col-t.col+1:0,p=n?n.row-t.row+1:0,e=o.helper.translateRowsToColumns(e),l=0,c=e.length,g=Math.max(c,f);g>l;l++)if(c>l){for(s=0,a=e[l].length;p-a>s;s++)e[l].push(e[l][s%a]);e[l].unshift(t.col+l,t.row,0),m.spliceCol.apply(m,e[l])}else e[l%c][0]=t.col+l,m.spliceCol.apply(m,e[l%c]);break;case"shift_right":for(f=n?n.col-t.col+1:0,p=n?n.row-t.row+1:0,s=0,a=e.length,v=Math.max(a,p);v>s;s++)if(a>s){for(l=0,c=e[s].length;f-c>l;l++)e[s].push(e[s][l%c]);e[s].unshift(t.row+s,t.col,0),m.spliceRow.apply(m,e[s])}else e[s%a][0]=t.row+s,m.spliceRow.apply(m,e[s%a]);break;case"overwrite":default:for(d.row=t.row,d.col=t.col,s=0;a>s&&!(n&&d.row>n.row||!u.settings.minSpareRows&&d.row>m.countRows()-1||d.row>=u.settings.maxRows);s++){for(d.col=t.col,c=e[s]?e[s].length:0,l=0;c>l&&!(n&&d.col>n.col||!u.settings.minSpareCols&&d.col>m.countCols()-1||d.col>=u.settings.maxCols);l++)m.getCellMeta(d.row,d.col).readOnly||h.push([d.row,d.col,e[s][l]]),d.col++,n&&l===c-1&&(l=-1);d.row++,n&&s===a-1&&(s=-1)}m.setDataAtCell(h,null,null,i||"populateFromArray")}},getCornerCoords:function(e){function n(e,n,i){function o(t){return t[i]}return Array.prototype.map?e.apply(Math,n.map(o)):e.apply(Math,t.map(n,o))}return{TL:{row:n(Math.min,e,"row"),col:n(Math.min,e,"col")},BR:{row:n(Math.max,e,"row"),col:n(Math.max,e,"col")}}},getCellsAtCoords:function(t,e){var n,i,o=d.getCornerCoords([t,e]),r=[];for(n=o.TL.row;n<=o.BR.row;n++)for(i=o.TL.col;i<=o.BR.col;i++)r.push(m.view.getCellAtCoords({row:n,col:i}));return r}},this.selection=f={inProgress:!1,begin:function(){m.selection.inProgress=!0},finish:function(){var t=m.getSelected();m.PluginHooks.run("afterSelectionEnd",t[0],t[1],t[2],t[3]),m.PluginHooks.run("afterSelectionEndByProp",t[0],m.colToProp(t[1]),t[2],m.colToProp(t[3])),m.selection.inProgress=!1},isInProgress:function(){return m.selection.inProgress},setRangeStart:function(t){u.selStart.coords(t),f.setRangeEnd(t)},setRangeEnd:function(t,e){m.selection.begin(),u.selEnd.coords(t),u.settings.multiSelect||u.selStart.coords(t),m.view.wt.selections.current.clear(),m.view.wt.selections.current.add(u.selStart.arr()),m.view.wt.selections.area.clear(),f.isMultiple()&&(m.view.wt.selections.area.add(u.selStart.arr()),m.view.wt.selections.area.add(u.selEnd.arr())),(u.settings.currentRowClassName||u.settings.currentColClassName)&&(m.view.wt.selections.highlight.clear(),m.view.wt.selections.highlight.add(u.selStart.arr()),m.view.wt.selections.highlight.add(u.selEnd.arr())),m.PluginHooks.run("afterSelection",u.selStart.row(),u.selStart.col(),u.selEnd.row(),u.selEnd.col()),m.PluginHooks.run("afterSelectionByProp",u.selStart.row(),h.colToProp(u.selStart.col()),u.selEnd.row(),h.colToProp(u.selEnd.col())),e!==!1&&m.view.scrollViewport(t),f.refreshBorders()},refreshBorders:function(t,e){e||p.destroyEditor(t),m.view.render(),f.isSelected()&&!e&&p.prepareEditor()},isMultiple:function(){return!(u.selEnd.col()===u.selStart.col()&&u.selEnd.row()===u.selStart.row())},transformStart:function(t,e,n){u.selStart.row()+t>m.countRows()-1?n&&u.settings.minSpareRows>0?m.alter("insert_row",m.countRows()):u.settings.autoWrapCol&&(t=1-m.countRows(),e=u.selStart.col()+e==m.countCols()-1?1-m.countCols():1):u.settings.autoWrapCol&&u.selStart.row()+t<0&&u.selStart.col()+e>=0&&(t=m.countRows()-1,e=u.selStart.col()+e==0?m.countCols()-1:-1),u.selStart.col()+e>m.countCols()-1?n&&u.settings.minSpareCols>0?m.alter("insert_col",m.countCols()):u.settings.autoWrapRow&&(t=u.selStart.row()+t==m.countRows()-1?1-m.countRows():1,e=1-m.countCols()):u.settings.autoWrapRow&&u.selStart.col()+e<0&&u.selStart.row()+t>=0&&(t=u.selStart.row()+t==0?m.countRows()-1:-1,e=m.countCols()-1);var i=m.countRows(),o=m.countCols(),r={row:u.selStart.row()+t,col:u.selStart.col()+e};r.row<0?r.row=0:r.row>0&&r.row>=i&&(r.row=i-1),r.col<0?r.col=0:r.col>0&&r.col>=o&&(r.col=o-1),f.setRangeStart(r)},transformEnd:function(t,e){if(u.selEnd.exists()){var n=m.countRows(),i=m.countCols(),o={row:u.selEnd.row()+t,col:u.selEnd.col()+e};o.row<0?o.row=0:o.row>0&&o.row>=n&&(o.row=n-1),o.col<0?o.col=0:o.col>0&&o.col>=i&&(o.col=i-1),f.setRangeEnd(o)}},isSelected:function(){return u.selEnd.exists()},inInSelection:function(t){if(!f.isSelected())return!1;var e=d.getCornerCoords([u.selStart.coords(),u.selEnd.coords()]);return e.TL.row<=t.row&&e.BR.row>=t.row&&e.TL.col<=t.col&&e.BR.col>=t.col},deselect:function(){f.isSelected()&&(m.selection.inProgress=!1,u.selEnd=new o.SelectionPoint,m.view.wt.selections.current.clear(),m.view.wt.selections.area.clear(),p.destroyEditor(),f.refreshBorders(),m.PluginHooks.run("afterDeselect"))},selectAll:function(){u.settings.multiSelect&&(f.setRangeStart({row:0,col:0}),f.setRangeEnd({row:m.countRows()-1,col:m.countCols()-1},!1))},empty:function(){if(f.isSelected()){var t,e,n=d.getCornerCoords([u.selStart.coords(),u.selEnd.coords()]),i=[];for(t=n.TL.row;t<=n.BR.row;t++)for(e=n.TL.col;e<=n.BR.col;e++)m.getCellMeta(t,e).readOnly||i.push([t,e,""]);m.setDataAtCell(i)}}},this.autofill=g={handle:null,init:function(){g.handle?g.handle.disabled=!1:g.handle={}},disable:function(){g.handle.disabled=!0},selectAdjacent:function(){var t,e,n,i,o;t=f.isMultiple()?m.view.wt.selections.area.getCorners():m.view.wt.selections.current.getCorners(),e=h.getAll();t:for(n=t[2]+1;n<m.countRows();n++){for(o=t[1];o<=t[3];o++)if(e[n][o])break t;(e[n][t[1]-1]||e[n][t[3]+1])&&(i=n)}i&&(m.view.wt.selections.fill.clear(),m.view.wt.selections.fill.add([t[0],t[1]]),m.view.wt.selections.fill.add([i,t[3]]),g.apply())},apply:function(){var t,e,n,i,o;g.handle.isDragged=0,t=m.view.wt.selections.fill.getCorners(),t&&(m.view.wt.selections.fill.clear(),e=f.isMultiple()?m.view.wt.selections.area.getCorners():m.view.wt.selections.current.getCorners(),t[0]===e[0]&&t[1]<e[1]?(n={row:t[0],col:t[1]},i={row:t[2],col:e[1]-1}):t[0]===e[0]&&t[3]>e[3]?(n={row:t[0],col:e[3]+1},i={row:t[2],col:t[3]}):t[0]<e[0]&&t[1]===e[1]?(n={row:t[0],col:t[1]},i={row:e[0]-1,col:t[3]}):t[2]>e[2]&&t[1]===e[1]&&(n={row:e[2]+1,col:t[1]},i={row:t[2],col:t[3]}),n&&(o=SheetClip.parse(h.getText(u.selStart.coords(),u.selEnd.coords())),m.PluginHooks.run("beforeAutofill",n,i,o),d.populateFromArray(n,o,i,"autofill"),f.setRangeStart({row:t[0],col:t[1]}),f.setRangeEnd({row:t[2],col:t[3]})))},showBorder:function(t){t.row=t[0],t.col=t[1];var e=d.getCornerCoords([u.selStart.coords(),u.selEnd.coords()]);if("horizontal"!==u.settings.fillHandle&&(e.BR.row<t.row||e.TL.row>t.row))t=[t.row,e.BR.col];else{if("vertical"===u.settings.fillHandle)return;t=[e.BR.row,t.col]}m.view.wt.selections.fill.clear(),m.view.wt.selections.fill.add([u.selStart.coords().row,u.selStart.coords().col]),m.view.wt.selections.fill.add([u.selEnd.coords().row,u.selEnd.coords().col]),m.view.wt.selections.fill.add(t),m.view.render()}},this.init=function(){m.PluginHooks.run("beforeInit"),this.view=new o.TableView(this),p=new o.EditorManager(m,u,f,h),this.updateSettings(u.settings,!0),this.parseSettingsFromDOM(),this.forceFullRender=!0,this.view.render(),"object"==typeof u.firstRun&&(m.PluginHooks.run("afterChange",u.firstRun[0],u.firstRun[1]),u.firstRun=!1),m.PluginHooks.run("afterInit")},this.validateCell=function(t,e,n,i){var o=m.getCellValidator(e);"[object RegExp]"===Object.prototype.toString.call(o)&&(o=function(t){return function(e,n){n(t.test(e))}}(o)),"function"==typeof o?(t=m.PluginHooks.execute("beforeValidate",t,e.row,e.prop,i),setTimeout(function(){o.call(e,t,function(o){e.valid=o,o=m.PluginHooks.execute("afterValidate",o,t,e.row,e.prop,i),n(o)})})):(e.valid=!0,n(!0))},this.setDataAtCell=function(t,e,n,i){var o,r,c,u=l(t,e,n),d=[];for(o=0,r=u.length;r>o;o++){if("object"!=typeof u[o])throw new Error("Method `setDataAtCell` accepts row number or changes array of arrays as its first parameter");if("number"!=typeof u[o][1])throw new Error("Method `setDataAtCell` accepts row and column number as its parameters. If you want to use object property name, use method `setDataAtRowProp`");c=h.colToProp(u[o][1]),d.push([u[o][0],c,h.get(u[o][0],c),u[o][2]])}i||"object"!=typeof t||(i=e),s(d,i,function(){a(d,i)})},this.setDataAtRowProp=function(t,e,n,i){var o,r,c=l(t,e,n),u=[];for(o=0,r=c.length;r>o;o++)u.push([c[o][0],c[o][1],h.get(c[o][0],c[o][1]),c[o][2]]);i||"object"!=typeof t||(i=e),s(u,i,function(){a(u,i)})},this.listen=function(){o.activeGuid=m.guid,document.activeElement&&document.activeElement!==document.body?document.activeElement.blur():document.activeElement||document.body.focus()},this.unlisten=function(){o.activeGuid=null},this.isListening=function(){return o.activeGuid===m.guid},this.destroyEditor=function(t){f.refreshBorders(t)},this.populateFromArray=function(t,e,n,i,o,r,s){if("object"!=typeof n||"object"!=typeof n[0])throw new Error("populateFromArray parameter `input` must be an array of arrays");return d.populateFromArray({row:t,col:e},n,"number"==typeof i?{row:i,col:o}:null,r,s)},this.spliceCol=function(t,e,n){return h.spliceCol.apply(h,arguments)},this.spliceRow=function(t,e,n){return h.spliceRow.apply(h,arguments)},this.getCornerCoords=function(t){return d.getCornerCoords(t)},this.getSelected=function(){return f.isSelected()?[u.selStart.row(),u.selStart.col(),u.selEnd.row(),u.selEnd.col()]:void 0},this.parseSettingsFromDOM=function(){var t=this.rootElement.css("overflow");if("scroll"===t||"auto"===t?(this.rootElement[0].style.overflow="visible",u.settingsFromDOM.overflow=t):void 0!==u.settings.width&&void 0!==u.settings.height||(u.settingsFromDOM.overflow="auto"),void 0===u.settings.width?u.settingsFromDOM.width=this.rootElement.width():u.settingsFromDOM.width=void 0,u.settingsFromDOM.height=void 0,void 0===u.settings.height&&("scroll"===u.settingsFromDOM.overflow||"auto"===u.settingsFromDOM.overflow)){var e=this.rootElement[0].cloneNode(!1),n=this.rootElement[0].parentNode;if(n){e.removeAttribute("id"),n.appendChild(e);var o=parseInt(i.getComputedStyle(e,null).getPropertyValue("height"),10);isNaN(o)&&e.currentStyle&&(o=parseInt(e.currentStyle.height,10)),o>0&&(u.settingsFromDOM.height=o),n.removeChild(e)}}},this.render=function(){m.view&&(m.forceFullRender=!0,m.parseSettingsFromDOM(),f.refreshBorders(null,!0))},this.loadData=function(t){function e(){u.cellSettings.length=0}if("object"==typeof t&&null!==t)t.push&&t.splice||(t=[t]);else{if(null!==t)throw new Error("loadData only accepts array of objects or array of arrays ("+typeof t+" given)");t=[];for(var n,i=0,r=u.settings.startRows;r>i;i++){n=[];for(var s=0,a=u.settings.startCols;a>s;s++)n.push(null);t.push(n)}}u.isPopulated=!1,v.prototype.data=t,u.settings.dataSchema instanceof Array||t[0]instanceof Array?m.dataType="array":"function"==typeof u.settings.dataSchema?m.dataType="function":m.dataType="object",h=new o.DataMap(m,u,v),e(),d.adjustRowsAndCols(),m.PluginHooks.run("afterLoadData"),u.firstRun?u.firstRun=[null,"loadData"]:(m.PluginHooks.run("afterChange",null,"loadData"),m.render()),u.isPopulated=!0},this.getData=function(t,e,n,i){return"undefined"==typeof t?h.getAll():h.getRange({row:t,col:e},{row:n,col:i},h.DESTINATION_RENDERER)},this.getCopyableData=function(t,e,n,i){return h.getCopyableText({row:t,col:e},{row:n,col:i})},this.updateSettings=function(t,e){var n,i;if("undefined"!=typeof t.rows)throw new Error("'rows' setting is no longer supported. do you mean startRows, minRows or maxRows?");if("undefined"!=typeof t.cols)throw new Error("'cols' setting is no longer supported. do you mean startCols, minCols or maxCols?");for(n in t)"data"!==n&&(void 0!==m.PluginHooks.hooks[n]||void 0!==m.PluginHooks.legacy[n]?("function"==typeof t[n]||o.helper.isArray(t[n]))&&m.PluginHooks.add(n,t[n]):(!e&&t.hasOwnProperty(n)&&(v.prototype[n]=t[n]),o.extension[n]&&(u.extensions[n]=new o.extension[n](m,t[n]))));if(void 0===t.data&&void 0===u.settings.data?m.loadData(null):void 0!==t.data?m.loadData(t.data):void 0!==t.columns&&h.createMap(),i=m.countCols(),u.cellSettings.length=0,i>0){var r,s;for(n=0;i>n;n++)u.columnSettings[n]=o.helper.columnFactory(v,u.columnsSettingConflicts),r=u.columnSettings[n].prototype,v.prototype.columns&&(s=v.prototype.columns[n],o.helper.extend(r,s),o.helper.extend(r,c(s)))}"undefined"!=typeof t.fillHandle&&(g.handle&&t.fillHandle===!1?g.disable():g.handle||t.fillHandle===!1||g.init()),"undefined"!=typeof t.className&&(v.prototype.className&&m.rootElement.removeClass(v.prototype.className),t.className&&m.rootElement.addClass(t.className)),e||m.PluginHooks.run("afterUpdateSettings"),d.adjustRowsAndCols(),m.view&&!u.firstRun&&(m.forceFullRender=!0,f.refreshBorders(null,!0))},this.getValue=function(){var t=m.getSelected();if(v.prototype.getValue){if("function"==typeof v.prototype.getValue)return v.prototype.getValue.call(m);if(t)return m.getData()[t[0]][v.prototype.getValue]}else if(t)return m.getDataAtCell(t[0],t[1])},this.getSettings=function(){return u.settings},this.getSettingsFromDOM=function(){return u.settingsFromDOM},this.clear=function(){f.selectAll(),f.empty()},this.alter=function(t,e,n,i,o){d.alter(t,e,n,i,o)},this.getCell=function(t,e){return m.view.getCellAtCoords({row:t,col:e})},this.colToProp=function(t){return h.colToProp(t)},this.propToCol=function(t){return h.propToCol(t)},this.getDataAtCell=function(t,e){return h.get(t,h.colToProp(e))},this.getDataAtRowProp=function(t,e){return h.get(t,e)},this.getDataAtCol=function(t){return[].concat.apply([],h.getRange({row:0,col:t},{row:u.settings.data.length-1,col:t},h.DESTINATION_RENDERER))},this.getDataAtProp=function(t){return[].concat.apply([],h.getRange({row:0,col:h.propToCol(t)},{row:u.settings.data.length-1,col:h.propToCol(t)},h.DESTINATION_RENDERER))},this.getDataAtRow=function(t){return u.settings.data[t]},this.getCellMeta=function(t,e){function n(t){var e={row:t};return m.PluginHooks.execute("beforeGet",e),e.row}function i(t){return o.PluginHooks.execute(m,"modifyCol",t)}var r,s=h.colToProp(e);if(t=n(t),e=i(e),"undefined"==typeof u.columnSettings[e]&&(u.columnSettings[e]=o.helper.columnFactory(v,u.columnsSettingConflicts)),u.cellSettings[t]||(u.cellSettings[t]=[]),u.cellSettings[t][e]||(u.cellSettings[t][e]=new u.columnSettings[e]),r=u.cellSettings[t][e],r.row=t,r.col=e,r.prop=s,r.instance=m,m.PluginHooks.run("beforeGetCellMeta",t,e,r),o.helper.extend(r,c(r)),r.cells){var a=r.cells.call(r,t,e,s);a&&(o.helper.extend(r,a),o.helper.extend(r,c(a)))}return m.PluginHooks.run("afterGetCellMeta",t,e,r),r};var b=o.helper.cellMethodLookupFactory("renderer");this.getCellRenderer=function(t,e){var n=b.call(this,t,e);return o.renderers.getRenderer(n)},this.getCellEditor=o.helper.cellMethodLookupFactory("editor"),this.getCellValidator=o.helper.cellMethodLookupFactory("validator"),this.validateCells=function(t){var e=new r;e.onQueueEmpty=t;for(var n=m.countRows()-1;n>=0;){for(var i=m.countCols()-1;i>=0;)e.addValidatorToQueue(),m.validateCell(m.getDataAtCell(n,i),m.getCellMeta(n,i),function(){e.removeValidatorFormQueue()},"validateCells"),i--;n--}e.checkIfQueueIsEmpty()},this.getRowHeader=function(t){if(void 0===t){for(var e=[],n=0,i=m.countRows();i>n;n++)e.push(m.getRowHeader(n));return e}return"[object Array]"===Object.prototype.toString.call(u.settings.rowHeaders)&&void 0!==u.settings.rowHeaders[t]?u.settings.rowHeaders[t]:"function"==typeof u.settings.rowHeaders?u.settings.rowHeaders(t):u.settings.rowHeaders&&"string"!=typeof u.settings.rowHeaders&&"number"!=typeof u.settings.rowHeaders?t+1:u.settings.rowHeaders},this.hasRowHeaders=function(){return!!u.settings.rowHeaders},this.hasColHeaders=function(){if(void 0!==u.settings.colHeaders&&null!==u.settings.colHeaders)return!!u.settings.colHeaders;for(var t=0,e=m.countCols();e>t;t++)if(m.getColHeader(t))return!0;
return!1},this.getColHeader=function(t){if(void 0===t){for(var e=[],n=0,i=m.countCols();i>n;n++)e.push(m.getColHeader(n));return e}return t=o.PluginHooks.execute(m,"modifyCol",t),u.settings.columns&&u.settings.columns[t]&&u.settings.columns[t].title?u.settings.columns[t].title:"[object Array]"===Object.prototype.toString.call(u.settings.colHeaders)&&void 0!==u.settings.colHeaders[t]?u.settings.colHeaders[t]:"function"==typeof u.settings.colHeaders?u.settings.colHeaders(t):u.settings.colHeaders&&"string"!=typeof u.settings.colHeaders&&"number"!=typeof u.settings.colHeaders?o.helper.spreadsheetColumnLabel(t):u.settings.colHeaders},this._getColWidthFromSettings=function(t){var e=m.getCellMeta(0,t),n=e.width;if(void 0!==n&&n!==u.settings.width||(n=e.colWidths),void 0!==n&&null!==n){switch(typeof n){case"object":n=n[t];break;case"function":n=n(t)}"string"==typeof n&&(n=parseInt(n,10))}return n},this.getColWidth=function(t){t=o.PluginHooks.execute(m,"modifyCol",t);var e={width:m._getColWidthFromSettings(t)};return e.width||(e.width=50),m.PluginHooks.run("afterGetColWidth",t,e),e.width},this.countRows=function(){return u.settings.data.length},this.countCols=function(){return"object"===m.dataType||"function"===m.dataType?u.settings.columns&&u.settings.columns.length?u.settings.columns.length:h.colToPropCache.length:"array"===m.dataType?u.settings.columns&&u.settings.columns.length?u.settings.columns.length:u.settings.data&&u.settings.data[0]&&u.settings.data[0].length?u.settings.data[0].length:0:void 0},this.rowOffset=function(){return m.view.wt.getSetting("offsetRow")},this.colOffset=function(){return m.view.wt.getSetting("offsetColumn")},this.countVisibleRows=function(){return m.view.wt.drawn?m.view.wt.wtTable.rowStrategy.countVisible():-1},this.countVisibleCols=function(){return m.view.wt.drawn?m.view.wt.wtTable.columnStrategy.countVisible():-1},this.countEmptyRows=function(t){for(var e=m.countRows()-1,n=0;e>=0;){if(h.get(e,0),m.isEmptyRow(h.getVars.row))n++;else if(t)break;e--}return n},this.countEmptyCols=function(t){if(m.countRows()<1)return 0;for(var e=m.countCols()-1,n=0;e>=0;){if(m.isEmptyCol(e))n++;else if(t)break;e--}return n},this.isEmptyRow=function(t){return u.settings.isEmptyRow.call(m,t)},this.isEmptyCol=function(t){return u.settings.isEmptyCol.call(m,t)},this.selectCell=function(t,e,n,i,o){if("number"!=typeof t||0>t||t>=m.countRows())return!1;if("number"!=typeof e||0>e||e>=m.countCols())return!1;if("undefined"!=typeof n){if("number"!=typeof n||0>n||n>=m.countRows())return!1;if("number"!=typeof i||0>i||i>=m.countCols())return!1}return u.selStart.coords({row:t,col:e}),document.activeElement&&document.activeElement!==document.documentElement&&document.activeElement!==document.body&&document.activeElement.blur(),m.listen(),"undefined"==typeof n?f.setRangeEnd({row:t,col:e},o):f.setRangeEnd({row:n,col:i},o),m.selection.finish(),!0},this.selectCellByProp=function(t,e,n,i,o){return arguments[1]=h.propToCol(arguments[1]),"undefined"!=typeof arguments[3]&&(arguments[3]=h.propToCol(arguments[3])),m.selectCell.apply(m,arguments)},this.deselectCell=function(){f.deselect()},this.destroy=function(){m.clearTimeouts(),m.view&&m.view.wt.destroy(),m.rootElement.empty(),m.rootElement.removeData("handsontable"),m.rootElement.off(".handsontable"),t(i).off("."+m.guid),y.off("."+m.guid),w.off("."+m.guid),m.PluginHooks.run("afterDestroy")},this.getActiveEditor=function(){return p.getActiveEditor()},this.getInstance=function(){return m.rootElement.data("handsontable")},function(){m.PluginHooks=new o.PluginHookClass;var t=m.PluginHooks.run,e=m.PluginHooks.execute;m.PluginHooks.run=function(e,n,i,r,s,a){t.call(this,m,e,n,i,r,s,a),o.PluginHooks.run(m,e,n,i,r,s,a)},m.PluginHooks.execute=function(t,n,i,r,s,a){var l=o.PluginHooks.execute(m,t,n,i,r,s,a),c=e.call(this,m,t,l,i,r,s,a);return"undefined"==typeof c?l:c},m.addHook=function(){m.PluginHooks.add.apply(m.PluginHooks,arguments)},m.addHookOnce=function(){m.PluginHooks.once.apply(m.PluginHooks,arguments)},m.removeHook=function(){m.PluginHooks.remove.apply(m.PluginHooks,arguments)},m.runHooks=function(){m.PluginHooks.run.apply(m.PluginHooks,arguments)},m.runHooksAndReturn=function(){return m.PluginHooks.execute.apply(m.PluginHooks,arguments)}}(),this.timeouts={},this.registerTimeout=function(t,e,n){clearTimeout(this.timeouts[t]),this.timeouts[t]=setTimeout(e,n||0)},this.clearTimeouts=function(){for(var t in this.timeouts)this.timeouts.hasOwnProperty(t)&&clearTimeout(this.timeouts[t])},this.version="0.10.3"};var I=function(){};I.prototype={data:void 0,width:void 0,height:void 0,startRows:5,startCols:5,rowHeaders:null,colHeaders:null,minRows:0,minCols:0,maxRows:1/0,maxCols:1/0,minSpareRows:0,minSpareCols:0,multiSelect:!0,fillHandle:!0,fixedRowsTop:0,fixedColumnsLeft:0,outsideClickDeselects:!0,enterBeginsEditing:!0,enterMoves:{row:1,col:0},tabMoves:{row:0,col:1},autoWrapRow:!1,autoWrapCol:!1,copyRowsLimit:1e3,copyColsLimit:1e3,pasteMode:"overwrite",currentRowClassName:void 0,currentColClassName:void 0,stretchH:"hybrid",isEmptyRow:function(t){for(var e,n=0,i=this.countCols();i>n;n++)if(e=this.getDataAtCell(t,n),""!==e&&null!==e&&"undefined"!=typeof e)return!1;return!0},isEmptyCol:function(t){for(var e,n=0,i=this.countRows();i>n;n++)if(e=this.getDataAtCell(n,t),""!==e&&null!==e&&"undefined"!=typeof e)return!1;return!0},observeDOMVisibility:!0,allowInvalid:!0,invalidCellClassName:"htInvalid",placeholderCellClassName:"htPlaceholder",readOnlyCellClassName:"htDimmed",fragmentSelection:!1,readOnly:!1,nativeScrollbars:!1,type:"text",copyable:!0,debug:!1},o.DefaultSettings=I,t.fn.handsontable=function(t){var e,n,i,r,s,a=this.first(),l=a.data("handsontable");if("string"!=typeof t)return s=t||{},l?l.updateSettings(s):(l=new o.Core(a,s),a.data("handsontable",l),l.init()),a;if(i=[],arguments.length>1)for(e=1,n=arguments.length;n>e;e++)i.push(arguments[e]);if(l){if("undefined"==typeof l[t])throw new Error("Handsontable do not provide action: "+t);r=l[t].apply(l,i)}return r},o.TableView=function(e){var n=this,r=t(i),s=t(document.documentElement);this.instance=e,this.settings=e.getSettings(),this.settingsFromDOM=e.getSettingsFromDOM(),e.rootElement.data("originalStyle",e.rootElement[0].getAttribute("style")),e.rootElement.addClass("handsontable");var a=document.createElement("TABLE");a.className="htCore",this.THEAD=document.createElement("THEAD"),a.appendChild(this.THEAD),this.TBODY=document.createElement("TBODY"),a.appendChild(this.TBODY),e.$table=t(a),e.rootElement.prepend(e.$table),e.rootElement.on("mousedown.handsontable",function(t){n.isTextSelectionAllowed(t.target)||(c(),t.preventDefault(),i.focus())}),s.on("keyup."+e.guid,function(t){e.selection.isInProgress()&&!t.shiftKey&&e.selection.finish()});var l;s.on("mouseup."+e.guid,function(t){e.selection.isInProgress()&&1===t.which&&e.selection.finish(),l=!1,e.autofill.handle&&e.autofill.handle.isDragged&&(e.autofill.handle.isDragged>1&&e.autofill.apply(),e.autofill.handle.isDragged=0),o.helper.isOutsideInput(document.activeElement)&&e.unlisten()}),s.on("mousedown."+e.guid,function(t){var i=t.target;if(i!==n.wt.wtTable.spreader)for(;i!==document.documentElement;){if(null===i)return;if(i===e.rootElement[0]||"HANDSONTABLE-TABLE"===i.nodeName)return;i=i.parentNode}n.settings.outsideClickDeselects?e.deselectCell():e.destroyEditor()}),e.rootElement.on("mousedown.handsontable",".dragdealer",function(){e.destroyEditor()}),e.$table.on("selectstart",function(t){n.settings.fragmentSelection||t.preventDefault()});var c=function(){i.getSelection?i.getSelection().empty?i.getSelection().empty():i.getSelection().removeAllRanges&&i.getSelection().removeAllRanges():document.selection&&document.selection.empty()},u={debug:function(){return n.settings.debug},table:a,stretchH:this.settings.stretchH,data:e.getDataAtCell,totalRows:e.countRows,totalColumns:e.countCols,nativeScrollbars:this.settings.nativeScrollbars,offsetRow:0,offsetColumn:0,width:this.getWidth(),height:this.getHeight(),fixedColumnsLeft:function(){return n.settings.fixedColumnsLeft},fixedRowsTop:function(){return n.settings.fixedRowsTop},rowHeaders:function(){return e.hasRowHeaders()?[function(t,e){n.appendRowHeader(t,e)}]:[]},columnHeaders:function(){return e.hasColHeaders()?[function(t,e){n.appendColHeader(t,e)}]:[]},columnWidth:e.getColWidth,cellRenderer:function(t,e,i){var o=n.instance.colToProp(e),r=n.instance.getCellMeta(t,e),s=n.instance.getCellRenderer(r),a=n.instance.getDataAtRowProp(t,o);s(n.instance,i,t,e,o,a,r),n.instance.PluginHooks.run("afterRenderer",i,t,e,o,a,r)},selections:{current:{className:"current",border:{width:2,color:"#5292F7",style:"solid",cornerVisible:function(){return n.settings.fillHandle&&!n.isCellEdited()&&!e.selection.isMultiple()}}},area:{className:"area",border:{width:1,color:"#89AFF9",style:"solid",cornerVisible:function(){return n.settings.fillHandle&&!n.isCellEdited()&&e.selection.isMultiple()}}},highlight:{highlightRowClassName:n.settings.currentRowClassName,highlightColumnClassName:n.settings.currentColClassName},fill:{className:"fill",border:{width:1,color:"red",style:"solid"}}},hideBorderOnMouseDownOver:function(){return n.settings.fragmentSelection},onCellMouseDown:function(t,n,i){e.listen(),l=!0;var o={row:n[0],col:n[1]};2===t.button&&e.selection.inInSelection(o)||(t.shiftKey?e.selection.setRangeEnd(o):e.selection.setRangeStart(o)),e.PluginHooks.run("afterOnCellMouseDown",t,n,i)},onCellMouseOver:function(t,n,i){var o={row:n[0],col:n[1]};l?e.selection.setRangeEnd(o):e.autofill.handle&&e.autofill.handle.isDragged&&(e.autofill.handle.isDragged++,e.autofill.showBorder(n)),e.PluginHooks.run("afterOnCellMouseOver",t,n,i)},onCellCornerMouseDown:function(t){e.autofill.handle.isDragged=1,t.preventDefault(),e.PluginHooks.run("afterOnCellCornerMouseDown",t)},onCellCornerDblClick:function(){e.autofill.selectAdjacent()},beforeDraw:function(t){n.beforeRender(t)},onDraw:function(t){n.onDraw(t)},onScrollVertically:function(){e.runHooks("afterScrollVertically")},onScrollHorizontally:function(){e.runHooks("afterScrollHorizontally")}};e.PluginHooks.run("beforeInitWalkontable",u),this.wt=new y(u),r.on("resize."+e.guid,function(){e.registerTimeout("resizeTimeout",function(){e.parseSettingsFromDOM();var t=n.getWidth(),i=n.getHeight();u.width===t&&u.height===i||(e.forceFullRender=!0,n.render(),u.width=t,u.height=i)},60)}),t(n.wt.wtTable.spreader).on("mousedown.handsontable, contextmenu.handsontable",function(t){t.target===n.wt.wtTable.spreader&&3===t.which&&t.stopPropagation()}),s.on("click."+e.guid,function(){n.settings.observeDOMVisibility&&n.wt.drawInterrupted&&(n.instance.forceFullRender=!0,n.render())})},o.TableView.prototype.isTextSelectionAllowed=function(t){return o.helper.isInput(t)?!0:!(!this.settings.fragmentSelection||!this.wt.wtDom.isChildOf(t,this.TBODY))},o.TableView.prototype.isCellEdited=function(){var t=this.instance.getActiveEditor();return t&&t.isOpened()},o.TableView.prototype.getWidth=function(){var t=void 0!==this.settings.width?this.settings.width:this.settingsFromDOM.width;return"function"==typeof t?t():t},o.TableView.prototype.getHeight=function(){var t=void 0!==this.settings.height?this.settings.height:this.settingsFromDOM.height;return"function"==typeof t?t():t},o.TableView.prototype.beforeRender=function(t){t&&(this.instance.PluginHooks.run("beforeRender",this.instance.forceFullRender),this.wt.update("width",this.getWidth()),this.wt.update("height",this.getHeight()))},o.TableView.prototype.onDraw=function(t){t&&this.instance.PluginHooks.run("afterRender",this.instance.forceFullRender)},o.TableView.prototype.render=function(){this.wt.draw(!this.instance.forceFullRender),this.instance.forceFullRender=!1,this.instance.rootElement.triggerHandler("render.handsontable")},o.TableView.prototype.getCellAtCoords=function(t){var e=this.wt.wtTable.getCell([t.row,t.col]);return 0>e?null:e},o.TableView.prototype.scrollViewport=function(t){this.wt.scrollViewport([t.row,t.col])},o.TableView.prototype.appendRowHeader=function(t,e){if(t>-1)this.wt.wtDom.fastInnerHTML(e,this.instance.getRowHeader(t));else{var n=document.createElement("DIV");n.className="relative",this.wt.wtDom.fastInnerText(n,""),this.wt.wtDom.empty(e),e.appendChild(n)}},o.TableView.prototype.appendColHeader=function(t,e){var n=document.createElement("DIV"),i=document.createElement("SPAN");n.className="relative",i.className="colHeader",this.wt.wtDom.fastInnerHTML(i,this.instance.getColHeader(t)),n.appendChild(i),this.wt.wtDom.empty(e),e.appendChild(n),this.instance.PluginHooks.run("afterGetColHeader",t,e)},o.TableView.prototype.maximumVisibleElementWidth=function(t){var e=this.wt.wtViewport.getWorkspaceWidth();return this.settings.nativeScrollbars?e:e-t},o.TableView.prototype.maximumVisibleElementHeight=function(t){var e=this.wt.wtViewport.getWorkspaceHeight();return this.settings.nativeScrollbars?e:e-t},function(t){function e(t){var e,n;n={},e=t,this.getInstance=function(t){return t.guid in n||(n[t.guid]=new e(t)),n[t.guid]}}var n={},i=new WeakMap;t.editors={registerEditor:function(t,o){var r=new e(o);"string"==typeof t&&(n[t]=r),i.set(o,r)},getEditor:function(t,e){var o;if("function"==typeof t)i.get(t)||this.registerEditor(null,t),o=i.get(t);else{if("string"!=typeof t)throw Error('Only strings and functions can be passed as "editor" parameter ');o=n[t]}if(!o)throw Error('No editor registered under name "'+t+'"');return o.getInstance(e)}}}(o),function(e){e.EditorManager=function(n,i,o){var r,s=this,a=t(document),l=e.helper.keyCode,c=function(){function t(t){if(n.isListening()&&(i.settings.beforeOnKeyDown&&i.settings.beforeOnKeyDown.call(n,t),n.PluginHooks.run("beforeKeyDown",t),!t.isImmediatePropagationStopped()&&(i.lastKeyCode=t.keyCode,o.isSelected()))){var a=(t.ctrlKey||t.metaKey)&&!t.altKey;if(!r.isWaiting()&&!e.helper.isMetaKey(t.keyCode)&&!a)return s.openEditor(""),void t.stopPropagation();var c=t.shiftKey?o.setRangeEnd:o.setRangeStart;switch(t.keyCode){case l.A:if(a){o.selectAll(),t.preventDefault(),t.stopPropagation();break}case l.ARROW_UP:s.isEditorOpened()&&!r.isWaiting()&&s.closeEditorAndSaveChanges(a),h(t.shiftKey),t.preventDefault(),t.stopPropagation();break;case l.ARROW_DOWN:s.isEditorOpened()&&!r.isWaiting()&&s.closeEditorAndSaveChanges(a),d(t.shiftKey),t.preventDefault(),t.stopPropagation();break;case l.ARROW_RIGHT:s.isEditorOpened()&&!r.isWaiting()&&s.closeEditorAndSaveChanges(a),f(t.shiftKey),t.preventDefault(),t.stopPropagation();break;case l.ARROW_LEFT:s.isEditorOpened()&&!r.isWaiting()&&s.closeEditorAndSaveChanges(a),p(t.shiftKey),t.preventDefault(),t.stopPropagation();break;case l.TAB:var g="function"==typeof i.settings.tabMoves?i.settings.tabMoves(t):i.settings.tabMoves;t.shiftKey?o.transformStart(-g.row,-g.col):o.transformStart(g.row,g.col,!0),t.preventDefault(),t.stopPropagation();break;case l.BACKSPACE:case l.DELETE:o.empty(t),s.prepareEditor(),t.preventDefault();break;case l.F2:s.openEditor(),t.preventDefault();break;case l.ENTER:s.isEditorOpened()?(r.state!==e.EditorState.WAITING&&s.closeEditorAndSaveChanges(a),u(t.shiftKey)):n.getSettings().enterBeginsEditing?s.openEditor():u(t.shiftKey),t.preventDefault(),t.stopImmediatePropagation();break;case l.ESCAPE:s.isEditorOpened()&&s.closeEditorAndRestoreOriginalValue(a),t.preventDefault();break;case l.HOME:c(t.ctrlKey||t.metaKey?{row:0,col:i.selStart.col()}:{row:i.selStart.row(),col:0}),t.preventDefault(),t.stopPropagation();break;case l.END:c(t.ctrlKey||t.metaKey?{row:n.countRows()-1,col:i.selStart.col()}:{row:i.selStart.row(),col:n.countCols()-1}),t.preventDefault(),t.stopPropagation();break;case l.PAGE_UP:o.transformStart(-n.countVisibleRows(),0),n.view.wt.scrollVertical(-n.countVisibleRows()),n.view.render(),t.preventDefault(),t.stopPropagation();break;case l.PAGE_DOWN:o.transformStart(n.countVisibleRows(),0),n.view.wt.scrollVertical(n.countVisibleRows()),n.view.render(),t.preventDefault(),t.stopPropagation()}}}function c(){s.openEditor()}function u(t){var e="function"==typeof i.settings.enterMoves?i.settings.enterMoves(event):i.settings.enterMoves;t?o.transformStart(-e.row,-e.col):o.transformStart(e.row,e.col,!0)}function h(t){t?o.transformEnd(-1,0):o.transformStart(-1,0)}function d(t){t?o.transformEnd(1,0):o.transformStart(1,0)}function f(t){t?o.transformEnd(0,1):o.transformStart(0,1)}function p(t){t?o.transformEnd(0,-1):o.transformStart(0,-1)}a.on("keydown.handsontable."+n.guid,t),n.view.wt.update("onCellDblClick",c),n.addHook("afterDestroy",function(){a.off("keydown.handsontable."+n.guid)})};this.destroyEditor=function(t){this.closeEditor(t)},this.getActiveEditor=function(){return r},this.prepareEditor=function(){if(r&&r.isWaiting())return void this.closeEditor(!1,!1,function(t){t&&s.prepareEditor()});var t=i.selStart.row(),o=i.selStart.col(),a=n.colToProp(o),l=n.getCell(t,o),c=n.getDataAtCell(t,o),u=n.getCellMeta(t,o),h=n.getCellEditor(u);r=e.editors.getEditor(h,n),r.prepare(t,o,a,l,c,u)},this.isEditorOpened=function(){return r.isOpened()},this.openEditor=function(t){r.beginEditing(t)},this.closeEditor=function(t,e,n){r?r.finishEditing(t,e,n):n&&n(!1)},this.closeEditorAndSaveChanges=function(t){return this.closeEditor(!1,t)},this.closeEditorAndRestoreOriginalValue=function(t){return this.closeEditor(!0,t)},c()}}(o),function(t){var e={};t.renderers={registerRenderer:function(t,n){e[t]=n},getRenderer:function(t){if("function"==typeof t)return t;if("string"!=typeof t)throw Error('Only strings and functions can be passed as "renderer" parameter ');if(!(t in e))throw Error('No editor registered under name "'+t+'"');return e[t]}}}(o),o.Dom=new b,o.helper.isPrintableChar=function(t){return 32==t||t>=48&&57>=t||t>=96&&111>=t||t>=186&&192>=t||t>=219&&222>=t||t>=226||t>=65&&90>=t},o.helper.isMetaKey=function(t){var e=o.helper.keyCode,n=[e.ARROW_DOWN,e.ARROW_UP,e.ARROW_LEFT,e.ARROW_RIGHT,e.HOME,e.END,e.DELETE,e.BACKSPACE,e.F1,e.F2,e.F3,e.F4,e.F5,e.F6,e.F7,e.F8,e.F9,e.F10,e.F11,e.F12,e.TAB,e.PAGE_DOWN,e.PAGE_UP,e.ENTER,e.ESCAPE,e.SHIFT,e.CAPS_LOCK,e.ALT];return-1!=n.indexOf(t)},o.helper.isCtrlKey=function(t){var e=o.helper.keyCode;return-1!=[e.CONTROL_LEFT,224,e.COMMAND_LEFT,e.COMMAND_RIGHT].indexOf(t)},o.helper.stringify=function(t){switch(typeof t){case"string":case"number":return t+"";case"object":return null===t?"":t.toString();case"undefined":return"";default:return t.toString()}},o.helper.spreadsheetColumnLabel=function(t){for(var e,n=t+1,i="";n>0;)e=(n-1)%26,i=String.fromCharCode(65+e)+i,n=parseInt((n-e)/26,10);return i},o.helper.isNumeric=function(t){var e=typeof t;return"number"==e?!isNaN(t)&&isFinite(t):"string"==e?t.length?1==t.length?/\d/.test(t):/^\s*[+-]?\s*(?:(?:\d+(?:\.\d+)?(?:e[+-]?\d+)?)|(?:0x[a-f\d]+))\s*$/i.test(t):!1:"object"==e?!(!t||"number"!=typeof t.valueOf()||t instanceof Date):!1},o.helper.isArray=function(t){return null!==Object.prototype.toString.call(t).match(/array/i)},o.helper.isDescendant=function(t,e){for(var n=e.parentNode;null!=n;){if(n==t)return!0;n=n.parentNode}return!1},o.helper.randomString=function(){return x()},o.helper.inherit=function(t,e){return e.prototype.constructor=e,t.prototype=new e,t.prototype.constructor=t,t},o.helper.extend=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o.helper.getPrototypeOf=function(t){var e;if("object"==typeof t.__proto__)e=t.__proto__;else{var n,i=t.constructor;"function"==typeof t.constructor&&(n=i,delete t.constructor&&(i=t.constructor,t.constructor=n)),e=i?i.prototype:null}return e},o.helper.columnFactory=function(t,e){function n(){}o.helper.inherit(n,t);for(var i=0,r=e.length;r>i;i++)n.prototype[e[i]]=void 0;return n},o.helper.translateRowsToColumns=function(t){var e,n,i,o,r=[],s=0;for(e=0,n=t.length;n>e;e++)for(i=0,o=t[e].length;o>i;i++)i==s&&(r.push([]),s++),r[i].push(t[e][i]);return r},o.helper.to2dArray=function(t){for(var e=0,n=t.length;n>e;)t[e]=[t[e]],e++},o.helper.extendArray=function(t,e){for(var n=0,i=e.length;i>n;)t.push(e[n]),n++},o.helper.isInput=function(t){var e=["INPUT","SELECT","TEXTAREA"];return e.indexOf(t.nodeName)>-1},o.helper.isOutsideInput=function(t){return o.helper.isInput(t)&&-1==t.className.indexOf("handsontableInput")},o.helper.keyCode={MOUSE_LEFT:1,MOUSE_RIGHT:3,MOUSE_MIDDLE:2,BACKSPACE:8,COMMA:188,DELETE:46,END:35,ENTER:13,ESCAPE:27,CONTROL_LEFT:91,COMMAND_LEFT:17,COMMAND_RIGHT:93,ALT:18,HOME:36,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,SPACE:32,SHIFT:16,CAPS_LOCK:20,TAB:9,ARROW_RIGHT:39,ARROW_LEFT:37,ARROW_UP:38,ARROW_DOWN:40,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,A:65,X:88,C:67,V:86},o.helper.isObject=function(t){return"[object Object]"==Object.prototype.toString.call(t)},o.helper.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"==Object.prototype.toString.call(t)},o.helper.pivot=function(t){var e=[];if(!t||0==t.length||!t[0]||0==t[0].length)return e;for(var n=t.length,i=t[0].length,o=0;n>o;o++)for(var r=0;i>r;r++)e[r]||(e[r]=[]),e[r][o]=t[o][r];return e},o.helper.proxy=function(t,e){return function(){return t.apply(e,arguments)}},o.helper.cellMethodLookupFactory=function(t,e){function n(t){var e=o.cellTypes[t];if("undefined"==typeof e)throw new Error('You declared cell type "'+t+'" as a string that is not mapped to a known object. Cell type must be an object or a string mapped to an object in Handsontable.cellTypes');return e}return e="undefined"==typeof e?!0:e,function(i,r){return function s(i){if(i){if(i.hasOwnProperty(t)&&i[t])return i[t];if(i.hasOwnProperty("type")&&i.type){var r;if("string"!=typeof i.type)throw new Error("Cell type must be a string ");if(r=n(i.type),r.hasOwnProperty(t))return r[t];if(e)return}return s(o.helper.getPrototypeOf(i))}}("number"==typeof i?this.getCellMeta(i,r):i)}},o.SelectionPoint=function(){this._row=null,this._col=null},o.SelectionPoint.prototype.exists=function(){return null!==this._row},o.SelectionPoint.prototype.row=function(t){return void 0!==t&&(this._row=t),this._row},o.SelectionPoint.prototype.col=function(t){return void 0!==t&&(this._col=t),this._col},o.SelectionPoint.prototype.coords=function(t){return void 0!==t&&(this._row=t.row,this._col=t.col),{row:this._row,col:this._col}},o.SelectionPoint.prototype.arr=function(t){return void 0!==t&&(this._row=t[0],this._col=t[1]),[this._row,this._col]},function(e){e.DataMap=function(t,e,n){this.instance=t,this.priv=e,this.GridSettings=n,this.dataSource=this.instance.getSettings().data,this.dataSource[0]?this.duckSchema=this.recursiveDuckSchema(this.dataSource[0]):this.duckSchema={},this.createMap(),this.getVars={},this.setVars={}},e.DataMap.prototype.DESTINATION_RENDERER=1,e.DataMap.prototype.DESTINATION_CLIPBOARD_GENERATOR=2,e.DataMap.prototype.recursiveDuckSchema=function(e){var n;if(t.isPlainObject(e)){n={};for(var i in e)e.hasOwnProperty(i)&&(t.isPlainObject(e[i])?n[i]=this.recursiveDuckSchema(e[i]):n[i]=null)}else n=[];return n},e.DataMap.prototype.recursiveDuckColumns=function(e,n,i){var o,r;if("undefined"==typeof n&&(n=0,i=""),t.isPlainObject(e))for(r in e)e.hasOwnProperty(r)&&(null===e[r]?(o=i+r,this.colToPropCache.push(o),this.propToColCache[o]=n,n++):n=this.recursiveDuckColumns(e[r],n,r+"."));return n},e.DataMap.prototype.createMap=function(){if("undefined"==typeof this.getSchema())throw new Error("trying to create `columns` definition but you didnt' provide `schema` nor `data`");var t,e,n=this.getSchema();this.colToPropCache=[],this.propToColCache={};var i=this.instance.getSettings().columns;if(i)for(t=0,e=i.length;e>t;t++)this.colToPropCache[t]=i[t].data,this.propToColCache[i[t].data]=t;else this.recursiveDuckColumns(n)},e.DataMap.prototype.colToProp=function(t){return t=e.PluginHooks.execute(this.instance,"modifyCol",t),this.colToPropCache&&"undefined"!=typeof this.colToPropCache[t]?this.colToPropCache[t]:t},e.DataMap.prototype.propToCol=function(t){var n;return n="undefined"!=typeof this.propToColCache[t]?this.propToColCache[t]:t,n=e.PluginHooks.execute(this.instance,"modifyCol",n)},e.DataMap.prototype.getSchema=function(){var t=this.instance.getSettings().dataSchema;return t?"function"==typeof t?t():t:this.duckSchema},e.DataMap.prototype.createRow=function(e,n,i){var o,r,s=this.instance.countCols(),a=0;n||(n=1),("number"!=typeof e||e>=this.instance.countRows())&&(e=this.instance.countRows()),r=e;for(var l=this.instance.getSettings().maxRows;n>a&&this.instance.countRows()<l;){if("array"===this.instance.dataType){o=[];for(var c=0;s>c;c++)o.push(null)}else o="function"===this.instance.dataType?this.instance.getSettings().dataSchema(e):t.extend(!0,{},this.getSchema());e===this.instance.countRows()?this.dataSource.push(o):this.dataSource.splice(e,0,o),a++,r++}return this.instance.PluginHooks.run("afterCreateRow",e,a,i),this.instance.forceFullRender=!0,a},e.DataMap.prototype.createCol=function(t,n,i){if("object"===this.instance.dataType||this.instance.getSettings().columns)throw new Error("Cannot create new column. When data source in an object, you can only have as much columns as defined in first data row, data schema or in the 'columns' setting.If you want to be able to add new columns, you have to use array datasource.");var o,r,s=this.instance.countRows(),a=this.dataSource,l=0;n||(n=1),r=t;for(var c=this.instance.getSettings().maxCols;n>l&&this.instance.countCols()<c;){if(o=e.helper.columnFactory(this.GridSettings,this.priv.columnsSettingConflicts),"number"!=typeof t||t>=this.instance.countCols()){for(var u=0;s>u;u++)"undefined"==typeof a[u]&&(a[u]=[]),a[u].push(null);this.priv.columnSettings.push(o)}else{for(var u=0;s>u;u++)a[u].splice(r,0,null);this.priv.columnSettings.splice(r,0,o)}l++,r++}return this.instance.PluginHooks.run("afterCreateCol",t,l,i),this.instance.forceFullRender=!0,l},e.DataMap.prototype.removeRow=function(t,e){e||(e=1),"number"!=typeof t&&(t=-e),t=(this.instance.countRows()+t)%this.instance.countRows();var n=this.physicalRowsToLogical(t,e),i=this.instance.PluginHooks.execute("beforeRemoveRow",t,e);if(i!==!1){var o=this.dataSource,r=o.filter(function(t,e){return-1==n.indexOf(e)});o.length=0,Array.prototype.push.apply(o,r),this.instance.PluginHooks.run("afterRemoveRow",t,e),this.instance.forceFullRender=!0}},e.DataMap.prototype.removeCol=function(t,e){if("object"===this.instance.dataType||this.instance.getSettings().columns)throw new Error("cannot remove column with object data source or columns option specified");e||(e=1),"number"!=typeof t&&(t=-e),t=(this.instance.countCols()+t)%this.instance.countCols();var n=this.instance.PluginHooks.execute("beforeRemoveCol",t,e);if(n!==!1){for(var i=this.dataSource,o=0,r=this.instance.countRows();r>o;o++)i[o].splice(t,e);this.priv.columnSettings.splice(t,e),this.instance.PluginHooks.run("afterRemoveCol",t,e),this.instance.forceFullRender=!0}},e.DataMap.prototype.spliceCol=function(t,n,i){var o=4<=arguments.length?[].slice.call(arguments,3):[],r=this.instance.getDataAtCol(t),s=r.slice(n,n+i),a=r.slice(n+i);e.helper.extendArray(o,a);for(var l=0;i>l;)o.push(null),l++;return e.helper.to2dArray(o),this.instance.populateFromArray(n,t,o,null,null,"spliceCol"),s},e.DataMap.prototype.spliceRow=function(t,n,i){var o=4<=arguments.length?[].slice.call(arguments,3):[],r=this.instance.getDataAtRow(t),s=r.slice(n,n+i),a=r.slice(n+i);e.helper.extendArray(o,a);for(var l=0;i>l;)o.push(null),l++;return this.instance.populateFromArray(t,n,[o],null,null,"spliceRow"),s},e.DataMap.prototype.get=function(t,e){if(this.getVars.row=t,this.getVars.prop=e,this.instance.PluginHooks.run("beforeGet",this.getVars),"string"==typeof this.getVars.prop&&this.getVars.prop.indexOf(".")>-1){var n=this.getVars.prop.split("."),i=this.dataSource[this.getVars.row];if(!i)return null;for(var o=0,r=n.length;r>o;o++)if(i=i[n[o]],"undefined"==typeof i)return null;return i}return"function"==typeof this.getVars.prop?this.getVars.prop(this.dataSource.slice(this.getVars.row,this.getVars.row+1)[0]):this.dataSource[this.getVars.row]?this.dataSource[this.getVars.row][this.getVars.prop]:null};var n=e.helper.cellMethodLookupFactory("copyable",!1);e.DataMap.prototype.getCopyable=function(t,e){return n.call(this.instance,t,this.propToCol(e))?this.get(t,e):""},e.DataMap.prototype.set=function(t,e,n,i){if(this.setVars.row=t,this.setVars.prop=e,this.setVars.value=n,this.instance.PluginHooks.run("beforeSet",this.setVars,i||"datamapGet"),"string"==typeof this.setVars.prop&&this.setVars.prop.indexOf(".")>-1){for(var o=this.setVars.prop.split("."),r=this.dataSource[this.setVars.row],s=0,a=o.length-1;a>s;s++)r=r[o[s]];r[o[s]]=this.setVars.value}else"function"==typeof this.setVars.prop?this.setVars.prop(this.dataSource.slice(this.setVars.row,this.setVars.row+1)[0],this.setVars.value):this.dataSource[this.setVars.row][this.setVars.prop]=this.setVars.value},e.DataMap.prototype.physicalRowsToLogical=function(t,e){for(var n=this.instance.countRows(),i=(n+t)%n,o=[],r=e;n>i&&r;)this.get(i,0),o.push(this.getVars.row),r--,i++;return o},e.DataMap.prototype.clear=function(){for(var t=0;t<this.instance.countRows();t++)for(var e=0;e<this.instance.countCols();e++)this.set(t,this.colToProp(e),"")},e.DataMap.prototype.getAll=function(){return this.dataSource},e.DataMap.prototype.getRange=function(t,e,n){var i,o,r,s,a,l=[],c=n===this.DESTINATION_CLIPBOARD_GENERATOR?this.getCopyable:this.get;for(o=Math.max(t.row,e.row),s=Math.max(t.col,e.col),i=Math.min(t.row,e.row);o>=i;i++){for(a=[],r=Math.min(t.col,e.col);s>=r;r++)a.push(c.call(this,i,this.colToProp(r)));l.push(a)}return l},e.DataMap.prototype.getText=function(t,e){return SheetClip.stringify(this.getRange(t,e,this.DESTINATION_RENDERER))},e.DataMap.prototype.getCopyableText=function(t,e){return SheetClip.stringify(this.getRange(t,e,this.DESTINATION_CLIPBOARD_GENERATOR))}}(o),function(t){t.renderers.cellDecorator=function(t,e,n,i,o,r,s){s.readOnly&&t.view.wt.wtDom.addClass(e,s.readOnlyCellClassName),s.valid===!1&&s.invalidCellClassName&&t.view.wt.wtDom.addClass(e,s.invalidCellClassName),!r&&s.placeholder&&t.view.wt.wtDom.addClass(e,s.placeholderCellClassName)}}(o),function(t){var e=function(e,n,i,o,r,s,a){t.renderers.cellDecorator.apply(this,arguments),!s&&a.placeholder&&(s=a.placeholder);var l=t.helper.stringify(s);if(a.rendererTemplate){e.view.wt.wtDom.empty(n);var c=document.createElement("TEMPLATE");c.setAttribute("bind","{{}}"),c.innerHTML=a.rendererTemplate,HTMLTemplateElement.decorate(c),c.model=e.getDataAtRow(i),n.appendChild(c)}else e.view.wt.wtDom.fastInnerText(n,l)};t.renderers.TextRenderer=e,t.renderers.registerRenderer("text",e)}(o),function(t){var e=document.createElement("DIV");e.className="htAutocompleteWrapper";var n=document.createElement("DIV");n.className="htAutocompleteArrow",n.appendChild(document.createTextNode(""));var i=function(i,o,r,s,a,l,c){var u=(e.cloneNode(!0),n.cloneNode(!0));t.renderers.TextRenderer(i,o,r,s,a,l,c),o.appendChild(u),t.Dom.addClass(o,"htAutocomplete"),o.firstChild||o.appendChild(document.createTextNode("")),i.acArrowListener||(i.acArrowListener=function(){i.view.wt.getSetting("onCellDblClick")},i.rootElement.on("mousedown",".htAutocompleteArrow",i.acArrowListener))};t.AutocompleteRenderer=i,t.renderers.AutocompleteRenderer=i,t.renderers.registerRenderer("autocomplete",i)}(o),function(e){var n=document.createElement("INPUT");n.className="htCheckboxRendererInput",n.type="checkbox",n.setAttribute("autocomplete","off");var i=function(i,o,r,s,a,l,c){"undefined"==typeof c.checkedTemplate&&(c.checkedTemplate=!0),"undefined"==typeof c.uncheckedTemplate&&(c.uncheckedTemplate=!1),i.view.wt.wtDom.empty(o);var u=n.cloneNode(!1);l===c.checkedTemplate||l===e.helper.stringify(c.checkedTemplate)?(u.checked=!0,o.appendChild(u)):l===c.uncheckedTemplate||l===e.helper.stringify(c.uncheckedTemplate)?o.appendChild(u):null===l?(u.className+=" noValue",o.appendChild(u)):i.view.wt.wtDom.fastInnerText(o,"#bad value#");var h=t(u);c.readOnly?h.on("click",function(t){t.preventDefault()}):(h.on("mousedown",function(t){t.stopPropagation()}),h.on("mouseup",function(t){t.stopPropagation()}),h.on("change",function(){this.checked?i.setDataAtRowProp(r,a,c.checkedTemplate):i.setDataAtRowProp(r,a,c.uncheckedTemplate);
})),i.CheckboxRenderer&&i.CheckboxRenderer.beforeKeyDownHookBound||(i.CheckboxRenderer={beforeKeyDownHookBound:!0},i.addHook("beforeKeyDown",function(n){if(n.keyCode==e.helper.keyCode.SPACE)for(var o,r,s,a=i.getSelected(),l={row:Math.min(a[0],a[2]),col:Math.min(a[1],a[3])},c={row:Math.max(a[0],a[2]),col:Math.max(a[1],a[3])},u=l.row;u<=c.row;u++)for(var h=c.col;h<=c.col;h++)if(o=i.getCell(u,h),s=i.getCellMeta(u,h),r=o.querySelectorAll("input[type=checkbox]"),r.length>0&&!s.readOnly){n.isImmediatePropagationStopped()||(n.stopImmediatePropagation(),n.preventDefault());for(var d=0,f=r.length;f>d;d++)r[d].checked=!r[d].checked,t(r[d]).trigger("change")}}))};e.CheckboxRenderer=i,e.renderers.CheckboxRenderer=i,e.renderers.registerRenderer("checkbox",i)}(o),function(t){var e=function(e,n,i,o,r,s,a){t.helper.isNumeric(s)&&("undefined"!=typeof a.language&&numeral.language(a.language),s=numeral(s).format(a.format||"0"),e.view.wt.wtDom.addClass(n,"htNumeric")),t.renderers.TextRenderer(e,n,i,o,r,s,a)};t.NumericRenderer=e,t.renderers.NumericRenderer=e,t.renderers.registerRenderer("numeric",e)}(o),function(t){var e=function(t,e,n,i,r,s,a){o.renderers.TextRenderer.apply(this,arguments),s=e.innerHTML;var l,c=a.hashLength||s.length,u=a.hashSymbol||"*";for(l="";l.split(u).length-1<c;l+=u);t.view.wt.wtDom.fastInnerHTML(e,l)};t.PasswordRenderer=e,t.renderers.PasswordRenderer=e,t.renderers.registerRenderer("password",e)}(o),function(t){function e(e,n,i,o,r,s,a){t.renderers.cellDecorator.apply(this,arguments),t.Dom.fastInnerHTML(n,s)}t.renderers.registerRenderer("html",e),t.renderers.HtmlRenderer=e}(o),function(t){function e(e){this.instance=e,this.state=t.EditorState.VIRGIN,this._opened=!1,this._closeCallback=null,this.init()}t.EditorState={VIRGIN:"STATE_VIRGIN",EDITING:"STATE_EDITING",WAITING:"STATE_WAITING",FINISHED:"STATE_FINISHED"},e.prototype._fireCallbacks=function(t){this._closeCallback&&(this._closeCallback(t),this._closeCallback=null)},e.prototype.init=function(){},e.prototype.getValue=function(){throw Error("Editor getValue() method unimplemented")},e.prototype.setValue=function(t){throw Error("Editor setValue() method unimplemented")},e.prototype.open=function(){throw Error("Editor open() method unimplemented")},e.prototype.close=function(){throw Error("Editor close() method unimplemented")},e.prototype.prepare=function(e,n,i,o,r,s){this.TD=o,this.row=e,this.col=n,this.prop=i,this.originalValue=r,this.cellProperties=s,this.state=t.EditorState.VIRGIN},e.prototype.extend=function(){function t(){n.apply(this,arguments)}function e(t,e){function n(){}return n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t,t}var n=this.constructor;return e(t,n)},e.prototype.saveValue=function(t,e){if(e){var n=this.instance.getSelected();this.instance.populateFromArray(n[0],n[1],t,n[2],n[3],"edit")}else this.instance.populateFromArray(this.row,this.col,t,null,null,"edit")},e.prototype.beginEditing=function(e){this.state==t.EditorState.VIRGIN&&(this.cellProperties.readOnly||(this.instance.view.scrollViewport({row:this.row,col:this.col}),this.instance.view.render(),this.state=t.EditorState.EDITING,e="string"==typeof e?e:this.originalValue,this.setValue(t.helper.stringify(e)),this.open(),this._opened=!0,this.focus(),this.instance.view.render()))},e.prototype.finishEditing=function(e,n,i){if(i){var o=this._closeCallback;this._closeCallback=function(t){o&&o(t),i(t)}}if(!this.isWaiting()){if(this.state==t.EditorState.VIRGIN){var r=this;return void setTimeout(function(){r._fireCallbacks(!0)})}if(this.state==t.EditorState.EDITING){if(e)return void this.cancelChanges();var s=[[String.prototype.trim.call(this.getValue())]];if(this.state=t.EditorState.WAITING,this.saveValue(s,n),this.instance.getCellValidator(this.cellProperties)){var r=this;this.instance.addHookOnce("afterValidate",function(e){r.state=t.EditorState.FINISHED,r.discardEditor(e)})}else this.state=t.EditorState.FINISHED,this.discardEditor(!0)}}},e.prototype.cancelChanges=function(){this.state=t.EditorState.FINISHED,this.discardEditor()},e.prototype.discardEditor=function(e){this.state===t.EditorState.FINISHED&&(e===!1&&this.cellProperties.allowInvalid!==!0?(this.instance.selectCell(this.row,this.col),this.focus(),this.state=t.EditorState.EDITING,this._fireCallbacks(!1)):(this.close(),this._opened=!1,this.state=t.EditorState.VIRGIN,this._fireCallbacks(!0)))},e.prototype.isOpened=function(){return this._opened},e.prototype.isWaiting=function(){return this.state===t.EditorState.WAITING},t.editors.BaseEditor=e}(o),function(e){var n=e.editors.BaseEditor.prototype.extend();n.prototype.init=function(){this.createElements(),this.bindEvents()},n.prototype.getValue=function(){return this.TEXTAREA.value},n.prototype.setValue=function(t){this.TEXTAREA.value=t};var i=function(t){var n=this,i=n.getActiveEditor(),o=e.helper.keyCode,r=(t.ctrlKey||t.metaKey)&&!t.altKey;if(t.target===i.TEXTAREA&&!t.isImmediatePropagationStopped()){if(17===t.keyCode||224===t.keyCode||91===t.keyCode||93===t.keyCode)return void t.stopImmediatePropagation();switch(t.keyCode){case o.ARROW_RIGHT:i.wtDom.getCaretPosition(i.TEXTAREA)!==i.TEXTAREA.value.length&&t.stopImmediatePropagation();break;case o.ARROW_LEFT:0!==i.wtDom.getCaretPosition(i.TEXTAREA)&&t.stopImmediatePropagation();break;case o.ENTER:var s=i.instance.getSelected(),a=!(s[0]===s[2]&&s[1]===s[3]);(r&&!a||t.altKey)&&(i.isOpened()?(i.setValue(i.getValue()+"\n"),i.focus()):i.beginEditing(i.originalValue+"\n"),t.stopImmediatePropagation()),t.preventDefault();break;case o.A:case o.X:case o.C:case o.V:if(r){t.stopImmediatePropagation();break}case o.BACKSPACE:case o.DELETE:case o.HOME:case o.END:t.stopImmediatePropagation()}}};n.prototype.open=function(){this.refreshDimensions(),this.instance.addHook("beforeKeyDown",i)},n.prototype.close=function(){this.textareaParentStyle.display="none",document.activeElement===this.TEXTAREA&&this.instance.listen(),this.instance.removeHook("beforeKeyDown",i)},n.prototype.focus=function(){this.TEXTAREA.focus(),this.wtDom.setCaretPosition(this.TEXTAREA,this.TEXTAREA.value.length)},n.prototype.createElements=function(){this.$body=t(document.body),this.wtDom=new b,this.TEXTAREA=document.createElement("TEXTAREA"),this.$textarea=t(this.TEXTAREA),this.wtDom.addClass(this.TEXTAREA,"handsontableInput"),this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,this.TEXTAREA_PARENT=document.createElement("DIV"),this.wtDom.addClass(this.TEXTAREA_PARENT,"handsontableInputHolder"),this.textareaParentStyle=this.TEXTAREA_PARENT.style,this.textareaParentStyle.top=0,this.textareaParentStyle.left=0,this.textareaParentStyle.display="none",this.TEXTAREA_PARENT.appendChild(this.TEXTAREA),this.instance.rootElement[0].appendChild(this.TEXTAREA_PARENT);var n=this;e.PluginHooks.add("afterRender",function(){n.instance.registerTimeout("refresh_editor_dimensions",function(){n.refreshDimensions()},0)})},n.prototype.refreshDimensions=function(){if(this.state===e.EditorState.EDITING&&(this.TD=this.instance.getCell(this.row,this.col),this.TD)){var n=t(this.TD),i=this.wtDom.offset(this.TD),o=this.wtDom.offset(this.instance.rootElement[0]),r=this.instance.rootElement.scrollTop(),s=this.instance.rootElement.scrollLeft(),a=i.top-o.top+r-1,l=i.left-o.left+s-1,c=this.instance.getSettings(),u=c.rowHeaders===!1?0:1,h=c.colHeaders===!1?0:1;0>a&&(a=0),0>l&&(l=0),u>0&&parseInt(n.css("border-top-width"),10)>0&&(a+=1),h>0&&parseInt(n.css("border-left-width"),10)>0&&(l+=1),this.textareaParentStyle.top=a+"px",this.textareaParentStyle.left=l+"px";var d=n.width(),f=this.instance.view.maximumVisibleElementWidth(l)-10,p=n.outerHeight()-4,g=this.instance.view.maximumVisibleElementHeight(a)-5;parseInt(n.css("border-top-width"),10)>0&&(p-=1),parseInt(n.css("border-left-width"),10)>0&&u>0&&(d-=1),this.$textarea.autoResize({minHeight:Math.min(p,g),maxHeight:g,minWidth:Math.min(d,f),maxWidth:f,animate:!1,extraSpace:0}),this.textareaParentStyle.display="block"}},n.prototype.bindEvents=function(){this.$textarea.on("cut.editor",function(t){t.stopPropagation()}),this.$textarea.on("paste.editor",function(t){t.stopPropagation()})},e.editors.TextEditor=n,e.editors.registerEditor("text",e.editors.TextEditor)}(o),function(t){var e=t.editors.BaseEditor.prototype.extend();e.prototype.beginEditing=function(){this.saveValue([[!this.originalValue]])},e.prototype.finishEditing=function(){},e.prototype.init=function(){},e.prototype.open=function(){},e.prototype.close=function(){},e.prototype.getValue=function(){},e.prototype.setValue=function(){},e.prototype.focus=function(){},t.editors.CheckboxEditor=e,t.editors.registerEditor("checkbox",e)}(o),function(e){var n=e.editors.TextEditor.prototype.extend();n.prototype.init=function(){if(!t.datepicker)throw new Error("jQuery UI Datepicker dependency not found. Did you forget to include jquery-ui.custom.js or its substitute?");e.editors.TextEditor.prototype.init.apply(this,arguments),this.isCellEdited=!1;var n=this;this.instance.addHook("afterDestroy",function(){n.destroyElements()})},n.prototype.createElements=function(){e.editors.TextEditor.prototype.createElements.apply(this,arguments),this.datePicker=document.createElement("DIV"),this.instance.view.wt.wtDom.addClass(this.datePicker,"htDatepickerHolder"),this.datePickerStyle=this.datePicker.style,this.datePickerStyle.position="absolute",this.datePickerStyle.top=0,this.datePickerStyle.left=0,this.datePickerStyle.zIndex=99,document.body.appendChild(this.datePicker),this.$datePicker=t(this.datePicker);var n=this,i={dateFormat:"yy-mm-dd",showButtonPanel:!0,changeMonth:!0,changeYear:!0,onSelect:function(t){n.setValue(t),n.finishEditing(!1)}};this.$datePicker.datepicker(i),this.$datePicker.on("mousedown",function(t){t.stopPropagation()}),this.hideDatepicker()},n.prototype.destroyElements=function(){this.$datePicker.datepicker("destroy"),this.$datePicker.remove()},n.prototype.beginEditing=function(t,n,i,o,r){e.editors.TextEditor.prototype.beginEditing.apply(this,arguments),this.showDatepicker()},n.prototype.finishEditing=function(t,n){this.hideDatepicker(),e.editors.TextEditor.prototype.finishEditing.apply(this,arguments)},n.prototype.showDatepicker=function(){var e=t(this.TD),n=e.offset();this.datePickerStyle.top=n.top+e.height()+"px",this.datePickerStyle.left=n.left+"px";var i={defaultDate:this.originalValue||void 0};t.extend(i,this.cellProperties),this.$datePicker.datepicker("option",i),this.originalValue&&this.$datePicker.datepicker("setDate",this.originalValue),this.datePickerStyle.display="block"},n.prototype.hideDatepicker=function(){this.datePickerStyle.display="none"},e.editors.DateEditor=n,e.editors.registerEditor("date",n)}(o),function(e){var n=e.editors.TextEditor.prototype.extend();n.prototype.createElements=function(){e.editors.TextEditor.prototype.createElements.apply(this,arguments);var n=document.createElement("DIV");n.className="handsontableEditor",this.TEXTAREA_PARENT.appendChild(n),this.$htContainer=t(n),this.$htContainer.handsontable()},n.prototype.prepare=function(n,i,o,r,s,a){e.editors.TextEditor.prototype.prepare.apply(this,arguments);var l=this,c={startRows:0,startCols:0,minRows:0,minCols:0,className:"listbox",copyPaste:!1,cells:function(){return{readOnly:!0}},fillHandle:!1,afterOnCellMouseDown:function(){var t=this.getValue();void 0!==t&&l.setValue(t),l.instance.destroyEditor()},beforeOnKeyDown:function(t){var n=this;switch(t.keyCode){case e.helper.keyCode.ESCAPE:l.instance.destroyEditor(!0),t.stopImmediatePropagation(),t.preventDefault();break;case e.helper.keyCode.ENTER:var i=n.getSelected(),o=this.getDataAtCell(i[0],i[1]);void 0!==o&&l.setValue(o),l.instance.destroyEditor();break;case e.helper.keyCode.ARROW_UP:n.getSelected()&&0==n.getSelected()[0]&&!l.cellProperties.strict&&(n.deselectCell(),l.instance.listen(),l.focus(),t.preventDefault(),t.stopImmediatePropagation())}}};this.cellProperties.handsontable&&(c=t.extend(c,a.handsontable)),this.$htContainer.handsontable("destroy"),this.$htContainer.handsontable(c)};var i=function(t){if(!t.isImmediatePropagationStopped()){var n=this.getActiveEditor(),i=n.$htContainer.handsontable("getInstance");if(t.keyCode==e.helper.keyCode.ARROW_DOWN){if(i.getSelected()){var o=i.getSelected()[0],r=o<i.countRows()-1?o+1:o;i.selectCell(r,0)}else i.selectCell(0,0);t.preventDefault(),t.stopImmediatePropagation()}}};n.prototype.open=function(){this.instance.addHook("beforeKeyDown",i),e.editors.TextEditor.prototype.open.apply(this,arguments),this.$htContainer.handsontable("render"),this.cellProperties.strict?(this.$htContainer.handsontable("selectCell",0,0),this.$textarea[0].style.visibility="hidden"):(this.$htContainer.handsontable("deselectCell"),this.$textarea[0].style.visibility="visible"),this.wtDom.setCaretPosition(this.$textarea[0],0,this.$textarea[0].value.length)},n.prototype.close=function(){this.instance.removeHook("beforeKeyDown",i),this.instance.listen(),e.editors.TextEditor.prototype.close.apply(this,arguments)},n.prototype.focus=function(){this.instance.listen(),e.editors.TextEditor.prototype.focus.apply(this,arguments)},n.prototype.beginEditing=function(t){var n=this.instance.getSettings().onBeginEditing;n&&n()===!1||e.editors.TextEditor.prototype.beginEditing.apply(this,arguments)},n.prototype.finishEditing=function(t,n){if(this.$htContainer.handsontable("isListening")&&this.instance.listen(),this.$htContainer.handsontable("getSelected")){var i=this.$htContainer.handsontable("getInstance").getValue();void 0!==i&&this.setValue(i)}return e.editors.TextEditor.prototype.finishEditing.apply(this,arguments)},e.editors.HandsontableEditor=n,e.editors.registerEditor("handsontable",n)}(o),function(t){function e(t,e){for(var n,i,o,r={},s=e.length,a=0,l=t.length;l>a;a++)n=t[a],i=s>0?n.indexOf(e):n===e?0:-1,-1!=i&&(o=n.length-i-s,("undefined"==typeof r.indexOfValue||r.indexOfValue>i||r.indexOfValue==i&&r.charsLeft>o)&&(r.indexOfValue=i,r.charsLeft=o,r.index=a));return r.index}var n=t.editors.HandsontableEditor.prototype.extend();n.prototype.init=function(){t.editors.HandsontableEditor.prototype.init.apply(this,arguments),this.query=null},n.prototype.createElements=function(){t.editors.HandsontableEditor.prototype.createElements.apply(this,arguments),this.$htContainer.addClass("autocompleteEditor")},n.prototype.bindEvents=function(){var e=this;this.$textarea.on("keydown.autocompleteEditor",function(n){t.helper.isMetaKey(n.keyCode)&&-1==[t.helper.keyCode.BACKSPACE,t.helper.keyCode.DELETE].indexOf(n.keyCode)?n.keyCode==t.helper.keyCode.ENTER&&e.cellProperties.strict!==!0&&e.$htContainer.handsontable("deselectCell"):setTimeout(function(){e.queryChoices(e.$textarea.val())})}),this.$htContainer.on("mouseenter",function(){e.$htContainer.handsontable("deselectCell")}),this.$htContainer.on("mouseleave",function(){e.queryChoices(e.query)}),t.editors.HandsontableEditor.prototype.bindEvents.apply(this,arguments)},n.prototype.beginEditing=function(){t.editors.HandsontableEditor.prototype.beginEditing.apply(this,arguments);var e=this;setTimeout(function(){e.queryChoices(e.TEXTAREA.value)});var n=this.$htContainer.handsontable("getInstance");n.updateSettings({colWidths:[this.wtDom.outerWidth(this.TEXTAREA)-2],afterRenderer:function(t,n,i,o,r){var s=this.getCellMeta(n,i).filteringCaseSensitive===!0,a=s?r.indexOf(e.query):r.toLowerCase().indexOf(e.query.toLowerCase());if(-1!=a){var l=r.substr(a,e.query.length);t.innerHTML=r.replace(l,"<strong>"+l+"</strong>")}}})};var i;n.prototype.open=function(){var e=this;i=function(n){var i=this;n.keyCode==t.helper.keyCode.ARROW_UP&&i.getSelected()&&0==i.getSelected()[0]&&(e.cellProperties.strict||i.deselectCell(),e.instance.listen(),e.focus(),n.preventDefault(),n.stopImmediatePropagation())},this.$htContainer.handsontable("getInstance").addHook("beforeKeyDown",i),t.editors.HandsontableEditor.prototype.open.apply(this,arguments),this.$textarea[0].style.visibility="visible",e.focus()},n.prototype.close=function(){this.$htContainer.handsontable("getInstance").removeHook("beforeKeyDown",i),t.editors.HandsontableEditor.prototype.close.apply(this,arguments)},n.prototype.queryChoices=function(e){if(this.query=e,"function"==typeof this.cellProperties.source){var n=this;this.cellProperties.source(e,function(t){n.updateChoicesList(t)})}else if(t.helper.isArray(this.cellProperties.source)){var i;if(e&&this.cellProperties.filter!==!1){var o=this.cellProperties.filteringCaseSensitive===!0,r=e.toLowerCase();i=this.cellProperties.source.filter(function(t){return o?-1!=t.indexOf(e):-1!=t.toLowerCase().indexOf(r)})}else i=this.cellProperties.source;this.updateChoicesList(i)}else this.updateChoicesList([])},n.prototype.updateChoicesList=function(n){this.$htContainer.handsontable("loadData",t.helper.pivot([n]));var i,o=this.getValue();this.cellProperties.strict===!0&&(i=e(n,o),"undefined"==typeof i&&this.cellProperties.allowInvalid===!1&&(i=0)),"undefined"==typeof i?this.$htContainer.handsontable("deselectCell"):this.$htContainer.handsontable("selectCell",i,0),this.focus()},t.editors.AutocompleteEditor=n,t.editors.registerEditor("autocomplete",n)}(o),function(e){var n=e.editors.TextEditor.prototype.extend(),i=new b;n.prototype.createElements=function(){e.editors.TextEditor.prototype.createElements.apply(this,arguments),this.TEXTAREA=document.createElement("input"),this.TEXTAREA.setAttribute("type","password"),this.TEXTAREA.className="handsontableInput",this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,this.$textarea=t(this.TEXTAREA),i.empty(this.TEXTAREA_PARENT),this.TEXTAREA_PARENT.appendChild(this.TEXTAREA)},e.editors.PasswordEditor=n,e.editors.registerEditor("password",n)}(o),function(e){var n=e.editors.BaseEditor.prototype.extend();n.prototype.init=function(){this.select=t("<select />").addClass("htSelectEditor").hide(),this.instance.rootElement.append(this.select)},n.prototype.prepare=function(){e.editors.BaseEditor.prototype.prepare.apply(this,arguments);var n,i=this.cellProperties.selectOptions;n="function"==typeof i?this.prepareOptions(i(this.row,this.col,this.prop)):this.prepareOptions(i);var o=[];for(var r in n)if(n.hasOwnProperty(r)){var s=t("<option />");s.val(r),s.html(n[r]),o.push(s)}this.select.empty(),this.select.append(o)},n.prototype.prepareOptions=function(t){var n={};if(e.helper.isArray(t))for(var i=0,o=t.length;o>i;i++)n[t[i]]=t[i];else"object"==typeof t&&(n=t);return n},n.prototype.getValue=function(){return this.select.val()},n.prototype.setValue=function(t){this.select.val(t)};var i=function(t){var n=this,i=n.getActiveEditor();switch(t.keyCode){case e.helper.keyCode.ARROW_UP:var o=i.select.find("option:selected").prev();1==o.length&&o.prop("selected",!0),t.stopImmediatePropagation(),t.preventDefault();break;case e.helper.keyCode.ARROW_DOWN:var r=i.select.find("option:selected").next();1==r.length&&r.prop("selected",!0),t.stopImmediatePropagation(),t.preventDefault()}};n.prototype.open=function(){this.select.css({height:t(this.TD).height(),"min-width":t(this.TD).outerWidth()}),this.select.show(),this.select.offset(t(this.TD).offset()),this.instance.addHook("beforeKeyDown",i)},n.prototype.close=function(){this.select.hide(),this.instance.removeHook("beforeKeyDown",i)},n.prototype.focus=function(){this.select.focus()},e.editors.SelectEditor=n,e.editors.registerEditor("select",n)}(o),function(t){var e=t.editors.AutocompleteEditor.prototype.extend();e.prototype.prepare=function(){t.editors.AutocompleteEditor.prototype.prepare.apply(this,arguments),this.cellProperties.filter=!1,this.cellProperties.strict=!0},t.editors.DropdownEditor=e,t.editors.registerEditor("dropdown",e)}(o),o.NumericValidator=function(t,e){null===t&&(t=""),e(/^-?\d*\.?\d*$/.test(t))};var L=function(t,e){var n=t,i="string"==typeof n?n.toLowerCase():null;return function(t){for(var o=!1,r=0,s=t.length;s>r;r++){if(n===t[r]){o=!0;break}if(i===t[r].toLowerCase()){o=!0;break}}e(o)}};o.AutocompleteValidator=function(t,e){this.strict&&this.source?"function"==typeof this.source?this.source(t,L(t,e)):L(t,e)(this.source):e(!0)},o.AutocompleteCell={editor:o.editors.AutocompleteEditor,renderer:o.renderers.AutocompleteRenderer,validator:o.AutocompleteValidator},o.CheckboxCell={editor:o.editors.CheckboxEditor,renderer:o.renderers.CheckboxRenderer},o.TextCell={editor:o.editors.TextEditor,renderer:o.renderers.TextRenderer},o.NumericCell={editor:o.editors.TextEditor,renderer:o.renderers.NumericRenderer,validator:o.NumericValidator,dataType:"number"},o.DateCell={editor:o.editors.DateEditor,renderer:o.renderers.AutocompleteRenderer},o.HandsontableCell={editor:o.editors.HandsontableEditor,renderer:o.renderers.AutocompleteRenderer},o.PasswordCell={editor:o.editors.PasswordEditor,renderer:o.renderers.PasswordRenderer,copyable:!1},o.DropdownCell={editor:o.editors.DropdownEditor,renderer:o.renderers.AutocompleteRenderer,validator:o.AutocompleteValidator},o.cellTypes={text:o.TextCell,date:o.DateCell,numeric:o.NumericCell,checkbox:o.CheckboxCell,autocomplete:o.AutocompleteCell,handsontable:o.HandsontableCell,password:o.PasswordCell,dropdown:o.DropdownCell},o.cellLookup={validator:{numeric:o.NumericValidator,autocomplete:o.AutocompleteValidator}},function(t){function e(i){return this.filter(e.resizableFilterSelector).each(function(){new n(t(this),i)}),this}function n(n,i){this.clones||(this.config=t.extend({},e.defaults,i),this.el=n,this.nodeName=n[0].nodeName.toLowerCase(),this.previousScrollTop=null,"original"===i.maxWidth&&(i.maxWidth=n.width()),"original"===i.minWidth&&(i.minWidth=n.width()),"original"===i.maxHeight&&(i.maxHeight=n.height()),"original"===i.minHeight&&(i.minHeight=n.height()),"textarea"===this.nodeName&&n.css({resize:"none",overflowY:"none"}),n.data("AutoResizer",this),this.createClone(),this.injectClone(),this.bind())}e.defaults={onResize:function(){},animate:{duration:200,complete:function(){}},extraSpace:50,minHeight:"original",maxHeight:500,minWidth:"original",maxWidth:500},e.cloneCSSProperties=["lineHeight","textDecoration","letterSpacing","fontSize","fontFamily","fontStyle","fontWeight","textTransform","textAlign","direction","wordSpacing","fontSizeAdjust","padding"],e.cloneCSSValues={position:"absolute",top:-9999,left:-9999,opacity:0,overflow:"hidden",overflowX:"hidden",overflowY:"hidden",border:"1px solid black",padding:"0.49em"},e.resizableFilterSelector="textarea,input:not(input[type]),input[type=text],input[type=password]",e.AutoResizer=n,t.fn.autoResize=e,n.prototype={bind:function(){var e=t.proxy(function(){return this.check(),!0},this);this.unbind(),this.el.bind("keyup.autoResize",e).bind("change.autoResize",e),this.check(null,!0)},unbind:function(){this.el.unbind(".autoResize")},createClone:function(){var n=this.el,i=this,o=this.config;this.clones=t(),"original"===o.minHeight&&"original"===o.maxHeight||(this.hClone=n.clone().height("auto"),this.clones=this.clones.add(this.hClone)),"original"===o.minWidth&&"original"===o.maxWidth||(this.wClone=t("<div/>").width("auto").css({whiteSpace:"nowrap","float":"left"}),this.clones=this.clones.add(this.wClone)),t.each(e.cloneCSSProperties,function(t,e){i.clones.css(e,n.css(e))}),this.clones.removeAttr("name").removeAttr("id").attr("tabIndex",-1).css(e.cloneCSSValues).css("overflowY","scroll")},check:function(t,e){var n=this.config,i=this.wClone,o=this.hClone,r=this.el,s=r.val();if(i){i.text(s);var a=i.outerWidth(),l=a+n.extraSpace>=n.minWidth?a+n.extraSpace:n.minWidth,c=r.width();l=Math.min(l,n.maxWidth),(c>l&&l>=n.minWidth||l>=n.minWidth&&l<=n.maxWidth)&&(n.onResize.call(r),r.scrollLeft(0),n.animate&&!e?r.stop(1,1).animate({width:l},n.animate):r.width(l))}if(o){l&&o.width(l),o.height(0).val(s).scrollTop(1e4);var u=o[0].scrollTop+n.extraSpace;if(this.previousScrollTop===u)return;this.previousScrollTop=u,u>=n.maxHeight&&(u=n.maxHeight),u<n.minHeight&&(u=n.minHeight),u==n.maxHeight&&l==n.maxWidth?r.css("overflowY","scroll"):r.css("overflowY","hidden"),n.onResize.call(r),n.animate&&!e?r.stop(1,1).animate({height:u},n.animate):r.height(u)}},destroy:function(){this.unbind(),this.el.removeData("AutoResizer"),this.clones.remove(),delete this.el,delete this.hClone,delete this.wClone,delete this.clones},injectClone:function(){(e.cloneContainer||(e.cloneContainer=t("<arclones/>").appendTo("body"))).empty().append(this.clones)}}}(jQuery),function(t){function e(t){return t.split('"').length-1}t.SheetClip={parse:function(t){var n,i,o,r,s,a,l,c=[],u=0;for(o=t.split("\n"),o.length>1&&""===o[o.length-1]&&o.pop(),n=0,i=o.length;i>n;n+=1){for(o[n]=o[n].split("	"),r=0,s=o[n].length;s>r;r+=1)c[u]||(c[u]=[]),a&&0===r?(l=c[u].length-1,c[u][l]=c[u][l]+"\n"+o[n][0],a&&1&e(o[n][0])&&(a=!1,c[u][l]=c[u][l].substring(0,c[u][l].length-1).replace(/""/g,'"'))):r===s-1&&0===o[n][r].indexOf('"')?(c[u].push(o[n][r].substring(1).replace(/""/g,'"')),a=!0):(c[u].push(o[n][r].replace(/""/g,'"')),a=!1);a||(u+=1)}return c},stringify:function(t){var e,n,i,o,r,s="";for(e=0,n=t.length;n>e;e+=1){for(i=0,o=t[e].length;o>i;i+=1)i>0&&(s+="	"),r=t[e][i],s+="string"==typeof r?r.indexOf("\n")>-1?'"'+r.replace(/"/g,'""')+'"':r:null===r||void 0===r?"":r;s+="\n"}return s}}}(i);var F=function(){var t;return{getInstance:function(){return t?t.hasBeenDestroyed()&&t.init():t=new r,t.refCounter++,t}}}();r.prototype.init=function(){var t,e,n=this;this.copyCallbacks=[],this.cutCallbacks=[],this.pasteCallbacks=[],this.listenerElement=document.documentElement,e=document.body,document.getElementById("CopyPasteDiv")?(this.elDiv=document.getElementById("CopyPasteDiv"),this.elTextarea=this.elDiv.firstChild):(this.elDiv=document.createElement("DIV"),this.elDiv.id="CopyPasteDiv",t=this.elDiv.style,t.position="fixed",t.top=0,t.left=0,e.appendChild(this.elDiv),this.elTextarea=document.createElement("TEXTAREA"),this.elTextarea.className="copyPaste",t=this.elTextarea.style,t.width="1px",t.height="1px",this.elDiv.appendChild(this.elTextarea),"undefined"!=typeof t.opacity&&(t.opacity=0)),this.keydownListener=function(t){var e=!1;if(t.metaKey?e=!0:t.ctrlKey&&-1===navigator.userAgent.indexOf("Mac")&&(e=!0),e){if(document.activeElement!==n.elTextarea&&(""!=n.getSelectionText()||-1!=["INPUT","SELECT","TEXTAREA"].indexOf(document.activeElement.nodeName)))return;n.selectNodeText(n.elTextarea),setTimeout(function(){n.selectNodeText(n.elTextarea)},0)}!e||67!==t.keyCode&&86!==t.keyCode&&88!==t.keyCode||(88===t.keyCode?setTimeout(function(){n.triggerCut(t)},0):86===t.keyCode&&setTimeout(function(){n.triggerPaste(t)},0))},this._bindEvent(this.listenerElement,"keydown",this.keydownListener)},r.prototype.selectNodeText=function(t){t.select()},r.prototype.getSelectionText=function(){var t="";return i.getSelection?t=i.getSelection().toString():document.selection&&"Control"!=document.selection.type&&(t=document.selection.createRange().text),t},r.prototype.copyable=function(t){if("string"!=typeof t&&void 0===t.toString)throw new Error("copyable requires string parameter");this.elTextarea.value=t},r.prototype.onCut=function(t){this.cutCallbacks.push(t)},r.prototype.onPaste=function(t){this.pasteCallbacks.push(t)},r.prototype.removeCallback=function(t){var e,n;for(e=0,n=this.copyCallbacks.length;n>e;e++)if(this.copyCallbacks[e]===t)return this.copyCallbacks.splice(e,1),!0;for(e=0,n=this.cutCallbacks.length;n>e;e++)if(this.cutCallbacks[e]===t)return this.cutCallbacks.splice(e,1),!0;for(e=0,n=this.pasteCallbacks.length;n>e;e++)if(this.pasteCallbacks[e]===t)return this.pasteCallbacks.splice(e,1),!0;return!1},r.prototype.triggerCut=function(t){var e=this;e.cutCallbacks&&setTimeout(function(){for(var n=0,i=e.cutCallbacks.length;i>n;n++)e.cutCallbacks[n](t)},50)},r.prototype.triggerPaste=function(t,e){var n=this;n.pasteCallbacks&&setTimeout(function(){for(var i=(e||n.elTextarea.value).replace(/\n$/,""),o=0,r=n.pasteCallbacks.length;r>o;o++)n.pasteCallbacks[o](i,t)},50)},r.prototype.destroy=function(){this.hasBeenDestroyed()||0!=--this.refCounter||(this.elDiv&&this.elDiv.parentNode&&this.elDiv.parentNode.removeChild(this.elDiv),this._unbindEvent(this.listenerElement,"keydown",this.keydownListener))},r.prototype.hasBeenDestroyed=function(){return!this.refCounter},r.prototype._bindEvent=function(){return i.jQuery?function(e,n,i){t(e).on(n+".copypaste",i)}:function(t,e,n){t.addEventListener(e,n,!1)}}(),r.prototype._unbindEvent=function(){return i.jQuery?function(e,n,i){t(e).off(n+".copypaste",i)}:function(t,e,n){t.removeEventListener(e,n,!1)}}();var z;!function(t){function e(t){return-1===t.indexOf("/")&&-1===t.indexOf("~")?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function n(t,i){var o;for(var r in t)if(t.hasOwnProperty(r)){if(t[r]===i)return e(r)+"/";if("object"==typeof t[r]&&(o=n(t[r],i),""!=o))return e(r)+"/"+o}return""}function o(t,e){if(t===e)return"/";var i=n(t,e);if(""===i)throw new Error("Object not found in root");return"/"+i}function r(t){for(var e=0,n=y.length;n>e;e++)if(y[e].obj===t)return y[e]}function s(t,e){for(var n=0,i=t.observers.length;i>n;n++)if(t.observers[n].callback===e)return t.observers[n].observer}function a(t,e){for(var n=0,i=t.observers.length;i>n;n++)if(t.observers[n].observer===e)return void t.observers.splice(n,1)}function l(t,e){d(e),Object.observe?h(e,t):clearTimeout(e.next);var n=r(t);a(n,e)}function c(t,e){var n,a=[],l=t,c=r(t);if(c?n=s(c,e):(c=new w(t),y.push(c)),n)return n;if(Object.observe)n=function(i){h(n,t),u(n,t);for(var r=0,s=i.length;s>r;){if(("length"!==i[r].name||!x(i[r].object))&&"__Jasmine_been_here_before__"!==i[r].name){var c=i[r].type;switch(c){case"new":c="add";break;case"deleted":c="delete";break;case"updated":c="update"}v[c].call(i[r],a,o(l,i[r].object))}r++}a&&e&&e(a),n.patches=a,a=[]};else if(n={},c.value=JSON.parse(JSON.stringify(t)),e){n.callback=e,n.next=null;var f=this.intervals||[100,1e3,1e4,6e4],p=0,g=function(){d(n)},m=function(){clearTimeout(n.next),n.next=setTimeout(function(){g(),p=0,n.next=setTimeout(C,f[p++])},0)},C=function(){g(),p==f.length&&(p=f.length-1),n.next=setTimeout(C,f[p++])};"undefined"!=typeof i&&(i.addEventListener?(i.addEventListener("mousedown",m),i.addEventListener("mouseup",m),i.addEventListener("keydown",m)):(i.attachEvent("onmousedown",m),i.attachEvent("onmouseup",m),i.attachEvent("onkeydown",m))),n.next=setTimeout(C,f[p++])}return n.patches=a,n.object=t,c.observers.push(new b(e,n)),u(n,t)}function u(t,e){if(Object.observe){Object.observe(e,t);for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];i&&"object"==typeof i&&u(t,i)}}return t}function h(t,e){if(Object.observe){Object.unobserve(e,t);for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];i&&"object"==typeof i&&h(t,i)}}return t}function d(t){if(Object.observe)Object.deliverChangeRecords(t);else{for(var e,n=0,i=y.length;i>n;n++)if(y[n].obj===t.object){e=y[n];break}f(e.value,t.object,t.patches,"")}var o=t.patches;return o.length>0&&(t.patches=[],t.callback&&t.callback(o)),o}function f(t,n,i,o){for(var r=C(n),s=C(t),a=!1,l=!1,c=s.length-1;c>=0;c--){var u=s[c],h=t[u];if(n.hasOwnProperty(u)){var d=n[u];h instanceof Object?f(h,d,i,o+"/"+e(u)):h!=d&&(a=!0,i.push({op:"replace",path:o+"/"+e(u),value:d}),t[u]=d)}else i.push({op:"remove",path:o+"/"+e(u)}),delete t[u],l=!0}if(l||r.length!=s.length)for(var c=0;c<r.length;c++){var u=r[c];t.hasOwnProperty(u)||(i.push({op:"add",path:o+"/"+e(u),value:n[u]}),t[u]=JSON.parse(JSON.stringify(n[u])))}}function p(t,e){for(var n,i=!1,o=0,r=e.length;r>o;){n=e[o];for(var s=n.path.split("/"),a=t,l=1,c=s.length;;)if(x(a)){var u=parseInt(s[l],10);if(l++,l>=c){i=m[n.op].call(n,a,u,t);break}a=a[u]}else{var h=s[l];if(-1!=h.indexOf("~")&&(h=h.replace(/~1/g,"/").replace(/~0/g,"~")),l++,l>=c){i=g[n.op].call(n,a,h,t);break}a=a[h]}o++}return i}var g={add:function(t,e){return t[e]=this.value,!0},remove:function(t,e){return delete t[e],!0},replace:function(t,e){return t[e]=this.value,!0},move:function(t,e,n){var i={op:"_get",path:this.from};return p(n,[i]),p(n,[{op:"remove",path:this.from}]),p(n,[{op:"add",path:this.path,value:i.value}]),!0},copy:function(t,e,n){var i={op:"_get",path:this.from};return p(n,[i]),p(n,[{op:"add",path:this.path,value:i.value}]),
!0},test:function(t,e){return JSON.stringify(t[e])===JSON.stringify(this.value)},_get:function(t,e){this.value=t[e]}},m={add:function(t,e){return t.splice(e,0,this.value),!0},remove:function(t,e){return t.splice(e,1),!0},replace:function(t,e){return t[e]=this.value,!0},move:g.move,copy:g.copy,test:g.test,_get:g._get},v={add:function(t,n){var i={op:"add",path:n+e(this.name),value:this.object[this.name]};t.push(i)},"delete":function(t,n){var i={op:"remove",path:n+e(this.name)};t.push(i)},update:function(t,n){var i={op:"replace",path:n+e(this.name),value:this.object[this.name]};t.push(i)}},y=[];t.intervals;var w=function(){function t(t){this.observers=[],this.obj=t}return t}(),b=function(){function t(t,e){this.callback=t,this.observer=e}return t}();t.unobserve=l,t.observe=c,t.generate=d;var C;C=Object.keys?Object.keys:function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e};var x;x=Array.isArray?Array.isArray:function(t){return t.push&&"number"==typeof t.length},t.apply=p}(z||(z={})),"undefined"!=typeof n&&(n.apply=z.apply,n.observe=z.observe,n.unobserve=z.unobserve,n.generate=z.generate),o.PluginHookClass=function(){function t(){this.hooks=e(),this.legacy=n}var e=function(){return{beforeInitWalkontable:[],beforeInit:[],beforeRender:[],beforeChange:[],beforeRemoveCol:[],beforeRemoveRow:[],beforeValidate:[],beforeGet:[],beforeSet:[],beforeGetCellMeta:[],beforeAutofill:[],beforeKeyDown:[],beforeColumnSort:[],afterInit:[],afterLoadData:[],afterUpdateSettings:[],afterRender:[],afterRenderer:[],afterChange:[],afterValidate:[],afterGetCellMeta:[],afterGetColHeader:[],afterGetColWidth:[],afterDestroy:[],afterRemoveRow:[],afterCreateRow:[],afterRemoveCol:[],afterCreateCol:[],afterColumnResize:[],afterColumnMove:[],afterColumnSort:[],afterDeselect:[],afterSelection:[],afterSelectionByProp:[],afterSelectionEnd:[],afterSelectionEndByProp:[],afterCopyLimit:[],afterOnCellMouseDown:[],afterOnCellMouseOver:[],afterOnCellCornerMouseDown:[],afterScrollVertically:[],afterScrollHorizontally:[],modifyCol:[]}},n={onBeforeChange:"beforeChange",onChange:"afterChange",onCreateRow:"afterCreateRow",onCreateCol:"afterCreateCol",onSelection:"afterSelection",onCopyLimit:"afterCopyLimit",onSelectionEnd:"afterSelectionEnd",onSelectionByProp:"afterSelectionByProp",onSelectionEndByProp:"afterSelectionEndByProp"};return t.prototype.add=function(t,e){if(o.helper.isArray(e))for(var i=0,r=e.length;r>i;i++)this.add(t,e[i]);else t in n&&(t=n[t]),"undefined"==typeof this.hooks[t]&&(this.hooks[t]=[]),-1==this.hooks[t].indexOf(e)&&this.hooks[t].push(e);return this},t.prototype.once=function(t,e){if(o.helper.isArray(e))for(var n=0,i=e.length;i>n;n++)e[n].runOnce=!0,this.add(t,e[n]);else e.runOnce=!0,this.add(t,e)},t.prototype.remove=function(t,e){var i=!1;if(t in n&&(t=n[t]),"undefined"!=typeof this.hooks[t])for(var o=0,r=this.hooks[t].length;r>o;o++)if(this.hooks[t][o]==e){delete this.hooks[t][o].runOnce,this.hooks[t].splice(o,1),i=!0;break}return i},t.prototype.run=function(t,e,i,o,r,s,a){if(e in n&&(e=n[e]),"undefined"!=typeof this.hooks[e])for(var l=Array.prototype.slice.call(this.hooks[e]),c=0,u=l.length;u>c;c++)l[c].call(t,i,o,r,s,a),l[c].runOnce&&this.remove(e,l[c])},t.prototype.execute=function(t,e,i,o,r,s,a){var l,c;if(e in n&&(e=n[e]),"undefined"!=typeof this.hooks[e]){c=Array.prototype.slice.call(this.hooks[e]);for(var u=0,h=c.length;h>u;u++)if(l=c[u].call(t,i,o,r,s,a),void 0!==l&&(i=l),c[u].runOnce&&this.remove(e,c[u]),l===!1)return!1}return i},t}(),o.PluginHooks=new o.PluginHookClass,function(t){function e(){function e(t){var e=document,n=this;n.table=e.createElement("table"),n.theadTh=e.createElement("th"),n.table.appendChild(e.createElement("thead")).appendChild(e.createElement("tr")).appendChild(n.theadTh),n.tableStyle=n.table.style,n.tableStyle.tableLayout="auto",n.tableStyle.width="auto",n.tbody=e.createElement("tbody"),n.table.appendChild(n.tbody),n.container=e.createElement("div"),n.container.className=t.rootElement[0].className+" hidden",n.containerStyle=n.container.style,n.container.appendChild(n.table)}var i=this,o=5;this.beforeInit=function(){var t=this;t.autoColumnWidths=[],t.getSettings().autoColumnSize!==!1?t.autoColumnSizeTmp||(t.autoColumnSizeTmp={table:null,tableStyle:null,theadTh:null,tbody:null,container:null,containerStyle:null,determineBeforeNextRender:!0},t.addHook("beforeRender",n.determineIfChanged),t.addHook("afterGetColWidth",n.getColWidth),t.addHook("afterDestroy",n.afterDestroy),t.determineColumnWidth=i.determineColumnWidth):t.autoColumnSizeTmp&&(t.removeHook("beforeRender",n.determineIfChanged),t.removeHook("afterGetColWidth",n.getColWidth),t.removeHook("afterDestroy",n.afterDestroy),delete t.determineColumnWidth,i.afterDestroy.call(t))},this.determineIfChanged=function(t){t&&n.determineColumnsWidth.apply(this,arguments)},this.determineColumnWidth=function(n){var i=this,r=i.autoColumnSizeTmp;r.container||e.call(r,i),r.container.className=i.rootElement[0].className+" htAutoColumnSize",r.table.className=i.$table[0].className;for(var s=i.countRows(),a={},l=0,c=0;s>c;c++){var u=t.helper.stringify(i.getDataAtCell(c,n)),h=u.length;h>l&&(l=h),a[h]||(a[h]={needed:o,strings:[]}),a[h].needed&&(a[h].strings.push({value:u,row:c}),a[h].needed--)}var d=i.getSettings();d.colHeaders&&i.view.appendColHeader(n,r.theadTh),i.view.wt.wtDom.empty(r.tbody);for(var f in a)if(a.hasOwnProperty(f))for(var p=0,g=a[f].strings.length;g>p;p++){var m=a[f].strings[p].row,v=i.getCellMeta(m,n);v.col=n,v.row=m;var y=i.getCellRenderer(v),w=document.createElement("tr"),b=document.createElement("td");y(i,b,m,n,i.colToProp(n),a[f].strings[p].value,v),c++,w.appendChild(b),r.tbody.appendChild(w)}var C=i.rootElement[0].parentNode;C.appendChild(r.container);var x=i.view.wt.wtDom.outerWidth(r.table);if(C.removeChild(r.container),!d.nativeScrollbars){var S=i.view.wt.wtViewport.getViewportWidth()-2;x>S&&(x=S)}return x},this.determineColumnsWidth=function(){var t=this,e=this.getSettings();if(e.autoColumnSize||!e.colWidths)for(var n=this.countCols(),o=0;n>o;o++)t._getColWidthFromSettings(o)||(this.autoColumnWidths[o]=i.determineColumnWidth.call(t,o))},this.getColWidth=function(t,e){this.autoColumnWidths[t]&&this.autoColumnWidths[t]>e.width&&(e.width=this.autoColumnWidths[t])},this.afterDestroy=function(){var t=this;t.autoColumnSizeTmp&&t.autoColumnSizeTmp.container&&t.autoColumnSizeTmp.container.parentNode&&t.autoColumnSizeTmp.container.parentNode.removeChild(t.autoColumnSizeTmp.container),t.autoColumnSizeTmp=null}}var n=new e;t.PluginHooks.add("beforeInit",n.beforeInit),t.PluginHooks.add("afterUpdateSettings",n.beforeInit)}(o);var B=new s;o.PluginHooks.add("afterInit",function(){B.init.call(this,"afterInit")}),o.PluginHooks.add("afterUpdateSettings",function(){B.init.call(this,"afterUpdateSettings")}),o.PluginHooks.add("beforeGet",B.onBeforeGetSet),o.PluginHooks.add("beforeSet",B.onBeforeGetSet),o.PluginHooks.add("afterGetColHeader",B.getColHeader),function(e){function n(i,o){function r(){var n=t("body > .htContextMenu")[0];return n||(n=document.createElement("DIV"),e.Dom.addClass(n,"htContextMenu"),document.getElementsByTagName("body")[0].appendChild(n)),n}this.instance=i;var s=this;this.menu=r(),this.enabled=!0,this.bindMouseEvents(),this.bindTableEvents(),this.instance.addHook("afterDestroy",function(){s.destroy()}),this.defaultOptions={items:{row_above:{name:"Insert row above",callback:function(t,e){this.alter("insert_row",e.start.row())},disabled:function(){return this.countRows()>=this.getSettings().maxRows}},row_below:{name:"Insert row below",callback:function(t,e){this.alter("insert_row",e.end.row()+1)},disabled:function(){return this.countRows()>=this.getSettings().maxRows}},hsep1:n.SEPARATOR,col_left:{name:"Insert column on the left",callback:function(t,e){this.alter("insert_col",e.start.col())},disabled:function(){return this.countCols()>=this.getSettings().maxCols}},col_right:{name:"Insert column on the right",callback:function(t,e){this.alter("insert_col",e.end.col()+1)},disabled:function(){return this.countCols()>=this.getSettings().maxCols}},hsep2:n.SEPARATOR,remove_row:{name:"Remove row",callback:function(t,e){var n=e.end.row()-e.start.row()+1;this.alter("remove_row",e.start.row(),n)}},remove_col:{name:"Remove column",callback:function(t,e){var n=e.end.col()-e.start.col()+1;this.alter("remove_col",e.start.col(),n)}},hsep3:n.SEPARATOR,undo:{name:"Undo",callback:function(){this.undo()},disabled:function(){return this.undoRedo&&!this.undoRedo.isUndoAvailable()}},redo:{name:"Redo",callback:function(){this.redo()},disabled:function(){return this.undoRedo&&!this.undoRedo.isRedoAvailable()}}}},this.options={},e.helper.extend(this.options,this.defaultOptions),this.updateOptions(o)}function i(){var t=this,i=t.getSettings().contextMenu,o=e.helper.isObject(i)?i:{};i?(t.contextMenu||(t.contextMenu=new n(t,o)),t.contextMenu.enable(),e.helper.isArray(i)&&t.contextMenu.filterItems(i)):t.contextMenu&&(t.contextMenu.destroy(),delete t.contextMenu)}n.prototype.bindMouseEvents=function(){function i(i){i.preventDefault(),("TD"==i.target.nodeName||e.Dom.hasClass(i.target,"current")&&e.Dom.hasClass(i.target,"wtBorder"))&&(this.show(i.pageY,i.pageX),t(document).on("mousedown.htContextMenu",e.helper.proxy(n.prototype.close,this)))}this.instance.rootElement.on("contextmenu.htContextMenu",e.helper.proxy(i,this))},n.prototype.bindTableEvents=function(){var t=this;this._afterScrollCallback=function(){t.close()},this.instance.addHook("afterScrollVertically",this._afterScrollCallback),this.instance.addHook("afterScrollHorizontally",this._afterScrollCallback)},n.prototype.unbindTableEvents=function(){this._afterScrollCallback&&(this.instance.removeHook("afterScrollVertically",this._afterScrollCallback),this.instance.removeHook("afterScrollHorizontally",this._afterScrollCallback),this._afterScrollCallback=null)},n.prototype.performAction=function(){var e=t(this.menu).handsontable("getInstance"),i=e.getSelected()[0],o=e.getData()[i];if(o.disabled!==!0&&("function"!=typeof o.disabled||o.disabled.call(this.instance)!==!0)&&"function"==typeof o.callback){var r=this.instance.getSelected(),s=n.utils.normalizeSelection(r);o.callback.call(this.instance,o.key,s)}},n.prototype.unbindMouseEvents=function(){this.instance.rootElement.off("contextmenu.htContextMenu"),t(document).off("mousedown.htContextMenu")},n.prototype.show=function(i,o){this.menu.style.display="block",t(this.menu).off("mousedown.htContextMenu").on("mousedown.htContextMenu",e.helper.proxy(this.performAction,this)),t(this.menu).handsontable({data:n.utils.convertItemsToArray(this.getItems()),colHeaders:!1,colWidths:[160],readOnly:!0,copyPaste:!1,columns:[{data:"name",renderer:e.helper.proxy(this.renderer,this)}],beforeKeyDown:e.helper.proxy(this.onBeforeKeyDown,this)}),this.bindTableEvents(),this.setMenuPosition(i,o),t(this.menu).handsontable("listen")},n.prototype.close=function(){this.hide(),t(document).off("mousedown.htContextMenu"),this.unbindTableEvents(),this.instance.listen()},n.prototype.hide=function(){this.menu.style.display="none",t(this.menu).handsontable("destroy")},n.prototype.renderer=function(i,o,r,s,a,l,c){function u(t){return new RegExp(n.SEPARATOR,"i").test(t.name)}function h(t,e){return t.disabled===!0||"function"==typeof t.disabled&&t.disabled.call(d.instance)===!0}var d=this,f=i.getData()[r],p=document.createElement("DIV");e.Dom.empty(o),o.appendChild(p),u(f)?e.Dom.addClass(o,"htSeparator"):e.Dom.fastInnerText(p,l),h(f,d.instance)?(e.Dom.addClass(o,"htDisabled"),t(p).on("mouseenter",function(){i.deselectCell()})):(e.Dom.removeClass(o,"htDisabled"),t(p).on("mouseenter",function(){i.selectCell(r,s)}))},n.prototype.onBeforeKeyDown=function(i){function o(t){var e=t.getCell(0,0);n.utils.isSeparator(e)||n.utils.isDisabled(e)?s(0,0,t):t.selectCell(0,0)}function r(t){var e=t.countRows()-1,i=t.getCell(e,0);n.utils.isSeparator(i)||n.utils.isDisabled(i)?a(e,0,t):t.selectCell(e,0)}function s(t,e,i){var o=t+1,r=o<i.countRows()?i.getCell(o,e):null;r&&(n.utils.isSeparator(r)||n.utils.isDisabled(r)?s(o,e,i):i.selectCell(o,e))}function a(t,e,i){var o=t-1,r=o>=0?i.getCell(o,e):null;r&&(n.utils.isSeparator(r)||n.utils.isDisabled(r)?a(o,e,i):i.selectCell(o,e))}var l=this,c=t(l.menu).handsontable("getInstance"),u=c.getSelected();switch(i.keyCode){case e.helper.keyCode.ESCAPE:l.close(),i.preventDefault(),i.stopImmediatePropagation();break;case e.helper.keyCode.ENTER:c.getSelected()&&(l.performAction(),l.close());break;case e.helper.keyCode.ARROW_DOWN:u?s(u[0],u[1],c):o(c),i.preventDefault(),i.stopImmediatePropagation();break;case e.helper.keyCode.ARROW_UP:u?a(u[0],u[1],c):r(c),i.preventDefault(),i.stopImmediatePropagation()}},n.prototype.getItems=function(){function t(t){"string"==typeof t?this.name=t:e.helper.extend(this,t)}var n={};t.prototype=this.options;for(var i in this.options.items)!this.options.items.hasOwnProperty(i)||this.itemsFilter&&-1==this.itemsFilter.indexOf(i)||(n[i]=new t(this.options.items[i]));return n},n.prototype.updateOptions=function(t){if(t=t||{},t.items)for(var n in t.items){var i={};t.items.hasOwnProperty(n)&&this.defaultOptions.items.hasOwnProperty(n)&&e.helper.isObject(t.items[n])&&(e.helper.extend(i,this.defaultOptions.items[n]),e.helper.extend(i,t.items[n]),t.items[n]=i)}e.helper.extend(this.options,t)},n.prototype.setMenuPosition=function(t,e){var n={top:t,topRelative:t-document.documentElement.scrollTop,left:e,leftRelative:e-document.documentElement.scrollLeft};this.menuFitsBelowCursor(n)?this.positionMenuBelowCursor(n):this.positionMenuAboveCursor(n),this.menuFitsOnRightOfCursor(n)?this.positionMenuOnRightOfCursor(n):this.positionMenuOnLeftOfCursor(n)},n.prototype.menuFitsBelowCursor=function(t){return t.topRelative+this.menu.offsetHeight<=document.documentElement.scrollTop+document.documentElement.clientHeight},n.prototype.menuFitsOnRightOfCursor=function(t){return t.leftRelative+this.menu.offsetWidth<=document.documentElement.scrollLeft+document.documentElement.clientWidth},n.prototype.positionMenuBelowCursor=function(t){this.menu.style.top=t.top+"px"},n.prototype.positionMenuAboveCursor=function(t){this.menu.style.top=t.top-this.menu.offsetHeight+"px"},n.prototype.positionMenuOnRightOfCursor=function(t){this.menu.style.left=t.left+"px"},n.prototype.positionMenuOnLeftOfCursor=function(t){this.menu.style.left=t.left-this.menu.offsetWidth+"px"},n.utils={},n.utils.convertItemsToArray=function(t){var e,n=[];for(var i in t)if(t.hasOwnProperty(i)){if("string"==typeof t[i])e={name:t[i]};else{if(t[i].visible===!1)continue;e=t[i]}e.key=i,n.push(e)}return n},n.utils.normalizeSelection=function(t){var n={start:new e.SelectionPoint,end:new e.SelectionPoint};return n.start.row(Math.min(t[0],t[2])),n.start.col(Math.min(t[1],t[3])),n.end.row(Math.max(t[0],t[2])),n.end.col(Math.max(t[1],t[3])),n},n.utils.isSeparator=function(t){return e.Dom.hasClass(t,"htSeparator")},n.utils.isDisabled=function(t){return e.Dom.hasClass(t,"htDisabled")},n.prototype.enable=function(){this.enabled||(this.enabled=!0,this.bindMouseEvents())},n.prototype.disable=function(){this.enabled&&(this.enabled=!1,this.close(),this.unbindMouseEvents(),this.unbindTableEvents())},n.prototype.destroy=function(){this.close(),this.unbindMouseEvents(),this.unbindTableEvents(),this.isMenuEnabledByOtherHotInstance()||this.removeMenu()},n.prototype.isMenuEnabledByOtherHotInstance=function(){for(var e=t(".handsontable"),n=!1,i=0,o=e.length;o>i;i++){var r=t(e[i]).handsontable("getInstance");if(r&&r.getSettings().contextMenu){n=!0;break}}return n},n.prototype.removeMenu=function(){this.menu.parentNode&&this.menu.parentNode.removeChild(this.menu)},n.prototype.filterItems=function(t){this.itemsFilter=t},n.SEPARATOR="---------",e.PluginHooks.add("afterInit",i),e.PluginHooks.add("afterUpdateSettings",i),e.ContextMenu=n}(o),o.PluginHooks.add("beforeGetCellMeta",function(t,e,n){if(n.isWritable=!n.readOnly,n.autoComplete)throw new Error("Support for legacy autocomplete syntax was removed in Handsontable 0.10.0. Please remove the property named 'autoComplete' from your config. For replacement instructions, see wiki page https://github.com/warpech/jquery-handsontable/wiki/Migration-guide-to-0.10.x")});var V=new a;o.PluginHooks.add("beforeInit",V.beforeInit),o.PluginHooks.add("afterInit",function(){V.init.call(this,"afterInit")}),o.PluginHooks.add("afterUpdateSettings",function(){V.init.call(this,"afterUpdateSettings")}),o.PluginHooks.add("afterGetColHeader",V.getColHeader),o.PluginHooks.add("modifyCol",V.modifyCol);var W=new l;o.PluginHooks.add("beforeInit",W.beforeInit),o.PluginHooks.add("afterInit",function(){W.init.call(this,"afterInit")}),o.PluginHooks.add("afterUpdateSettings",function(){W.init.call(this,"afterUpdateSettings")}),o.PluginHooks.add("afterGetColWidth",W.getColWidth),function(){function t(){var t=this,n=t.getSettings().observeChanges;n?(t.observer&&i.call(t),e.call(t),s.call(t)):n||i.call(t)}function e(){var t=this;t.observeChangesActive=!0,t.pauseObservingChanges=function(){t.observeChangesActive=!1},t.resumeObservingChanges=function(){t.observeChangesActive=!0},t.observedData=t.getData(),t.observer=z.observe(t.observedData,function(e){t.observeChangesActive&&(n.call(t,e),t.render()),t.runHooks("afterChangesObserved")})}function n(t){function e(t){var e;return e=i(t),e=n(e)}function n(t){var e=[];return t.filter(function(t){var n=o(t.path);if(-1!=["add","remove"].indexOf(t.op)&&!isNaN(n.col)){if(-1!=e.indexOf(n.col))return!1;e.push(n.col)}return!0})}function i(t){return t.filter(function(t){return!/[\/]length/gi.test(t.path)})}function o(t){var e=t.match(/^\/(\d+)\/?(.*)?$/);return{row:parseInt(e[1],10),col:/^\d*$/.test(e[2])?parseInt(e[2],10):e[2]}}for(var r=this,s=e(t),a=0,l=s.length;l>a;a++){var c=s[a],u=o(c.path);switch(c.op){case"add":isNaN(u.col)?r.runHooks("afterCreateRow",u.row):r.runHooks("afterCreateCol",u.col);break;case"remove":isNaN(u.col)?r.runHooks("afterRemoveRow",u.row,1):r.runHooks("afterRemoveCol",u.col,1);break;case"replace":r.runHooks("afterChange",[u.row,u.col,null,c.value],"external")}}}function i(){var t=this;t.observer&&(r.call(t),a.call(t))}function r(){var t=this;z.unobserve(t.observedData,t.observer),delete t.observeChangesActive,delete t.pauseObservingChanges,delete t.resumeObservingChanges}function s(){var t=this;t.addHook("afterDestroy",i),t.addHook("afterCreateRow",l),t.addHook("afterRemoveRow",l),t.addHook("afterCreateCol",l),t.addHook("afterRemoveCol",l),t.addHook("afterChange",function(t,e){"loadData"!=e&&l.call(this)})}function a(){var t=this;t.removeHook("afterDestroy",i),t.removeHook("afterCreateRow",l),t.removeHook("afterRemoveRow",l),t.removeHook("afterCreateCol",l),t.removeHook("afterRemoveCol",l),t.removeHook("afterChange",l)}function l(){var t=this;t.pauseObservingChanges(),t.addHookOnce("afterChangesObserved",function(){t.resumeObservingChanges()})}o.PluginHooks.add("afterLoadData",t),o.PluginHooks.add("afterUpdateSettings",t)}(),function(t){function e(){function e(){var t=this;for(var e in r)r.hasOwnProperty(e)&&!i.call(t,e)&&t.PluginHooks.add(e,r[e])}function n(){var t=this;for(var e in r)r.hasOwnProperty(e)&&i.call(t,e)&&t.PluginHooks.remove(e,r[e])}function i(t){var e=this;return e.PluginHooks.hooks.hasOwnProperty(t)}var o=this;this.init=function(){var i=this,r=i.getSettings().persistentState;return o.enabled=!!r,o.enabled?(i.storage||(i.storage=new t(i.rootElement[0].id)),i.resetState=o.resetValue,void e.call(i)):void n.call(i)},this.saveValue=function(t,e){var n=this;n.storage.saveValue(t,e)},this.loadValue=function(t,e){var n=this;e.value=n.storage.loadValue(t)},this.resetValue=function(t){var e=this;"undefined"!=typeof t?e.storage.reset(t):e.storage.resetAll()};var r={persistentStateSave:o.saveValue,persistentStateLoad:o.loadValue,persistentStateReset:o.resetValue}}var n=new e;o.PluginHooks.add("beforeInit",n.init),o.PluginHooks.add("afterUpdateSettings",n.init)}(c),function(e){e.UndoRedo=function(t){var n=this;this.instance=t,this.doneActions=[],this.undoneActions=[],this.ignoreNewActions=!1,t.addHook("afterChange",function(t,i){if(t){var o=new e.UndoRedo.ChangeAction(t);n.done(o)}}),t.addHook("afterCreateRow",function(t,i,o){if(!o){var r=new e.UndoRedo.CreateRowAction(t,i);n.done(r)}}),t.addHook("beforeRemoveRow",function(t,i){var o=n.instance.getData();t=(o.length+t)%o.length;var r=o.slice(t,t+i),s=new e.UndoRedo.RemoveRowAction(t,r);n.done(s)}),t.addHook("afterCreateCol",function(t,i,o){if(!o){var r=new e.UndoRedo.CreateColumnAction(t,i);n.done(r)}}),t.addHook("beforeRemoveCol",function(i,o){var r=n.instance.getData();i=(n.instance.countCols()+i)%n.instance.countCols();for(var s=[],a=0,l=r.length;l>a;a++)s[a]=r[a].slice(i,i+o);var c;e.helper.isArray(t.getSettings().colHeaders)&&(c=t.getSettings().colHeaders.slice(i,i+s.length));var u=new e.UndoRedo.RemoveColumnAction(i,s,c);n.done(u)})},e.UndoRedo.prototype.done=function(t){this.ignoreNewActions||(this.doneActions.push(t),this.undoneActions.length=0)},e.UndoRedo.prototype.undo=function(){if(this.isUndoAvailable()){var t=this.doneActions.pop();this.ignoreNewActions=!0,t.undo(this.instance),this.ignoreNewActions=!1,this.undoneActions.push(t)}},e.UndoRedo.prototype.redo=function(){if(this.isRedoAvailable()){var t=this.undoneActions.pop();this.ignoreNewActions=!0,t.redo(this.instance),this.ignoreNewActions=!0,this.doneActions.push(t)}},e.UndoRedo.prototype.isUndoAvailable=function(){return this.doneActions.length>0},e.UndoRedo.prototype.isRedoAvailable=function(){return this.undoneActions.length>0},e.UndoRedo.prototype.clear=function(){this.doneActions.length=0,this.undoneActions.length=0},e.UndoRedo.Action=function(){},e.UndoRedo.Action.prototype.undo=function(){},e.UndoRedo.Action.prototype.redo=function(){},e.UndoRedo.ChangeAction=function(t){this.changes=t},e.helper.inherit(e.UndoRedo.ChangeAction,e.UndoRedo.Action),e.UndoRedo.ChangeAction.prototype.undo=function(e){for(var n=t.extend(!0,[],this.changes),i=0,o=n.length;o>i;i++)n[i].splice(3,1);e.setDataAtRowProp(n,null,null,"undo")},e.UndoRedo.ChangeAction.prototype.redo=function(e){for(var n=t.extend(!0,[],this.changes),i=0,o=n.length;o>i;i++)n[i].splice(2,1);e.setDataAtRowProp(n,null,null,"redo")},e.UndoRedo.CreateRowAction=function(t,e){this.index=t,this.amount=e},e.helper.inherit(e.UndoRedo.CreateRowAction,e.UndoRedo.Action),e.UndoRedo.CreateRowAction.prototype.undo=function(t){t.alter("remove_row",this.index,this.amount)},e.UndoRedo.CreateRowAction.prototype.redo=function(t){t.alter("insert_row",this.index+1,this.amount)},e.UndoRedo.RemoveRowAction=function(t,e){this.index=t,this.data=e},e.helper.inherit(e.UndoRedo.RemoveRowAction,e.UndoRedo.Action),e.UndoRedo.RemoveRowAction.prototype.undo=function(t){var e=[this.index,0];Array.prototype.push.apply(e,this.data),Array.prototype.splice.apply(t.getData(),e),t.render()},e.UndoRedo.RemoveRowAction.prototype.redo=function(t){t.alter("remove_row",this.index,this.data.length)},e.UndoRedo.CreateColumnAction=function(t,e){this.index=t,this.amount=e},e.helper.inherit(e.UndoRedo.CreateColumnAction,e.UndoRedo.Action),e.UndoRedo.CreateColumnAction.prototype.undo=function(t){t.alter("remove_col",this.index,this.amount)},e.UndoRedo.CreateColumnAction.prototype.redo=function(t){t.alter("insert_col",this.index+1,this.amount)},e.UndoRedo.RemoveColumnAction=function(t,e,n){this.index=t,this.data=e,this.amount=this.data[0].length,this.headers=n},e.helper.inherit(e.UndoRedo.RemoveColumnAction,e.UndoRedo.Action),e.UndoRedo.RemoveColumnAction.prototype.undo=function(t){for(var e,n,i=0,o=t.getData().length;o>i;i++)e=t.getDataAtRow(i),n=[this.index,0],Array.prototype.push.apply(n,this.data[i]),Array.prototype.splice.apply(e,n);"undefined"!=typeof this.headers&&(n=[this.index,0],Array.prototype.push.apply(n,this.headers),Array.prototype.splice.apply(t.getSettings().colHeaders,n)),t.render()},e.UndoRedo.RemoveColumnAction.prototype.redo=function(t){t.alter("remove_col",this.index,this.amount)}}(o),function(t){function e(){var e=this,s="undefined"==typeof e.getSettings().undo||e.getSettings().undo;s?e.undoRedo||(e.undoRedo=new t.UndoRedo(e),o(e),e.addHook("beforeKeyDown",n),e.addHook("afterChange",i)):e.undoRedo&&(delete e.undoRedo,r(e),e.removeHook("beforeKeyDown",n),e.removeHook("afterChange",i))}function n(t){var e=this,n=(t.ctrlKey||t.metaKey)&&!t.altKey;n&&(89===t.keyCode||t.shiftKey&&90===t.keyCode?(e.undoRedo.redo(),t.stopImmediatePropagation()):90===t.keyCode&&(e.undoRedo.undo(),t.stopImmediatePropagation()))}function i(t,e){var n=this;return"loadData"==e?n.undoRedo.clear():void 0}function o(t){t.undo=function(){return t.undoRedo.undo()},t.redo=function(){return t.undoRedo.redo()},t.isUndoAvailable=function(){return t.undoRedo.isUndoAvailable()},t.isRedoAvailable=function(){return t.undoRedo.isRedoAvailable()},t.clearUndo=function(){return t.undoRedo.clear()}}function r(t){delete t.undo,delete t.redo,delete t.isUndoAvailable,delete t.isRedoAvailable,delete t.clearUndo}t.PluginHooks.add("afterInit",e),t.PluginHooks.add("afterUpdateSettings",e)}(o),u.prototype.setBoundaries=function(t){this.boundaries=t},u.prototype.setCallback=function(t){this.callback=t},u.prototype.check=function(t,e){var n=0,i=0;e<this.boundaries.top?i=e-this.boundaries.top:e>this.boundaries.bottom&&(i=e-this.boundaries.bottom),t<this.boundaries.left?n=t-this.boundaries.left:t>this.boundaries.right&&(n=t-this.boundaries.right),this.callback(n,i)};var j,U=!1;if("undefined"!=typeof o){var X=function(t){var e=t.view.wt.wtScrollbars.vertical.scrollHandler;j=new u,e!==i&&(e?j.setBoundaries(e.getBoundingClientRect()):j.setBoundaries(t.$table[0].getBoundingClientRect()),j.setCallback(function(n,i){0>n?e?e.scrollLeft-=50:t.view.wt.scrollHorizontal(-1).draw():n>0&&(e?e.scrollLeft+=50:t.view.wt.scrollHorizontal(1).draw()),0>i?e?e.scrollTop-=20:t.view.wt.scrollVertical(-1).draw():i>0&&(e?e.scrollTop+=20:t.view.wt.scrollVertical(1).draw())}),U=!0)};o.PluginHooks.add("afterInit",function(){t(document).on("mouseup."+this.guid,function(){U=!1}),t(document).on("mousemove."+this.guid,function(t){U&&j.check(t.clientX,t.clientY)})}),o.PluginHooks.add("destroy",function(){t(document).off("."+this.guid)}),o.PluginHooks.add("afterOnCellMouseDown",function(){X(this)}),o.PluginHooks.add("afterOnCellCornerMouseDown",function(){X(this)})}if(function(t,e,n){function i(i){function o(){i.isListening()&&i.selection.empty()}function r(t){if(i.isListening()&&i.selection.isSelected()){var e=t.replace(/^[\r\n]*/g,"").replace(/[\r\n]*$/g,""),o=n.parse(e),r=i.getSelected(),s=i.getCornerCoords([{row:r[0],col:r[1]},{row:r[2],col:r[3]}]),a=s.TL,l={row:Math.max(s.BR.row,o.length-1+s.TL.row),col:Math.max(s.BR.col,o[0].length-1+s.TL.col)};i.PluginHooks.once("afterChange",function(t,e){t&&t.length&&this.selectCell(a.row,a.col,l.row,l.col)}),i.populateFromArray(a.row,a.col,o,l.row,l.col,"paste",i.getSettings().pasteMode)}}function s(e){if(t.helper.isCtrlKey(e.keyCode)&&i.getSelected())return a.setCopyableText(),void e.stopImmediatePropagation();var n=(e.ctrlKey||e.metaKey)&&!e.altKey;e.keyCode==t.helper.keyCode.A&&n&&setTimeout(t.helper.proxy(a.setCopyableText,a))}this.copyPasteInstance=e.getInstance(),this.copyPasteInstance.onCut(o),this.copyPasteInstance.onPaste(r);var a=this;i.addHook("beforeKeyDown",s),this.destroy=function(){this.copyPasteInstance.removeCallback(o),this.copyPasteInstance.removeCallback(r),this.copyPasteInstance.destroy(),i.removeHook("beforeKeyDown",s)},i.addHook("afterDestroy",t.helper.proxy(this.destroy,this)),this.triggerPaste=t.helper.proxy(this.copyPasteInstance.triggerPaste,this.copyPasteInstance),this.triggerCut=t.helper.proxy(this.copyPasteInstance.triggerCut,this.copyPasteInstance),this.setCopyableText=function(){var t=i.getSelected(),e=i.getSettings(),n=e.copyRowsLimit,o=e.copyColsLimit,r=Math.min(t[0],t[2]),s=Math.min(t[1],t[3]),a=Math.max(t[0],t[2]),l=Math.max(t[1],t[3]),c=Math.min(a,r+n-1),u=Math.min(l,s+o-1);i.copyPaste.copyPasteInstance.copyable(i.getCopyableData(r,s,c,u)),a===c&&l===u||i.PluginHooks.run("afterCopyLimit",a-r+1,l-s+1,n,o)}}function o(){var t=this,e=t.getSettings().copyPaste!==!1;e&&!t.copyPaste?t.copyPaste=new i(t):!e&&t.copyPaste&&(t.copyPaste.destroy(),delete t.copyPaste)}t.PluginHooks.add("afterInit",o),t.PluginHooks.add("afterUpdateSettings",o)}(o,F,SheetClip),h.prototype.init=function(){this.TABLE=this.instance.wtTable.TABLE,this.fixed=this.instance.wtTable.hider,this.fixedContainer=this.instance.wtTable.holder,this.fixed.style.position="absolute",this.fixed.style.left="0",this.scrollHandler=this.getScrollableElement(this.TABLE),this.$scrollHandler=t(this.scrollHandler)},h.prototype.makeClone=function(t){var e=document.createElement("DIV");e.className="ht_clone_"+t+" handsontable",e.style.position="fixed",e.style.overflow="hidden";var n=document.createElement("TABLE");return n.className=this.instance.wtTable.TABLE.className,e.appendChild(n),this.instance.wtTable.holder.parentNode.appendChild(e),new y({cloneSource:this.instance,cloneOverlay:this,table:n})},h.prototype.getScrollableElement=function(t){for(var e=t.parentNode;e&&e.style;){if("visible"!==e.style.overflow&&""!==e.style.overflow)return e;if(this instanceof R&&"visible"!==e.style.overflowX&&""!==e.style.overflowX)return e;e=e.parentNode}return i},h.prototype.prepare=function(){},h.prototype.onScroll=function(t){this.windowScrollPosition=this.getScrollPosition(),this.readSettings(),t&&(this.windowScrollPosition=t),this.resetFixedPosition()},h.prototype.availableSize=function(){var t;return t=this.windowScrollPosition>this.tableParentOffset?this.instance.wtTable.getLastVisibleRow()===this.total-1?this.instance.wtDom.outerHeight(this.TABLE):this.windowSize:this.windowSize-this.tableParentOffset},h.prototype.refresh=function(t){var e=this.getLastCell();this.measureBefore=this.sumCellSizes(0,this.offset),-1===e?this.measureAfter=0:this.measureAfter=this.sumCellSizes(e,this.total-e),this.applyToDOM(),this.clone&&this.clone.draw(t)},h.prototype.destroy=function(){this.$scrollHandler.off("."+this.instance.guid),t(i).off("."+this.instance.guid),t(document).off("."+this.instance.guid)},d.prototype.appear=function(t){var e,n,i,o,r,s,a,l,c,u,h,d;if(!this.disabled){var f,p,g,m,v,y,w,b=this.instance,C=!1,x=!1,S=!1,T=!1;for(b.wtTable.isRowInViewport(t[0])||(C=!0),b.wtTable.isRowInViewport(t[2])||(S=!0),y=b.wtTable.rowStrategy.countVisible(),v=0;y>v;v++)if(w=b.wtTable.rowFilter.visibleToSource(v),w>=t[0]&&w<=t[2]){f=w;break}for(v=y-1;v>=0;v--)if(w=b.wtTable.rowFilter.visibleToSource(v),w>=t[0]&&w<=t[2]){g=w;break}if(C&&S)x=!0,T=!0;else{for(b.wtTable.isColumnInViewport(t[1])||(x=!0),b.wtTable.isColumnInViewport(t[3])||(T=!0),y=b.wtTable.columnStrategy.countVisible(),v=0;y>v;v++)if(w=b.wtTable.columnFilter.visibleToSource(v),w>=t[1]&&w<=t[3]){p=w;break}for(v=y-1;v>=0;v--)if(w=b.wtTable.columnFilter.visibleToSource(v),w>=t[1]&&w<=t[3]){m=w;break}}if(void 0===f||void 0===p)return void this.disappear();e=f!==g||p!==m,n=b.wtTable.getCell([f,p]),i=e?b.wtTable.getCell([g,m]):n,o=this.wtDom.offset(n),r=e?this.wtDom.offset(i):o,s=this.wtDom.offset(b.wtTable.TABLE),l=o.top,h=r.top+this.wtDom.outerHeight(i)-l,u=o.left,d=r.left+this.wtDom.outerWidth(i)-u,a=l-s.top-1,c=u-s.left-1;var _=this.wtDom.getComputedStyle(n);parseInt(_.borderTopWidth,10)>0&&(a+=1,h=h>0?h-1:0),parseInt(_.borderLeftWidth,10)>0&&(c+=1,d=d>0?d-1:0),C?this.topStyle.display="none":(this.topStyle.top=a+"px",this.topStyle.left=c+"px",this.topStyle.width=d+"px",this.topStyle.display="block"),x?this.leftStyle.display="none":(this.leftStyle.top=a+"px",this.leftStyle.left=c+"px",this.leftStyle.height=h+"px",this.leftStyle.display="block");var E=Math.floor(this.settings.border.width/2);S?this.bottomStyle.display="none":(this.bottomStyle.top=a+h-E+"px",this.bottomStyle.left=c+"px",this.bottomStyle.width=d+"px",this.bottomStyle.display="block"),T?this.rightStyle.display="none":(this.rightStyle.top=a+"px",this.rightStyle.left=c+d-E+"px",this.rightStyle.height=h+1+"px",this.rightStyle.display="block"),S||T||!this.hasSetting(this.settings.border.cornerVisible)?this.cornerStyle.display="none":(this.cornerStyle.top=a+h-4+"px",
this.cornerStyle.left=c+d-4+"px",this.cornerStyle.display="block")}},d.prototype.disappear=function(){this.topStyle.display="none",this.leftStyle.display="none",this.bottomStyle.display="none",this.rightStyle.display="none",this.cornerStyle.display="none"},d.prototype.hasSetting=function(t){return"function"==typeof t?t():!!t},f.prototype.source=function(t){return t},f.prototype.offsetted=function(t){return t+this.offset},f.prototype.unOffsetted=function(t){return t-this.offset},f.prototype.fixed=function(t){return t<this.fixedCount?t-this.offset:t},f.prototype.unFixed=function(t){return t<this.fixedCount?t+this.offset:t},f.prototype.visibleToSource=function(t){return this.source(this.offsetted(this.fixed(t)))},f.prototype.sourceToVisible=function(t){return this.source(this.unOffsetted(this.unFixed(t)))},p.prototype.getSize=function(t){return this.cellSizes[t]},p.prototype.getContainerSize=function(t){return"function"==typeof this.containerSizeFn?this.containerSizeFn(t):this.containerSizeFn},p.prototype.countVisible=function(){return this.cellCount},p.prototype.isLastIncomplete=function(){if(this.instance.getSetting("nativeScrollbars")){var t=this.instance.cloneFrom?this.instance.cloneFrom.wtScrollbars.vertical:this.instance.wtScrollbars.vertical;return this.remainingSize>t.sumCellSizes(t.offset,t.offset+t.curOuts+1)}return this.remainingSize>0},g.prototype.add=function(t,e,n){this.cache[t]||(this.cache[t]=[]),this.cache[t][e]||(this.cache[t][e]=[]),this.cache[t][e][n]=!0},g.prototype.test=function(t,e,n){return this.cache[t]&&this.cache[t][e]&&this.cache[t][e][n]},m.prototype=new f,m.prototype.readSettings=function(t){this.offset=t.wtSettings.settings.offsetColumn,this.total=t.getSetting("totalColumns"),this.fixedCount=t.getSetting("fixedColumnsLeft"),this.countTH=t.getSetting("rowHeaders").length},m.prototype.offsettedTH=function(t){return t-this.countTH},m.prototype.unOffsettedTH=function(t){return t+this.countTH},m.prototype.visibleRowHeadedColumnToSourceColumn=function(t){return this.visibleToSource(this.offsettedTH(t))},m.prototype.sourceColumnToVisibleRowHeadedColumn=function(t){return this.unOffsettedTH(this.sourceToVisible(t))},v.prototype=new p,v.prototype.getSize=function(t){return this.cellSizes[t]+(this.cellStretch[t]||0)},v.prototype.stretch=function(){var t=this.getContainerSize(this.cellSizesSum),e=0;if(this.remainingSize=this.cellSizesSum-t,this.cellStretch.length=0,"all"===this.strategy){if(this.remainingSize<0){for(var n,i=t/this.cellSizesSum;e<this.cellCount-1;)n=Math.floor(i*this.cellSizes[e]),this.remainingSize+=n-this.cellSizes[e],this.cellStretch[e]=n-this.cellSizes[e],e++;this.cellStretch[this.cellCount-1]=-this.remainingSize,this.remainingSize=0}}else"last"===this.strategy&&this.remainingSize<0&&t!==1/0&&(this.cellStretch[this.cellCount-1]=-this.remainingSize,this.remainingSize=0)},y.prototype.draw=function(t){return this.drawInterrupted=!1,t||this.wtDom.isVisible(this.wtTable.TABLE)?(this.getSetting("beforeDraw",!t),t=t&&this.getSetting("offsetRow")===this.lastOffsetRow&&this.getSetting("offsetColumn")===this.lastOffsetColumn,this.drawn&&(this.scrollVertical(0),this.scrollHorizontal(0)),this.lastOffsetRow=this.getSetting("offsetRow"),this.lastOffsetColumn=this.getSetting("offsetColumn"),this.wtTable.draw(t),this.cloneSource||this.getSetting("onDraw",!t),this):void(this.drawInterrupted=!0)},y.prototype.update=function(t,e){return this.wtSettings.update(t,e)},y.prototype.scrollVertical=function(t){var e=this.wtScroll.scrollVertical(t);return this.getSetting("onScrollVertically"),e},y.prototype.scrollHorizontal=function(t){var e=this.wtScroll.scrollHorizontal(t);return this.getSetting("onScrollHorizontally"),e},y.prototype.scrollViewport=function(t){return this.wtScroll.scrollViewport(t),this},y.prototype.getViewport=function(){return[this.wtTable.rowFilter.visibleToSource(0),this.wtTable.columnFilter.visibleToSource(0),this.wtTable.getLastVisibleRow(),this.wtTable.getLastVisibleColumn()]},y.prototype.getSetting=function(t,e,n,i){return this.wtSettings.getSetting(t,e,n,i)},y.prototype.hasSetting=function(t){return this.wtSettings.has(t)},y.prototype.destroy=function(){t(document.body).off("."+this.guid),this.wtScrollbars.destroy(),clearTimeout(this.wheelTimeout),this.wtEvent&&this.wtEvent.destroy()},w.prototype=new h,w.prototype.resetFixedPosition=function(){if(this.instance.wtTable.holder.parentNode){var t=this.clone.wtTable.holder.parentNode,e=this.instance.wtTable.holder.getBoundingClientRect();t.style.top=Math.ceil(e.top,10)+"px",t.style.left=Math.ceil(e.left,10)+"px"}},w.prototype.prepare=function(){},w.prototype.refresh=function(t){this.clone&&this.clone.draw(t)},w.prototype.getScrollPosition=function(){},w.prototype.getLastCell=function(){},w.prototype.applyToDOM=function(){},w.prototype.scrollTo=function(){},w.prototype.readWindowSize=function(){},w.prototype.readSettings=function(){},b.prototype.closest=function(t,e,n){for(;null!=t&&t!==n;){if(1===t.nodeType&&e.indexOf(t.nodeName)>-1)return t;t=t.parentNode}return null},b.prototype.isChildOf=function(t,e){for(var n=t.parentNode;null!=n;){if(n==e)return!0;n=n.parentNode}return!1},b.prototype.index=function(t){for(var e=0;t=t.previousSibling;)++e;return e},document.documentElement.classList?(b.prototype.hasClass=function(t,e){return t.classList.contains(e)},b.prototype.addClass=function(t,e){t.classList.add(e)},b.prototype.removeClass=function(t,e){t.classList.remove(e)}):(b.prototype.hasClass=function(t,e){return t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},b.prototype.addClass=function(t,e){this.hasClass(t,e)||(t.className+=" "+e)},b.prototype.removeClass=function(t,e){if(this.hasClass(t,e)){var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ").trim()}}),b.prototype.removeTextNodes=function(t,e){if(3===t.nodeType)e.removeChild(t);else if(["TABLE","THEAD","TBODY","TFOOT","TR"].indexOf(t.nodeName)>-1)for(var n=t.childNodes,i=n.length-1;i>=0;i--)this.removeTextNodes(n[i],t)},b.prototype.empty=function(t){for(var e;e=t.lastChild;)t.removeChild(e)},b.prototype.HTML_CHARACTERS=/(<(.*)>|&(.*);)/,b.prototype.fastInnerHTML=function(t,e){this.HTML_CHARACTERS.test(e)?t.innerHTML=e:this.fastInnerText(t,e)},document.createTextNode("test").textContent?b.prototype.fastInnerText=function(t,e){var n=t.firstChild;n&&3===n.nodeType&&null===n.nextSibling?n.textContent=e:(this.empty(t),t.appendChild(document.createTextNode(e)))}:b.prototype.fastInnerText=function(t,e){var n=t.firstChild;n&&3===n.nodeType&&null===n.nextSibling?n.data=e:(this.empty(t),t.appendChild(document.createTextNode(e)))},b.prototype.isVisible=function(t){for(var e=t;e!==document.documentElement;){if(null===e)return!1;if(11===e.nodeType){if(e.host){if(e.host.impl)return b.prototype.isVisible(e.host.impl);if(e.host)return b.prototype.isVisible(e.host);throw new Error("Lost in Web Components world")}return!1}if("none"===e.style.display)return!1;e=e.parentNode}return!0},b.prototype.offset=function(t){if(this.hasCaptionProblem()&&t.firstChild&&"CAPTION"===t.firstChild.nodeName){var e=t.getBoundingClientRect();return{top:e.top+(i.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0),left:e.left+(i.pageXOffset||document.documentElement.scrollLeft)-(document.documentElement.clientLeft||0)}}for(var n=t.offsetLeft,o=t.offsetTop,r=t;(t=t.offsetParent)&&t!==document.body;)n+=t.offsetLeft,o+=t.offsetTop,r=t;return r&&"fixed"===r.style.position&&(n+=i.pageXOffset||document.documentElement.scrollLeft,o+=i.pageYOffset||document.documentElement.scrollTop),{left:n,top:o}},b.prototype.getComputedStyle=function(t){return t.currentStyle||document.defaultView.getComputedStyle(t)},b.prototype.outerWidth=function(t){return t.offsetWidth},b.prototype.outerHeight=function(t){return this.hasCaptionProblem()&&t.firstChild&&"CAPTION"===t.firstChild.nodeName?t.offsetHeight+t.firstChild.offsetHeight:t.offsetHeight},function(){function t(){var t=document.createElement("TABLE");t.style.borderSpacing=0,t.style.borderWidth=0,t.style.padding=0;var e=document.createElement("TBODY");t.appendChild(e),e.appendChild(document.createElement("TR")),e.firstChild.appendChild(document.createElement("TD")),e.firstChild.firstChild.innerHTML="<tr><td>t<br>t</td></tr>";var i=document.createElement("CAPTION");i.innerHTML="c<br>c<br>c<br>c",i.style.padding=0,i.style.margin=0,t.insertBefore(i,e),document.body.appendChild(t),n=t.offsetHeight<2*t.lastChild.offsetHeight,document.body.removeChild(t)}function e(){var t=document.createElement("p");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.appendChild(t),(document.body||document.documentElement).appendChild(e);var n=t.offsetWidth;e.style.overflow="scroll";var i=t.offsetWidth;return n==i&&(i=e.clientWidth),(document.body||document.documentElement).removeChild(e),n-i}var n;b.prototype.hasCaptionProblem=function(){return void 0===n&&t(),n},b.prototype.getCaretPosition=function(t){if(t.selectionStart)return t.selectionStart;if(document.selection){t.focus();var e=document.selection.createRange();if(null==e)return 0;var n=t.createTextRange(),i=n.duplicate();return n.moveToBookmark(e.getBookmark()),i.setEndPoint("EndToStart",n),i.text.length}return 0},b.prototype.setCaretPosition=function(t,e,n){if(void 0===n&&(n=e),t.setSelectionRange)t.focus(),t.setSelectionRange(e,n);else if(t.createTextRange){var i=t.createTextRange();i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",e),i.select()}};var i;b.prototype.getScrollbarWidth=function(){return void 0===i&&(i=e()),i}}(),C.prototype.parentCell=function(t){var e={},n=this.instance.wtTable.TABLE,i=this.wtDom.closest(t,["TD","TH"],n);return i&&this.wtDom.isChildOf(i,n)?(e.coords=this.instance.wtTable.getCoords(i),e.TD=i):this.wtDom.hasClass(t,"wtBorder")&&this.wtDom.hasClass(t,"current")&&(e.coords=this.instance.selections.current.selected[0],e.TD=this.instance.wtTable.getCell(e.coords)),e},C.prototype.destroy=function(){clearTimeout(this.dblClickTimeout0),clearTimeout(this.dblClickTimeout1)},i.requestAnimFrame=function(){return i.requestAnimationFrame||i.webkitRequestAnimationFrame||i.mozRequestAnimationFrame||i.oRequestAnimationFrame||i.msRequestAnimationFrame||function(t,e){return i.setTimeout(t,1e3/60)}}(),i.cancelRequestAnimFrame=function(){return i.cancelAnimationFrame||i.webkitCancelRequestAnimationFrame||i.mozCancelRequestAnimationFrame||i.oCancelRequestAnimationFrame||i.msCancelRequestAnimationFrame||clearTimeout}(),i.getComputedStyle||!function(){var t,e={getPropertyValue:function(e){return"float"==e&&(e="styleFloat"),t.currentStyle[e.toUpperCase()]||null}};i.getComputedStyle=function(n){return t=n,e}}(),!String.prototype.trim){var Y=/^\s+|\s+$/g;String.prototype.trim=function(){return this.replace(Y,"")}}S.prototype=new f,S.prototype.readSettings=function(t){t.cloneOverlay instanceof w?this.offset=0:this.offset=t.wtSettings.settings.offsetRow,this.total=t.getSetting("totalRows"),this.fixedCount=t.getSetting("fixedRowsTop")},T.prototype=new p,T.prototype.add=function(t,e,n){if(!this.isLastIncomplete()&&0!=this.remainingSize){var i=this.sizeAtIndex(t,e);if(void 0===i)return!1;var o=this.getContainerSize(this.cellSizesSum+i);return n?this.cellSizes.unshift(i):this.cellSizes.push(i),this.cellSizesSum+=i,this.cellCount++,this.remainingSize=this.cellSizesSum-o,!n||!this.isLastIncomplete()}return!1},T.prototype.remove=function(){var t=this.cellSizes.pop();this.cellSizesSum-=t,this.cellCount--,this.remainingSize-=t},T.prototype.removeOutstanding=function(){for(;this.cellCount>0&&this.cellSizes[this.cellCount-1]<this.remainingSize;)this.remove()},_.prototype.scrollVertical=function(t){if(!this.instance.drawn)throw new Error("scrollVertical can only be called after table was drawn to DOM");var e,n=this.instance,i=n.getSetting("offsetRow"),o=n.getSetting("fixedRowsTop"),r=n.getSetting("totalRows"),s=n.wtViewport.getViewportHeight();return e=r>0?this.scrollLogicVertical(t,i,r,o,s,function(t){return o>t-i&&t-i>=0?n.getSetting("rowHeight",t-i):n.getSetting("rowHeight",t)},function(t){n.wtTable.verticalRenderReverse=t}):0,e!==i&&this.instance.wtScrollbars.vertical.scrollTo(e),n},_.prototype.scrollHorizontal=function(t){if(!this.instance.drawn)throw new Error("scrollHorizontal can only be called after table was drawn to DOM");var e,n=this.instance,i=n.getSetting("offsetColumn"),o=n.getSetting("fixedColumnsLeft"),r=n.getSetting("totalColumns"),s=n.wtViewport.getViewportWidth();return e=r>0?this.scrollLogicHorizontal(t,i,r,o,s,function(t){return o>t-i&&t-i>=0?n.getSetting("columnWidth",t-i):n.getSetting("columnWidth",t)}):0,e!==i&&this.instance.wtScrollbars.horizontal.scrollTo(e),n},_.prototype.scrollLogicVertical=function(t,e,n,i,o,r,s){var a=e+t;return a>=n-i&&(a=n-i-1,s(!0)),0>a&&(a=0),a},_.prototype.scrollLogicHorizontal=function(t,e,n,i,o,r){var s,a=e+t,l=0;if(a>i){for(a>=n-i&&(a=n-i-1),s=a;o>l&&n>s;)l+=r(s),s++;if(o>l)for(;a>0&&(l+=r(a-1),o>l);)a--}else 0>a&&(a=0);return a},_.prototype.scrollViewport=function(t){if(this.instance.drawn){var e=this.instance.getSetting("offsetRow"),n=(this.instance.getSetting("offsetColumn"),this.instance.wtTable.getLastVisibleRow()),o=this.instance.getSetting("totalRows"),r=this.instance.getSetting("totalColumns"),s=this.instance.getSetting("fixedRowsTop"),a=this.instance.getSetting("fixedColumnsLeft");if(this.instance.getSetting("nativeScrollbars")){var l=this.instance.wtTable.getCell(t);if("object"==typeof l){var c=b.prototype.offset(l),u=b.prototype.outerWidth(l),h=b.prototype.outerHeight(l),d=this.instance.wtScrollbars.horizontal.getScrollPosition(),f=this.instance.wtScrollbars.vertical.getScrollPosition(),p=b.prototype.outerWidth(this.instance.wtScrollbars.horizontal.scrollHandler),g=b.prototype.outerHeight(this.instance.wtScrollbars.vertical.scrollHandler);return this.instance.wtScrollbars.horizontal.scrollHandler!==i&&(c.left=c.left-b.prototype.offset(this.instance.wtScrollbars.horizontal.scrollHandler).left),this.instance.wtScrollbars.vertical.scrollHandler!==i&&(c.top=c.top-b.prototype.offset(this.instance.wtScrollbars.vertical.scrollHandler).top),p-=20,g-=20,p>u&&(c.left<d?this.instance.wtScrollbars.horizontal.setScrollPosition(c.left):c.left+u>d+p&&this.instance.wtScrollbars.horizontal.setScrollPosition(c.left-p+u)),void(g>h&&(c.top<f?this.instance.wtScrollbars.vertical.setScrollPosition(c.top):c.top+h>f+g&&this.instance.wtScrollbars.vertical.setScrollPosition(c.top-g+h)))}}if(t[0]<0||t[0]>o-1)throw new Error("row "+t[0]+" does not exist");if(t[1]<0||t[1]>r-1)throw new Error("column "+t[1]+" does not exist");if(t[0]>n?(this.scrollVertical(t[0]-s-e),this.instance.wtTable.verticalRenderReverse=!0):t[0]===n&&this.instance.wtTable.rowStrategy.isLastIncomplete()?(this.scrollVertical(t[0]-s-e),this.instance.wtTable.verticalRenderReverse=!0):t[0]-s<e?this.scrollVertical(t[0]-s-e):this.scrollVertical(0),this.instance.wtTable.isColumnBeforeViewport(t[1]))this.instance.wtScrollbars.horizontal.scrollTo(t[1]-a);else if(this.instance.wtTable.isColumnAfterViewport(t[1])||this.instance.wtTable.getLastVisibleColumn()===t[1]&&!this.instance.wtTable.isLastColumnFullyVisible()){for(var m=0,v=0;a>v;v++)m+=this.instance.getSetting("columnWidth",v);var y=t[1];m+=this.instance.getSetting("columnWidth",y);var w=this.instance.wtViewport.getViewportWidth();if(w>m)for(var C=this.instance.getSetting("columnWidth",y-1);w>=m+C&&y>=a;)y--,m+=C,C=this.instance.getSetting("columnWidth",y-1);this.instance.wtScrollbars.horizontal.scrollTo(y-a)}return this.instance}},E.prototype.init=function(){var e=this;this.$table=t(this.instance.wtTable.TABLE),this.slider=document.createElement("DIV"),this.sliderStyle=this.slider.style,this.sliderStyle.position="absolute",this.sliderStyle.top="0",this.sliderStyle.left="0",this.sliderStyle.display="none",this.slider.className="dragdealer "+this.type,this.handle=document.createElement("DIV"),this.handleStyle=this.handle.style,this.handle.className="handle",this.slider.appendChild(this.handle),this.container=this.instance.wtTable.holder,this.container.appendChild(this.slider);var n=!0;this.dragTimeout=null;var i,o=function(){e.onScroll(i)};this.dragdealer=new Z(this.slider,{vertical:"vertical"===this.type,horizontal:"horizontal"===this.type,slide:!1,speed:100,animationCallback:function(t,r){return n?void(n=!1):(e.skipRefresh=!0,i="vertical"===e.type?r:t,void(null===e.dragTimeout&&(e.dragTimeout=setInterval(o,100),o())))},callback:function(t,n){e.skipRefresh=!1,clearInterval(e.dragTimeout),e.dragTimeout=null,i="vertical"===e.type?n:t,e.onScroll(i)}}),this.skipRefresh=!1},E.prototype.onScroll=function(t){if(this.instance.drawn&&(this.readSettings(),this.total>this.visibleCount)){var e=Math.round(this.handlePosition*this.total/this.sliderSize);1===t?"vertical"===this.type?this.instance.scrollVertical(1/0).draw():this.instance.scrollHorizontal(1/0).draw():e!==this.offset?"vertical"===this.type?this.instance.scrollVertical(e-this.offset).draw():this.instance.scrollHorizontal(e-this.offset).draw():this.refresh()}},E.prototype.getHandleSizeRatio=function(t,e){return!e||t>e||t==e?1:t/e},E.prototype.prepare=function(){if(!this.skipRefresh){var t=this.getHandleSizeRatio(this.visibleCount,this.total);(1===t||isNaN(t))&&"auto"===this.scrollMode||"none"===this.scrollMode?this.visible=!1:this.visible=!0}},E.prototype.refresh=function(){if(!this.skipRefresh){if(!this.visible)return void(this.sliderStyle.display="none");var t,e,n,i,o=this.visibleCount,r=this.instance.wtViewport.getWorkspaceWidth(),s=this.instance.wtViewport.getWorkspaceHeight();r===1/0&&(r=this.instance.wtViewport.getWorkspaceActualWidth()),s===1/0&&(s=this.instance.wtViewport.getWorkspaceActualHeight()),"vertical"===this.type?(this.instance.wtTable.rowStrategy.isLastIncomplete()&&o--,e=s-2,this.sliderStyle.top=this.instance.wtDom.offset(this.$table[0]).top-this.instance.wtDom.offset(this.container).top+"px",this.sliderStyle.left=r-1+"px",this.sliderStyle.height=Math.max(e,0)+"px"):(e=r-2,this.sliderStyle.left=this.instance.wtDom.offset(this.$table[0]).left-this.instance.wtDom.offset(this.container).left+"px",this.sliderStyle.top=s-1+"px",this.sliderStyle.width=Math.max(e,0)+"px"),t=this.getHandleSizeRatio(o,this.total),n=Math.round(e*t),10>n&&(n=15),i=Math.floor(e*(this.offset/this.total)),n+i>e&&(i=e-n),"vertical"===this.type?(this.handleStyle.height=n+"px",this.handleStyle.top=i+"px"):(this.handleStyle.width=n+"px",this.handleStyle.left=i+"px"),this.sliderStyle.display="block"}},E.prototype.destroy=function(){clearInterval(this.dragdealer.interval)};var q=function(t){this.instance=t,this.type="vertical",this.init()};q.prototype=new E,q.prototype.scrollTo=function(t){this.instance.update("offsetRow",t)},q.prototype.readSettings=function(){this.scrollMode=this.instance.getSetting("scrollV"),this.offset=this.instance.getSetting("offsetRow"),this.total=this.instance.getSetting("totalRows"),this.visibleCount=this.instance.wtTable.rowStrategy.countVisible(),this.visibleCount>1&&this.instance.wtTable.rowStrategy.isLastIncomplete()&&this.visibleCount--,this.handlePosition=parseInt(this.handleStyle.top,10),this.sliderSize=parseInt(this.sliderStyle.height,10),this.fixedCount=this.instance.getSetting("fixedRowsTop")};var G=function(t){this.instance=t,this.type="horizontal",this.init()};G.prototype=new E,G.prototype.scrollTo=function(t){this.instance.update("offsetColumn",t)},G.prototype.readSettings=function(){this.scrollMode=this.instance.getSetting("scrollH"),this.offset=this.instance.getSetting("offsetColumn"),this.total=this.instance.getSetting("totalColumns"),this.visibleCount=this.instance.wtTable.columnStrategy.countVisible(),this.visibleCount>1&&this.instance.wtTable.columnStrategy.isLastIncomplete()&&this.visibleCount--,this.handlePosition=parseInt(this.handleStyle.left,10),this.sliderSize=parseInt(this.sliderStyle.width,10),this.fixedCount=this.instance.getSetting("fixedColumnsLeft")},G.prototype.getHandleSizeRatio=function(t,e){return!e||t>e||t==e?1:t/e},k.prototype=new h,k.prototype.resetFixedPosition=function(){if(this.instance.wtTable.holder.parentNode){var t,e=this.clone.wtTable.holder.parentNode;if(this.scrollHandler===i){t=this.instance.wtTable.hider.getBoundingClientRect();var n=Math.ceil(t.top,10),o=Math.ceil(t.bottom,10);0>n&&o>0?e.style.top="0":e.style.top=n+"px";var r=Math.ceil(t.left,10),s=Math.ceil(t.right,10);0>r&&s>0?e.style.left="0":e.style.left=r+"px"}else t=this.scrollHandler.getBoundingClientRect(),e.style.top=Math.ceil(t.top,10)+"px",e.style.left=Math.ceil(t.left,10)+"px";e.style.width=b.prototype.outerWidth(this.clone.wtTable.TABLE)+4+"px",e.style.height=b.prototype.outerHeight(this.clone.wtTable.TABLE)+4+"px"}},k.prototype.prepare=function(){},k.prototype.refresh=function(t){this.measureBefore=0,this.measureAfter=0,this.clone&&this.clone.draw(t)},k.prototype.getScrollPosition=function(){},k.prototype.getLastCell=function(){},k.prototype.applyToDOM=function(){},k.prototype.scrollTo=function(){},k.prototype.readWindowSize=function(){},k.prototype.readSettings=function(){},R.prototype=new h,R.prototype.resetFixedPosition=function(){if(this.instance.wtTable.holder.parentNode){var t,e=this.clone.wtTable.holder.parentNode;if(this.scrollHandler===i){t=this.instance.wtTable.hider.getBoundingClientRect();var n=Math.ceil(t.left,10),o=Math.ceil(t.right,10);0>n&&o>0?e.style.left="0":e.style.left=n+"px"}else t=this.scrollHandler.getBoundingClientRect(),e.style.top=Math.ceil(t.top,10)+"px",e.style.left=Math.ceil(t.left,10)+"px"}},R.prototype.react=function(){if(this.instance.wtTable.holder.parentNode){var t=this.clone.wtTable.holder.parentNode;if(this.instance.wtScrollbars.vertical.scrollHandler===i){var e=this.instance.wtTable.hider.getBoundingClientRect();t.style.top=Math.ceil(e.top,10)+"px",t.style.height=b.prototype.outerHeight(this.clone.wtTable.TABLE)+"px"}else this.clone.wtTable.holder.style.top=-(this.instance.wtScrollbars.vertical.windowScrollPosition-this.instance.wtScrollbars.vertical.measureBefore)+"px",t.style.height=this.instance.wtViewport.getWorkspaceHeight()+"px";t.style.width=b.prototype.outerWidth(this.clone.wtTable.TABLE)+4+"px"}},R.prototype.prepare=function(){},R.prototype.refresh=function(t){this.measureBefore=0,this.measureAfter=0,this.clone&&this.clone.draw(t)},R.prototype.getScrollPosition=function(){return this.scrollHandler===i?this.scrollHandler.scrollX:this.scrollHandler.scrollLeft},R.prototype.setScrollPosition=function(t){this.scrollHandler.scrollLeft=t},R.prototype.onScroll=function(){h.prototype.onScroll.apply(this,arguments),this.instance.getSetting("onScrollHorizontally")},R.prototype.getLastCell=function(){return this.instance.wtTable.getLastVisibleColumn()},R.prototype.applyToDOM=function(){this.fixedContainer.style.paddingLeft=this.measureBefore+"px",this.fixedContainer.style.paddingRight=this.measureAfter+"px"},R.prototype.scrollTo=function(t){this.$scrollHandler.scrollLeft(this.tableParentOffset+t*this.cellSize)},R.prototype.readWindowSize=function(){this.scrollHandler===i?(this.windowSize=document.documentElement.clientWidth,this.tableParentOffset=this.instance.wtTable.holderOffset.left):(this.windowSize=b.prototype.outerWidth(this.scrollHandler),this.tableParentOffset=0),this.windowScrollPosition=this.getScrollPosition()},R.prototype.readSettings=function(){this.offset=this.instance.getSetting("offsetColumn"),this.total=this.instance.getSetting("totalColumns")},A.prototype=new h,A.prototype.resetFixedPosition=function(){if(this.instance.wtTable.holder.parentNode){var t,e=this.clone.wtTable.holder.parentNode;if(this.scrollHandler===i){t=this.instance.wtTable.hider.getBoundingClientRect();var n=Math.ceil(t.top,10),o=Math.ceil(t.bottom,10);0>n&&o>0?e.style.top="0":e.style.top=n+"px"}else t=this.instance.wtScrollbars.horizontal.scrollHandler.getBoundingClientRect(),e.style.top=Math.ceil(t.top,10)+"px",e.style.left=Math.ceil(t.left,10)+"px";this.instance.wtScrollbars.horizontal.scrollHandler===i?e.style.width=this.instance.wtViewport.getWorkspaceActualWidth()+"px":e.style.width=b.prototype.outerWidth(this.instance.wtTable.holder.parentNode)+"px",e.style.height=b.prototype.outerHeight(this.clone.wtTable.TABLE)+4+"px"}},A.prototype.react=function(){if(this.instance.wtTable.holder.parentNode&&this.instance.wtScrollbars.horizontal.scrollHandler!==i){var t=this.clone.wtTable.holder.parentNode;t.firstChild.style.left=-this.instance.wtScrollbars.horizontal.windowScrollPosition+"px"}},A.prototype.getScrollPosition=function(){return this.scrollHandler===i?this.scrollHandler.scrollY:this.scrollHandler.scrollTop},A.prototype.setScrollPosition=function(t){this.scrollHandler.scrollTop=t},A.prototype.onScroll=function(t){h.prototype.onScroll.apply(this,arguments);var e,n=0;if(e=this.windowScrollPosition-this.tableParentOffset,$=0,e>0){for(var i,o=0,r=0;r<this.total&&(i=this.instance.getSetting("rowHeight",r),o+=i,!(o>e));r++);this.offset>0&&($=o-e),n=r,n=Math.min(n,this.total)}this.curOuts=n>this.maxOuts?this.maxOuts:n,n-=this.curOuts,this.instance.update("offsetRow",n),this.readSettings(),this.instance.draw(),this.instance.getSetting("onScrollVertically")},A.prototype.getLastCell=function(){return this.instance.getSetting("offsetRow")+this.instance.wtTable.tbodyChildrenLength-1};var $=0;A.prototype.sumCellSizes=function(t,e){for(var n=0;e>t;)n+=this.instance.getSetting("rowHeight",t),t++;return n},A.prototype.applyToDOM=function(){var t=this.instance.wtViewport.getColumnHeaderHeight();this.fixedContainer.style.height=t+this.sumCellSizes(0,this.total)+4+"px",this.fixed.style.top=this.measureBefore+"px",this.fixed.style.bottom=""},A.prototype.scrollTo=function(t){var e=this.tableParentOffset+t*this.cellSize;this.$scrollHandler.scrollTop(e),this.onScroll(e)},A.prototype.readWindowSize=function(){this.scrollHandler===i?(this.windowSize=document.documentElement.clientHeight,this.tableParentOffset=this.instance.wtTable.holderOffset.top):(this.windowSize=this.scrollHandler.clientHeight,this.tableParentOffset=0),this.windowScrollPosition=this.getScrollPosition()},A.prototype.readSettings=function(){this.offset=this.instance.getSetting("offsetRow"),this.total=this.instance.getSetting("totalRows")},P.prototype.registerListeners=function(){function e(){return c.instance.wtTable.holder.parentNode?(c.vertical.windowScrollPosition=c.vertical.getScrollPosition(),c.horizontal.windowScrollPosition=c.horizontal.getScrollPosition(),c.box=c.instance.wtTable.hider.getBoundingClientRect(),c.box.width===a&&c.box.height===l||!c.instance.rowHeightCache||(a=c.box.width,l=c.box.height,c.instance.draw()),void(c.vertical.windowScrollPosition===n&&c.horizontal.windowScrollPosition===o&&c.box.top===r&&c.box.left===s||(c.vertical.onScroll(),c.horizontal.onScroll(),c.vertical.react(),c.horizontal.react(),n=c.vertical.windowScrollPosition,o=c.horizontal.windowScrollPosition,r=c.box.top,s=c.box.left))):void c.destroy()}var n,o,r,s,a,l,c=this,u=t(i);this.vertical.$scrollHandler.on("scroll."+this.instance.guid,e),this.vertical.scrollHandler!==this.horizontal.scrollHandler&&this.horizontal.$scrollHandler.on("scroll."+this.instance.guid,e),this.vertical.scrollHandler!==i&&this.horizontal.scrollHandler!==i&&u.on("scroll."+this.instance.guid,e),u.on("load."+this.instance.guid,e),u.on("resize."+this.instance.guid,e),t(document).on("ready."+this.instance.guid,e),setInterval(e,100)},P.prototype.destroy=function(){this.vertical&&this.vertical.destroy(),this.horizontal&&this.horizontal.destroy()},P.prototype.refresh=function(t){this.horizontal&&this.horizontal.readSettings(),this.vertical&&this.vertical.readSettings(),this.horizontal&&this.horizontal.prepare(),this.vertical&&this.vertical.prepare(),this.horizontal&&this.horizontal.refresh(t),this.vertical&&this.vertical.refresh(t),this.corner&&this.corner.refresh(t),this.debug&&this.debug.refresh(t)},N.prototype.add=function(t){this.selected.push(t)},N.prototype.clear=function(){this.selected.length=0},N.prototype.getCorners=function(){var t,e,n,i,o,r=this.selected.length;if(r>0&&(t=n=this.selected[0][0],e=i=this.selected[0][1],r>1))for(o=1;r>o;o++)this.selected[o][0]<t?t=this.selected[o][0]:this.selected[o][0]>n&&(n=this.selected[o][0]),this.selected[o][1]<e?e=this.selected[o][1]:this.selected[o][1]>i&&(i=this.selected[o][1]);return[t,e,n,i]},N.prototype.draw=function(){var t,e,n,i,o,r=this.instance.wtTable.rowStrategy.countVisible(),s=this.instance.wtTable.columnStrategy.countVisible();if(this.selected.length){for(t=this.getCorners(),e=0;r>e;e++)for(n=0;s>n;n++)i=this.instance.wtTable.rowFilter.visibleToSource(e),o=this.instance.wtTable.columnFilter.visibleToSource(n),i>=t[0]&&i<=t[2]&&o>=t[1]&&o<=t[3]?this.instance.wtTable.currentCellCache.add(e,n,this.settings.className):i>=t[0]&&i<=t[2]?this.instance.wtTable.currentCellCache.add(e,n,this.settings.highlightRowClassName):o>=t[1]&&o<=t[3]&&this.instance.wtTable.currentCellCache.add(e,n,this.settings.highlightColumnClassName);this.border&&this.border.appear(t)}else this.border&&this.border.disappear()},O.prototype.update=function(t,e){if(void 0===e)for(var n in t)t.hasOwnProperty(n)&&(this.settings[n]=t[n]);else this.settings[t]=e;return this.instance},O.prototype.getSetting=function(t,e,n,i){return this[t]?this[t](e,n,i):this._getSetting(t,e,n,i)},O.prototype._getSetting=function(t,e,n,i){return"function"==typeof this.settings[t]?this.settings[t](e,n,i):void 0!==e&&"[object Array]"===Object.prototype.toString.call(this.settings[t])?this.settings[t][e]:this.settings[t]},O.prototype.has=function(t){return!!this.settings[t]},O.prototype.rowHeight=function(t,e){if(this.instance.rowHeightCache||(this.instance.rowHeightCache=[]),void 0===this.instance.rowHeightCache[t]){var n=23;return e&&(n=this.instance.wtDom.outerHeight(e),this.instance.rowHeightCache[t]=n),n}return this.instance.rowHeightCache[t]},D.prototype.refreshHiderDimensions=function(){var t=this.instance.wtViewport.getWorkspaceHeight(),e=this.instance.wtViewport.getWorkspaceWidth(),n=this.spreader.style;t===1/0&&e===1/0||this.instance.getSetting("nativeScrollbars")?(n.position="relative",n.width="auto",n.height="auto"):(t===1/0&&(t=this.instance.wtViewport.getWorkspaceActualHeight()),e===1/0&&(e=this.instance.wtViewport.getWorkspaceActualWidth()),this.hiderStyle.overflow="hidden",n.position="absolute",n.top="0",n.left="0",this.instance.getSetting("nativeScrollbars")||(n.height="4000px",n.width="4000px"),0>t&&(t=0),this.hiderStyle.height=t+"px",this.hiderStyle.width=e+"px")},D.prototype.refreshStretching=function(){if(!this.instance.cloneSource){var t=this.instance,e=t.getSetting("stretchH"),n=t.getSetting("totalRows"),i=t.getSetting("totalColumns"),o=t.getSetting("offsetColumn"),r=function(t){var e=s.instance.wtViewport.getViewportWidth(t);return t>e&&s.instance.getSetting("nativeScrollbars")?1/0:e},s=this,a=function(e){var n=s.columnFilter.visibleToSource(e);return i>n?t.getSetting("columnWidth",n):void 0};"hybrid"===e&&(e=o>0?"last":"none");var l=function(t){return s.instance.getSetting("nativeScrollbars")?s.instance.cloneOverlay instanceof w?1/0:2*s.instance.wtViewport.getViewportHeight(t):s.instance.wtViewport.getViewportHeight(t)},c=function(t,e){if(s.instance.getSetting("nativeScrollbars"))return 20;var i=s.rowFilter.visibleToSource(t);return n>i?s.verticalRenderReverse&&0===t?s.instance.getSetting("rowHeight",i,e)-1:s.instance.getSetting("rowHeight",i,e):void 0};this.columnStrategy=new v(t,r,a,e),this.rowStrategy=new T(t,l,c)}},D.prototype.adjustAvailableNodes=function(){for(var t,e,n,i,o=this.instance.getSetting("rowHeaders"),r=o.length,s=this.instance.getSetting("columnHeaders");this.colgroupChildrenLength<r;)this.COLGROUP.appendChild(document.createElement("COL")),this.colgroupChildrenLength++;for(this.refreshStretching(),t=this.instance.cloneSource&&(this.instance.cloneOverlay instanceof R||this.instance.cloneOverlay instanceof k)?this.instance.getSetting("fixedColumnsLeft"):this.columnStrategy.cellCount;this.colgroupChildrenLength<t+r;)this.COLGROUP.appendChild(document.createElement("COL")),
this.colgroupChildrenLength++;for(;this.colgroupChildrenLength>t+r;)this.COLGROUP.removeChild(this.COLGROUP.lastChild),this.colgroupChildrenLength--;if(e=this.THEAD.firstChild,s.length){for(e||(e=document.createElement("TR"),this.THEAD.appendChild(e)),this.theadChildrenLength=e.childNodes.length;this.theadChildrenLength<t+r;)e.appendChild(document.createElement("TH")),this.theadChildrenLength++;for(;this.theadChildrenLength>t+r;)e.removeChild(e.lastChild),this.theadChildrenLength--}else e&&this.wtDom.empty(e);for(i=0;i<this.colgroupChildrenLength;i++)r>i?this.wtDom.addClass(this.COLGROUP.childNodes[i],"rowHeader"):this.wtDom.removeClass(this.COLGROUP.childNodes[i],"rowHeader");if(s.length&&(e=this.THEAD.firstChild,r))for(n=e.firstChild,i=0;r>i;i++)o[i](-r+i,n),n=n.nextSibling;for(i=0;t>i;i++)s.length&&s[0](this.columnFilter.visibleToSource(i),e.childNodes[r+i])},D.prototype.adjustColumns=function(t,e){for(var n=t.childNodes.length;e>n;){var i=document.createElement("TD");t.appendChild(i),n++}for(;n>e;)t.removeChild(t.lastChild),n--},D.prototype.draw=function(t){return this.instance.getSetting("nativeScrollbars")&&(this.verticalRenderReverse=!1),this.rowFilter.readSettings(this.instance),this.columnFilter.readSettings(this.instance),t?this.instance.wtScrollbars&&this.instance.wtScrollbars.refresh(!0):(this.instance.getSetting("nativeScrollbars")?this.instance.cloneSource?this.tableOffset=this.instance.cloneSource.wtTable.tableOffset:(this.holderOffset=this.wtDom.offset(this.holder),this.tableOffset=this.wtDom.offset(this.TABLE),this.instance.wtScrollbars.vertical.readWindowSize(),this.instance.wtScrollbars.horizontal.readWindowSize(),this.instance.wtViewport.resetSettings()):(this.tableOffset=this.wtDom.offset(this.TABLE),this.instance.wtViewport.resetSettings()),this._doDraw()),this.refreshPositions(t),t||this.instance.getSetting("nativeScrollbars")&&(this.instance.cloneSource||(this.instance.wtScrollbars.vertical.resetFixedPosition(),this.instance.wtScrollbars.horizontal.resetFixedPosition(),this.instance.wtScrollbars.corner.resetFixedPosition(),this.instance.wtScrollbars.debug&&this.instance.wtScrollbars.debug.resetFixedPosition())),this.instance.drawn=!0,this},D.prototype._doDraw=function(){var t,e,n,i,o,r,s,a,l,c,u=0,h=this.instance.getSetting("offsetRow"),d=this.instance.getSetting("totalRows"),f=this.instance.getSetting("totalColumns"),p=this.instance.getSetting("rowHeaders"),g=p.length,m=!1;this.verticalRenderReverse&&(l=h);var v=!1;if(this.verticalRenderReverse&&(h===d-this.rowFilter.fixedCount-1?v=!0:(this.instance.update("offsetRow",h+1),this.rowFilter.readSettings(this.instance))),this.instance.cloneSource&&(this.columnStrategy=this.instance.cloneSource.wtTable.columnStrategy,this.rowStrategy=this.instance.cloneSource.wtTable.rowStrategy),f>0){t=this.rowFilter.visibleToSource(u);var y,b=this.instance.getSetting("fixedRowsTop");for(this.instance.cloneSource&&(this.instance.cloneOverlay instanceof A||this.instance.cloneOverlay instanceof k?y=b:this.instance.cloneOverlay instanceof R&&(y=this.rowStrategy.countVisible())),this.adjustAvailableNodes(),m=!0,i=this.instance.cloneSource&&(this.instance.cloneOverlay instanceof R||this.instance.cloneOverlay instanceof k)?this.instance.getSetting("fixedColumnsLeft"):this.columnStrategy.cellCount,this.instance.cloneSource||(a=this.instance.wtViewport.getWorkspaceWidth(),this.columnStrategy.stretch()),e=0;i>e;e++)this.COLGROUP.childNodes[e+g].style.width=this.columnStrategy.getSize(e)+"px";for(;d>t&&t>=0;){if(u>1e3)throw new Error("Security brake: Too much TRs. Please define height for your table, which will enforce scrollbars.");if(void 0!==y&&u===y)break;if(u>=this.tbodyChildrenLength||this.verticalRenderReverse&&u>=this.rowFilter.fixedCount){for(o=document.createElement("TR"),e=0;g>e;e++)o.appendChild(document.createElement("TH"));this.verticalRenderReverse&&u>=this.rowFilter.fixedCount?this.TBODY.insertBefore(o,this.TBODY.childNodes[this.rowFilter.fixedCount]||this.TBODY.firstChild):this.TBODY.appendChild(o),this.tbodyChildrenLength++}else o=0===u?this.TBODY.firstChild:o.nextSibling;for(s=o.firstChild,e=0;g>e;e++)"TD"==s.nodeName&&(r=s,s=document.createElement("TH"),o.insertBefore(s,r),o.removeChild(r)),p[e](t,s),s=s.nextSibling;for(this.adjustColumns(o,i+g),e=0;i>e;e++)n=this.columnFilter.visibleToSource(e),r=0===e?o.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(n)]:r.nextSibling,"TH"==r.nodeName&&(s=r,r=document.createElement("TD"),o.insertBefore(r,s),o.removeChild(s)),r.className="",r.removeAttribute("style"),this.instance.getSetting("cellRenderer",t,n,r);if(h=this.instance.getSetting("offsetRow"),this.verticalRenderReverse&&v){if(-this.wtDom.outerHeight(o.firstChild)<this.rowStrategy.remainingSize){this.TBODY.removeChild(o),this.instance.update("offsetRow",h+1),this.tbodyChildrenLength--,this.rowFilter.readSettings(this.instance);break}this.instance.cloneSource||(c=this.rowStrategy.add(u,r,this.verticalRenderReverse),c===!1&&this.rowStrategy.removeOutstanding())}else if(!this.instance.cloneSource&&(c=this.rowStrategy.add(u,r,this.verticalRenderReverse),c===!1&&(this.instance.getSetting("nativeScrollbars")||this.rowStrategy.removeOutstanding()),this.rowStrategy.isLastIncomplete())){if(this.verticalRenderReverse&&!this.isRowInViewport(l))return this.verticalRenderReverse=!1,this.instance.update("offsetRow",l),void this.draw();break}if(this.instance.getSetting("nativeScrollbars")&&(this.instance.cloneSource?o.style.height=this.instance.getSetting("rowHeight",t)+"px":this.instance.getSetting("rowHeight",t,r)),this.verticalRenderReverse&&u>=this.rowFilter.fixedCount){if(0===h)break;this.instance.update("offsetRow",h-1),this.rowFilter.readSettings(this.instance)}else u++;t=this.rowFilter.visibleToSource(u)}}if(m||this.adjustAvailableNodes(),!(this.instance.cloneOverlay instanceof w))for(u=this.rowStrategy.countVisible();this.tbodyChildrenLength>u;)this.TBODY.removeChild(this.TBODY.lastChild),this.tbodyChildrenLength--;if(this.instance.wtScrollbars&&this.instance.wtScrollbars.refresh(!1),!this.instance.cloneSource&&a!==this.instance.wtViewport.getWorkspaceWidth())for(this.columnStrategy.stretch(),e=0;e<this.columnStrategy.cellCount;e++)this.COLGROUP.childNodes[e+g].style.width=this.columnStrategy.getSize(e)+"px";this.verticalRenderReverse=!1},D.prototype.refreshPositions=function(t){this.refreshHiderDimensions(),this.refreshSelections(t)},D.prototype.refreshSelections=function(t){var e,n,i,o,r,s,a=[],l=this.rowStrategy.countVisible(),c=this.columnStrategy.countVisible();if(this.oldCellCache=this.currentCellCache,this.currentCellCache=new g,this.instance.selections)for(n in this.instance.selections)this.instance.selections.hasOwnProperty(n)&&(this.instance.selections[n].draw(),this.instance.selections[n].settings.className&&a.push(this.instance.selections[n].settings.className),this.instance.selections[n].settings.highlightRowClassName&&a.push(this.instance.selections[n].settings.highlightRowClassName),this.instance.selections[n].settings.highlightColumnClassName&&a.push(this.instance.selections[n].settings.highlightColumnClassName));for(s=a.length,e=0;l>e;e++)for(i=0;c>i;i++)for(n=this.rowFilter.visibleToSource(e),o=this.columnFilter.visibleToSource(i),r=0;s>r;r++)this.currentCellCache.test(e,i,a[r])?this.wtDom.addClass(this.getCell([n,o]),a[r]):t&&this.oldCellCache.test(e,i,a[r])&&this.wtDom.removeClass(this.getCell([n,o]),a[r])},D.prototype.getCell=function(t){return this.isRowBeforeViewport(t[0])?-1:this.isRowAfterViewport(t[0])?-2:this.isColumnBeforeViewport(t[1])?-3:this.isColumnAfterViewport(t[1])?-4:this.TBODY.childNodes[this.rowFilter.sourceToVisible(t[0])].childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(t[1])]},D.prototype.getCoords=function(t){return[this.rowFilter.visibleToSource(this.wtDom.index(t.parentNode)),this.columnFilter.visibleRowHeadedColumnToSourceColumn(t.cellIndex)]},D.prototype.getLastVisibleRow=function(){return this.rowFilter.visibleToSource(this.rowStrategy.cellCount-1)},D.prototype.getLastVisibleColumn=function(){return this.columnFilter.visibleToSource(this.columnStrategy.cellCount-1)},D.prototype.isRowBeforeViewport=function(t){return this.rowFilter.sourceToVisible(t)<this.rowFilter.fixedCount&&t>=this.rowFilter.fixedCount},D.prototype.isRowAfterViewport=function(t){return t>this.getLastVisibleRow()},D.prototype.isColumnBeforeViewport=function(t){return this.columnFilter.sourceToVisible(t)<this.columnFilter.fixedCount&&t>=this.columnFilter.fixedCount},D.prototype.isColumnAfterViewport=function(t){return t>this.getLastVisibleColumn()},D.prototype.isRowInViewport=function(t){return!this.isRowBeforeViewport(t)&&!this.isRowAfterViewport(t)},D.prototype.isColumnInViewport=function(t){return!this.isColumnBeforeViewport(t)&&!this.isColumnAfterViewport(t)},D.prototype.isLastRowFullyVisible=function(){return this.getLastVisibleRow()===this.instance.getSetting("totalRows")-1&&!this.rowStrategy.isLastIncomplete()},D.prototype.isLastColumnFullyVisible=function(){return this.getLastVisibleColumn()===this.instance.getSetting("totalColumns")-1&&!this.columnStrategy.isLastIncomplete()},M.prototype.getWorkspaceHeight=function(t){if(this.instance.getSetting("nativeScrollbars"))return this.instance.wtScrollbars.vertical.windowSize;var e=this.instance.getSetting("height");return(e===1/0||void 0===e||null===e||1>e)&&(e=this.instance.wtScrollbars.vertical instanceof h?this.instance.wtScrollbars.vertical.availableSize():1/0),e!==1/0&&(t>=e?e-=this.instance.getSetting("scrollbarHeight"):this.instance.wtScrollbars.horizontal.visible&&(e-=this.instance.getSetting("scrollbarHeight"))),e},M.prototype.getWorkspaceWidth=function(t){var e=this.instance.getSetting("width");return(e===1/0||void 0===e||null===e||1>e)&&(e=this.instance.wtScrollbars.horizontal instanceof h?this.instance.wtScrollbars.horizontal.availableSize():1/0),e!==1/0&&(t>=e?e-=this.instance.getSetting("scrollbarWidth"):this.instance.wtScrollbars.vertical.visible&&(e-=this.instance.getSetting("scrollbarWidth"))),e},M.prototype.getWorkspaceActualHeight=function(){return this.instance.wtDom.outerHeight(this.instance.wtTable.TABLE)},M.prototype.getWorkspaceActualWidth=function(){return this.instance.wtDom.outerWidth(this.instance.wtTable.TABLE)||this.instance.wtDom.outerWidth(this.instance.wtTable.TBODY)||this.instance.wtDom.outerWidth(this.instance.wtTable.THEAD)},M.prototype.getColumnHeaderHeight=function(){if(isNaN(this.columnHeaderHeight)){var t=this.instance.wtDom.offset(this.instance.wtTable.TBODY),e=this.instance.wtTable.tableOffset;this.columnHeaderHeight=t.top-e.top}return this.columnHeaderHeight},M.prototype.getViewportHeight=function(t){var e=this.getWorkspaceHeight(t);if(e===1/0)return e;var n=this.getColumnHeaderHeight();return n>0?e-n:e},M.prototype.getRowHeaderWidth=function(){if(this.instance.cloneSource)return this.instance.cloneSource.wtViewport.getRowHeaderWidth();if(isNaN(this.rowHeaderWidth)){var t=this.instance.getSetting("rowHeaders");if(t.length){var e=this.instance.wtTable.TABLE.querySelector("TH");this.rowHeaderWidth=0;for(var n=0,i=t.length;i>n;n++)e?(this.rowHeaderWidth+=this.instance.wtDom.outerWidth(e),e=e.nextSibling):this.rowHeaderWidth+=50}else this.rowHeaderWidth=0}return this.rowHeaderWidth},M.prototype.getViewportWidth=function(t){var e=this.getWorkspaceWidth(t);if(e===1/0)return e;var n=this.getRowHeaderWidth();return n>0?e-n:e},M.prototype.resetSettings=function(){this.rowHeaderWidth=NaN,this.columnHeaderHeight=NaN},t(document).ready(function(){t(".charts_window").on("mousemove",function(t){K.refresh(t)})});var K={x:0,y:0,init:function(){this.setEvent("mouse"),this.setEvent("touch")},setEvent:function(e){var n=document["on"+e+"move"]||function(){};t(".charts_window").on("mousemove",function(t){n(t),K.refresh(t)})},refresh:function(t){t||(t=i.event),"mousemove"==t.type?this.set(t):t.touches&&this.set(t.touches[0])},set:function(t){t.pageX||t.pageY?(this.x=t.pageX,this.y=t.pageY):document.body&&(t.clientX||t.clientY)&&(this.x=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.y=t.clientY+document.body.scrollTop+document.documentElement.scrollTop)}};K.init();var Q={get:function(t){var e=0,n=0;if(t.offsetParent)do n+=t.offsetLeft,e+=t.offsetTop;while(t=t.offsetParent);return[n,e]}},Z=function(t,e){if("string"==typeof t&&(t=document.getElementById(t)),t){var n=t.getElementsByTagName("div")[0];n&&-1!=n.className.search(/(^|\s)handle(\s|$)/)&&(this.init(t,n,e||{}),this.setup())}};Z.prototype={init:function(t,e,n){this.wrapper=t,this.handle=e,this.options=n,this.disabled=this.getOption("disabled",!1),this.horizontal=this.getOption("horizontal",!0),this.vertical=this.getOption("vertical",!1),this.slide=this.getOption("slide",!0),this.steps=this.getOption("steps",0),this.snap=this.getOption("snap",!1),this.loose=this.getOption("loose",!1),this.speed=this.getOption("speed",10)/100,this.xPrecision=this.getOption("xPrecision",0),this.yPrecision=this.getOption("yPrecision",0),this.callback=n.callback||null,this.animationCallback=n.animationCallback||null,this.bounds={left:n.left||0,right:-(n.right||0),top:n.top||0,bottom:-(n.bottom||0),x0:0,x1:0,xRange:0,y0:0,y1:0,yRange:0},this.value={prev:[-1,-1],current:[n.x||0,n.y||0],target:[n.x||0,n.y||0]},this.offset={wrapper:[0,0],mouse:[0,0],prev:[-999999,-999999],current:[0,0],target:[0,0]},this.change=[0,0],this.activity=!1,this.dragging=!1,this.tapping=!1},getOption:function(t,e){return void 0!==this.options[t]?this.options[t]:e},setup:function(){this.setWrapperOffset(),this.setBoundsPadding(),this.setBounds(),this.setSteps(),this.addListeners()},setWrapperOffset:function(){this.offset.wrapper=Q.get(this.wrapper)},setBoundsPadding:function(){this.bounds.left||this.bounds.right||(this.bounds.left=Q.get(this.handle)[0]-this.offset.wrapper[0],this.bounds.right=-this.bounds.left),this.bounds.top||this.bounds.bottom||(this.bounds.top=Q.get(this.handle)[1]-this.offset.wrapper[1],this.bounds.bottom=-this.bounds.top)},setBounds:function(){this.bounds.x0=this.bounds.left,this.bounds.x1=this.wrapper.offsetWidth+this.bounds.right,this.bounds.xRange=this.bounds.x1-this.bounds.x0-this.handle.offsetWidth,this.bounds.y0=this.bounds.top,this.bounds.y1=this.wrapper.offsetHeight+this.bounds.bottom,this.bounds.yRange=this.bounds.y1-this.bounds.y0-this.handle.offsetHeight,this.bounds.xStep=1/(this.xPrecision||Math.max(this.wrapper.offsetWidth,this.handle.offsetWidth)),this.bounds.yStep=1/(this.yPrecision||Math.max(this.wrapper.offsetHeight,this.handle.offsetHeight))},setSteps:function(){if(this.steps>1){this.stepRatios=[];for(var t=0;t<=this.steps-1;t++)this.stepRatios[t]=t/(this.steps-1)}},addListeners:function(){var t=this;this.wrapper.onselectstart=function(){return!1},this.handle.onmousedown=this.handle.ontouchstart=function(e){t.handleDownHandler(e)},this.wrapper.onmousedown=this.wrapper.ontouchstart=function(e){t.wrapperDownHandler(e)};var e=document.onmouseup||function(){};document.onmouseup=function(n){e(n),t.documentUpHandler(n)};var n=document.ontouchend||function(){};document.ontouchend=function(e){n(e),t.documentUpHandler(e)};var o=i.onresize||function(){};i.onresize=function(e){o(e),t.documentResizeHandler(e)},this.wrapper.onmousemove=function(e){t.activity=!0},this.wrapper.onclick=function(e){return!t.activity},this.interval=setInterval(function(){t.animate()},25),t.animate(!1,!0)},handleDownHandler:function(t){this.activity=!1,K.refresh(t),this.preventDefaults(t,!0),this.startDrag()},wrapperDownHandler:function(t){K.refresh(t),this.preventDefaults(t,!0),this.startTap()},documentUpHandler:function(t){this.stopDrag(),this.stopTap()},documentResizeHandler:function(t){this.setWrapperOffset(),this.setBounds(),this.update()},enable:function(){this.disabled=!1,this.handle.className=this.handle.className.replace(/\s?disabled/g,"")},disable:function(){this.disabled=!0,this.handle.className+=" disabled"},setStep:function(t,e,n){this.setValue(this.steps&&t>1?(t-1)/(this.steps-1):0,this.steps&&e>1?(e-1)/(this.steps-1):0,n)},setValue:function(t,e,n){this.setTargetValue([t,e||0]),n&&this.groupCopy(this.value.current,this.value.target)},startTap:function(t){this.disabled||(this.tapping=!0,this.setWrapperOffset(),this.setBounds(),void 0===t&&(t=[K.x-this.offset.wrapper[0]-this.handle.offsetWidth/2,K.y-this.offset.wrapper[1]-this.handle.offsetHeight/2]),this.setTargetOffset(t))},stopTap:function(){!this.disabled&&this.tapping&&(this.tapping=!1,this.setTargetValue(this.value.current),this.result())},startDrag:function(){this.disabled||(this.setWrapperOffset(),this.setBounds(),this.offset.mouse=[K.x-Q.get(this.handle)[0],K.y-Q.get(this.handle)[1]],this.dragging=!0)},stopDrag:function(){if(!this.disabled&&this.dragging){this.dragging=!1;var t=this.groupClone(this.value.current);if(this.slide){var e=this.change;t[0]+=4*e[0],t[1]+=4*e[1]}this.setTargetValue(t),this.result()}},feedback:function(){var t=this.value.current;this.snap&&this.steps>1&&(t=this.getClosestSteps(t)),this.groupCompare(t,this.value.prev)||("function"==typeof this.animationCallback&&this.animationCallback(t[0],t[1]),this.groupCopy(this.value.prev,t))},result:function(){"function"==typeof this.callback&&this.callback(this.value.target[0],this.value.target[1])},animate:function(t,e){if(!t||this.dragging){if(this.dragging){var n=this.groupClone(this.value.target),i=[K.x-this.offset.wrapper[0]-this.offset.mouse[0],K.y-this.offset.wrapper[1]-this.offset.mouse[1]];this.setTargetOffset(i,this.loose),this.change=[this.value.target[0]-n[0],this.value.target[1]-n[1]]}(this.dragging||e)&&this.groupCopy(this.value.current,this.value.target),(this.dragging||this.glide()||e)&&(this.update(),this.feedback())}},glide:function(){var t=[this.value.target[0]-this.value.current[0],this.value.target[1]-this.value.current[1]];return t[0]||t[1]?(Math.abs(t[0])>this.bounds.xStep||Math.abs(t[1])>this.bounds.yStep?(this.value.current[0]+=t[0]*this.speed,this.value.current[1]+=t[1]*this.speed):this.groupCopy(this.value.current,this.value.target),!0):!1},update:function(){this.snap?this.offset.current=this.getOffsetsByRatios(this.getClosestSteps(this.value.current)):this.offset.current=this.getOffsetsByRatios(this.value.current),this.show()},show:function(){this.groupCompare(this.offset.current,this.offset.prev)||(this.horizontal&&(this.handle.style.left=String(this.offset.current[0])+"px"),this.vertical&&(this.handle.style.top=String(this.offset.current[1])+"px"),this.groupCopy(this.offset.prev,this.offset.current))},setTargetValue:function(t,e){var n=e?this.getLooseValue(t):this.getProperValue(t);this.groupCopy(this.value.target,n),this.offset.target=this.getOffsetsByRatios(n)},setTargetOffset:function(t,e){var n=this.getRatiosByOffsets(t),i=e?this.getLooseValue(n):this.getProperValue(n);this.groupCopy(this.value.target,i),this.offset.target=this.getOffsetsByRatios(i)},getLooseValue:function(t){var e=this.getProperValue(t);return[e[0]+(t[0]-e[0])/4,e[1]+(t[1]-e[1])/4]},getProperValue:function(t){var e=this.groupClone(t);return e[0]=Math.max(e[0],0),e[1]=Math.max(e[1],0),e[0]=Math.min(e[0],1),e[1]=Math.min(e[1],1),(!this.dragging&&!this.tapping||this.snap)&&this.steps>1&&(e=this.getClosestSteps(e)),e},getRatiosByOffsets:function(t){return[this.getRatioByOffset(t[0],this.bounds.xRange,this.bounds.x0),this.getRatioByOffset(t[1],this.bounds.yRange,this.bounds.y0)]},getRatioByOffset:function(t,e,n){return e?(t-n)/e:0},getOffsetsByRatios:function(t){return[this.getOffsetByRatio(t[0],this.bounds.xRange,this.bounds.x0),this.getOffsetByRatio(t[1],this.bounds.yRange,this.bounds.y0)]},getOffsetByRatio:function(t,e,n){return Math.round(t*e)+n},getClosestSteps:function(t){return[this.getClosestStep(t[0]),this.getClosestStep(t[1])]},getClosestStep:function(t){for(var e=0,n=1,i=0;i<=this.steps-1;i++)Math.abs(this.stepRatios[i]-t)<n&&(n=Math.abs(this.stepRatios[i]-t),e=i);return this.stepRatios[e]},groupCompare:function(t,e){return t[0]==e[0]&&t[1]==e[1]},groupCopy:function(t,e){t[0]=e[0],t[1]=e[1]},groupClone:function(t){return[t[0],t[1]]},preventDefaults:function(t,e){t||(t=i.event),t.preventDefault&&t.preventDefault(),t.returnValue=!1,e&&document.selection&&document.selection.empty()},cancelEvent:function(t){t||(t=i.event),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0}},function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof n?e.exports=t:t(jQuery)}(function(t){function e(e){var r,s=e||i.event,a=[].slice.call(arguments,1),l=0,c=0,u=0,h=0,d=0;return e=t.event.fix(s),e.type="mousewheel",s.wheelDelta&&(l=s.wheelDelta),s.detail&&(l=-1*s.detail),s.deltaY&&(u=-1*s.deltaY,l=u),s.deltaX&&(c=s.deltaX,l=-1*c),void 0!==s.wheelDeltaY&&(u=s.wheelDeltaY),void 0!==s.wheelDeltaX&&(c=-1*s.wheelDeltaX),h=Math.abs(l),(!n||n>h)&&(n=h),d=Math.max(Math.abs(u),Math.abs(c)),(!o||o>d)&&(o=d),r=l>0?"floor":"ceil",l=Math[r](l/n),c=Math[r](c/o),u=Math[r](u/o),a.unshift(e,l,c,u),(t.event.dispatch||t.event.handle).apply(this,a)}var n,o,r=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];if(t.event.fixHooks)for(var a=r.length;a;)t.event.fixHooks[r[--a]]=t.event.mouseHooks;t.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var t=s.length;t;)this.addEventListener(s[--t],e,!1);else this.onmousewheel=e},teardown:function(){if(this.removeEventListener)for(var t=s.length;t;)this.removeEventListener(s[--t],e,!1);else this.onmousewheel=null}},t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})})}(jQuery,window,i),function(){function t(t){this._n=t}function n(t,e,n){var i,o=Math.pow(10,e);if(i=(Math.round(t*o)/o).toFixed(e),n){var r=new RegExp("0{1,"+n+"}$");i=i.replace(r,"")}return i}function i(t,e){var n;return n=e.indexOf("$")>-1?r(t,e):e.indexOf("%")>-1?s(t,e):e.indexOf(":")>-1?a(t,e):c(t,e)}function o(t,e){if(e.indexOf(":")>-1)t._n=l(e);else if(e===g)t._n=0;else{var n=e;"."!==f[p].delimiters.decimal&&(e=e.replace(/\./g,"").replace(f[p].delimiters.decimal,"."));for(var i=new RegExp(f[p].abbreviations.thousand+"(?:\\)|(\\"+f[p].currency.symbol+")?(?:\\))?)?$"),o=new RegExp(f[p].abbreviations.million+"(?:\\)|(\\"+f[p].currency.symbol+")?(?:\\))?)?$"),r=new RegExp(f[p].abbreviations.billion+"(?:\\)|(\\"+f[p].currency.symbol+")?(?:\\))?)?$"),s=new RegExp(f[p].abbreviations.trillion+"(?:\\)|(\\"+f[p].currency.symbol+")?(?:\\))?)?$"),a=["KB","MB","GB","TB","PB","EB","ZB","YB"],c=!1,u=0;u<=a.length&&!(c=e.indexOf(a[u])>-1?Math.pow(1024,u+1):!1);u++);t._n=(c?c:1)*(n.match(i)?Math.pow(10,3):1)*(n.match(o)?Math.pow(10,6):1)*(n.match(r)?Math.pow(10,9):1)*(n.match(s)?Math.pow(10,12):1)*(e.indexOf("%")>-1?.01:1)*Number((e.indexOf("(")>-1?"-":"")+e.replace(/[^0-9\.-]+/g,"")),t._n=c?Math.ceil(t._n):t._n}return t._n}function r(t,e){var n=e.indexOf("$")<=1,o="";e.indexOf(" $")>-1?(o=" ",e=e.replace(" $","")):e.indexOf("$ ")>-1?(o=" ",e=e.replace("$ ","")):e=e.replace("$","");var r=i(t,e);return n?r.indexOf("(")>-1||r.indexOf("-")>-1?(r=r.split(""),r.splice(1,0,f[p].currency.symbol+o),r=r.join("")):r=f[p].currency.symbol+o+r:r.indexOf(")")>-1?(r=r.split(""),r.splice(-1,0,o+f[p].currency.symbol),r=r.join("")):r=r+o+f[p].currency.symbol,r}function s(t,e){var n="";e.indexOf(" %")>-1?(n=" ",e=e.replace(" %","")):e=e.replace("%",""),t._n=100*t._n;var o=i(t,e);return o.indexOf(")")>-1?(o=o.split(""),o.splice(-1,0,n+"%"),o=o.join("")):o=o+n+"%",o}function a(t,e){var n=Math.floor(t._n/60/60),i=Math.floor((t._n-60*n*60)/60),o=Math.round(t._n-60*n*60-60*i);return n+":"+(10>i?"0"+i:i)+":"+(10>o?"0"+o:o)}function l(t){var e=t.split(":"),n=0;return 3===e.length?(n+=60*Number(e[0])*60,n+=60*Number(e[1]),n+=Number(e[2])):2===e.lenght&&(n+=60*Number(e[0]),n+=Number(e[1])),Number(n)}function c(t,e){var i=!1,o=!1,r="",s="",a="",l=Math.abs(t._n);if(0===t._n&&null!==g)return g;if(e.indexOf("(")>-1&&(i=!0,e=e.slice(1,-1)),e.indexOf("a")>-1&&(e.indexOf(" a")>-1?(r=" ",e=e.replace(" a","")):e=e.replace("a",""),l>=Math.pow(10,12)?(r+=f[p].abbreviations.trillion,t._n=t._n/Math.pow(10,12)):l<Math.pow(10,12)&&l>=Math.pow(10,9)?(r+=f[p].abbreviations.billion,t._n=t._n/Math.pow(10,9)):l<Math.pow(10,9)&&l>=Math.pow(10,6)?(r+=f[p].abbreviations.million,t._n=t._n/Math.pow(10,6)):l<Math.pow(10,6)&&l>=Math.pow(10,3)&&(r+=f[p].abbreviations.thousand,t._n=t._n/Math.pow(10,3))),e.indexOf("b")>-1){e.indexOf(" b")>-1?(s=" ",e=e.replace(" b","")):e=e.replace("b","");for(var c,u,h=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],d=0;d<=h.length;d++)if(c=Math.pow(1024,d),u=Math.pow(1024,d+1),t._n>=c&&t._n<u){s+=h[d],c>0&&(t._n=t._n/c);break}}e.indexOf("o")>-1&&(e.indexOf(" o")>-1?(a=" ",e=e.replace(" o","")):e=e.replace("o",""),a+=f[p].ordinal(t._n)),e.indexOf("[.]")>-1&&(o=!0,e=e.replace("[.]","."));var m=t._n.toString().split(".")[0],v=e.split(".")[1],y=e.indexOf(","),w="",b=!1;return v?(v.indexOf("[")>-1?(v=v.replace("]",""),v=v.split("["),w=n(t._n,v[0].length+v[1].length,v[1].length)):w=n(t._n,v.length),m=w.split(".")[0],w=w.split(".")[1].length?f[p].delimiters.decimal+w.split(".")[1]:"",o&&0===Number(w)&&(w="")):m=n(t._n,null),m.indexOf("-")>-1&&(m=m.slice(1),b=!0),y>-1&&(m=m.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+f[p].delimiters.thousands)),0===e.indexOf(".")&&(m=""),(i&&b?"(":"")+(!i&&b?"-":"")+m+w+(a?a:"")+(r?r:"")+(s?s:"")+(i&&b?")":"")}function u(t,e){f[t]=e}var h,d="1.4.7",f={},p="en",g=null,m="undefined"!=typeof e&&e.exports;h=function(e){return h.isNumeral(e)?e=e.value():Number(e)||(e=0),new t(Number(e))},h.version=d,h.isNumeral=function(e){return e instanceof t},h.language=function(t,e){return t?(t&&!e&&(p=t),!e&&f[t]||u(t,e),h):p},h.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(t){var e=t%10;return 1===~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th"},currency:{symbol:"$"}}),h.zeroFormat=function(t){g="string"==typeof t?t:null},h.fn=t.prototype={clone:function(){return h(this)},format:function(t){return i(this,t?t:h.defaultFormat)},unformat:function(t){return o(this,t?t:h.defaultFormat)},value:function(){return this._n},valueOf:function(){return this._n},set:function(t){return this._n=Number(t),this},add:function(t){return this._n=this._n+Number(t),this},subtract:function(t){return this._n=this._n-Number(t),this},multiply:function(t){return this._n=this._n*Number(t),this},divide:function(t){return this._n=this._n/Number(t),this},difference:function(t){var e=this._n-Number(t);return 0>e&&(e=-e),e}},m&&(e.exports=h),"undefined"==typeof ender&&(this.numeral=h),"function"==typeof define&&define.amd&&define([],function(){return h})}.call(this)},{}],jpicker:[function(t,e,n){!function(t,e){Math.precision=function(t,e){return void 0===e&&(e=0),Math.round(t*Math.pow(10,e))/Math.pow(10,e)};var n=function(e,n){var i,o,r=this,s=e.find("img:first"),a=0,l=100,c=100,u=0,h=100,d=100,f=0,p=0,g=new Array,m=function(t){for(var e=0;e<g.length;e++)g[e].call(r,r,t)},v=function(n){var s=e.offset();i={l:0|s.left,t:0|s.top},clearTimeout(o),o=setTimeout(function(){b.call(r,n)},0),t(document).bind("mousemove",y).bind("mouseup",w),n.preventDefault()},y=function(t){return clearTimeout(o),o=setTimeout(function(){b.call(r,t)},0),t.stopPropagation(),t.preventDefault(),!1},w=function(e){return t(document).unbind("mouseup",w).unbind("mousemove",y),e.stopPropagation(),e.preventDefault(),!1},b=function(t){var n=t.pageX-i.l,o=t.pageY-i.t,s=e.w,l=e.h;0>n?n=0:n>s&&(n=s),0>o?o=0:o>l&&(o=l),x.call(r,"xy",{x:n/s*c+a,y:o/l*d+u})},C=function(){var t=0,n=0,i=e.w,o=e.h,r=s.w,a=s.h;setTimeout(function(){c>0&&(t=f==l?i:f/c*i|0),d>0&&(n=p==h?o:p/d*o|0),r>=i?t=(i>>1)-(r>>1):t-=r>>1,a>=o?n=(o>>1)-(a>>1):n-=a>>1,s.css({left:t+"px",top:n+"px"})},0)},x=function(t,e,n){var i=void 0!==e;if(!i)switch(void 0!==t&&null!=t||(t="xy"),t.toLowerCase()){case"x":return f;case"y":return p;case"xy":default:return{x:f,y:p}}if(null==n||n!=r){var o,s,c=!1;switch(null==t&&(t="xy"),t.toLowerCase()){case"x":o=e&&(e.x&&0|e.x||0|e)||0;break;case"y":s=e&&(e.y&&0|e.y||0|e)||0;break;case"xy":default:o=e&&e.x&&0|e.x||0,s=e&&e.y&&0|e.y||0}null!=o&&(a>o?o=a:o>l&&(o=l),f!=o&&(f=o,c=!0)),null!=s&&(u>s?s=u:s>h&&(s=h),p!=s&&(p=s,c=!0)),c&&m.call(r,n||r)}},S=function(t,e){var n=void 0!==e;if(!n)switch(void 0!==t&&null!=t||(t="all"),t.toLowerCase()){case"minx":return a;case"maxx":return l;case"rangex":return{minX:a,maxX:l,rangeX:c};case"miny":return u;case"maxy":return h;case"rangey":return{minY:u,maxY:h,rangeY:d};case"all":default:return{minX:a,maxX:l,rangeX:c,minY:u,maxY:h,rangeY:d}}var i,o,r,s;switch(null==t&&(t="all"),t.toLowerCase()){case"minx":i=e&&(e.minX&&0|e.minX||0|e)||0;break;case"maxx":o=e&&(e.maxX&&0|e.maxX||0|e)||0;break;case"rangex":i=e&&e.minX&&0|e.minX||0,o=e&&e.maxX&&0|e.maxX||0;break;case"miny":r=e&&(e.minY&&0|e.minY||0|e)||0;break;case"maxy":s=e&&(e.maxY&&0|e.maxY||0|e)||0;break;case"rangey":r=e&&e.minY&&0|e.minY||0,s=e&&e.maxY&&0|e.maxY||0;break;case"all":default:i=e&&e.minX&&0|e.minX||0,o=e&&e.maxX&&0|e.maxX||0,r=e&&e.minY&&0|e.minY||0,s=e&&e.maxY&&0|e.maxY||0}null!=i&&a!=i&&(a=i,c=l-a),null!=o&&l!=o&&(l=o,c=l-a),null!=r&&u!=r&&(u=r,d=h-u),null!=s&&h!=s&&(h=s,d=h-u)},T=function(e){t.isFunction(e)&&g.push(e)},_=function(e){if(t.isFunction(e))for(var n;-1!=(n=t.inArray(e,g));)g.splice(n,1)},E=function(){t(document).unbind("mouseup",w).unbind("mousemove",y),e.unbind("mousedown",v),e=null,s=null,g=null};t.extend(!0,r,{val:x,range:S,bind:T,unbind:_,destroy:E}),s.src=n.arrow&&n.arrow.image,s.w=n.arrow&&n.arrow.width||s.width(),s.h=n.arrow&&n.arrow.height||s.height(),e.w=n.map&&n.map.width||e.width(),e.h=n.map&&n.map.height||e.height(),e.bind("mousedown",v),T.call(r,C)},o=function(e,n,i,o){var r=this,s=e.find("td.Text input"),a=s.eq(3),l=s.eq(4),c=s.eq(5),u=s.length>7?s.eq(6):null,h=s.eq(0),d=s.eq(1),f=s.eq(2),p=s.eq(s.length>7?7:6),g=s.length>7?s.eq(8):null,m=function(t){if(""!=t.target.value||t.target==p.get(0)||(null==i||t.target==i.get(0))&&null!=i){if(!w(t))return t;switch(t.target){case a.get(0):switch(t.keyCode){case 38:return a.val(b.call(r,(a.val()<<0)+1,0,255)),n.val("r",a.val(),t.target),!1;case 40:return a.val(b.call(r,(a.val()<<0)-1,0,255)),n.val("r",a.val(),t.target),!1}break;case l.get(0):switch(t.keyCode){case 38:return l.val(b.call(r,(l.val()<<0)+1,0,255)),n.val("g",l.val(),t.target),!1;case 40:return l.val(b.call(r,(l.val()<<0)-1,0,255)),n.val("g",l.val(),t.target),!1}break;case c.get(0):switch(t.keyCode){case 38:return c.val(b.call(r,(c.val()<<0)+1,0,255)),n.val("b",c.val(),t.target),!1;case 40:return c.val(b.call(r,(c.val()<<0)-1,0,255)),n.val("b",c.val(),t.target),!1}break;case u&&u.get(0):switch(t.keyCode){case 38:return u.val(b.call(r,parseFloat(u.val())+1,0,100)),n.val("a",Math.precision(255*u.val()/100,o),t.target),!1;case 40:return u.val(b.call(r,parseFloat(u.val())-1,0,100)),n.val("a",Math.precision(255*u.val()/100,o),t.target),!1}break;case h.get(0):switch(t.keyCode){case 38:return h.val(b.call(r,(h.val()<<0)+1,0,360)),n.val("h",h.val(),t.target),!1;case 40:return h.val(b.call(r,(h.val()<<0)-1,0,360)),n.val("h",h.val(),t.target),!1}break;case d.get(0):switch(t.keyCode){case 38:return d.val(b.call(r,(d.val()<<0)+1,0,100)),n.val("s",d.val(),t.target),!1;case 40:return d.val(b.call(r,(d.val()<<0)-1,0,100)),n.val("s",d.val(),t.target),!1}break;case f.get(0):switch(t.keyCode){case 38:return f.val(b.call(r,(f.val()<<0)+1,0,100)),n.val("v",f.val(),t.target),!1;case 40:return f.val(b.call(r,(f.val()<<0)-1,0,100)),n.val("v",f.val(),t.target),!1}}}},v=function(t){if(""!=t.target.value||t.target==p.get(0)||(null==i||t.target==i.get(0))&&null!=i){if(!w(t))return t;switch(t.target){case a.get(0):a.val(b.call(r,a.val(),0,255)),n.val("r",a.val(),t.target);break;case l.get(0):l.val(b.call(r,l.val(),0,255)),n.val("g",l.val(),t.target);break;case c.get(0):c.val(b.call(r,c.val(),0,255)),
n.val("b",c.val(),t.target);break;case u&&u.get(0):u.val(b.call(r,u.val(),0,100)),n.val("a",Math.precision(255*u.val()/100,o),t.target);break;case h.get(0):h.val(b.call(r,h.val(),0,360)),n.val("h",h.val(),t.target);break;case d.get(0):d.val(b.call(r,d.val(),0,100)),n.val("s",d.val(),t.target);break;case f.get(0):f.val(b.call(r,f.val(),0,100)),n.val("v",f.val(),t.target);break;case p.get(0):p.val(p.val().replace(/[^a-fA-F0-9]/g,"").toLowerCase().substring(0,6)),i&&i.val(p.val()),n.val("hex",""!=p.val()?p.val():null,t.target);break;case i&&i.get(0):i.val(i.val().replace(/[^a-fA-F0-9]/g,"").toLowerCase().substring(0,6)),p.val(i.val()),n.val("hex",""!=i.val()?i.val():null,t.target);break;case g&&g.get(0):g.val(g.val().replace(/[^a-fA-F0-9]/g,"").toLowerCase().substring(0,2)),n.val("a",null!=g.val()?parseInt(g.val(),16):null,t.target)}}},y=function(t){if(null!=n.val())switch(t.target){case a.get(0):a.val(n.val("r"));break;case l.get(0):l.val(n.val("g"));break;case c.get(0):c.val(n.val("b"));break;case u&&u.get(0):u.val(Math.precision(100*n.val("a")/255,o));break;case h.get(0):h.val(n.val("h"));break;case d.get(0):d.val(n.val("s"));break;case f.get(0):f.val(n.val("v"));break;case p.get(0):case i&&i.get(0):p.val(n.val("hex")),i&&i.val(n.val("hex"));break;case g&&g.get(0):g.val(n.val("ahex").substring(6))}},w=function(t){switch(t.keyCode){case 9:case 16:case 29:case 37:case 39:return!1;case"c".charCodeAt():case"v".charCodeAt():if(t.ctrlKey)return!1}return!0},b=function(t,e,n){return""==t||isNaN(t)?e:t>n?n:e>t?e:t},C=function(t,e){var n=t.val("all");e!=a.get(0)&&a.val(null!=n?n.r:""),e!=l.get(0)&&l.val(null!=n?n.g:""),e!=c.get(0)&&c.val(null!=n?n.b:""),u&&e!=u.get(0)&&u.val(null!=n?Math.precision(100*n.a/255,o):""),e!=h.get(0)&&h.val(null!=n?n.h:""),e!=d.get(0)&&d.val(null!=n?n.s:""),e!=f.get(0)&&f.val(null!=n?n.v:""),e!=p.get(0)&&(i&&e!=i.get(0)||!i)&&p.val(null!=n?n.hex:""),i&&e!=i.get(0)&&e!=p.get(0)&&i.val(null!=n?n.hex:""),g&&e!=g.get(0)&&g.val(null!=n?n.ahex.substring(6):"")},x=function(){a.add(l).add(c).add(u).add(h).add(d).add(f).add(p).add(i).add(g).unbind("keyup",v).unbind("blur",y),a.add(l).add(c).add(u).add(h).add(d).add(f).unbind("keydown",m),n.unbind(C),a=null,l=null,c=null,u=null,h=null,d=null,f=null,p=null,g=null};t.extend(!0,r,{destroy:x}),a.add(l).add(c).add(u).add(h).add(d).add(f).add(p).add(i).add(g).bind("keyup",v).bind("blur",y),a.add(l).add(c).add(u).add(h).add(d).add(f).bind("keydown",m),n.bind(C)};t.jPicker={List:[],Color:function(e){var n,i,o,r,s,l,c,u=this,h=new Array,d=function(t){for(var e=0;e<h.length;e++)h[e].call(u,u,t)},f=function(t,e,h){var p=void 0!==e;if(!p){if(void 0!==t&&null!=t&&""!=t||(t="all"),null==n)return null;switch(t.toLowerCase()){case"ahex":return a.rgbaToHex({r:n,g:i,b:o,a:r});case"hex":return f("ahex").substring(0,6);case"all":return{r:n,g:i,b:o,a:r,h:s,s:l,v:c,hex:f.call(u,"hex"),ahex:f.call(u,"ahex")};default:for(var g={},m=0;m<t.length;m++)switch(t.charAt(m)){case"r":1==t.length?g=n:g.r=n;break;case"g":1==t.length?g=i:g.g=i;break;case"b":1==t.length?g=o:g.b=o;break;case"a":1==t.length?g=r:g.a=r;break;case"h":1==t.length?g=s:g.h=s;break;case"s":1==t.length?g=l:g.s=l;break;case"v":1==t.length?g=c:g.v=c}return g=={}?f.call(u,"all"):g}}if(null==h||h!=u){var v=!1;if(null==t&&(t=""),null==e)return null!=n&&(n=null,v=!0),null!=i&&(i=null,v=!0),null!=o&&(o=null,v=!0),null!=r&&(r=null,v=!0),null!=s&&(s=null,v=!0),null!=l&&(l=null,v=!0),null!=c&&(c=null,v=!0),void(v&&d.call(u,h||u));switch(t.toLowerCase()){case"ahex":case"hex":var g=a.hexToRgba(e&&(e.ahex||e.hex)||e||"00000000");f.call(u,"rgba",{r:g.r,g:g.g,b:g.b,a:"ahex"==t?g.a:null!=r?r:255},h);break;default:if(e&&(null!=e.ahex||null!=e.hex))return void f.call(u,"ahex",e.ahex||e.hex||"00000000",h);var y={},w=!1,b=!1;void 0!==e.r&&-1==!t.indexOf("r")&&(t+="r"),void 0!==e.g&&-1==!t.indexOf("g")&&(t+="g"),void 0!==e.b&&-1==!t.indexOf("b")&&(t+="b"),void 0!==e.a&&-1==!t.indexOf("a")&&(t+="a"),void 0!==e.h&&-1==!t.indexOf("h")&&(t+="h"),void 0!==e.s&&-1==!t.indexOf("s")&&(t+="s"),void 0!==e.v&&-1==!t.indexOf("v")&&(t+="v");for(var m=0;m<t.length;m++)switch(t.charAt(m)){case"r":if(b)continue;w=!0,y.r=e&&e.r&&0|e.r||e&&0|e||0,y.r<0?y.r=0:y.r>255&&(y.r=255),n!=y.r&&(n=y.r,v=!0);break;case"g":if(b)continue;w=!0,y.g=e&&e.g&&0|e.g||e&&0|e||0,y.g<0?y.g=0:y.g>255&&(y.g=255),i!=y.g&&(i=y.g,v=!0);break;case"b":if(b)continue;w=!0,y.b=e&&e.b&&0|e.b||e&&0|e||0,y.b<0?y.b=0:y.b>255&&(y.b=255),o!=y.b&&(o=y.b,v=!0);break;case"a":y.a=e&&null!=e.a?0|e.a:null!=e?0|e:255,y.a<0?y.a=0:y.a>255&&(y.a=255),r!=y.a&&(r=y.a,v=!0);break;case"h":if(w)continue;b=!0,y.h=e&&e.h&&0|e.h||e&&0|e||0,y.h<0?y.h=0:y.h>360&&(y.h=360),s!=y.h&&(s=y.h,v=!0);break;case"s":if(w)continue;b=!0,y.s=e&&null!=e.s?0|e.s:null!=e?0|e:100,y.s<0?y.s=0:y.s>100&&(y.s=100),l!=y.s&&(l=y.s,v=!0);break;case"v":if(w)continue;b=!0,y.v=e&&null!=e.v?0|e.v:null!=e?0|e:100,y.v<0?y.v=0:y.v>100&&(y.v=100),c!=y.v&&(c=y.v,v=!0)}if(v){if(w){n=n||0,i=i||0,o=o||0;var g=a.rgbToHsv({r:n,g:i,b:o});s=g.h,l=g.s,c=g.v}else if(b){s=s||0,l=null!=l?l:100,c=null!=c?c:100;var g=a.hsvToRgb({h:s,s:l,v:c});n=g.r,i=g.g,o=g.b}r=null!=r?r:255,d.call(u,h||u)}}}},p=function(e){t.isFunction(e)&&h.push(e)},g=function(e){if(t.isFunction(e))for(var n;-1!=(n=t.inArray(e,h));)h.splice(n,1)},m=function(){h=null};t.extend(!0,u,{val:f,bind:p,unbind:g,destroy:m}),e&&(null!=e.ahex?f("ahex",e):null!=e.hex?f((null!=e.a?"a":"")+"hex",null!=e.a?{ahex:e.hex+a.intToHex(e.a)}:e):null!=e.r&&null!=e.g&&null!=e.b?f("rgb"+(null!=e.a?"a":""),e):null!=e.h&&null!=e.s&&null!=e.v&&f("hsv"+(null!=e.a?"a":""),e))},ColorMethods:{hexToRgba:function(t){if(t=this.validateHex(t),""==t)return{r:null,g:null,b:null,a:null};var e="00",n="00",i="00",o="255";return 6==t.length&&(t+="ff"),t.length>6?(e=t.substring(0,2),n=t.substring(2,4),i=t.substring(4,6),o=t.substring(6,t.length)):(t.length>4&&(e=t.substring(4,t.length),t=t.substring(0,4)),t.length>2&&(n=t.substring(2,t.length),t=t.substring(0,2)),t.length>0&&(i=t.substring(0,t.length))),{r:this.hexToInt(e),g:this.hexToInt(n),b:this.hexToInt(i),a:this.hexToInt(o)}},validateHex:function(t){return t=t.toLowerCase().replace(/[^a-f0-9]/g,""),t.length>8&&(t=t.substring(0,8)),t},rgbaToHex:function(t){return this.intToHex(t.r)+this.intToHex(t.g)+this.intToHex(t.b)+this.intToHex(t.a)},intToHex:function(t){var e=(0|t).toString(16);return 1==e.length&&(e="0"+e),e.toLowerCase()},hexToInt:function(t){return parseInt(t,16)},rgbToHsv:function(t){var e,n=t.r/255,i=t.g/255,o=t.b/255,r={h:0,s:0,v:0},s=0,a=0;return n>=i&&n>=o?(a=n,s=i>o?o:i):i>=o&&i>=n?(a=i,s=n>o?o:n):(a=o,s=i>n?n:i),r.v=a,r.s=a?(a-s)/a:0,r.s?(e=a-s,n==a?r.h=(i-o)/e:i==a?r.h=2+(o-n)/e:r.h=4+(n-i)/e,r.h=parseInt(60*r.h),r.h<0&&(r.h+=360)):r.h=0,r.s=100*r.s|0,r.v=100*r.v|0,r},hsvToRgb:function(t){var e={r:0,g:0,b:0,a:100},n=t.h,i=t.s,o=t.v;if(0==i)0==o?e.r=e.g=e.b=0:e.r=e.g=e.b=255*o/100|0;else{360==n&&(n=0),n/=60,i/=100,o/=100;var r=0|n,s=n-r,a=o*(1-i),l=o*(1-i*s),c=o*(1-i*(1-s));switch(r){case 0:e.r=o,e.g=c,e.b=a;break;case 1:e.r=l,e.g=o,e.b=a;break;case 2:e.r=a,e.g=o,e.b=c;break;case 3:e.r=a,e.g=l,e.b=o;break;case 4:e.r=c,e.g=a,e.b=o;break;case 5:e.r=o,e.g=a,e.b=l}e.r=255*e.r|0,e.g=255*e.g|0,e.b=255*e.b|0}return e}}};var r=t.jPicker.Color,s=t.jPicker.List,a=t.jPicker.ColorMethods;t.fn.jPicker=function(e){var l=arguments;return this.each(function(){var e=this,c={window:{title:null,effects:{type:"slide",speed:{show:"slow",hide:"fast"}},position:{x:"screenCenter",y:"top"},expandable:!1,liveUpdate:!0,alphaSupport:!1,alphaPrecision:0,updateInputColor:!0},c:{mode:"h",active:new r({ahex:"#ffcc00ff"}),quickList:[new r({h:360,s:33,v:100}),new r({h:360,s:66,v:100}),new r({h:360,s:100,v:100}),new r({h:360,s:100,v:75}),new r({h:360,s:100,v:50}),new r({h:180,s:0,v:100}),new r({h:30,s:33,v:100}),new r({h:30,s:66,v:100}),new r({h:30,s:100,v:100}),new r({h:30,s:100,v:75}),new r({h:30,s:100,v:50}),new r({h:180,s:0,v:90}),new r({h:60,s:33,v:100}),new r({h:60,s:66,v:100}),new r({h:60,s:100,v:100}),new r({h:60,s:100,v:75}),new r({h:60,s:100,v:50}),new r({h:180,s:0,v:80}),new r({h:90,s:33,v:100}),new r({h:90,s:66,v:100}),new r({h:90,s:100,v:100}),new r({h:90,s:100,v:75}),new r({h:90,s:100,v:50}),new r({h:180,s:0,v:70}),new r({h:120,s:33,v:100}),new r({h:120,s:66,v:100}),new r({h:120,s:100,v:100}),new r({h:120,s:100,v:75}),new r({h:120,s:100,v:50}),new r({h:180,s:0,v:60}),new r({h:150,s:33,v:100}),new r({h:150,s:66,v:100}),new r({h:150,s:100,v:100}),new r({h:150,s:100,v:75}),new r({h:150,s:100,v:50}),new r({h:180,s:0,v:50}),new r({h:180,s:33,v:100}),new r({h:180,s:66,v:100}),new r({h:180,s:100,v:100}),new r({h:180,s:100,v:75}),new r({h:180,s:100,v:50}),new r({h:180,s:0,v:40}),new r({h:210,s:33,v:100}),new r({h:210,s:66,v:100}),new r({h:210,s:100,v:100}),new r({h:210,s:100,v:75}),new r({h:210,s:100,v:50}),new r({h:180,s:0,v:30}),new r({h:240,s:33,v:100}),new r({h:240,s:66,v:100}),new r({h:240,s:100,v:100}),new r({h:240,s:100,v:75}),new r({h:240,s:100,v:50}),new r({h:180,s:0,v:20}),new r({h:270,s:33,v:100}),new r({h:270,s:66,v:100}),new r({h:270,s:100,v:100}),new r({h:270,s:100,v:75}),new r({h:270,s:100,v:50}),new r({h:180,s:0,v:10}),new r({h:300,s:33,v:100}),new r({h:300,s:66,v:100}),new r({h:300,s:100,v:100}),new r({h:300,s:100,v:75}),new r({h:300,s:100,v:50}),new r({h:180,s:0,v:0}),new r({h:330,s:33,v:100}),new r({h:330,s:66,v:100}),new r({h:330,s:100,v:100}),new r({h:330,s:100,v:75}),new r({h:330,s:100,v:50}),new r]},images:{clientPath:"/images/swatch-colorpicker/",colorMap:{width:256,height:256,arrow:{file:"mappoint.gif",width:15,height:15}},colorBar:{width:20,height:256,arrow:{file:"rangearrows.gif",width:20,height:7}},picker:{file:"picker.gif",width:25,height:24}},localization:{text:{title:"Drag Markers To Pick A Color",newColor:"new",currentColor:"current",ok:"OK",cancel:"Cancel"},tooltips:{colors:{newColor:"New Color - Press &ldquo;OK&rdquo; To Commit",currentColor:"Click To Revert To Original Color"},buttons:{ok:"Commit To This Color Selection",cancel:"Cancel And Revert To Original Color"},hue:{radio:"Set To &ldquo;Hue&rdquo; Color Mode",textbox:"Enter A &ldquo;Hue&rdquo; Value (0-360&deg;)"},saturation:{radio:"Set To &ldquo;Saturation&rdquo; Color Mode",textbox:"Enter A &ldquo;Saturation&rdquo; Value (0-100%)"},value:{radio:"Set To &ldquo;Value&rdquo; Color Mode",textbox:"Enter A &ldquo;Value&rdquo; Value (0-100%)"},red:{radio:"Set To &ldquo;Red&rdquo; Color Mode",textbox:"Enter A &ldquo;Red&rdquo; Value (0-255)"},green:{radio:"Set To &ldquo;Green&rdquo; Color Mode",textbox:"Enter A &ldquo;Green&rdquo; Value (0-255)"},blue:{radio:"Set To &ldquo;Blue&rdquo; Color Mode",textbox:"Enter A &ldquo;Blue&rdquo; Value (0-255)"},alpha:{radio:"Set To &ldquo;Alpha&rdquo; Color Mode",textbox:"Enter A &ldquo;Alpha&rdquo; Value (0-100)"},hex:{textbox:"Enter A &ldquo;Hex&rdquo; Color Value (#000000-#ffffff)",alpha:"Enter A &ldquo;Alpha&rdquo; Value (#00-#ff)"}}}};c.c.current=new r({hex:"#000"}),"input"==t(e).get(0).nodeName.toLowerCase()&&(t.extend(!0,c,{window:{bindToInput:!0,expandable:!0,input:t(e)}}),""==t(e).val()?(c.c.active=new r({hex:null}),c.c.current=new r({hex:null})):a.validateHex(t(e).val())&&(c.c.active=new r({hex:t(e).val(),a:c.c.active.val("a")}),c.c.current=new r({hex:t(e).val(),a:c.c.active.val("a")}))),c.window.expandable?t(e).after('<span class="jPicker"><span class="Icon"><span class="Color">&nbsp;</span><span class="Alpha">&nbsp;</span><span class="Image" title="Click To Open Color Picker">&nbsp;</span><span class="Container">&nbsp;</span></span></span>'):c.window.liveUpdate=!1;var u=parseFloat(navigator.appVersion.split("MSIE")[1])<7&&document.body.filters,h=null,d=null,f=null,p=null,g=null,m=null,v=null,y=null,w=null,b=null,C=null,x=null,S=null,T=null,_=null,E=null,k=null,R=null,A=null,P=null,N=null,O=null,D=null,M=null,H=null,I=null,L=null,F=null,z=function(t){t||(t="r");var n,i,o=wt.active,r=(vt.clientPath,o.val("hex"));switch(c.c.mode=t,t){case"h":if(setTimeout(function(){q.call(e,d,"transparent"),$.call(e,p,0),K.call(e,p,100),$.call(e,g,260),K.call(e,g,100),q.call(e,f,"transparent"),$.call(e,v,0),K.call(e,v,100),$.call(e,y,260),K.call(e,y,100),$.call(e,w,260),K.call(e,w,100),$.call(e,b,260),K.call(e,b,100),$.call(e,x,260),K.call(e,x,100)},0),S.range("all",{minX:0,maxX:100,minY:0,maxY:100}),T.range("rangeY",{minY:0,maxY:360}),null==o.val("ahex"))break;S.val("xy",{x:o.val("s"),y:100-o.val("v")},S),T.val("y",360-o.val("h"),T);break;case"s":if(setTimeout(function(){q.call(e,d,"transparent"),$.call(e,p,-260),$.call(e,g,-520),$.call(e,v,-260),$.call(e,y,-520),$.call(e,x,260),K.call(e,x,100)},0),S.range("all",{minX:0,maxX:360,minY:0,maxY:100}),T.range("rangeY",{minY:0,maxY:100}),null==o.val("ahex"))break;S.val("xy",{x:o.val("h"),y:100-o.val("v")},S),T.val("y",100-o.val("s"),T);break;case"v":if(setTimeout(function(){q.call(e,d,"000000"),$.call(e,p,-780),$.call(e,g,260),q.call(e,f,r),$.call(e,v,-520),$.call(e,y,260),K.call(e,y,100),$.call(e,x,260),K.call(e,x,100)},0),S.range("all",{minX:0,maxX:360,minY:0,maxY:100}),T.range("rangeY",{minY:0,maxY:100}),null==o.val("ahex"))break;S.val("xy",{x:o.val("h"),y:100-o.val("s")},S),T.val("y",100-o.val("v"),T);break;case"r":if(n=-1040,i=-780,S.range("all",{minX:0,maxX:255,minY:0,maxY:255}),T.range("rangeY",{minY:0,maxY:255}),null==o.val("ahex"))break;S.val("xy",{x:o.val("b"),y:255-o.val("g")},S),T.val("y",255-o.val("r"),T);break;case"g":if(n=-1560,i=-1820,S.range("all",{minX:0,maxX:255,minY:0,maxY:255}),T.range("rangeY",{minY:0,maxY:255}),null==o.val("ahex"))break;S.val("xy",{x:o.val("b"),y:255-o.val("r")},S),T.val("y",255-o.val("g"),T);break;case"b":if(n=-2080,i=-2860,S.range("all",{minX:0,maxX:255,minY:0,maxY:255}),T.range("rangeY",{minY:0,maxY:255}),null==o.val("ahex"))break;S.val("xy",{x:o.val("r"),y:255-o.val("g")},S),T.val("y",255-o.val("b"),T);break;case"a":if(setTimeout(function(){q.call(e,d,"transparent"),$.call(e,p,-260),$.call(e,g,-520),$.call(e,v,260),$.call(e,y,260),K.call(e,y,100),$.call(e,x,0),K.call(e,x,100)},0),S.range("all",{minX:0,maxX:360,minY:0,maxY:100}),T.range("rangeY",{minY:0,maxY:255}),null==o.val("ahex"))break;S.val("xy",{x:o.val("h"),y:100-o.val("v")},S),T.val("y",255-o.val("a"),T);break;default:throw"Invalid Mode"}switch(t){case"h":break;case"s":case"v":case"a":setTimeout(function(){K.call(e,p,100),K.call(e,v,100),$.call(e,w,260),K.call(e,w,100),$.call(e,b,260),K.call(e,b,100)},0);break;case"r":case"g":case"b":setTimeout(function(){q.call(e,d,"transparent"),q.call(e,f,"transparent"),K.call(e,v,100),K.call(e,p,100),$.call(e,p,n),$.call(e,g,n-260),$.call(e,v,i-780),$.call(e,y,i-520),$.call(e,w,i),$.call(e,b,i-260),$.call(e,x,260),K.call(e,x,100)},0)}null!=o.val("ahex")&&B.call(e,o)},B=function(t,n){(null==n||n!=T&&n!=S)&&j.call(e,t,n),setTimeout(function(){U.call(e,t),X.call(e,t),Y.call(e,t)},0)},V=function(t,e){var n=wt.active;if(e==S||null!=n.val()){var i=t.val("all");switch(c.c.mode){case"h":n.val("sv",{s:i.x,v:100-i.y},e);break;case"s":case"a":n.val("hv",{h:i.x,v:100-i.y},e);break;case"v":n.val("hs",{h:i.x,s:100-i.y},e);break;case"r":n.val("gb",{g:255-i.y,b:i.x},e);break;case"g":n.val("rb",{r:255-i.y,b:i.x},e);break;case"b":n.val("rg",{r:i.x,g:255-i.y},e)}}},W=function(t,e){var n=wt.active;if(e==T||null!=n.val())switch(c.c.mode){case"h":n.val("h",{h:360-t.val("y")},e);break;case"s":n.val("s",{s:100-t.val("y")},e);break;case"v":n.val("v",{v:100-t.val("y")},e);break;case"r":n.val("r",{r:255-t.val("y")},e);break;case"g":n.val("g",{g:255-t.val("y")},e);break;case"b":n.val("b",{b:255-t.val("y")},e);break;case"a":n.val("a",255-t.val("y"),e)}},j=function(t,e){if(e!=S)switch(c.c.mode){case"h":var n=t.val("sv");S.val("xy",{x:null!=n?n.s:100,y:100-(null!=n?n.v:100)},e);break;case"s":case"a":var i=t.val("hv");S.val("xy",{x:i&&i.h||0,y:100-(null!=i?i.v:100)},e);break;case"v":var o=t.val("hs");S.val("xy",{x:o&&o.h||0,y:100-(null!=o?o.s:100)},e);break;case"r":var r=t.val("bg");S.val("xy",{x:r&&r.b||0,y:255-(r&&r.g||0)},e);break;case"g":var s=t.val("br");S.val("xy",{x:s&&s.b||0,y:255-(s&&s.r||0)},e);break;case"b":var a=t.val("rg");S.val("xy",{x:a&&a.r||0,y:255-(a&&a.g||0)},e)}if(e!=T)switch(c.c.mode){case"h":T.val("y",360-(t.val("h")||0),e);break;case"s":var l=t.val("s");T.val("y",100-(null!=l?l:100),e);break;case"v":var u=t.val("v");T.val("y",100-(null!=u?u:100),e);break;case"r":T.val("y",255-(t.val("r")||0),e);break;case"g":T.val("y",255-(t.val("g")||0),e);break;case"b":T.val("y",255-(t.val("b")||0),e);break;case"a":var h=t.val("a");T.val("y",255-(null!=h?h:255),e)}},U=function(t){try{var n=t.val("all");P.css({backgroundColor:n&&"#"+n.hex||"transparent"}),K.call(e,P,n&&Math.precision(100*n.a/255,4)||0)}catch(i){}},X=function(t){switch(c.c.mode){case"h":q.call(e,d,new r({h:t.val("h")||0,s:100,v:100}).val("hex"));break;case"s":case"a":var n=t.val("s");K.call(e,g,100-(null!=n?n:100));break;case"v":var i=t.val("v");K.call(e,p,null!=i?i:100);break;case"r":K.call(e,g,Math.precision((t.val("r")||0)/255*100,4));break;case"g":K.call(e,g,Math.precision((t.val("g")||0)/255*100,4));break;case"b":K.call(e,g,Math.precision((t.val("b")||0)/255*100))}var o=t.val("a");K.call(e,m,Math.precision(100*(255-(o||0))/255,4))},Y=function(t){switch(c.c.mode){case"h":var n=t.val("a");K.call(e,C,Math.precision(100*(255-(n||0))/255,4));break;case"s":var i=t.val("hva"),o=new r({h:i&&i.h||0,s:100,v:null!=i?i.v:100});q.call(e,f,o.val("hex")),K.call(e,y,100-(null!=i?i.v:100)),K.call(e,C,Math.precision(100*(255-(i&&i.a||0))/255,4));break;case"v":var s=t.val("hsa"),a=new r({h:s&&s.h||0,s:null!=s?s.s:100,v:100});q.call(e,f,a.val("hex")),K.call(e,C,Math.precision(100*(255-(s&&s.a||0))/255,4));break;case"r":case"g":case"b":var l=0,u=0,h=t.val("rgba");"r"==c.c.mode?(l=h&&h.b||0,u=h&&h.g||0):"g"==c.c.mode?(l=h&&h.b||0,u=h&&h.r||0):"b"==c.c.mode&&(l=h&&h.r||0,u=h&&h.g||0);var d=u>l?l:u;K.call(e,y,l>u?Math.precision((l-u)/(255-u)*100,4):0),K.call(e,w,u>l?Math.precision((u-l)/(255-l)*100,4):0),K.call(e,b,Math.precision(d/255*100,4)),K.call(e,C,Math.precision(100*(255-(h&&h.a||0))/255,4));break;case"a":var n=t.val("a");q.call(e,f,t.val("hex")||"000000"),K.call(e,C,null!=n?0:100),K.call(e,x,null!=n?100:0)}},q=function(t,e){t.css({backgroundColor:e&&6==e.length&&"#"+e||"transparent"})},G=function(t,e){!u||-1==e.indexOf("AlphaBar.png")&&-1==e.indexOf("Bars.png")&&-1==e.indexOf("Maps.png")?t.css({backgroundImage:"url('"+e+"')"}):(t.attr("pngSrc",e),t.css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"', sizingMethod='scale')"}))},$=function(t,e){t.css({top:e+"px"})},K=function(t,e){if(t.css({visibility:e>0?"visible":"hidden"}),e>0&&100>e)if(u){var n=t.attr("pngSrc");null==n||-1==n.indexOf("AlphaBar.png")&&-1==n.indexOf("Bars.png")&&-1==n.indexOf("Maps.png")?t.css({opacity:Math.precision(e/100,4)}):t.css({filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+n+"', sizingMethod='scale') progid:DXImageTransform.Microsoft.Alpha(opacity="+e+")"})}else t.css({opacity:Math.precision(e/100,4)});else if(0==e||100==e)if(u){var n=t.attr("pngSrc");null==n||-1==n.indexOf("AlphaBar.png")&&-1==n.indexOf("Bars.png")&&-1==n.indexOf("Maps.png")?t.css({opacity:""}):t.css({filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+n+"', sizingMethod='scale')"})}else t.css({opacity:""})},Q=function(){wt.active.val("ahex",wt.current.val("ahex"))},Z=function(){wt.current.val("ahex",wt.active.val("ahex"))},J=function(n){t(this).parents("tbody:first").find('input:radio[value!="'+n.target.value+'"]').removeAttr("checked"),z.call(e,n.target.value)},tt=function(){Q.call(e)},et=function(){Q.call(e),c.window.expandable&&pt.call(e),t.isFunction(dt)&&dt.call(e,wt.active,D)},nt=function(){Z.call(e),c.window.expandable&&pt.call(e),t.isFunction(ut)&&ut.call(e,wt.active,O)},it=function(){ft.call(e)},ot=function(t,n){var i=t.val("hex");N.css({backgroundColor:i&&"#"+i||"transparent"}),K.call(e,N,Math.precision(100*(t.val("a")||0)/255,4))},rt=function(t,n){var i=t.val("hex"),o=t.val("va");H.css({backgroundColor:i&&"#"+i||"transparent"}),K.call(e,I,Math.precision(100*(255-(o&&o.a||0))/255,4)),c.window.bindToInput&&c.window.updateInputColor&&c.window.input.css({backgroundColor:i&&"#"+i||"transparent",color:null==o||o.v>75?"#000000":"#ffffff"})},st=function(e){c.window.element,c.window.page;E=parseInt(h.css("left")),k=parseInt(h.css("top")),R=e.pageX,A=e.pageY,t(document).bind("mousemove",at).bind("mouseup",lt),e.preventDefault()},at=function(e){return h.css({left:E-(R-e.pageX)+"px",top:k-(A-e.pageY)+"px"}),c.window.expandable&&!t.support.boxModel&&h.prev().css({left:h.css("left"),top:h.css("top")}),e.stopPropagation(),e.preventDefault(),!1},lt=function(e){return t(document).unbind("mousemove",at).unbind("mouseup",lt),e.stopPropagation(),e.preventDefault(),!1},ct=function(e){return e.preventDefault(),e.stopPropagation(),wt.active.val("ahex",t(this).attr("title")||null,e.target),!1},ut=t.isFunction(l[1])&&l[1]||null,ht=t.isFunction(l[2])&&l[2]||null,dt=t.isFunction(l[3])&&l[3]||null,ft=function(){wt.current.val("ahex",wt.active.val("ahex"));var e=function(){if(c.window.expandable&&!t.support.boxModel){var e=h.find("table:first");h.before("<iframe/>"),h.prev().css({width:e.width(),height:h.height(),opacity:0,position:"absolute",left:h.css("left"),top:h.css("top")})}};switch(c.window.expandable&&(t(document.body).children("div.jPicker.Container").css({zIndex:10}),h.css({zIndex:20})),c.window.effects.type){case"fade":h.fadeIn(c.window.effects.speed.show,e);break;case"slide":h.slideDown(c.window.effects.speed.show,e);break;case"show":default:h.show(c.window.effects.speed.show,e)}},pt=function(){var e=function(){c.window.expandable&&h.css({zIndex:10}),c.window.expandable&&!t.support.boxModel&&h.prev().remove()};switch(c.window.effects.type){case"fade":h.fadeOut(c.window.effects.speed.hide,e);break;case"slide":h.slideUp(c.window.effects.speed.hide,e);break;case"show":default:h.hide(c.window.effects.speed.hide,e)}},gt=function(){var s=c.window,a=s.expandable?t(e).next().find(".Container:first"):null;h=t(s.expandable?"<div/>":e),h.addClass("jPicker Container"),s.expandable&&h.hide(),h.get(0).onselectstart=function(t){return"input"!==t.target.nodeName.toLowerCase()?!1:void 0};var l=wt.active.val("all");s.alphaPrecision<0?s.alphaPrecision=0:s.alphaPrecision>2&&(s.alphaPrecision=2);var u='<table class="jPicker" cellpadding="0" cellspacing="0"><tbody>'+(s.expandable?'<tr><td class="Move" colspan="5">&nbsp;</td></tr>':"")+'<tr><td rowspan="9"><h2 class="Title">'+(s.title||yt.text.title)+'</h2><div class="Map"><span class="Map1">&nbsp;</span><span class="Map2">&nbsp;</span><span class="Map3">&nbsp;</span><img src="'+vt.clientPath+vt.colorMap.arrow.file+'" class="Arrow"/></div></td><td rowspan="9"><div class="Bar"><span class="Map1">&nbsp;</span><span class="Map2">&nbsp;</span><span class="Map3">&nbsp;</span><span class="Map4">&nbsp;</span><span class="Map5">&nbsp;</span><span class="Map6">&nbsp;</span><img src="'+vt.clientPath+vt.colorBar.arrow.file+'" class="Arrow"/></div></td><td colspan="2" class="Preview">'+yt.text.newColor+'<div><span class="Active" title="'+yt.tooltips.colors.newColor+'">&nbsp;</span><span class="Current" title="'+yt.tooltips.colors.currentColor+'">&nbsp;</span></div>'+yt.text.currentColor+'</td><td rowspan="9" class="Button"><input type="button" class="Ok" value="'+yt.text.ok+'" title="'+yt.tooltips.buttons.ok+'"/><input type="button" class="Cancel" value="'+yt.text.cancel+'" title="'+yt.tooltips.buttons.cancel+'"/><hr/><div class="Grid">&nbsp;</div></td></tr><tr class="Hue"><td class="Radio"><label title="'+yt.tooltips.hue.radio+'"><input type="radio" value="h"'+("h"==c.c.mode?' checked="checked"':"")+'/>H:</label></td><td class="Text"><input type="text" maxlength="3" value="'+(null!=l?l.h:"")+'" title="'+yt.tooltips.hue.textbox+'"/>&nbsp;&deg;</td></tr><tr class="Saturation"><td class="Radio"><label title="'+yt.tooltips.saturation.radio+'"><input type="radio" value="s"'+("s"==c.c.mode?' checked="checked"':"")+'/>S:</label></td><td class="Text"><input type="text" maxlength="3" value="'+(null!=l?l.s:"")+'" title="'+yt.tooltips.saturation.textbox+'"/>&nbsp;%</td></tr><tr class="Value"><td class="Radio"><label title="'+yt.tooltips.value.radio+'"><input type="radio" value="v"'+("v"==c.c.mode?' checked="checked"':"")+'/>V:</label><br/><br/></td><td class="Text"><input type="text" maxlength="3" value="'+(null!=l?l.v:"")+'" title="'+yt.tooltips.value.textbox+'"/>&nbsp;%<br/><br/></td></tr><tr class="Red"><td class="Radio"><label title="'+yt.tooltips.red.radio+'"><input type="radio" value="r"'+("r"==c.c.mode?' checked="checked"':"")+'/>R:</label></td><td class="Text"><input type="text" maxlength="3" value="'+(null!=l?l.r:"")+'" title="'+yt.tooltips.red.textbox+'"/></td></tr><tr class="Green"><td class="Radio"><label title="'+yt.tooltips.green.radio+'"><input type="radio" value="g"'+("g"==c.c.mode?' checked="checked"':"")+'/>G:</label></td><td class="Text"><input type="text" maxlength="3" value="'+(null!=l?l.g:"")+'" title="'+yt.tooltips.green.textbox+'"/></td></tr><tr class="Blue"><td class="Radio"><label title="'+yt.tooltips.blue.radio+'"><input type="radio" value="b"'+("b"==c.c.mode?' checked="checked"':"")+'/>B:</label></td><td class="Text"><input type="text" maxlength="3" value="'+(null!=l?l.b:"")+'" title="'+yt.tooltips.blue.textbox+'"/></td></tr><tr class="Alpha"><td class="Radio">'+(s.alphaSupport?'<label title="'+yt.tooltips.alpha.radio+'"><input type="radio" value="a"'+("a"==c.c.mode?' checked="checked"':"")+"/>A:</label>":"&nbsp;")+'</td><td class="Text">'+(s.alphaSupport?'<input type="text" maxlength="'+(3+s.alphaPrecision)+'" value="'+(null!=l?Math.precision(100*l.a/255,s.alphaPrecision):"")+'" title="'+yt.tooltips.alpha.textbox+'"/>&nbsp;%':"&nbsp;")+'</td></tr><tr class="Hex"><td colspan="2" class="Text"><label title="'+yt.tooltips.hex.textbox+'">#:<input type="text" maxlength="6" class="Hex" value="'+(null!=l?l.hex:"")+'"/></label>'+(s.alphaSupport?'<input type="text" maxlength="2" class="AHex" value="'+(null!=l?l.ahex.substring(6):"")+'" title="'+yt.tooltips.hex.alpha+'"/></td>':"&nbsp;")+"</tr></tbody></table>";s.expandable?(h.html(u),0==t(document.body).children("div.jPicker.Container").length?t(document.body).prepend(h):t(document.body).children("div.jPicker.Container:last").after(h),h.mousedown(function(){t(document.body).children("div.jPicker.Container").css({zIndex:10}),h.css({zIndex:20})}),h.css({left:"left"==s.position.x?a.offset().left-530-("center"==s.position.y?25:0)+"px":"center"==s.position.x?a.offset().left-260+"px":"right"==s.position.x?a.offset().left-10+("center"==s.position.y?25:0)+"px":"screenCenter"==s.position.x?(t(document).width()>>1)-260+"px":a.offset().left+parseInt(s.position.x)+"px",position:"absolute",top:"top"==s.position.y?a.offset().top-312+"px":"center"==s.position.y?a.offset().top-156+"px":"bottom"==s.position.y?a.offset().top+25+"px":a.offset().top+parseInt(s.position.y)+"px"})):(h=t(e),h.html(u));var E=h.find("tbody:first");d=E.find("div.Map:first"),f=E.find("div.Bar:first");var k=d.find("span"),R=f.find("span");p=k.filter(".Map1:first"),g=k.filter(".Map2:first"),m=k.filter(".Map3:first"),v=R.filter(".Map1:first"),y=R.filter(".Map2:first"),w=R.filter(".Map3:first"),b=R.filter(".Map4:first"),C=R.filter(".Map5:first"),x=R.filter(".Map6:first"),S=new n(d,{map:{width:vt.colorMap.width,height:vt.colorMap.height},arrow:{image:vt.clientPath+vt.colorMap.arrow.file,width:vt.colorMap.arrow.width,height:vt.colorMap.arrow.height}}),S.bind(V),T=new n(f,{map:{width:vt.colorBar.width,height:vt.colorBar.height},arrow:{image:vt.clientPath+vt.colorBar.arrow.file,width:vt.colorBar.arrow.width,height:vt.colorBar.arrow.height}}),T.bind(W),_=new o(E,wt.active,s.expandable&&s.bindToInput?s.input:null,s.alphaPrecision);var A=null!=l?l.hex:null,j=E.find(".Preview"),U=E.find(".Button");if(P=j.find(".Active:first").css({backgroundColor:A&&"#"+A||"transparent"}),N=j.find(".Current:first").css({backgroundColor:A&&"#"+A||"transparent"}).bind("click",tt),K.call(e,N,Math.precision(100*wt.current.val("a"))/255,4),O=U.find(".Ok:first").bind("click",nt),D=U.find(".Cancel:first").bind("click",et),M=U.find(".Grid:first"),setTimeout(function(){G.call(e,p,vt.clientPath+"Maps.png"),G.call(e,g,vt.clientPath+"Maps.png"),G.call(e,m,vt.clientPath+"map-opacity.png"),G.call(e,v,vt.clientPath+"Bars.png"),G.call(e,y,vt.clientPath+"Bars.png"),G.call(e,w,vt.clientPath+"Bars.png"),G.call(e,b,vt.clientPath+"Bars.png"),G.call(e,C,vt.clientPath+"bar-opacity.png"),G.call(e,x,vt.clientPath+"AlphaBar.png"),G.call(e,j.find("div:first"),vt.clientPath+"preview-opacity.png")},0),E.find("td.Radio input").bind("click",J),wt.quickList&&wt.quickList.length>0){var X="";for(i=0;i<wt.quickList.length;i++){"string"==(typeof wt.quickList[i]).toString().toLowerCase()&&(wt.quickList[i]=new r({hex:wt.quickList[i]}));var Y=wt.quickList[i].val("a"),q=wt.quickList[i].val("ahex");!s.alphaSupport&&q&&(q=q.substring(0,6)+"ff");var $=wt.quickList[i].val("hex");X+='<span class="QuickColor"'+(q&&' title="#'+q+'"'||"")+' style="background-color:'+($&&"#"+$||"")+";"+($?"":"background-image:url("+vt.clientPath+"NoColor.png)")+(s.alphaSupport&&Y&&255>Y?";opacity:"+Math.precision(Y/255,4)+";filter:Alpha(opacity="+Math.precision(Y/2.55,4)+")":"")+'">&nbsp;</span>'}G.call(e,M,vt.clientPath+"bar-opacity.png"),M.html(X),M.find(".QuickColor").click(ct)}z.call(e,c.c.mode),wt.active.bind(B),t.isFunction(ht)&&wt.active.bind(ht),wt.current.bind(ot),s.expandable?(e.icon=a.parents(".Icon:first"),H=e.icon.find(".Color:first").css({backgroundColor:A&&"#"+A||"transparent"}),I=e.icon.find(".Alpha:first"),G.call(e,I,vt.clientPath+"bar-opacity.png"),K.call(e,I,Math.precision(100*(255-(null!=l?l.a:0))/255,4)),L=e.icon.find(".Image:first").css({backgroundImage:"url('"+vt.clientPath+vt.picker.file+"')"}).bind("click",it),s.bindToInput&&s.updateInputColor&&s.input.css({backgroundColor:A&&"#"+A||"transparent",color:null==l||l.v>75?"#000000":"#ffffff"}),F=E.find(".Move:first").bind("mousedown",st),wt.active.bind(rt)):ft.call(e)},mt=function(){for(h.find("td.Radio input").unbind("click",J),N.unbind("click",tt),D.unbind("click",et),O.unbind("click",nt),c.window.expandable&&(L.unbind("click",it),F.unbind("mousedown",st),e.icon=null),h.find(".QuickColor").unbind("click",ct),d=null,f=null,p=null,g=null,m=null,v=null,y=null,w=null,b=null,C=null,x=null,S.destroy(),S=null,T.destroy(),T=null,_.destroy(),_=null,P=null,N=null,O=null,D=null,M=null,ut=null,dt=null,ht=null,h.html(""),i=0;i<s.length;i++)s[i]==e&&s.splice(i,1)},vt=c.images,yt=c.localization,wt={active:new r("string"==(typeof c.c.active).toString().toLowerCase()?{ahex:!c.window.alphaSupport&&c.c.active?c.c.active.substring(0,6)+"ff":c.c.active}:{ahex:!c.window.alphaSupport&&c.c.active.val("ahex")?c.c.active.val("ahex").substring(0,6)+"ff":c.c.active.val("ahex")}),current:new r("string"==(typeof c.c.active).toString().toLowerCase()?{ahex:!c.window.alphaSupport&&c.c.active?c.c.active.substring(0,6)+"ff":c.c.active}:{ahex:!c.window.alphaSupport&&c.c.active.val("ahex")?c.c.active.val("ahex").substring(0,6)+"ff":c.c.active.val("ahex")}),quickList:c.c.quickList};t.extend(!0,e,{commitCallback:ut,liveCallback:ht,cancelCallback:dt,color:wt,show:ft,hide:pt,destroy:mt}),s.push(e),setTimeout(function(){gt.call(e)},0)})},t.fn.jPicker.defaults={}}(jQuery,"1.1.6")},{}],"jquery.classygradient":[function(t,e,n){!function(t){t.ClassyGradient=function(e,n){var i,o,r,s,a,l,c,u,h,d,f,p={gradient:'0% #F1b916,100% #9d6126"',width:300,height:18,point:8,orientation:"vertical",target:"",tooltip:"0% #feffff,100% #ededed",onChange:function(){},onInit:function(){}},g=this,m=t(e),e=e,v=new Array;g.settings={},g.__constructor=function(){g.settings=t.extend({},p,n),g.update(),g.settings.onInit()},g.update=function(){y(),w(),b()},g.getCSS=function(){var e="",n="0%",i="100%",o="left bottom",r="top",s="0";"horizontal"==g.settings.orientation&&(n="100%",i="0%",o="right top",r="left",s="1");var a='<svg xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="gradient" x1="0%" y1="0%" x2="'+n+'" y2="'+i+'">',l=("progid:DXImageTransform.Microsoft.gradient( startColorstr='"+v[0][1]+"', endColorstr='"+v[v.length-1][1]+"',GradientType="+s+")",
"-webkit-gradient(linear, left top, "+o),c="";return t.each(v,function(t,e){l+=", color-stop("+e[0]+", "+e[1]+")",c+=","+e[1]+" "+e[0],a+='<stop offset="'+e[0]+'" style="stop-color:'+e[1]+';" />'}),l+=")",c=c.substr(1),a+='</linearGradient></defs><rect fill="url(#gradient)" height="100%" width="100%" /></svg>',a=P(a),e+="background: url(data:image/svg+xml;base64,"+a+");\n",e+="background: "+l+";\n",e+="background: -moz-linear-gradient("+r+","+c+");\n",e+="background: -webkit-linear-gradient("+r+","+c+");\n",e+="background: -o-linear-gradient("+r+","+c+");\n",e+="background: -ms-linear-gradient("+r+","+c+");\n",e+="background: linear-gradient("+r+","+c+");"},g.getArray=function(){return v},g.getString=function(){var e="";return t.each(v,function(t,n){e+=n[0]+" "+n[1]+","}),e=e.substr(0,e.length-1)},g.setOrientation=function(t){g.settings.orientation=t,_()};var y=function(){v=new Array,v=t.isArray(g.settings.gradient)?g.settings.gradient:k(g.settings.gradient)},w=function(){m.html(""),i=t('<div class="ClassyGradient"></div>'),o=t('<canvas class="canvas" width="'+g.settings.width+'" height="'+g.settings.height+'"></canvas>'),i.append(o),h=o.get(0).getContext("2d"),r=t('<div class="points"></div>'),r.css("width",g.settings.width+Math.round(g.settings.point/2+1)+"px"),i.append(r),s=t('<div class="info"></div>'),s.append('<div class="arrow"></div>'),i.append(s),a=t('<div class="content"></div>'),s.append(a),f=k(g.settings.tooltip),T(a,f),a.css("color",g.settings.tooltipTextColor),s.find(".arrow").css("borderColor","transparent transparent "+f[0][1]+" transparent"),m.hover(function(){m.addClass("hover")},function(){m.removeClass("hover")}),l=t('<div class="point-color"><div style="background-color: #00ff00"></div></div>'),c=t('<span class="point-position">%</span>'),u=t('<a href="javascript:" class="delete"></a>'),a.append(l,c,u),m.append(i);var e=function(e){t(".point-color div").css("backgroundColor",e),d.css("backgroundColor",e),S(),_()};l.click(function(){return app.trigger("request-color",l,e),!1}),t(document).bind("click",function(){m.is(".hover")||s.hide("fast")}),o.unbind("click"),o.bind("click",function(e){var n=o.offset(),i=e.pageX-n.left;i=Math.round(100*i/g.settings.width);var s="#000000",a=999999999999;t.each(v,function(t,e){parseInt(e[0])<i&&i-parseInt(e[0])<a?(a=i-parseInt(e[0]),s=e[1]):parseInt(e[0])>i&&parseInt(e[0])-i<a&&(a=parseInt(e[0])-i,s=e[1])}),v.push([i+"%",s]),v.sort(A),b(),t.each(v,function(t,e){e[0]==i+"%"&&x(r.find(".point:eq("+t+")"))})})},b=function(){C(),S(),_()},C=function(){r.html(""),t.each(v,function(t,e){r.append('<div class="point" style="background-color: '+e[1]+"; left:"+parseInt(e[0])*g.settings.width/100+"px; top:-"+t*(g.settings.point+2)+'px"><div class="arrow"></div></div>')}),r.find(".point").css("width",g.settings.point+"px"),r.find(".point").css("height",g.settings.point+"px"),r.find(".point").mouseup(function(){x(this)}),r.find(".point").draggable({axis:"x",containment:"parent",drag:function(){x(this),S(),_()}})},x=function(e){d=t(e);var n=t(e).css("backgroundColor"),i=parseInt(t(e).css("left"));i=Math.round(i/g.settings.width*100),n=n.substr(4,n.length),n=n.substr(0,n.length-1),l.ColorPickerSetColor(R(n.split(","))),l.find("div").css("backgroundColor",R(n.split(","))),c.html("Position: "+i+"%"),u.unbind("click"),u.bind("click",function(){v.length>1&&(v.splice(d.index(),1),b(),m.find(".info").hide("fast"))});var o=parseInt(t(e).css("left"))-30;m.find(".info").css("marginLeft",o+"px"),m.find(".info").show("fast")},S=function(){v=new Array,m.find(".point").each(function(e,n){var i=Math.round(parseInt(t(n).css("left"))/g.settings.width*100),o=t(n).css("backgroundColor").substr(4,t(n).css("backgroundColor").length-5);o=R(o.split(",")),v.push([i+"%",o])}),v.sort(A),E(),g.settings.onChange(g.getString(),g.getCSS(),g.getArray())},T=function(e,n){var i="0%",r="100%",s="left bottom",l="top",c="0";e!=o&&"horizontal"!=g.settings.orientation||(i="100%",r="0%",s="right top",l="left",c="1");var u='<svg xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="gradient" x1="0%" y1="0%" x2="'+i+'" y2="'+r+'">',h=("progid:DXImageTransform.Microsoft.gradient( startColorstr='"+n[0][1]+"', endColorstr='"+n[n.length-1][1]+"',GradientType="+c+")","-webkit-gradient(linear, left top, "+s),d="";if(t.each(n,function(t,e){h+=", color-stop("+e[0]+", "+e[1]+")",d+=","+e[1]+" "+e[0],u+='<stop offset="'+e[0]+'" style="stop-color:'+e[1]+';" />'}),h+=")",d=d.substr(1),u+="</linearGradient></defs>",e==a){var f=parseInt(a.css("borderRadius"));u+='<rect fill="url(#gradient)" height="100%" width="100%" rx="'+f+'" ry="'+f+'" />'}else u+='<rect fill="url(#gradient)" height="100%" width="100%" />';u+="</svg>",u=P(u),e.css("background","url(data:image/svg+xml;base64,"+u+")"),e.css("background",h),e.css("background","-moz-linear-gradient("+l+","+d+")"),e.css("background","-webkit-linear-gradient("+l+","+d+")"),e.css("background","-o-linear-gradient("+l+","+d+")"),e.css("background","-ms-linear-gradient("+l+","+d+")"),e.css("background","linear-gradient("+l+","+d+")")},_=function(){if(""!=g.settings.target){var e=t(g.settings.target);T(e,v)}},E=function(){var e=h.createLinearGradient(0,0,g.settings.width,0);t.each(v,function(t,n){e.addColorStop(parseInt(n[0])/100,n[1])}),h.clearRect(0,0,g.settings.width,g.settings.height),h.fillStyle=e,h.fillRect(0,0,g.settings.width,g.settings.height),g.settings.onChange(g.getString(),g.getCSS(),g.getArray())},k=function(e){var n=new Array,i=e.split(",");return t.each(i,function(t,e){var i;"100"==e.substr(e.indexOf("%")-3,e.indexOf("%"))||"100%"==e.substr(e.indexOf("%")-3,e.indexOf("%"))?i="100%":e.indexOf("%")>1?(i=parseInt(e.substr(e.indexOf("%")-2,e.indexOf("%"))),i+="%"):(i=parseInt(e.substr(e.indexOf("%")-1,e.indexOf("%"))),i+="%");var o=e.substr(e.indexOf("#"),7);n.push([i,o])}),n},R=function(t){function e(t){return t=parseInt(t,10),isNaN(t)?"00":(t=Math.max(0,Math.min(t,255)),"0123456789ABCDEF".charAt((t-t%16)/16)+"0123456789ABCDEF".charAt(t%16))}var n=t[0],i=t[1],o=t[2];return"#"+e(n)+e(i)+e(o)},A=function(t,e){return parseInt(t[0])<parseInt(e[0])?-1:parseInt(t[0])>parseInt(e[0])?1:0},P=function(t){for(var e,n,i,o,r,s,a,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",u=0;u<t.length;)e=t.charCodeAt(u++),n=t.charCodeAt(u++),i=t.charCodeAt(u++),o=e>>2,r=(3&e)<<4|n>>4,s=(15&n)<<2|i>>6,a=63&i,isNaN(n)?s=a=64:isNaN(i)&&(a=64),c+=l.charAt(o)+l.charAt(r)+l.charAt(s)+l.charAt(a);return c};g.__constructor()},t.fn.ClassyGradient=function(e){return this.each(function(){if(void 0==t(this).data("ClassyGradient")){var n=new t.ClassyGradient(this,e);t(this).data("ClassyGradient",n)}})}}(jQuery)},{}],"jquery.colorpicker":[function(t,e,n){!function(t){var e=function(){var e=65,n='<div class="colorpicker"><div class="colorpicker_color"><div><div></div></div></div><div class="colorpicker_hue"><div></div></div><div class="colorpicker_new_color"></div><div class="colorpicker_current_color"></div><div class="colorpicker_hex"><input type="text" maxlength="6" size="6" /></div><div class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_submit"></div></div>',i={eventName:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},color:"ff0000",livePreview:!0,flat:!1},o=function(e,n){var i=L(e);t(n).data("colorpicker").fields.eq(1).val(i.r).end().eq(2).val(i.g).end().eq(3).val(i.b).end()},r=function(e,n){t(n).data("colorpicker").fields.eq(4).val(e.h).end().eq(5).val(e.s).end().eq(6).val(e.b).end()},s=function(e,n){t(n).data("colorpicker").fields.eq(0).val(z(e)).end()},a=function(e,n){t(n).data("colorpicker").selector.css("backgroundColor","#"+z({h:e.h,s:100,b:100})),t(n).data("colorpicker").selectorIndic.css({left:parseInt(150*e.s/100,10),top:parseInt(150*(100-e.b)/100,10)})},l=function(e,n){t(n).data("colorpicker").hue.css("top",parseInt(150-150*e.h/360,10))},c=function(e,n){t(n).data("colorpicker").currentColor.css("backgroundColor","#"+z(e))},u=function(e,n){t(n).data("colorpicker").newColor.css("backgroundColor","#"+z(e))},h=function(n){var i=n.charCode||n.keyCode||-1;if(i>e&&90>=i||32==i)return!1;var o=t(this).parent().parent();o.data("colorpicker").livePreview===!0&&d.apply(this)},d=function(e){var n,i=t(this).parent().parent();this.parentNode.className.indexOf("_hex")>0?i.data("colorpicker").color=n=H(D(this.value)):this.parentNode.className.indexOf("_hsb")>0?i.data("colorpicker").color=n=N({h:parseInt(i.data("colorpicker").fields.eq(4).val(),10),s:parseInt(i.data("colorpicker").fields.eq(5).val(),10),b:parseInt(i.data("colorpicker").fields.eq(6).val(),10)}):i.data("colorpicker").color=n=I(O({r:parseInt(i.data("colorpicker").fields.eq(1).val(),10),g:parseInt(i.data("colorpicker").fields.eq(2).val(),10),b:parseInt(i.data("colorpicker").fields.eq(3).val(),10)})),e&&(o(n,i.get(0)),s(n,i.get(0)),r(n,i.get(0))),a(n,i.get(0)),l(n,i.get(0)),u(n,i.get(0)),i.data("colorpicker").onChange.apply(i,[n,z(n),L(n)])},f=function(e){var n=t(this).parent().parent();n.data("colorpicker").fields.parent().removeClass("colorpicker_focus")},p=function(){e=this.parentNode.className.indexOf("_hex")>0?70:65,t(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus"),t(this).parent().addClass("colorpicker_focus")},g=function(e){var n=t(this).parent().find("input").focus(),i={el:t(this).parent().addClass("colorpicker_slider"),max:this.parentNode.className.indexOf("_hsb_h")>0?360:this.parentNode.className.indexOf("_hsb")>0?100:255,y:e.pageY,field:n,val:parseInt(n.val(),10),preview:t(this).parent().parent().data("colorpicker").livePreview};t(document).bind("mouseup",i,v),t(document).bind("mousemove",i,m)},m=function(t){return t.data.field.val(Math.max(0,Math.min(t.data.max,parseInt(t.data.val+t.pageY-t.data.y,10)))),t.data.preview&&d.apply(t.data.field.get(0),[!0]),!1},v=function(e){return d.apply(e.data.field.get(0),[!0]),e.data.el.removeClass("colorpicker_slider").find("input").focus(),t(document).unbind("mouseup",v),t(document).unbind("mousemove",m),!1},y=function(e){var n={cal:t(this).parent(),y:t(this).offset().top};n.preview=n.cal.data("colorpicker").livePreview,t(document).bind("mouseup",n,b),t(document).bind("mousemove",n,w)},w=function(t){return d.apply(t.data.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,t.pageY-t.data.y)))/150,10)).get(0),[t.data.preview]),!1},b=function(e){return o(e.data.cal.data("colorpicker").color,e.data.cal.get(0)),s(e.data.cal.data("colorpicker").color,e.data.cal.get(0)),t(document).unbind("mouseup",b),t(document).unbind("mousemove",w),!1},C=function(e){var n={cal:t(this).parent(),pos:t(this).offset()};n.preview=n.cal.data("colorpicker").livePreview,t(document).bind("mouseup",n,S),t(document).bind("mousemove",n,x)},x=function(t){return d.apply(t.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,t.pageY-t.data.pos.top)))/150,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(150,t.pageX-t.data.pos.left))/150,10)).get(0),[t.data.preview]),!1},S=function(e){return o(e.data.cal.data("colorpicker").color,e.data.cal.get(0)),s(e.data.cal.data("colorpicker").color,e.data.cal.get(0)),t(document).unbind("mouseup",S),t(document).unbind("mousemove",x),!1},T=function(e){t(this).addClass("colorpicker_focus")},_=function(e){t(this).removeClass("colorpicker_focus")},E=function(e){var n=t(this).parent(),i=n.data("colorpicker").color;n.data("colorpicker").origColor=i,c(i,n.get(0)),n.data("colorpicker").onSubmit(i,z(i),L(i),n.data("colorpicker").el)},k=function(e){var n=t("#"+t(this).data("colorpickerId"));n.data("colorpicker").onBeforeShow.apply(this,[n.get(0)]);var i=t(this).offset(),o=P(),r=i.top+this.offsetHeight,s=i.left;return r+176>o.t+o.h&&(r-=this.offsetHeight+176),s+356>o.l+o.w&&(s-=356),n.css({left:s+"px",top:r+"px"}),0!=n.data("colorpicker").onShow.apply(this,[n.get(0)])&&n.show(),t(document).bind("mousedown",{cal:n},R),!1},R=function(e){A(e.data.cal.get(0),e.target,e.data.cal.get(0))||(0!=e.data.cal.data("colorpicker").onHide.apply(this,[e.data.cal.get(0)])&&e.data.cal.hide(),t(document).unbind("mousedown",R))},A=function(t,e,n){if(t==e)return!0;if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return!!(16&t.compareDocumentPosition(e));for(var i=e.parentNode;i&&i!=n;){if(i==t)return!0;i=i.parentNode}return!1},P=function(){var t="CSS1Compat"==document.compatMode;return{l:window.pageXOffset||(t?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(t?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(t?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(t?document.documentElement.clientHeight:document.body.clientHeight)}},N=function(t){return{h:Math.min(360,Math.max(0,t.h)),s:Math.min(100,Math.max(0,t.s)),b:Math.min(100,Math.max(0,t.b))}},O=function(t){return{r:Math.min(255,Math.max(0,t.r)),g:Math.min(255,Math.max(0,t.g)),b:Math.min(255,Math.max(0,t.b))}},D=function(t){var e=6-t.length;if(e>0){for(var n=[],i=0;e>i;i++)n.push("0");n.push(t),t=n.join("")}return t},M=function(t){var t=parseInt(t.indexOf("#")>-1?t.substring(1):t,16);return{r:t>>16,g:(65280&t)>>8,b:255&t}},H=function(t){return I(M(t))},I=function(t){var e={h:0,s:0,b:0},n=Math.min(t.r,t.g,t.b),i=Math.max(t.r,t.g,t.b),o=i-n;return e.b=i,e.s=0!=i?255*o/i:0,0!=e.s?t.r==i?e.h=(t.g-t.b)/o:t.g==i?e.h=2+(t.b-t.r)/o:e.h=4+(t.r-t.g)/o:e.h=-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.b*=100/255,e},L=function(t){var e={},n=Math.round(t.h),i=Math.round(255*t.s/100),o=Math.round(255*t.b/100);if(0==i)e.r=e.g=e.b=o;else{var r=o,s=(255-i)*o/255,a=(r-s)*(n%60)/60;360==n&&(n=0),60>n?(e.r=r,e.b=s,e.g=s+a):120>n?(e.g=r,e.b=s,e.r=r-a):180>n?(e.g=r,e.r=s,e.b=s+a):240>n?(e.b=r,e.r=s,e.g=r-a):300>n?(e.b=r,e.g=s,e.r=s+a):360>n?(e.r=r,e.g=s,e.b=r-a):(e.r=0,e.g=0,e.b=0)}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}},F=function(e){var n=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];return t.each(n,function(t,e){1==e.length&&(n[t]="0"+e)}),n.join("")},z=function(t){return F(L(t))},B=function(){var e=t(this).parent(),n=e.data("colorpicker").origColor;e.data("colorpicker").color=n,o(n,e.get(0)),s(n,e.get(0)),r(n,e.get(0)),a(n,e.get(0)),l(n,e.get(0)),u(n,e.get(0))};return{init:function(e){if(e=t.extend({},i,e||{}),"string"==typeof e.color)e.color=H(e.color);else if(void 0!=e.color.r&&void 0!=e.color.g&&void 0!=e.color.b)e.color=I(e.color);else{if(void 0==e.color.h||void 0==e.color.s||void 0==e.color.b)return this;e.color=N(e.color)}return this.each(function(){if(!t(this).data("colorpickerId")){var i=t.extend({},e);i.origColor=e.color;var m="collorpicker_"+parseInt(1e3*Math.random());t(this).data("colorpickerId",m);var v=t(n).attr("id",m);i.flat?v.appendTo(this).show():v.appendTo(document.body),i.fields=v.find("input").bind("keyup",h).bind("change",d).bind("blur",f).bind("focus",p),v.find("span").bind("mousedown",g).end().find(">div.colorpicker_current_color").bind("click",B),i.selector=v.find("div.colorpicker_color").bind("mousedown",C),i.selectorIndic=i.selector.find("div div"),i.el=this,i.hue=v.find("div.colorpicker_hue div"),v.find("div.colorpicker_hue").bind("mousedown",y),i.newColor=v.find("div.colorpicker_new_color"),i.currentColor=v.find("div.colorpicker_current_color"),v.data("colorpicker",i),v.find("div.colorpicker_submit").bind("mouseenter",T).bind("mouseleave",_).bind("click",E),o(i.color,v.get(0)),r(i.color,v.get(0)),s(i.color,v.get(0)),l(i.color,v.get(0)),a(i.color,v.get(0)),c(i.color,v.get(0)),u(i.color,v.get(0)),i.flat?v.css({position:"relative",display:"block"}):t(this).bind(i.eventName,k)}})},showPicker:function(){return this.each(function(){t(this).data("colorpickerId")&&k.apply(this)})},hidePicker:function(){return this.each(function(){t(this).data("colorpickerId")&&t("#"+t(this).data("colorpickerId")).hide()})},setColor:function(e){if("string"==typeof e)e=H(e);else if(void 0!=e.r&&void 0!=e.g&&void 0!=e.b)e=I(e);else{if(void 0==e.h||void 0==e.s||void 0==e.b)return this;e=N(e)}return this.each(function(){if(t(this).data("colorpickerId")){var n=t("#"+t(this).data("colorpickerId"));n.data("colorpicker").color=e,n.data("colorpicker").origColor=e,o(e,n.get(0)),r(e,n.get(0)),s(e,n.get(0)),l(e,n.get(0)),a(e,n.get(0)),c(e,n.get(0)),u(e,n.get(0))}})}}}();t.fn.extend({ColorPicker:e.init,ColorPickerHide:e.hidePicker,ColorPickerShow:e.showPicker,ColorPickerSetColor:e.setColor})}($)},{}],kdTree:[function(t,e,n){!function(t,e){"function"==typeof define&&define.amd?define(["exports"],e):e("object"==typeof n?n:t.commonJsStrict={})}(this,function(t){function e(t,e,n){this.obj=t,this.left=null,this.right=null,this.parent=n,this.dimension=e}function n(t,n,o){function r(t,n,i){var s,a,l=n%o.length;return 0===t.length?null:1===t.length?new e(t[0],l,i):(t.sort(function(t,e){return t[o[l]]-e[o[l]]}),s=Math.floor(t.length/2),a=new e(t[s],l,i),a.left=r(t.slice(0,s),n+1,a),a.right=r(t.slice(s+1),n+1,a),a)}function s(t){function e(t){t.left&&(t.left.parent=t,e(t.left)),t.right&&(t.right.parent=t,e(t.right))}a.root=t,e(a.root)}var a=this;Array.isArray(t)?this.root=r(t,0,null):s(t,n,o),this.toJSON=function(t){t||(t=this.root);var n=new e(t.obj,t.dimension,null);return t.left&&(n.left=a.toJSON(t.left)),t.right&&(n.right=a.toJSON(t.right)),n},this.insert=function(t){function n(e,i){if(null===e)return i;var r=o[e.dimension];return t[r]<e.obj[r]?n(e.left,e):n(e.right,e)}var i,r,s=n(this.root,null);return null===s?void(this.root=new e(t,0,null)):(i=new e(t,(s.dimension+1)%o.length,s),r=o[s.dimension],void(t[r]<s.obj[r]?s.left=i:s.right=i))},this.remove=function(t){function e(n){if(null===n)return null;if(n.obj===t)return n;var i=o[n.dimension];return t[i]<n.obj[i]?e(n.left,n):e(n.right,n)}function n(t){function e(t,n){var i,r,s,a,l;return null===t?null:(i=o[n],t.dimension===n?null!==t.left?e(t.left,n):t:(r=t.obj[i],s=e(t.left,n),a=e(t.right,n),l=t,null!==s&&s.obj[i]<r&&(l=s),null!==a&&a.obj[i]<l.obj[i]&&(l=a),l))}var i,r,s;return null===t.left&&null===t.right?null===t.parent?void(a.root=null):(s=o[t.parent.dimension],void(t.obj[s]<t.parent.obj[s]?t.parent.left=null:t.parent.right=null)):void(null!==t.right?(i=e(t.right,t.dimension),r=i.obj,n(i),t.obj=r):(i=e(t.left,t.dimension),r=i.obj,n(i),t.right=t.left,t.left=null,t.obj=r))}var i;i=e(a.root),null!==i&&n(i)},this.nearest=function(t,e,r){function s(i){function r(t,n){u.push([t,n]),u.size()>e&&u.pop()}var a,l,c,h,d=o[i.dimension],f=n(t,i.obj),p={};for(h=0;h<o.length;h+=1)h===i.dimension?p[o[h]]=t[o[h]]:p[o[h]]=i.obj[o[h]];return l=n(p,i.obj),null===i.right&&null===i.left?void((u.size()<e||f<u.peek()[1])&&r(i,f)):(a=null===i.right?i.left:null===i.left?i.right:t[d]<i.obj[d]?i.left:i.right,s(a),(u.size()<e||f<u.peek()[1])&&r(i,f),void((u.size()<e||Math.abs(l)<u.peek()[1])&&(c=a===i.left?i.right:i.left,null!==c&&s(c))))}var l,c,u;if(u=new i(function(t){return-t[1]}),r)for(l=0;e>l;l+=1)u.push([null,r]);for(a.root&&s(a.root),c=[],l=0;l<Math.min(e,u.content.length);l+=1)u.content[l][0]&&c.push([u.content[l][0].obj,u.content[l][1]]);return c},this.balanceFactor=function(){function t(e){return null===e?0:Math.max(t(e.left),t(e.right))+1}function e(t){return null===t?0:e(t.left)+e(t.right)+1}return t(a.root)/(Math.log(e(a.root))/Math.log(2))}}function i(t){this.content=[],this.scoreFunction=t}i.prototype={push:function(t){this.content.push(t),this.bubbleUp(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.sinkDown(0)),t},peek:function(){return this.content[0]},remove:function(t){for(var e=this.content.length,n=0;e>n;n++)if(this.content[n]==t){var i=this.content.pop();return void(n!=e-1&&(this.content[n]=i,this.scoreFunction(i)<this.scoreFunction(t)?this.bubbleUp(n):this.sinkDown(n)))}throw new Error("Node not found.")},size:function(){return this.content.length},bubbleUp:function(t){for(var e=this.content[t];t>0;){var n=Math.floor((t+1)/2)-1,i=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(i)))break;this.content[n]=e,this.content[t]=i,t=n}},sinkDown:function(t){for(var e=this.content.length,n=this.content[t],i=this.scoreFunction(n);;){var o=2*(t+1),r=o-1,s=null;if(e>r){var a=this.content[r],l=this.scoreFunction(a);i>l&&(s=r)}if(e>o){var c=this.content[o],u=this.scoreFunction(c);(null==s?i:l)>u&&(s=o)}if(null==s)break;this.content[t]=this.content[s],this.content[s]=n,t=s}}},this.kdTree=n,t.kdTree=n,t.BinaryHeap=i})},{}],medium:[function(t,e,n){(function(n,i){"use strict";var o=t("rangy"),r=t("undo"),s=n.Key={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capsLock:20,escape:27,pageUp:33,pageDown:34,end:35,home:36,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40,insert:45,"delete":46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,leftWindow:91,rightWindowKey:92,select:93,numpad0:96,numpad1:97,numpad2:98,numpad3:99,numpad4:100,numpad5:101,numpad6:102,numpad7:103,numpad8:104,numpad9:105,multiply:106,add:107,subtract:109,decimalPoint:110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numLock:144,scrollLock:145,semiColon:186,equalSign:187,comma:188,dash:189,period:190,forwardSlash:191,graveAccent:192,openBracket:219,backSlash:220,closeBracket:221,singleQuote:222},a=function(){var t=function(e){var n,i,o,r=this,a=l.deepExtend({},t.defaultSettings),c=this.settings=l.deepExtend(a,e),u=new t.Cache,h=new t.Selection,d=new t.Action(this),f=new t.Cursor(this),p=new t.Undoable(this);for(o in a)a.hasOwnProperty(o)&&"object"!=typeof a[o]&&a.hasOwnProperty(o)&&c.element.getAttribute("data-medium-"+s)&&(i=c.element.getAttribute("data-medium-"+s),"false"!==i.toLowerCase()&&"true"!==i.toLowerCase()||(i="true"===i.toLowerCase()),c[o]=i);if(c.modifiers)for(o in c.modifiers)c.modifiers.hasOwnProperty(o)&&"undefined"!=typeof s[o]&&(c.modifiers[s[o]]=c.modifiers[o]);if(c.keyContext)for(o in c.keyContext)c.keyContext.hasOwnProperty(o)&&"undefined"!=typeof s[o]&&(c.keyContext[s[o]]=c.keyContext[o]);n=c.element,n.contentEditable=!0,n.className+=" "+c.cssClasses.editor+(" "+c.cssClasses.editor+"-"+c.mode),c.tags=c.tags||{},c.tags.outerLevel&&(c.tags.outerLevel=c.tags.outerLevel.concat([c.tags.paragraph,c.tags.horizontalRule])),this.settings=c,this.element=n,n.medium=this,this.action=d,this.cache=u,this.cursor=f,this.utils=l,this.selection=h,r.clean(),r.placeholders(),d.preserveElementFocus(),this.dirty=!1,this.undoable=p,this.makeUndoable=p.makeUndoable,c.drag&&(r.drag=new t.Drag(r),r.drag.setup()),d.setup(),u.initialized=!0,this.makeUndoable(!0)};return t.prototype={placeholders:function(){if(n.getComputedStyle){var e=this.settings,o=this.placeholder||(this.placeholder=i.createElement("div")),r=this.element,s=o.style,a=n.getComputedStyle(r,null),c=function(t){return a.getPropertyValue(t)},u=l.text(r),h=this.cursor,d=r.children.length,f=t.activeElement===r;if(r.placeholder=o,!f&&u.length<1&&2>d){if(r.placeHolderActive)return;r.innerHTML.match("<"+e.tags.paragraph)||(r.innerHTML=""),e.placeholder.length>0&&(o.setup||(o.setup=!0,s.background=c("background"),s.backgroundColor=c("background-color"),s.fontSize=c("font-size"),s.color=a.color,s.marginTop=c("margin-top"),s.marginBottom=c("margin-bottom"),s.marginLeft=c("margin-left"),s.marginRight=c("margin-right"),s.paddingTop=c("padding-top"),s.paddingBottom=c("padding-bottom"),s.paddingLeft=c("padding-left"),s.paddingRight=c("padding-right"),s.borderTopWidth=c("border-top-width"),s.borderTopColor=c("border-top-color"),s.borderTopStyle=c("border-top-style"),s.borderBottomWidth=c("border-bottom-width"),s.borderBottomColor=c("border-bottom-color"),s.borderBottomStyle=c("border-bottom-style"),s.borderLeftWidth=c("border-left-width"),s.borderLeftColor=c("border-left-color"),s.borderLeftStyle=c("border-left-style"),s.borderRightWidth=c("border-right-width"),s.borderRightColor=c("border-right-color"),s.borderRightStyle=c("border-right-style"),o.className=e.cssClasses.placeholder+" "+e.cssClasses.placeholder+"-"+e.mode,o.innerHTML="<div>"+e.placeholder+"</div>",r.parentNode.insertBefore(o,r)),r.className+=" "+e.cssClasses.clear,s.display="",s.minHeight=r.clientHeight+"px",s.minWidth=r.clientWidth+"px",e.mode!==t.inlineMode&&e.mode!==t.inlineRichMode&&(this.setupContents(),0===d&&r.firstChild&&h.set(this,0,r.firstChild))),r.placeHolderActive=!0}else r.placeHolderActive&&(r.placeHolderActive=!1,s.display="none",r.className=l.trim(r.className.replace(e.cssClasses.clear,"")),this.setupContents())}},clean:function(e){var o,r,s,a=this.settings,c=a.cssClasses.placeholder,u=(a.attributes||{}).remove||[],h=a.tags||{},d=h.outerLevel||null,f=h.innerLevel||null,p={},g={},m=(h.paragraph||"").toUpperCase();this.html;if(e=e||a.element,a.mode===t.inlineRichMode&&(d=a.tags.innerLevel),null!==d)for(s=0;s<d.length;s++)p[d[s].toUpperCase()]=!0;if(null!==f)for(s=0;s<f.length;s++)g[f[s].toUpperCase()]=!0;l.traverseAll(e,{element:function(t,e,a,h){var v,y=t.nodeName,w=!0;for(s=0;s<u.length;s++)o=u[s],t.hasAttribute(o)&&(v=t.getAttribute(o),v===c||v.match("medium-")||"class"!==o||t.removeAttribute(o));if((null!==d||null!==f)&&(1===a&&void 0!==p[y]?w=!1:a>1&&void 0!==g[y]&&(w=!1),w))if("block"===n.getComputedStyle(t,null).getPropertyValue("display")){if(m.length>0&&m!==y&&l.changeTag(t,m),a>1)for(;h.childNodes.length>e;)h.parentNode.insertBefore(h.lastChild,h.nextSibling)}else switch(y){case"BR":if(t===t.parentNode.lastChild){if(t===t.parentNode.firstChild)break;r=i.createTextNode(""),r.innerHTML="&nbsp",t.parentNode.insertBefore(r,t);break}default:for(;null!==t.firstChild;)t.parentNode.insertBefore(t.firstChild,t);l.detachNode(t)}}})},insertHtml:function(e,n,i){var o=new t.Html(this,e).insert(this.settings.beforeInsertHtml),r=o[o.length-1];switch(i===!0&&l.triggerEvent(this.element,"change"),n&&n.apply(o),r.nodeName){case"UL":case"OL":case"DL":if(null!==r.lastChild){this.cursor.moveCursorToEnd(r.lastChild);break}default:this.cursor.moveCursorToEnd(r)}return this},addTag:function(t,e,n,o){if(!this.settings.beforeAddTag(t,e,n,o)){var r,s=i.createElement(t);return"undefined"!=typeof n&&n===!1&&(s.contentEditable=!1),0==s.innerHTML.length&&(s.innerHTML=" "),o&&o.nextSibling?(o.parentNode.insertBefore(s,o.nextSibling),r=o.nextSibling):(this.element.appendChild(s),r=this.lastChild()),e&&(this.cache.focusedElement=r,this.cursor.set(this,0,r)),s}return null},invokeElement:function(e,n,i){var o=this.settings,r=n.remove||[];switch(n=n||{},o.mode){case t.inlineMode:case t.partialMode:return this}return r.length>0&&(l.arrayContains(o,"class")||r.push("class")),new t.Element(this,e,n).invoke(this.settings.beforeInvokeElement),i===!0&&l.triggerEvent(this.element,"change"),this},value:function(t){return"undefined"==typeof t?this.element.innerHTML:(this.element.innerHTML=t,this.clean(),this.placeholders(),this.makeUndoable(),this)},focus:function(){var t=this.element;return t.focus(),this},select:function(){return l.selectNode(t.activeElement=this.element),this},isActive:function(){return t.activeElement===this.element},setupContents:function(){var e,n=this.element,o=n.children,r=n.childNodes,s=this.settings;return!s.tags.paragraph||o.length>0||s.mode===t.inlineMode||s.mode===t.inlineRichMode?t.Utilities:(r.length>0?(e=i.createElement(s.tags.paragraph),n.innerHTML.match("^[&]nbsp[;]")&&(n.innerHTML=n.innerHTML.substring(6,n.innerHTML.length-1)),e.innerHTML=n.innerHTML,n.innerHTML="",n.appendChild(e)):(e=i.createElement(s.tags.paragraph),e.innerHTML="&nbsp;",n.appendChild(e),this.cursor.set(this,0,n.firstChild)),this)},destroy:function(){var t=this.element,e=this.settings,n=this.placeholder||null;null!==n&&n.setup&&null!==n.parentNode&&(n.parentNode.removeChild(n),delete t.placeHolderActive),t.removeAttribute("contenteditable"),t.className=l.trim(t.className.replace(e.cssClasses.editor,"").replace(e.cssClasses.clear,"").replace(e.cssClasses.editor+"-"+e.mode,"")),this.action.destroy(),this.settings.drag&&this.drag.destroy()},clear:function(){this.element.innerHTML="",this.placeholders()},splitAtCaret:function(){if(!this.isActive())return null;var t,e=n.getSelection||i.selection,o=e(),r=o.focusOffset,s=o.focusNode,a=this.element,l=i.createRange(),c=i.createRange();return l.setStart(s,r),c.selectNodeContents(a),l.setEnd(c.endContainer,c.endOffset),t=l.extractContents()},deleteSelection:function(){if(this.isActive()){var t,e=o.getSelection();e.rangeCount>0&&(t=e.getRangeAt(0),t.deleteContents())}},lastChild:function(){return this.element.lastChild},bold:function(){switch(this.settings.mode){case t.partialMode:case t.inlineMode:return this}return new t.Element(this,"bold").setClean(!1).invoke(this.settings.beforeInvokeElement),this},underline:function(){switch(this.settings.mode){case t.partialMode:case t.inlineMode:return this}return new t.Element(this,"underline").setClean(!1).invoke(this.settings.beforeInvokeElement),this},italicize:function(){switch(this.settings.mode){case t.partialMode:case t.inlineMode:return this}return new t.Element(this,"italic").setClean(!1).invoke(this.settings.beforeInvokeElement),this},quote:function(){return this},paste:function(e){var n,i=this.value(),o=i.length,r=this.settings,s=this.selection,a=this.element,c=this,u=function(e){e=e||"",e.length>0&&(a.focus(),t.activeElement=a,s.restoreSelection(h),e=l.encodeHtml(e),n=e.length+o,r.maxLength>0&&n>r.maxLength&&(e=e.substring(0,r.maxLength-o)),r.mode!==t.inlineMode&&(e=e.replace(/\n/g,"<br>")),new t.Html(c,e).setClean(!1).insert(r.beforeInsertHtml,!0),c.clean(),c.placeholders())};if(c.makeUndoable(),void 0!==e)u(e);else if(r.pasteAsText){var h=s.saveSelection();l.pasteHook(this,u)}else setTimeout(function(){c.clean(),c.placeholders()},20);return!0},undo:function(){var t=this.undoable,e=t.stack,n=e.canUndo();return n&&e.undo(),this},redo:function(){var t=this.undoable,e=t.stack,n=e.canRedo();return n&&e.redo(),this}},t.inlineMode="inline",t.partialMode="partial",t.richMode="rich",t.inlineRichMode="inlineRich",t.Messages={pastHere:"Paste Here"},t.defaultSettings={element:null,modifier:"auto",placeholder:"",autofocus:!1,autoHR:!0,mode:t.richMode,maxLength:-1,modifiers:{b:"bold",i:"italicize",u:"underline"},tags:{"break":"br",horizontalRule:"hr",paragraph:"p",outerLevel:["pre","blockquote","figure"],innerLevel:["a","b","u","i","img","strong"]},cssClasses:{editor:"Medium",pasteHook:"Medium-paste-hook",placeholder:"Medium-placeholder",clear:"Medium-clear"},attributes:{remove:["style","class"]},pasteAsText:!0,beforeInvokeElement:function(){},beforeInsertHtml:function(){},maxLengthReached:function(t){},beforeAddTag:function(t,e,n,i){},onBlur:function(){},onFocus:function(){},keyContext:null,drag:!1},function(t,e,n){function i(t){return t.hasOwnProperty("target")&&"false"===t.target.getAttribute("contenteditable")?(l.preventDefaultEvent(t),!1):!0}t.Action=function(t){this.medium=t,this.handledEvents={keydown:null,keyup:null,blur:null,focus:null,paste:null,click:null}},t.Action.prototype={setup:function(){this.handleFocus().handleBlur().handleKeyDown().handleKeyUp().handlePaste().handleClick()},destroy:function(){var t=this.medium.element;l.removeEvent(t,"focus",this.handledEvents.focus).removeEvent(t,"blur",this.handledEvents.blur).removeEvent(t,"keydown",this.handledEvents.keydown).removeEvent(t,"keyup",this.handledEvents.keyup).removeEvent(t,"paste",this.handledEvents.paste).removeEvent(t,"click",this.handledEvents.click);
},handleFocus:function(){var n=this.medium,o=n.element;return l.addEvent(o,"focus",this.handledEvents.focus=function(r){return r=r||e.event,i(r)?(t.activeElement=o,n.cache.originalVal=r.target.textContent,n.settings.onFocus(r),void n.placeholders()):!1}),this},handleBlur:function(){var n=this.medium,i=n.element;return l.addEvent(i,"blur",this.handledEvents.blur=function(o){o=o||e.event,t.activeElement===i&&(t.activeElement=null),n.settings.onBlur(o),n.placeholders()}),this},handleKeyDown:function(){var n=this,o=this.medium,r=o.settings,a=o.cache,c=o.element;return l.addEvent(c,"keydown",this.handledEvents.keydown=function(u){if(u=u||e.event,!i(u))return!1;var h=!0;if(229!==u.keyCode){if(l.isCommand(r,u,function(){a.cmd=!0},function(){a.cmd=!1}),l.isShift(u,function(){a.shift=!0},function(){a.shift=!1}),l.isModifier(r,u,function(e){if(a.cmd){if(r.mode===t.inlineMode||r.mode===t.partialMode)return l.preventDefaultEvent(u),!1;var n=typeof e,i=null;return i="function"===n?e:o[e],h=i.call(o,u),h!==!1&&h!==o||(l.preventDefaultEvent(u),l.stopPropagation(u)),!0}return!1}),-1!==r.maxLength){var d=l.text(c).length,f=!1,p=e.getSelection(),g=l.isSpecial(u),m=l.isNavigational(u);if(p&&(f=!p.isCollapsed),g||m)return!0;if(d>=r.maxLength&&!f)return r.maxLengthReached(c),l.preventDefaultEvent(u),!1}switch(u.keyCode){case s.enter:n.enterKey(u)===!1&&l.preventDefaultEvent(u);break;case s.escape:n.escKey(u)===!1&&l.preventDefaultEvent(u);break;case s.backspace:case s["delete"]:n.backspaceOrDeleteKey(u)}return h}}),this},handleKeyUp:function(){var t=this,n=this.medium,o=n.settings,r=n.cache,s=n.cursor,a=n.element;return l.addEvent(a,"keyup",this.handledEvents.keyup=function(a){if(a=a||e.event,!i(a))return!1;l.isCommand(o,a,function(){r.cmd=!1},function(){r.cmd=!0}),n.clean(),n.placeholders();var c;if(null!==o.keyContext&&(c=o.keyContext[a.keyCode])){var u=s.parent();u&&c.call(n,a,u)}t.preserveElementFocus()}),this},handlePaste:function(){var t,n,o,r,s,a,c,u=this.medium,h=u.element;return l.addEvent(h,"paste",this.handledEvents.paste=function(h){if(h=h||e.event,!i(h))return!1;if(n=0,l.preventDefaultEvent(h),t="",s=h.clipboardData,window.clipboardData)return s=window.clipboardData,r=s.getData("text"),u.paste(r);if(s&&(r=s.getData))for(c=s.types,o=c.length,n=0;o>n;n++)switch(a=c[n]){case"text/plain":return u.paste(s.getData("text/plain"))}u.paste()}),this},handleClick:function(){var t=this.medium,e=t.element,n=t.cursor;return l.addEvent(e,"click",this.handledEvents.click=function(t){i(t)||n.caretToAfter(t.target)}),this},escKey:function(e){var n=this.medium,i=(n.element,n.settings),o=n.cache;return i.mode===t.inlineMode||i.mode===t.inlineRichMode?(e.target.textContent=o.originalVal,i.element.blur?i.element.blur():i.element.onblur&&i.element.onblur(),!1):void 0},enterKey:function(e){var n=this.medium,i=n.element,o=n.settings,r=n.cache,s=n.cursor;if(o.mode===t.inlineMode||o.mode===t.inlineRichMode)return o.element.blur?o.element.blur():o.element.onblur&&o.element.onblur(),!1;if(r.shift){if(o.tags["break"])return n.addTag(o.tags["break"],!0),!1}else{var a,c,u,h=l.atCaret(n)||{},d=i.children,f=h===i.lastChild?i.lastChild:null;f&&f!==i.firstChild&&o.autoHR&&o.mode!==t.partialMode&&o.tags.horizontalRule&&(l.preventDefaultEvent(e),a=""===l.text(f)&&f.nodeName.toLowerCase()===o.tags.paragraph,a&&d.length>=2&&(c=d[d.length-2],c.nodeName.toLowerCase()===o.tags.horizontalRule&&(a=!1)),a&&(n.addTag(o.tags.horizontalRule,!1,!0,h),h=h.nextSibling),null!==(u=n.addTag(o.tags.paragraph,!0,null,h))&&(u.innerHTML="",s.set(n,0,u)))}return!0},backspaceOrDeleteKey:function(t){var e=this.medium,n=e.cursor,i=e.settings,r=e.element;if(void 0!==i.onBackspaceOrDelete){var s=i.onBackspaceOrDelete.call(e,t,r);if(s)return}if(null!==r.lastChild){var a=r.lastChild,c=a.previousSibling,u=o.getSelection().anchorNode;a&&i.tags.horizontalRule&&a.nodeName.toLocaleLowerCase()===i.tags.horizontalRule?r.removeChild(a):a&&c&&l.text(a).length<1&&c.nodeName.toLowerCase()===i.tags.horizontalRule&&a.nodeName.toLowerCase()===i.tags.paragraph?(r.removeChild(a),r.removeChild(c)):1===r.childNodes.length&&a&&!l.text(a).length?(l.preventDefaultEvent(t),e.setupContents()):u&&u===r&&(e.deleteSelection(),e.setupContents(),n.set(e,0,r.firstChild))}},preserveElementFocus:function(){var t=e.getSelection?e.getSelection().anchorNode:document.activeElement;if(t){var n,i=this.medium,o=i.cache,r=i.element,s=i.settings,a=t.parentNode,l=r.children,c=a!==o.focusedElement,u=0;for(a===s.element&&(a=t),n=0;n<l.length;n++)if(a===l[n]){u=n;break}c&&(o.focusedElement=a,o.focusedElementIndex=u)}}}}(t,n,i),function(t){t.Cache=function(){this.initialized=!1,this.cmd=!1,this.focusedElement=null,this.originalVal=null}}(t),function(t){t.Cursor=function(t){this.medium=t},t.Cursor.prototype={set:function(t,e){var o;if(i.createRange){var r=n.getSelection(),s=this.medium.lastChild(),a=l.text(s).length-1,c=e?e:s,u="undefined"!=typeof t&&null!==t?t:a;o=i.createRange(),o.setStart(c,u),o.collapse(!0),r.removeAllRanges(),r.addRange(o)}else o=i.body.createTextRange(),o.moveToElementText(e),o.collapse(!1),o.select()},moveCursorToEnd:function(t){var e=o.getSelection(),n=o.createRange();n.setStartAfter(t),n.setEnd(t,t.length||t.childNodes.length),e.removeAllRanges(),e.addRange(n)},moveCursorToAfter:function(t){var e=o.getSelection();if(e.rangeCount){var n=e.getRangeAt(0);n.collapse(!1),n.collapseAfter(t),e.setSingleRange(n)}},parent:function(){var t,e=null;return n.getSelection?(t=n.getSelection().getRangeAt(0),e=t.commonAncestorContainer,e=1===e.nodeType?e:e.parentNode):i.selection&&(e=i.selection.createRange().parentElement()),"SPAN"==e.tagName&&(e=e.parentNode),e},caretToBeginning:function(t){this.set(0,t)},caretToEnd:function(t){this.moveCursorToEnd(t)},caretToAfter:function(t){this.moveCursorToAfter(t)}}}(t),function(t){t.Drag=function(t){this.medium=t;var e=this,n=this.iconSrc.replace(/[{][{]([a-zA-Z]+)[}][}]/g,function(t,n){return e.hasOwnProperty(n)?e[n]:t}),o=this.icon=i.createElement("img");o.className=this.buttonClass,o.setAttribute("contenteditable","false"),o.setAttribute("src",n),this.hide(),this.element=null,this.protectedElement=null,this.handledEvents={dragstart:null,dragend:null,mouseover:null,mouseout:null,mousemove:null}},t.Drag.prototype={elementClass:"Medium-focused",buttonClass:"Medium-drag",iconSrc:'data:image/svg+xml;utf8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="21.424px" height="21.424px" viewBox="0 0 21.424 21.424" style="enable-background:new 0 0 21.424 21.424;" xml:space="preserve">	<g>		<g>			<path style="fill:{{iconColor}};" d="M13.616,17.709L13.616,17.709h0.781l-3.686,3.715l-3.685-3.715h0.781l0,0H13.616z M13.616,17.709 M14.007,17.709 M12.555,19.566 M8.87,19.566 M7.418,17.709 M7.809,17.709 M10.712,17.709"/>			<path style="fill:{{iconColor}};" d="M13.616,3.715L13.616,3.715h0.781L10.712,0L7.027,3.715h0.781l0,0H13.616z M13.616,3.715 M14.007,3.715 M12.555,1.858 M8.87,1.858 M7.418,3.715 M7.809,3.715 M10.712,3.715"/>			<path style="fill:{{iconColor}};" d="M3.716,13.616L3.716,13.616v0.781L0,10.712l3.716-3.685v0.781l0,0V13.616z M3.716,13.616 M3.716,14.007 M1.858,12.555 M1.858,8.87 M3.716,7.417 M3.716,7.808 M3.716,10.712"/>			<path style="fill:{{iconColor}};" d="M17.709,13.616L17.709,13.616v0.781l3.715-3.685l-3.715-3.685v0.781l0,0V13.616z M17.709,13.616 M17.709,14.007 M19.566,12.555 M19.566,8.87 M17.709,7.417 M17.709,7.808 M17.709,10.712"/>		</g>		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:{{iconColor}};" d="M10.712,6.608c2.267,0,4.104,1.838,4.104,4.104 c0,2.266-1.837,4.104-4.104,4.104c-2.266,0-4.104-1.837-4.104-4.104C6.608,8.446,8.446,6.608,10.712,6.608L10.712,6.608z M10.712,7.515c-1.765,0-3.196,1.432-3.196,3.197s1.432,3.197,3.196,3.197c1.766,0,3.197-1.432,3.197-3.197 S12.478,7.515,10.712,7.515z"/>	</g></svg>',iconColor:"#231F20",setup:function(){return this.handleDragstart().handleDragend().handleMouseover().handleMouseout().handleMousemove(),this},destroy:function(){return l.removeEvent(this.icon,"dragstart",this.handledEvents.dragstart).removeEvent(this.icon,"dragend",this.handledEvents.dragend).removeEvent(this.icon,"mouseover",this.handledEvents.mouseover).removeEvent(this.icon,"mouseout",this.handledEvents.mouseout).removeEvent(this.medium.element,"mousemove",this.handledEvents.mousemove),this},hide:function(){return l.hide(this.icon),this},handleDragstart:function(){var t=this;return l.addEvent(this.icon,"dragstart",this.handledEvents.dragstart=function(e){null===t.protectedElement&&(e=e||n.event,t.protectedElement=l.detachNode(t.element),t.icon.style.opacity=0)}),this},handleDragend:function(){var t=this;return l.addEvent(this.icon,"dragend",this.handledEvents.dragend=i.body.ondragend=function(e){null!==t.protectedElement&&setTimeout(function(){t.cleanCanvas(),t.protectedElement=null},1)}),this},handleMouseover:function(){var t=this;return l.addEvent(this.icon,"mouseover",this.handledEvents.mouseover=function(e){null===t.protectedElement&&l.stopPropagation(e).addClass(t.element,t.elementClass)}),this},handleMouseout:function(){var t=this;return l.addEvent(this.icon,"mouseout",this.handledEvents.mouseout=function(e){null===t.protectedElement&&l.stopPropagation(e).removeClass(t.element,t.elementClass)}),this},handleMousemove:function(){var t=this;return l.addEvent(this.medium.element,"mousemove",this.handledEvents.mousemove=function(e){e=e||n.event;var i=e.target||{};"false"===i.getAttribute("contenteditable")&&t.show(i)}),this},show:function(t){if(t!==this.icon||null!==this.protectedElement){this.element=t;var e=this.icon.style,n=t.offsetLeft,i=t.offsetTop;return t.dragIcon=this.icon,t.parentNode.appendChild(this.icon),e.opacity=1,e.left=n+"px",e.top=i+"px",l.show(this.icon),this}},cleanCanvas:function(){var t,e=!1,n=i.getElementsByClassName(this.buttonClass);for(this.icon.style.opacity=1;n.length>0;)l.isVisible(t=n[0])&&(e||(t.parentNode.insertBefore(this.element,t),e=!0),l.detachNode(t));return l.detachNode(this.icon),this}}}(t),function(t){t.Element=function(t,e,n){switch(this.medium=t,this.element=t.element,e.toLowerCase()){case"bold":this.tagName="b";break;case"italic":this.tagName="i";break;case"underline":this.tagName="u";break;default:this.tagName=e}this.attributes=n||{},this.clean=!0},t.Element.prototype={invoke:function(e){if(t.activeElement===this.element){e&&e.apply(this);var i,r,s=this.attributes,a=this.tagName.toLowerCase();void 0!==s.className?(r=(s.className.split[" "]||[s.className]).shift(),delete s.className):r="medium-"+a,i=o.createClassApplier(r,{elementTagName:a,elementAttributes:this.attributes}),this.medium.makeUndoable(),i.toggleSelection(n),this.clean&&(this.medium.clean(),this.medium.placeholders())}},setClean:function(t){return this.clean=t,this}}}(t),function(t){t.Html=function(e,n){this.html=n,this.medium=e,this.clean=!0,this.injector=new t.Injector},t.Html.prototype={insert:function(e,n){if(t.activeElement===this.medium.element){e&&e.apply(this);var i=this.injector.inject(this.html,n);return this.clean&&(this.medium.clean(),this.medium.placeholders()),this.medium.makeUndoable(),i}return null},setClean:function(t){return this.clean=t,this}}}(t),function(t){t.Injector=function(){},t.Injector.prototype={inject:function(t){var e,n=[],o=!1;if("string"==typeof t){var r=i.createElement("div");r.innerHTML=t,e=r.childNodes,o=!0}else e=t;this.insertHTML('<span id="Medium-wedge"></span>');var s=i.getElementById("Medium-wedge"),a=s.parentNode,l=0;if(s.removeAttribute("id"),o){for(;l<e.length;)n.push(e[l]),l++;for(;e.length>0;)a.insertBefore(e[0],s)}else n.push(e),a.insertBefore(e,s);return a.removeChild(s),s=null,n},insertHTML:function(t,e){var o,r;if(n.getSelection){if(o=n.getSelection(),o.getRangeAt&&o.rangeCount){r=o.getRangeAt(0),r.deleteContents();var s=i.createElement("div");s.innerHTML=t;for(var a,l,c=i.createDocumentFragment();a=s.firstChild;)l=c.appendChild(a);var u=c.firstChild;r.insertNode(c),l&&(r=r.cloneRange(),r.setStartAfter(l),e?r.setStartBefore(u):r.collapse(!0),o.removeAllRanges(),o.addRange(r))}}else if((o=i.selection)&&"Control"!=o.type){var h=o.createRange();h.collapse(!0),o.createRange().pasteHTML(t),e&&(r=o.createRange(),r.setEndPoint("StartToStart",h),r.select())}}}}(t),function(t){t.Selection=function(){},t.Selection.prototype={saveSelection:function(){if(n.getSelection){var t=n.getSelection();if(t.rangeCount>0)return t.getRangeAt(0)}else if(i.selection&&i.selection.createRange)return i.selection.createRange();return null},restoreSelection:function(t){if(t)if(n.getSelection){var e=n.getSelection();e.removeAllRanges(),e.addRange(t)}else i.selection&&t.select&&t.select()}}}(t),function(t){t.Toolbar=function(t,e){this.medium=t;var n=i.createElement("div");n.innerHTML=this.html,this.buttons=e,this.element=n.children[0],i.body.appendChild(this.element),this.active=!1,this.busy=!0,this.handledEvents={scroll:null,mouseup:null,keyup:null}},t.Toolbar.prototype={fixedClass:"Medium-toolbar-fixed",showClass:"Medium-toolbar-show",hideClass:"Medium-toolbar-hide",html:'<div class="Medium-toolbar">				<div class="Medium-tail-outer">					<div class="Medium-tail-inner"></div>				</div>				<div id="Medium-buttons"></div>				<table id="Medium-options">					<tbody>						<tr>						</tr>					</tbody>				</table>			</div>',setup:function(){this.handleScroll().handleMouseup().handleKeyup()},destroy:function(){l.removeEvent(n,"scroll",this.handledEvents.scroll).removeEvent(i,"mouseup",this.handledEvents.mouseup).removeEvent(i,"keyup",this.handledEvents.keyup)},handleScroll:function(){var t=this;return l.addEvent(n,"scroll",this.handledEvents.scroll=function(){t.active&&t.goToSelection()}),this},handleMouseup:function(){var e=this;return l.addEvent(i,"mouseup",this.handledEvents.mouseup=function(){t.activeElement!==e.medium.element||e.busy||e.goToSelection()}),this},handleKeyup:function(){var e=this;return l.addEvent(i,"keyup",this.handledEvents.keyup=function(){t.activeElement!==e.medium.element||e.busy||e.goToSelection()}),this},goToSelection:function(){var t=this.getHighlighted(),e=t.boundary.top-5,i=this.element,o=i.style;n.scrollTop>0?l.addClass(i,this.fixedClass):l.removeClass(i,this.fixedClass),null!==t&&(t.range.startOffset!==t.range.endOffset||t.text?(l.removeClass(i,this.hideClass).removeClass(i,this.showClass),o.opacity=.01,l.addClass(i,this.showClass),o.opacity=1,o.top=e-65+"px",o.left=t.boundary.left+t.boundary.width/2-i.clientWidth/2+"px",this.active=!0):(l.removeClass(i,this.showClass).addClass(i,this.hideClass),this.active=!1))},getHighlighted:function(){var t=n.getSelection(),e=t.anchorNode?t.getRangeAt(0):!1;return e?{selection:t,range:e,text:l.trim(e.toString()),boundary:e.getBoundingClientRect()}:null}}}(t),function(t){t.Undoable=function(t){var e,n,i=this,o=t.settings.element,a=new r.Stack,c=r.Command.extend({constructor:function(t,e){this.oldValue=t,this.newValue=e},execute:function(){},undo:function(){o.innerHTML=this.oldValue,t.canUndo=a.canUndo(),t.canRedo=a.canRedo(),t.dirty=a.dirty()},redo:function(){o.innerHTML=this.newValue,t.canUndo=a.canUndo(),t.canRedo=a.canRedo(),t.dirty=a.dirty()}}),u=function(e){var r=o.innerHTML;e?(n=o.innerHTML,a.execute(new c(n,n))):r!=n&&(i.movingThroughStack||(a.execute(new c(n,r)),n=r,t.dirty=a.dirty()),l.triggerEvent(t.settings.element,"change"))};this.medium=t,this.timer=e,this.stack=a,this.makeUndoable=u,this.EditCommand=c,this.movingThroughStack=!1,l.addEvent(o,"keyup",function(t){return t.ctrlKey||t.keyCode===s.z?void l.preventDefaultEvent(t):(clearTimeout(e),void(e=setTimeout(function(){u()},250)))}).addEvent(o,"keydown",function(t){return t.ctrlKey&&t.keyCode===s.z?(l.preventDefaultEvent(t),i.movingThroughStack=!0,void(t.shiftKey?a.canRedo()&&a.redo():a.canUndo()&&a.undo())):void(i.movingThroughStack=!1)})}}(t),function(t){t.Utilities={isCommand:function(t,e,n,i){return"ctrl"===t.modifier&&e.ctrlKey||"cmd"===t.modifier&&e.metaKey||"auto"===t.modifier&&(e.ctrlKey||e.metaKey)?n.call():i.call()},isShift:function(t,e,n){return t.shiftKey?e.call():n.call()},isModifier:function(t,e,n){var i=t.modifiers[e.keyCode];return i?n.call(null,i):!1},special:function(){var t={};return t[s.backspace]=!0,t[s.shift]=!0,t[s.ctrl]=!0,t[s.alt]=!0,t[s["delete"]]=!0,t[s.cmd]=!0,t}(),isSpecial:function(e){return"undefined"!=typeof t.Utilities.special[e.keyCode]},navigational:function(){var t={};return t[s.upArrow]=!0,t[s.downArrow]=!0,t[s.leftArrow]=!0,t[s.rightArrow]=!0,t}(),isNavigational:function(e){return"undefined"!=typeof t.Utilities.navigational[e.keyCode]},addEvents:function(e,n,i){for(var o,r=0,s=n.split(" "),a=s.length,l=t.Utilities;a>r;r++)o=s[r],o.length>0&&l.addEvent(e,o,i);return t.Utilities},addEvent:function(e,n,i){return e.addEventListener?e.addEventListener(n,i,!1):e.attachEvent?e.attachEvent("on"+n,i):e["on"+n]=i,t.Utilities},removeEvent:function(e,n,i){return e.removeEventListener?e.removeEventListener(n,i,!1):e.detachEvent?e.detachEvent("on"+n,i):e["on"+n]=null,t.Utilities},preventDefaultEvent:function(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,t.Utilities},stopPropagation:function(e){return e=e||window.event,e.cancelBubble=!0,void 0!==e.stopPropagation&&e.stopPropagation(),t.Utilities},isEventSupported:function(t,e){e="on"+e;var n=i.createElement(t.tagName),o=e in n;return o||(n.setAttribute(e,"return;"),o="function"==typeof n[e]),n=null,o},triggerEvent:function(e,n){var o;return i.createEvent?(o=i.createEvent("HTMLEvents"),o.initEvent(n,!0,!0),o.eventName=n,e.dispatchEvent(o)):(o=i.createEventObject(),e.fireEvent("on"+n,o)),t.Utilities},deepExtend:function(e,n){var i,o;for(i in n)n.hasOwnProperty(i)&&(o=n[i],void 0!==o&&null!==o&&void 0!==o.constructor&&o.constructor===Object?(e[i]=e[i]||{},t.Utilities.deepExtend(e[i],o)):e[i]=o);return e},pasteHook:function(e,n){e.makeUndoable();var o,r,s,a,c=i.createElement("div"),u=e.element,h=e.settings,d=i.body,f=d.parentNode,p=f.scrollTop,g=f.scrollLeft;return c.className=h.cssClasses.pasteHook,c.setAttribute("contenteditable",!0),d.appendChild(c),l.selectNode(c),f.scrollTop=p,f.scrollLeft=g,setTimeout(function(){a=l.text(c),u.focus(),h.maxLength>0&&(o=l.text(u),r=o.length,s=r+a.length,s>r&&(a=a.substring(0,h.maxLength-r))),l.detachNode(c),f.scrollTop=p,f.scrollLeft=g,n(a)},0),t.Utilities},traverseAll:function(e,n,i){var o,r=e.childNodes,s=r.length,a=0;if(i=i||1,n=n||{},s>0)for(;s>a;a++){switch(o=r[a],o.nodeType){case 1:t.Utilities.traverseAll(o,n,i+1),void 0!==n.element&&n.element(o,a,i,e);break;case 3:void 0!==n.fragment&&n.fragment(o,a,i,e)}s=r.length,o===e.lastChild&&(a=s)}return t.Utilities},trim:function(t){return t.replace(/^[\s]+|\s+$/g,"")},arrayContains:function(t,e){for(var n=t.length;n--;)if(t[n]===e)return!0;return!1},addClass:function(e,n){return e.classList?e.classList.add(n):e.className+=" "+n,t.Utilities},removeClass:function(e,n){return e.classList?e.classList.remove(n):e.className=e.className.replace(new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi")," "),t.Utilities},hasClass:function(t,e){return t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)},isHidden:function(t){return 0===t.offsetWidth||0===t.offsetHeight},isVisible:function(t){return 0!==t.offsetWidth||0!==t.offsetHeight},encodeHtml:function(t){return i.createElement("a").appendChild(i.createTextNode(t)).parentNode.innerHTML},text:function(t,e){return void 0!==e?null===t?this:(void 0!==t.textContent?t.textContent=e:t.innerText=e,this):null===t?this:void 0!==t.innerText?l.trim(t.innerText):void 0!==t.textContent?l.trim(t.textContent):void 0!==t.data?l.trim(t.data):""},changeTag:function(t,e){var n,o,r=i.createElement(e);for(n=t.firstChild;n;)o=n.nextSibling,r.appendChild(n),n=o;return t.parentNode.insertBefore(r,t),t.parentNode.removeChild(t),r},detachNode:function(t){return null!==t.parentNode&&t.parentNode.removeChild(t),this},selectNode:function(t){var e,o;return t.focus(),i.body.createTextRange?(e=i.body.createTextRange(),e.moveToElementText(t),e.select()):n.getSelection&&(o=n.getSelection(),e=i.createRange(),e.selectNodeContents(t),o.removeAllRanges(),o.addRange(e)),this},baseAtCaret:function(t){if(!t.isActive())return null;var e=n.getSelection?n.getSelection():document.selection;if(e.rangeCount){var i=e.getRangeAt(0),o=i.endContainer;switch(o.nodeType){case 3:if(o.data&&o.data.length!=i.endOffset)return!1}return o}return null},atCaret:function(t){var e=this.baseAtCaret(t)||{},n=t.element;if(e===!1)return null;for(;e&&e.parentNode!==n;)e=e.parentNode;return e&&1==e.nodeType?e:null},hide:function(t){t.style.display="none"},show:function(t){t.style.display=""},hideAnim:function(t){t.style.opacity=1},showAnim:function(t){t.style.opacity=.01,t.style.display=""}}}(t),o.rangePrototype.insertNodeAtEnd=function(t){var e=this.cloneRange();e.collapse(!1),e.insertNode(t),e.detach(),this.setEndAfter(t)},t}(),l=a.Utilities;"function"==typeof define&&define.amd?define(function(){return a}):"undefined"!=typeof e&&e.exports?e.exports=a:"undefined"!=typeof this&&(this.Medium=a)}).call(this,window,document)},{rangy:"rangy",undo:"undo"}],minicolors:[function(t,e,n){jQuery&&function(t){function e(e,n){var i=t('<div class="minicolors" />'),r=t.minicolors.defaults;e.data("minicolors-initialized")||(n=t.extend(!0,{},r,n),i.addClass("minicolors-theme-"+n.theme).toggleClass("minicolors-with-opacity",n.opacity).toggleClass("minicolors-no-data-uris",n.dataUris!==!0),void 0!==n.position&&t.each(n.position.split(" "),function(){i.addClass("minicolors-position-"+this)}),e.addClass("minicolors-input").data("minicolors-initialized",!1).data("minicolors-settings",n).prop("size",7).wrap(i).after('<div class="minicolors-panel minicolors-slider-'+n.control+'"><div class="minicolors-slider minicolors-sprite"><div class="minicolors-picker"></div> </div><div class="minicolors-opacity-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-grid minicolors-sprite"><div class="minicolors-grid-inner"></div><div class="minicolors-picker"><div></div></div></div><input type="text" class="hex_picker"/><input type="button" value="OK" class="b ok_but"/></div>'),t(".hex_picker").on("focus",function(e){t(this).select()}),t(".hex_picker").on("blur",function(e){var n=t(this).val();"#"!=n.charAt(0)&&(n="#"+n),t(this).val(n)}),t(".hex_picker").on("keyup",function(e){var i=t(this).val();"#"!=i.charAt(0)&&(i="#"+i),t(this).parents(".minicolors").find("input[type=hidden]").val(i),a(t(this).parents(".minicolors").find("input[type=hidden]"),!0);var r=e.keyCode?e.keyCode:e.which;"13"==r&&(o(),t(this).parents(".cpicker").css("background",i),t(this).parents(".cpicker").attr("data-color",i),n.change.call(t(this).parents(".minicolors").find("input[type=hidden]").get(0),i,1))}),t(".ok_but").click(function(){o(),t(this).parents(".cpicker").css("background",t(".hex_picker").val()),t(this).parents(".cpicker").attr("data-color",t(".hex_picker").val()),n.change.call(t(this).parents(".minicolors").find("input[type=hidden]").get(0),t(".hex_picker").val(),1)}),n.inline||(e.after('<span class="minicolors-swatch"><a  class="del_clr">X</a><span class="minicolors-swatch-color"></span></span>'),e.next(".minicolors-swatch").on("click",function(t){t.preventDefault(),e.focus()})),e.parent().find(".minicolors-panel").on("selectstart",function(){return!1}).end(),n.inline&&e.parent().addClass("minicolors-inline"),a(e,!1),e.data("minicolors-initialized",!0))}function n(t){var e=t.parent();t.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input"),e.before(t).remove()}function i(e){t("input.hex_picker").val(e.val());var n=e.parent(),i=n.find(".minicolors-panel"),r=e.data("minicolors-settings");!e.data("minicolors-initialized")||e.prop("disabled")||n.hasClass("minicolors-inline")||n.hasClass("minicolors-focus")||(o(),n.addClass("minicolors-focus"),i.css({top:n.offset().top-t(".cpkr_div").offset().top+30,left:n.offset().left-t(".cpkr_div").offset().left}),i.stop(!0,!0).fadeIn(r.showSpeed,function(){r.show&&r.show.call(e.get(0))}))}function o(){t(".minicolors-focus").each(function(){var e=t(this),n=e.find(".minicolors-input"),i=e.find(".minicolors-panel"),o=n.data("minicolors-settings");i.fadeOut(o.hideSpeed,function(){o.hide&&o.hide.call(n.get(0)),e.removeClass("minicolors-focus")})}),t(".minicolors input[type='hidden']").data("minicolors-initialized",!1),t(".minicolors_active").addClass("minicolors_set").removeClass("minicolors_active")}function r(t,e,n){var i,o,r,a,l=t.parents(".minicolors").find(".minicolors-input"),c=l.data("minicolors-settings"),u=t.find("[class$=-picker]"),h=t.offset().left,d=t.offset().top,f=Math.round(e.pageX-h),p=Math.round(e.pageY-d),g=n?c.animationSpeed:0;e.originalEvent.changedTouches&&(f=e.originalEvent.changedTouches[0].pageX-h,p=e.originalEvent.changedTouches[0].pageY-d),0>f&&(f=0),0>p&&(p=0),f>t.width()&&(f=t.width()),p>t.height()&&(p=t.height()),t.parent().is(".minicolors-slider-wheel")&&u.parent().is(".minicolors-grid")&&(i=75-f,o=75-p,r=Math.sqrt(i*i+o*o),a=Math.atan2(o,i),0>a&&(a+=2*Math.PI),r>75&&(r=75,f=75-75*Math.cos(a),p=75-75*Math.sin(a)),f=Math.round(f),p=Math.round(p)),t.is(".minicolors-grid")?u.stop(!0).animate({top:p+"px",left:f+"px"},g,c.animationEasing,function(){s(l,t)}):u.stop(!0).animate({top:p+"px"},g,c.animationEasing,function(){s(l,t)})}function s(t,e){function n(t,e){var n,i;return t.length&&e?(n=t.offset().left,i=t.offset().top,{x:n-e.offset().left+t.outerWidth()/2,y:i-e.offset().top+t.outerHeight()/2}):null}var i,o,r,s,a,c,u,d=t.val(),p=t.attr("data-opacity"),g=t.parent(),v=t.data("minicolors-settings"),y=g.find(".minicolors-swatch"),w=g.find(".minicolors-grid"),b=g.find(".minicolors-slider"),C=g.find(".minicolors-opacity-slider"),x=w.find("[class$=-picker]"),S=b.find("[class$=-picker]"),T=C.find("[class$=-picker]"),_=n(x,w),E=n(S,b),k=n(T,C);if(e.is(".minicolors-grid, .minicolors-slider")){switch(v.control){case"wheel":s=w.width()/2-_.x,a=w.height()/2-_.y,c=Math.sqrt(s*s+a*a),u=Math.atan2(a,s),0>u&&(u+=2*Math.PI),c>75&&(c=75,_.x=69-75*Math.cos(u),_.y=69-75*Math.sin(u)),o=f(c/.75,0,100),i=f(180*u/Math.PI,0,360),r=f(100-Math.floor(E.y*(100/b.height())),0,100),d=m({h:i,s:o,b:r}),b.css("backgroundColor",m({h:i,s:o,b:100}));break;case"saturation":i=f(parseInt(_.x*(360/w.width()),10),0,360),o=f(100-Math.floor(E.y*(100/b.height())),0,100),r=f(100-Math.floor(_.y*(100/w.height())),0,100),d=m({h:i,s:o,b:r}),b.css("backgroundColor",m({h:i,s:100,b:r})),g.find(".minicolors-grid-inner").css("opacity",o/100);break;case"brightness":i=f(parseInt(_.x*(360/w.width()),10),0,360),o=f(100-Math.floor(_.y*(100/w.height())),0,100),r=f(100-Math.floor(E.y*(100/b.height())),0,100),d=m({h:i,s:o,b:r}),b.css("backgroundColor",m({h:i,s:o,b:100})),g.find(".minicolors-grid-inner").css("opacity",1-r/100);break;default:i=f(360-parseInt(E.y*(360/b.height()),10),0,360),o=f(Math.floor(_.x*(100/w.width())),0,100),r=f(100-Math.floor(_.y*(100/w.height())),0,100),d=m({h:i,s:o,b:r}),w.css("backgroundColor",m({h:i,s:100,b:100}))}t.val(h(d,v.letterCase))}e.is(".minicolors-opacity-slider")&&(p=v.opacity?parseFloat(1-k.y/C.height()).toFixed(2):1,v.opacity&&t.attr("data-opacity",p)),y.find("SPAN").css({backgroundColor:d,opacity:p}),l(t,d,p)}function a(t,e){var n,i,o,r,s,a,c,u=t.parent(),p=t.data("minicolors-settings"),g=u.find(".minicolors-swatch"),y=u.find(".minicolors-grid"),w=u.find(".minicolors-slider"),b=u.find(".minicolors-opacity-slider"),C=y.find("[class$=-picker]"),x=w.find("[class$=-picker]"),S=b.find("[class$=-picker]");switch(n=h(d(t.val(),!0),p.letterCase),n||(n=h(d(p.defaultValue,!0),p.letterCase)),i=v(n),e||t.val(n),p.opacity&&(o=""===t.attr("data-opacity")?1:f(parseFloat(t.attr("data-opacity")).toFixed(2),0,1),isNaN(o)&&(o=1),t.attr("data-opacity",o),g.find("SPAN").css("opacity",o),s=f(b.height()-b.height()*o,0,b.height()),S.css("top",s+"px")),g.find("SPAN").css("backgroundColor",n),p.control){case"wheel":a=f(Math.ceil(.75*i.s),0,y.height()/2),c=i.h*Math.PI/180,r=f(75-Math.cos(c)*a,0,y.width()),s=f(75-Math.sin(c)*a,0,y.height()),C.css({top:s+"px",left:r+"px"}),s=150-i.b/(100/y.height()),""===n&&(s=0),x.css("top",s+"px"),w.css("backgroundColor",m({h:i.h,s:i.s,b:100}));break;case"saturation":r=f(5*i.h/12,0,150),s=f(y.height()-Math.ceil(i.b/(100/y.height())),0,y.height()),C.css({top:s+"px",left:r+"px"}),s=f(w.height()-i.s*(w.height()/100),0,w.height()),x.css("top",s+"px"),w.css("backgroundColor",m({h:i.h,s:100,b:i.b})),u.find(".minicolors-grid-inner").css("opacity",i.s/100);break;case"brightness":r=f(5*i.h/12,0,150),s=f(y.height()-Math.ceil(i.s/(100/y.height())),0,y.height()),C.css({top:s+"px",left:r+"px"}),s=f(w.height()-i.b*(w.height()/100),0,w.height()),x.css("top",s+"px"),w.css("backgroundColor",m({h:i.h,s:i.s,b:100})),u.find(".minicolors-grid-inner").css("opacity",1-i.b/100);break;default:r=f(Math.ceil(i.s/(100/y.width())),0,y.width()),s=f(y.height()-Math.ceil(i.b/(100/y.height())),0,y.height()),C.css({top:s+"px",left:r+"px"}),s=f(w.height()-i.h/(360/w.height()),0,w.height()),x.css("top",s+"px"),y.css("backgroundColor",m({h:i.h,s:100,b:100}))}t.data("minicolors-initialized")&&!e&&l(t,n,o)}function l(e,n,i){var o=e.data("minicolors-settings"),r=e.data("minicolors-lastChange");r&&r.hex===n&&r.opacity===i||(e.data("minicolors-lastChange",{hex:n,opacity:i}),t("input.hex_picker").val(n),e.parents(".cpicker").css("background",n),e.parents(".cpicker").attr("data-color",n),o.change&&(o.changeDelay?(clearTimeout(e.data("minicolors-changeTimeout")),e.data("minicolors-changeTimeout",setTimeout(function(){o.change.call(e.get(0),n,i)},o.changeDelay))):o.change.call(e.get(0),n,i)),e.trigger("change").trigger("input"))}function c(e){var n=d(t(e).val(),!0),i=w(n),o=t(e).attr("data-opacity");return i?(void 0!==o&&t.extend(i,{a:parseFloat(o)}),i):null}function u(e,n){var i=d(t(e).val(),!0),o=w(i),r=t(e).attr("data-opacity");return o?(void 0===r&&(r=1),n?"rgba("+o.r+", "+o.g+", "+o.b+", "+parseFloat(r)+")":"rgb("+o.r+", "+o.g+", "+o.b+")"):null}function h(t,e){return"uppercase"===e?t.toUpperCase():t.toLowerCase()}function d(t,e){return t=t.replace(/[^A-F0-9]/gi,""),3!==t.length&&6!==t.length?"":(3===t.length&&e&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),"#"+t)}function f(t,e,n){return e>t&&(t=e),t>n&&(t=n),t}function p(t){var e={},n=Math.round(t.h),i=Math.round(255*t.s/100),o=Math.round(255*t.b/100);if(0===i)e.r=e.g=e.b=o;else{var r=o,s=(255-i)*o/255,a=(r-s)*(n%60)/60;360===n&&(n=0),60>n?(e.r=r,e.b=s,e.g=s+a):120>n?(e.g=r,e.b=s,e.r=r-a):180>n?(e.g=r,e.r=s,e.b=s+a):240>n?(e.b=r,e.r=s,e.g=r-a):300>n?(e.b=r,e.g=s,e.r=s+a):360>n?(e.r=r,e.g=s,e.b=r-a):(e.r=0,e.g=0,e.b=0)}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}}function g(e){var n=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];return t.each(n,function(t,e){1===e.length&&(n[t]="0"+e)}),"#"+n.join("")}function m(t){return g(p(t))}function v(t){var e=y(w(t));return 0===e.s&&(e.h=360),e}function y(t){var e={h:0,s:0,b:0},n=Math.min(t.r,t.g,t.b),i=Math.max(t.r,t.g,t.b),o=i-n;return e.b=i,e.s=0!==i?255*o/i:0,0!==e.s?t.r===i?e.h=(t.g-t.b)/o:t.g===i?e.h=2+(t.b-t.r)/o:e.h=4+(t.r-t.g)/o:e.h=-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.b*=100/255,e}function w(t){return t=parseInt(t.indexOf("#")>-1?t.substring(1):t,16),{r:t>>16,g:(65280&t)>>8,b:255&t}}t.minicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",dataUris:!0,defaultValue:"",hide:null,hideSpeed:100,inline:!1,letterCase:"lowercase",opacity:!1,position:"bottom left",show:null,showSpeed:100,theme:"default"}},t.extend(t.fn,{minicolors:function(r,s){switch(r){case"destroy":return t(this).each(function(){n(t(this))}),t(this);case"hide":return o(),t(this);case"opacity":return void 0===s?t(this).attr("data-opacity"):(t(this).each(function(){a(t(this).attr("data-opacity",s))}),t(this));case"rgbObject":return c(t(this),"rgbaObject"===r);case"rgbString":case"rgbaString":return u(t(this),"rgbaString"===r);case"settings":return void 0===s?t(this).data("minicolors-settings"):(t(this).each(function(){
var e=t(this).data("minicolors-settings")||{};n(t(this)),t(this).minicolors(t.extend(!0,e,s))}),t(this));case"show":return i(t(this).eq(0)),t(this);case"value":return void 0===s?t(this).val():(t(this).each(function(){a(t(this).val(s))}),t(this));default:return"create"!==r&&(s=r),t(this).each(function(){e(t(this),s)}),t(this)}}}),t(document).on("mousedown.minicolors touchstart.minicolors",function(e){t(e.target).parents().add(e.target).hasClass("minicolors")||o()}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(e){var n=t(this);e.preventDefault(),t(document).data("minicolors-target",n),r(n,e,!0)}).on("mousemove.minicolors touchmove.minicolors",function(e){var n=t(document).data("minicolors-target");n&&r(n,e)}).on("mouseup.minicolors touchend.minicolors",function(){t(this).removeData("minicolors-target")}).on("mousedown.minicolors touchstart.minicolors",".minicolors-swatch",function(e){var n=t(this).parent().find(".minicolors-input");e.preventDefault(),i(n)}).on("focus.minicolors",".minicolors-input",function(){var e=t(this);e.data("minicolors-initialized")&&i(e)}).on("blur.minicolors",".minicolors-input",function(){var e=t(this),n=e.data("minicolors-settings");e.data("minicolors-initialized")&&(e.val(d(e.val(),!0)),""===e.val()&&e.val(d(n.defaultValue,!0)),e.val(h(e.val(),n.letterCase)))}).on("keydown.minicolors",".minicolors-input",function(e){var n=t(this);if(n.data("minicolors-initialized"))switch(e.keyCode){case 9:o();break;case 13:case 27:o(),n.blur()}}).on("keyup.minicolors",".minicolors-input",function(){var e=t(this);e.data("minicolors-initialized")&&a(e,!0)}).on("paste.minicolors",".minicolors-input",function(){var e=t(this);e.data("minicolors-initialized")&&setTimeout(function(){a(e,!0)},1)})}(jQuery)},{}],"rangy-classapplier":[function(t,e,n){!function(i,o){"function"==typeof define&&define.amd?define(["./rangy-core"],i):"undefined"!=typeof e&&"object"==typeof n?e.exports=i(t("rangy")):i(o.rangy)}(function(t){return t.createModule("ClassApplier",["WrappedSelection"],function(t,e){function n(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(n,t[n])===!1)return!1;return!0}function o(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function r(t,e){return!!t&&new RegExp("(?:^|\\s)"+e+"(?:\\s|$)").test(t)}function s(t,e){if("object"==typeof t.classList)return t.classList.contains(e);var n="string"==typeof t.className,i=n?t.className:t.getAttribute("class");return r(i,e)}function a(t,e){if("object"==typeof t.classList)t.classList.add(e);else{var n="string"==typeof t.className,i=n?t.className:t.getAttribute("class");i?r(i,e)||(i+=" "+e):i=e,n?t.className=i:t.setAttribute("class",i)}}function l(t){var e="string"==typeof t.className;return e?t.className:t.getAttribute("class")}function c(t){return t&&t.split(/\s+/).sort().join(" ")}function u(t){return c(l(t))}function h(t,e){return u(t)==u(e)}function d(t,e){for(var n=e.split(/\s+/),i=0,r=n.length;r>i;++i)if(!s(t,o(n[i])))return!1;return!0}function f(t){var e=t.parentNode;return e&&1==e.nodeType&&!/^(textarea|style|script|select|iframe)$/i.test(e.nodeName)}function p(t,e,n,i,o){var r=t.node,s=t.offset,a=r,l=s;r==i&&s>o&&++l,r!=e||s!=n&&s!=n+1||(a=i,l+=o-n),r==e&&s>n+1&&--l,t.node=a,t.offset=l}function g(t,e,n){t.node==e&&t.offset>n&&--t.offset}function m(t,e,n,i){-1==n&&(n=e.childNodes.length);var o=t.parentNode,r=L.getNodeIndex(t);V(i,function(t){p(t,o,r,e,n)}),e.childNodes.length==n?e.appendChild(t):e.insertBefore(t,e.childNodes[n])}function v(t,e){var n=t.parentNode,i=L.getNodeIndex(t);V(e,function(t){g(t,n,i)}),L.removeNode(t)}function y(t,e,n,i,o){for(var r,s=[];r=t.firstChild;)m(r,e,n++,o),s.push(r);return i&&v(t,o),s}function w(t,e){return y(t,t.parentNode,L.getNodeIndex(t),!0,e)}function b(t,e){var n=t.cloneRange();n.selectNodeContents(e);var i=n.intersection(t),o=i?i.toString():"";return""!=o}function C(t){for(var e,n=t.getNodes([3]),i=0;(e=n[i])&&!b(t,e);)++i;for(var o=n.length-1;(e=n[o])&&!b(t,e);)--o;return n.slice(i,o+1)}function x(t,e){if(t.attributes.length!=e.attributes.length)return!1;for(var n,i,o,r=0,s=t.attributes.length;s>r;++r)if(n=t.attributes[r],o=n.name,"class"!=o){if(i=e.attributes.getNamedItem(o),null===n!=(null===i))return!1;if(n.specified!=i.specified)return!1;if(n.specified&&n.nodeValue!==i.nodeValue)return!1}return!0}function S(t,e){for(var n,i=0,o=t.attributes.length;o>i;++i)if(n=t.attributes[i].name,(!e||!z(e,n))&&t.attributes[i].specified&&"class"!=n)return!0;return!1}function T(t){var e;return t&&1==t.nodeType&&((e=t.parentNode)&&9==e.nodeType&&"on"==e.designMode||Y(t)&&!Y(t.parentNode))}function _(t){return(Y(t)||1!=t.nodeType&&Y(t.parentNode))&&!T(t)}function E(t){return t&&1==t.nodeType&&!q.test(X(t,"display"))}function k(t){if(0==t.data.length)return!0;if(G.test(t.data))return!1;var e=X(t.parentNode,"whiteSpace");switch(e){case"pre":case"pre-wrap":case"-moz-pre-wrap":return!1;case"pre-line":if(/[\r\n]/.test(t.data))return!1}return E(t.previousSibling)||E(t.nextSibling)}function R(t){var e,n,i=[];for(e=0;n=t[e++];)i.push(new F(n.startContainer,n.startOffset),new F(n.endContainer,n.endOffset));return i}function A(t,e){for(var n,i,o,r=0,s=t.length;s>r;++r)n=t[r],i=e[2*r],o=e[2*r+1],n.setStartAndEnd(i.node,i.offset,o.node,o.offset)}function P(t,e){return L.isCharacterDataNode(t)?0==e?!!t.previousSibling:e==t.length?!!t.nextSibling:!0:e>0&&e<t.childNodes.length}function N(t,n,i,o){var r,s,a=0==i;if(L.isAncestorOf(n,t))return t;if(L.isCharacterDataNode(n)){var l=L.getNodeIndex(n);if(0==i)i=l;else{if(i!=n.length)throw e.createError("splitNodeAt() should not be called with offset in the middle of a data node ("+i+" in "+n.data);i=l+1}n=n.parentNode}if(P(n,i)){r=n.cloneNode(!1),s=n.parentNode,r.id&&r.removeAttribute("id");for(var c,u=0;c=n.childNodes[i];)m(c,r,u++,o);return m(r,s,L.getNodeIndex(n)+1,o),n==t?r:N(t,s,L.getNodeIndex(r),o)}if(t!=n){r=n.parentNode;var h=L.getNodeIndex(n);return a||h++,N(t,r,h,o)}return t}function O(t,e){return t.namespaceURI==e.namespaceURI&&t.tagName.toLowerCase()==e.tagName.toLowerCase()&&h(t,e)&&x(t,e)&&"inline"==X(t,"display")&&"inline"==X(e,"display")}function D(t){var e=t?"nextSibling":"previousSibling";return function(n,i){var o=n.parentNode,r=n[e];if(r){if(r&&3==r.nodeType)return r}else if(i&&(r=o[e],r&&1==r.nodeType&&O(o,r))){var s=r[t?"firstChild":"lastChild"];if(s&&3==s.nodeType)return s}return null}}function M(t){this.isElementMerge=1==t.nodeType,this.textNodes=[];var e=this.isElementMerge?t.lastChild:t;e&&(this.textNodes[0]=e)}function H(t,e,i){var r,s,a,l,u=this;u.cssClass=u.className=t;var h=null,d={};if("object"==typeof e&&null!==e){for("undefined"!=typeof e.elementTagName&&(e.elementTagName=e.elementTagName.toLowerCase()),i=e.tagNames,h=e.elementProperties,d=e.elementAttributes,s=0;l=Q[s++];)e.hasOwnProperty(l)&&(u[l]=e[l]);r=e.normalize}else r=e;u.normalize="undefined"==typeof r?!0:r,u.attrExceptions=[];var f=document.createElement(u.elementTagName);u.elementProperties=u.copyPropertiesToElement(h,f,!0),n(d,function(t,e){u.attrExceptions.push(t),d[t]=""+e}),u.elementAttributes=d,u.elementSortedClassName=u.elementProperties.hasOwnProperty("className")?c(u.elementProperties.className+" "+t):t,u.applyToAnyTagName=!1;var p=typeof i;if("string"==p)"*"==i?u.applyToAnyTagName=!0:u.tagNames=o(i.toLowerCase()).split(/\s*,\s*/);else if("object"==p&&"number"==typeof i.length)for(u.tagNames=[],s=0,a=i.length;a>s;++s)"*"==i[s]?u.applyToAnyTagName=!0:u.tagNames.push(i[s].toLowerCase());else u.tagNames=[u.elementTagName]}function I(t,e,n){return new H(t,e,n)}var L=t.dom,F=L.DomPosition,z=L.arrayContains,B=t.util,V=B.forEach,W="span",j=B.isHostMethod(document,"createElementNS"),U=function(){function t(t,e,n){return e&&n?" ":""}return function(e,n){if("object"==typeof e.classList)e.classList.remove(n);else{var i="string"==typeof e.className,o=i?e.className:e.getAttribute("class");o=o.replace(new RegExp("(^|\\s)"+n+"(\\s|$)"),t),i?e.className=o:e.setAttribute("class",o)}}}(),X=L.getComputedStyleProperty,Y=function(){var t=document.createElement("div");return"boolean"==typeof t.isContentEditable?function(t){return t&&1==t.nodeType&&t.isContentEditable}:function(t){return t&&1==t.nodeType&&"false"!=t.contentEditable?"true"==t.contentEditable||Y(t.parentNode):!1}}(),q=/^inline(-block|-table)?$/i,G=/[^\r\n\t\f \u200B]/,$=D(!1),K=D(!0);M.prototype={doMerge:function(t){var e=this.textNodes,n=e[0];if(e.length>1){var i,o=L.getNodeIndex(n),r=[],s=0;V(e,function(e,a){i=e.parentNode,a>0&&(i.removeChild(e),i.hasChildNodes()||L.removeNode(i),t&&V(t,function(t){t.node==e&&(t.node=n,t.offset+=s),t.node==i&&t.offset>o&&(--t.offset,t.offset==o+1&&a<len-1&&(t.node=n,t.offset=s))})),r[a]=e.data,s+=e.data.length}),n.data=r.join("")}return n.data},getLength:function(){for(var t=this.textNodes.length,e=0;t--;)e+=this.textNodes[t].length;return e},toString:function(){var t=[];return V(this.textNodes,function(e,n){t[n]="'"+e.data+"'"}),"[Merge("+t.join(",")+")]"}};var Q=["elementTagName","ignoreWhiteSpace","applyToEditableOnly","useExistingElements","removeEmptyElements","onElementCreate"],Z={};H.prototype={elementTagName:W,elementProperties:{},elementAttributes:{},ignoreWhiteSpace:!0,applyToEditableOnly:!1,useExistingElements:!0,removeEmptyElements:!0,onElementCreate:null,copyPropertiesToElement:function(t,e,n){var i,o,r,s,l,u,h={};for(var d in t)if(t.hasOwnProperty(d))if(s=t[d],l=e[d],"className"==d)a(e,s),a(e,this.className),e[d]=c(e[d]),n&&(h[d]=s);else if("style"==d){o=l,n&&(h[d]=r={});for(i in t[d])t[d].hasOwnProperty(i)&&(o[i]=s[i],n&&(r[i]=o[i]));this.attrExceptions.push(d)}else e[d]=s,n&&(h[d]=e[d],u=Z.hasOwnProperty(d)?Z[d]:d,this.attrExceptions.push(u));return n?h:""},copyAttributesToElement:function(t,e){for(var n in t)t.hasOwnProperty(n)&&!/^class(?:Name)?$/i.test(n)&&e.setAttribute(n,t[n])},appliesToElement:function(t){return z(this.tagNames,t.tagName.toLowerCase())},getEmptyElements:function(t){var e=this;return t.getNodes([1],function(t){return e.appliesToElement(t)&&!t.hasChildNodes()})},hasClass:function(t){return 1==t.nodeType&&(this.applyToAnyTagName||this.appliesToElement(t))&&s(t,this.className)},getSelfOrAncestorWithClass:function(t){for(;t;){if(this.hasClass(t))return t;t=t.parentNode}return null},isModifiable:function(t){return!this.applyToEditableOnly||_(t)},isIgnorableWhiteSpaceNode:function(t){return this.ignoreWhiteSpace&&t&&3==t.nodeType&&k(t)},postApply:function(t,e,n,o){var r,s,a=t[0],l=t[t.length-1],c=[],u=a,h=l,d=0,f=l.length;V(t,function(t){s=$(t,!o),s?(r||(r=new M(s),c.push(r)),r.textNodes.push(t),t===a&&(u=r.textNodes[0],d=u.length),t===l&&(h=r.textNodes[0],f=r.getLength())):r=null});var p=K(l,!o);if(p&&(r||(r=new M(l),c.push(r)),r.textNodes.push(p)),c.length){for(i=0,len=c.length;i<len;++i)c[i].doMerge(n);e.setStartAndEnd(u,d,h,f)}},createContainer:function(t){var e,n=L.getDocument(t),i=j&&!L.isHtmlNamespace(t)&&(e=t.namespaceURI)?n.createElementNS(t.namespaceURI,this.elementTagName):n.createElement(this.elementTagName);return this.copyPropertiesToElement(this.elementProperties,i,!1),this.copyAttributesToElement(this.elementAttributes,i),a(i,this.className),this.onElementCreate&&this.onElementCreate(i,this),i},elementHasProperties:function(t,e){var i=this;return n(e,function(e,n){if("className"==e)return d(t,n);if("object"==typeof n){if(!i.elementHasProperties(t[e],n))return!1}else if(t[e]!==n)return!1})},elementHasAttributes:function(t,e){return n(e,function(e,n){return t.getAttribute(e)!==n?!1:void 0})},applyToTextNode:function(t,e){if(f(t)){var n=t.parentNode;if(1==n.childNodes.length&&this.useExistingElements&&this.appliesToElement(n)&&this.elementHasProperties(n,this.elementProperties)&&this.elementHasAttributes(n,this.elementAttributes))a(n,this.className);else{var i=t.parentNode,o=this.createContainer(i);i.insertBefore(o,t),o.appendChild(t)}}},isRemovable:function(t){return t.tagName.toLowerCase()==this.elementTagName&&u(t)==this.elementSortedClassName&&this.elementHasProperties(t,this.elementProperties)&&!S(t,this.attrExceptions)&&this.elementHasAttributes(t,this.elementAttributes)&&this.isModifiable(t)},isEmptyContainer:function(t){var e=t.childNodes.length;return 1==t.nodeType&&this.isRemovable(t)&&(0==e||1==e&&this.isEmptyContainer(t.firstChild))},removeEmptyContainers:function(t){var e=this,n=t.getNodes([1],function(t){return e.isEmptyContainer(t)}),i=[t],o=R(i);V(n,function(t){v(t,o)}),A(i,o)},undoToTextNode:function(t,e,n,i){if(!e.containsNode(n)){var o=e.cloneRange();o.selectNode(n),o.isPointInRange(e.endContainer,e.endOffset)&&(N(n,e.endContainer,e.endOffset,i),e.setEndAfter(n)),o.isPointInRange(e.startContainer,e.startOffset)&&(n=N(n,e.startContainer,e.startOffset,i))}this.isRemovable(n)?w(n,i):U(n,this.className)},splitAncestorWithClass:function(t,e,n){var i=this.getSelfOrAncestorWithClass(t);i&&N(i,t,e,n)},undoToAncestor:function(t,e){this.isRemovable(t)?w(t,e):U(t,this.className)},applyToRange:function(t,e){var n=this;e=e||[];var i=R(e||[]);t.splitBoundariesPreservingPositions(i),n.removeEmptyElements&&n.removeEmptyContainers(t);var o=C(t);if(o.length){V(o,function(t){n.isIgnorableWhiteSpaceNode(t)||n.getSelfOrAncestorWithClass(t)||!n.isModifiable(t)||n.applyToTextNode(t,i)});var r=o[o.length-1];t.setStartAndEnd(o[0],0,r,r.length),n.normalize&&n.postApply(o,t,i,!1),A(e,i)}var s=n.getEmptyElements(t);V(s,function(t){a(t,n.className)})},applyToRanges:function(t){for(var e=t.length;e--;)this.applyToRange(t[e],t);return t},applyToSelection:function(e){var n=t.getSelection(e);n.setRanges(this.applyToRanges(n.getAllRanges()))},undoToRange:function(t,e){var n=this;e=e||[];var i=R(e);t.splitBoundariesPreservingPositions(i),n.removeEmptyElements&&n.removeEmptyContainers(t,i);var o,r,s=C(t),a=s[s.length-1];if(s.length){n.splitAncestorWithClass(t.endContainer,t.endOffset,i),n.splitAncestorWithClass(t.startContainer,t.startOffset,i);for(var l=0,c=s.length;c>l;++l)o=s[l],r=n.getSelfOrAncestorWithClass(o),r&&n.isModifiable(o)&&n.undoToAncestor(r,i);t.setStartAndEnd(s[0],0,a,a.length),n.normalize&&n.postApply(s,t,i,!0),A(e,i)}var u=n.getEmptyElements(t);V(u,function(t){U(t,n.className)})},undoToRanges:function(t){for(var e=t.length;e--;)this.undoToRange(t[e],t);return t},undoToSelection:function(e){var n=t.getSelection(e),i=t.getSelection(e).getAllRanges();this.undoToRanges(i),n.setRanges(i)},isAppliedToRange:function(t){if(t.collapsed||""==t.toString())return!!this.getSelfOrAncestorWithClass(t.commonAncestorContainer);var e=t.getNodes([3]);if(e.length)for(var n,i=0;n=e[i++];)if(!this.isIgnorableWhiteSpaceNode(n)&&b(t,n)&&this.isModifiable(n)&&!this.getSelfOrAncestorWithClass(n))return!1;return!0},isAppliedToRanges:function(t){var e=t.length;if(0==e)return!1;for(;e--;)if(!this.isAppliedToRange(t[e]))return!1;return!0},isAppliedToSelection:function(e){var n=t.getSelection(e);return this.isAppliedToRanges(n.getAllRanges())},toggleRange:function(t){this.isAppliedToRange(t)?this.undoToRange(t):this.applyToRange(t)},toggleSelection:function(t){this.isAppliedToSelection(t)?this.undoToSelection(t):this.applyToSelection(t)},getElementsWithClassIntersectingRange:function(t){var e=[],n=this;return t.getNodes([3],function(t){var i=n.getSelfOrAncestorWithClass(t);i&&!z(e,i)&&e.push(i)}),e},detach:function(){}},H.util={hasClass:s,addClass:a,removeClass:U,getClass:l,hasSameClasses:h,hasAllClasses:d,replaceWithOwnChildren:w,elementsHaveSameNonClassAttributes:x,elementHasNonClassAttributes:S,splitNodeAt:N,isEditableElement:Y,isEditingHost:T,isEditable:_},t.CssClassApplier=t.ClassApplier=H,t.createClassApplier=I,B.createAliasForDeprecatedMethod(t,"createCssClassApplier","createClassApplier",e)}),t},this)},{rangy:"rangy"}],"rangy-selectionsavestore":[function(t,e,n){var i=t("rangy");i.createModule("SaveRestore",["WrappedRange"],function(t,e){function n(t,e){return(e||document).getElementById(t)}function i(t,e){var n,i="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),o=p.getDocument(t.startContainer),r=t.cloneRange();return r.collapse(e),n=o.createElement("span"),n.id=i,n.style.lineHeight="0",n.style.display="none",n.className="rangySelectionBoundary",n.appendChild(o.createTextNode(v)),r.insertNode(n),n}function o(t,i,o,r){var s=n(o,t);s?(i[r?"setStartBefore":"setEndBefore"](s),g(s)):e.warn("Marker element has been removed. Cannot restore selection.")}function r(t,e){return e.compareBoundaryPoints(t.START_TO_START,t)}function s(e,n){var o,r,s=t.DomRange.getRangeDocument(e),a=e.toString(),l=m(n);return e.collapsed?(r=i(e,!1),{document:s,markerId:r.id,collapsed:!0}):(r=i(e,!1),o=i(e,!0),{document:s,startMarkerId:o.id,endMarkerId:r.id,collapsed:!1,backward:l,toString:function(){return"original text: '"+a+"', new text: '"+e.toString()+"'"}})}function a(i,r){var s=i.document;"undefined"==typeof r&&(r=!0);var a=t.createRange(s);if(i.collapsed){var l=n(i.markerId,s);if(l){l.style.display="inline";var c=l.previousSibling;c&&3==c.nodeType?(g(l),a.collapseToPoint(c,c.length)):(a.collapseBefore(l),g(l))}else e.warn("Marker element has been removed. Cannot restore selection.")}else o(s,a,i.startMarkerId,!0),o(s,a,i.endMarkerId,!1);return r&&a.normalizeBoundaries(),a}function l(e,i){var o,a,l=[],c=m(i);e=e.slice(0),e.sort(r);for(var u=0,h=e.length;h>u;++u)l[u]=s(e[u],c);for(u=h-1;u>=0;--u)o=e[u],a=t.DomRange.getRangeDocument(o),o.collapsed?o.collapseAfter(n(l[u].markerId,a)):(o.setEndBefore(n(l[u].endMarkerId,a)),o.setStartAfter(n(l[u].startMarkerId,a)));return l}function c(n){if(!t.isSelectionValid(n))return e.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus."),null;var i=t.getSelection(n),o=i.getAllRanges(),r=1==o.length&&i.isBackward(),s=l(o,r);return r?i.setSingleRange(o[0],r):i.setRanges(o),{win:n,rangeInfos:s,restored:!1}}function u(t){for(var e=[],n=t.length,i=n-1;i>=0;i--)e[i]=a(t[i],!0);return e}function h(e,n){if(!e.restored){var i=e.rangeInfos,o=t.getSelection(e.win),r=u(i),s=i.length;1==s&&n&&t.features.selectionHasExtend&&i[0].backward?(o.removeAllRanges(),o.addRange(r[0],!0)):o.setRanges(r),e.restored=!0}}function d(t,e){var i=n(e,t);i&&g(i)}function f(t){for(var e,n=t.rangeInfos,i=0,o=n.length;o>i;++i)e=n[i],e.collapsed?d(t.doc,e.markerId):(d(t.doc,e.startMarkerId),d(t.doc,e.endMarkerId))}var p=t.dom,g=p.removeNode,m=t.Selection.isDirectionBackward,v="\ufeff";t.util.extend(t,{saveRange:s,restoreRange:a,saveRanges:l,restoreRanges:u,saveSelection:c,restoreSelection:h,removeMarkerElement:d,removeMarkers:f})})},{rangy:"rangy"}],rangy:[function(t,e,n){!function(t,i){"function"==typeof define&&define.amd?define(t):"undefined"!=typeof e&&"object"==typeof n?e.exports=t():i.rangy=t()}(function(){function t(t,e){var n=typeof t[e];return n==b||!(n!=w||!t[e])||"unknown"==n}function e(t,e){return!(typeof t[e]!=w||!t[e])}function n(t,e){return typeof t[e]!=C}function i(t){return function(e,n){for(var i=n.length;i--;)if(!t(e,n[i]))return!1;return!0}}function o(t){return t&&E(t,_)&&R(t,T)}function r(t){return e(t,"body")?t.body:t.getElementsByTagName("body")[0]}function s(e){typeof console!=C&&t(console,"log")&&console.log(e)}function a(t,e){N&&e?alert(t):s(t)}function l(t){D.initialized=!0,D.supported=!1,a("Rangy is not supported in this environment. Reason: "+t,D.config.alertOnFail)}function c(t){a("Rangy warning: "+t,D.config.alertOnWarn)}function u(t){return t.message||t.description||String(t)}function h(){if(N&&!D.initialized){var e,n=!1,i=!1;t(document,"createRange")&&(e=document.createRange(),E(e,S)&&R(e,x)&&(n=!0));var a=r(document);if(!a||"body"!=a.nodeName.toLowerCase())return void l("No body element found");if(a&&t(a,"createTextRange")&&(e=a.createTextRange(),o(e)&&(i=!0)),!n&&!i)return void l("Neither Range nor TextRange are available");D.initialized=!0,D.features={implementsDomRange:n,implementsTextRange:i};var c,h;for(var d in P)(c=P[d])instanceof g&&c.init(c,D);for(var f=0,p=I.length;p>f;++f)try{I[f](D)}catch(m){h="Rangy init listener threw an exception. Continuing. Detail: "+u(m),s(h)}}}function d(t,e,n){n&&(t+=" in module "+n.name),D.warn("DEPRECATED: "+t+" is deprecated. Please use "+e+" instead.")}function f(t,e,n,i){t[e]=function(){return d(e,n,i),t[n].apply(t,O.toArray(arguments))}}function p(t){t=t||window,h();for(var e=0,n=L.length;n>e;++e)L[e](t)}function g(t,e,n){this.name=t,this.dependencies=e,this.initialized=!1,this.supported=!1,this.initializer=n}function m(t,e,n){var i=new g(t,e,function(e){if(!e.initialized){e.initialized=!0;try{n(D,e),e.supported=!0}catch(i){var o="Module '"+t+"' failed to load: "+u(i);s(o),i.stack&&s(i.stack)}}});return P[t]=i,i}function v(){}function y(){}var w="object",b="function",C="undefined",x=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],S=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],T=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],_=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"],E=i(t),k=i(e),R=i(n),A=[].forEach?function(t,e){t.forEach(e)}:function(t,e){for(var n=0,i=t.length;i>n;++n)e(t[n],n)},P={},N=typeof window!=C&&typeof document!=C,O={isHostMethod:t,isHostObject:e,isHostProperty:n,areHostMethods:E,areHostObjects:k,areHostProperties:R,isTextRange:o,getBody:r,forEach:A},D={version:"1.3.1-dev",initialized:!1,isBrowser:N,supported:!0,util:O,features:{},modules:P,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==C?!0:rangyAutoInitialize}};D.fail=l,D.warn=c;var M;({}).hasOwnProperty?(O.extend=M=function(t,e,n){var i,o;for(var r in e)e.hasOwnProperty(r)&&(i=t[r],o=e[r],n&&null!==i&&"object"==typeof i&&null!==o&&"object"==typeof o&&M(i,o,!0),t[r]=o);return e.hasOwnProperty("toString")&&(t.toString=e.toString),t},O.createOptions=function(t,e){var n={};return M(n,e),t&&M(n,t),n}):l("hasOwnProperty not supported"),N||l("Rangy can only run in a browser"),function(){var t;if(N){var e=document.createElement("div");e.appendChild(document.createElement("span"));var n=[].slice;try{1==n.call(e.childNodes,0)[0].nodeType&&(t=function(t){return n.call(t,0)})}catch(i){}}t||(t=function(t){for(var e=[],n=0,i=t.length;i>n;++n)e[n]=t[n];return e}),O.toArray=t}();var H;N&&(t(document,"addEventListener")?H=function(t,e,n){t.addEventListener(e,n,!1)}:t(document,"attachEvent")?H=function(t,e,n){t.attachEvent("on"+e,n)}:l("Document does not have required addEventListener or attachEvent method"),O.addListener=H);var I=[];O.deprecationNotice=d,O.createAliasForDeprecatedMethod=f,D.init=h,D.addInitListener=function(t){D.initialized?t(D):I.push(t)};var L=[];D.addShimListener=function(t){L.push(t)},N&&(D.shim=D.createMissingNativeApi=p,f(D,"createMissingNativeApi","shim")),g.prototype={init:function(){for(var t,e,n=this.dependencies||[],i=0,o=n.length;o>i;++i){if(e=n[i],t=P[e],!(t&&t instanceof g))throw new Error("required module '"+e+"' not found");if(t.init(),!t.supported)throw new Error("required module '"+e+"' not supported")}this.initializer(this)},fail:function(t){throw this.initialized=!0,this.supported=!1,new Error(t)},warn:function(t){D.warn("Module "+this.name+": "+t)},deprecationNotice:function(t,e){D.warn("DEPRECATED: "+t+" in module "+this.name+" is deprecated. Please use "+e+" instead")},createError:function(t){return new Error("Error in Rangy "+this.name+" module: "+t)}},D.createModule=function(t){var e,n;2==arguments.length?(e=arguments[1],n=[]):(e=arguments[2],n=arguments[1]);var i=m(t,n,e);D.initialized&&D.supported&&i.init()},D.createCoreModule=function(t,e,n){m(t,e,n)},D.RangePrototype=v,D.rangePrototype=new v,D.selectionPrototype=new y,D.createCoreModule("DomUtil",[],function(t,e){function n(t){var e;return typeof t.namespaceURI==N||null===(e=t.namespaceURI)||"http://www.w3.org/1999/xhtml"==e}function i(t){var e=t.parentNode;return 1==e.nodeType?e:null}function o(t){for(var e=0;t=t.previousSibling;)++e;return e}function r(t){switch(t.nodeType){case 7:case 10:return 0;case 3:case 8:return t.length;default:return t.childNodes.length}}function s(t,e){var n,i=[];for(n=t;n;n=n.parentNode)i.push(n);for(n=e;n;n=n.parentNode)if(I(i,n))return n;return null}function a(t,e,n){for(var i=n?e:e.parentNode;i;){if(i===t)return!0;i=i.parentNode}return!1}function l(t,e){return a(t,e,!0)}function c(t,e,n){for(var i,o=n?t:t.parentNode;o;){if(i=o.parentNode,i===e)return o;o=i}return null}function u(t){var e=t.nodeType;return 3==e||4==e||8==e}function h(t){if(!t)return!1;var e=t.nodeType;return 3==e||8==e}function d(t,e){var n=e.nextSibling,i=e.parentNode;return n?i.insertBefore(t,n):i.appendChild(t),t}function f(t,e,n){var i=t.cloneNode(!1);if(i.deleteData(0,e),t.deleteData(e,t.length-e),d(i,t),n)for(var r,s=0;r=n[s++];)r.node==t&&r.offset>e?(r.node=i,r.offset-=e):r.node==t.parentNode&&r.offset>o(t)&&++r.offset;return i}function p(t){if(9==t.nodeType)return t;if(typeof t.ownerDocument!=N)return t.ownerDocument;if(typeof t.document!=N)return t.document;if(t.parentNode)return p(t.parentNode);throw e.createError("getDocument: no document found for node")}function g(t){var n=p(t);if(typeof n.defaultView!=N)return n.defaultView;if(typeof n.parentWindow!=N)return n.parentWindow;throw e.createError("Cannot get a window object for node")}function m(t){if(typeof t.contentDocument!=N)return t.contentDocument;if(typeof t.contentWindow!=N)return t.contentWindow.document;throw e.createError("getIframeDocument: No Document object found for iframe element")}function v(t){if(typeof t.contentWindow!=N)return t.contentWindow;if(typeof t.contentDocument!=N)return t.contentDocument.defaultView;throw e.createError("getIframeWindow: No Window object found for iframe element")}function y(t){return t&&O.isHostMethod(t,"setTimeout")&&O.isHostObject(t,"document")}function w(t,e,n){var i;if(t?O.isHostProperty(t,"nodeType")?i=1==t.nodeType&&"iframe"==t.tagName.toLowerCase()?m(t):p(t):y(t)&&(i=t.document):i=document,!i)throw e.createError(n+"(): Parameter must be a Window object or DOM node");return i}function b(t){for(var e;e=t.parentNode;)t=e;return t}function C(t,n,i,r){var a,l,u,h,d;if(t==i)return n===r?0:r>n?-1:1;if(a=c(i,t,!0))return n<=o(a)?-1:1;if(a=c(t,i,!0))return o(a)<r?-1:1;if(l=s(t,i),!l)throw new Error("comparePoints error: nodes have no common ancestor");if(u=t===l?l:c(t,l,!0),h=i===l?l:c(i,l,!0),u===h)throw e.createError("comparePoints got to case 4 and childA and childB are the same!");for(d=l.firstChild;d;){if(d===u)return-1;if(d===h)return 1;d=d.nextSibling}}function x(t){var e;try{return e=t.parentNode,!1}catch(n){return!0}}function S(t){if(!t)return"[No node]";if(L&&x(t))return"[Broken node]";if(u(t))return'"'+t.data+'"';if(1==t.nodeType){var e=t.id?' id="'+t.id+'"':"";return"<"+t.nodeName+e+">[index:"+o(t)+",length:"+t.childNodes.length+"]["+(t.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return t.nodeName}function T(t){for(var e,n=p(t).createDocumentFragment();e=t.firstChild;)n.appendChild(e);return n}function _(t,e,n){var i=D(t),o=t.createElement("div");o.contentEditable=""+!!n,e&&(o.innerHTML=e);var r=i.firstChild;return r?i.insertBefore(o,r):i.appendChild(o),o}function E(t){return t.parentNode.removeChild(t)}function k(t){this.root=t,this._next=t}function R(t){return new k(t)}function A(t,e){this.node=t,this.offset=e}function P(t){this.code=this[t],this.codeName=t,this.message="DOMException: "+this.codeName}var N="undefined",O=t.util,D=O.getBody;O.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||e.fail("document missing a Node creation method"),O.isHostMethod(document,"getElementsByTagName")||e.fail("document missing getElementsByTagName method");var M=document.createElement("div");O.areHostMethods(M,["insertBefore","appendChild","cloneNode"]||!O.areHostObjects(M,["previousSibling","nextSibling","childNodes","parentNode"]))||e.fail("Incomplete Element implementation"),O.isHostProperty(M,"innerHTML")||e.fail("Element is missing innerHTML property");var H=document.createTextNode("test");O.areHostMethods(H,["splitText","deleteData","insertData","appendData","cloneNode"]||!O.areHostObjects(M,["previousSibling","nextSibling","childNodes","parentNode"])||!O.areHostProperties(H,["data"]))||e.fail("Incomplete Text Node implementation");var I=function(t,e){for(var n=t.length;n--;)if(t[n]===e)return!0;return!1},L=!1;!function(){var e=document.createElement("b");e.innerHTML="1";var n=e.firstChild;e.innerHTML="<br />",L=x(n),t.features.crashyTextNodes=L}();var F;typeof window.getComputedStyle!=N?F=function(t,e){return g(t).getComputedStyle(t,null)[e]}:typeof document.documentElement.currentStyle!=N?F=function(t,e){return t.currentStyle?t.currentStyle[e]:""}:e.fail("No means of obtaining computed style properties found"),k.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var t,e,n=this._current=this._next;if(this._current)if(t=n.firstChild)this._next=t;else{for(e=null;n!==this.root&&!(e=n.nextSibling);)n=n.parentNode;this._next=e}return this._current},detach:function(){this._current=this._next=this.root=null}},A.prototype={equals:function(t){return!!t&&this.node===t.node&&this.offset==t.offset},inspect:function(){return"[DomPosition("+S(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},P.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},P.prototype.toString=function(){return this.message},t.dom={arrayContains:I,isHtmlNamespace:n,parentElement:i,getNodeIndex:o,getNodeLength:r,getCommonAncestor:s,isAncestorOf:a,isOrIsAncestorOf:l,getClosestAncestorIn:c,isCharacterDataNode:u,isTextOrCommentNode:h,insertAfter:d,splitDataNode:f,getDocument:p,getWindow:g,getIframeWindow:v,getIframeDocument:m,getBody:D,isWindow:y,getContentDocument:w,getRootContainer:b,comparePoints:C,isBrokenNode:x,inspectNode:S,getComputedStyleProperty:F,createTestElement:_,removeNode:E,fragmentFromNodeChildren:T,createIterator:R,DomPosition:A},t.DOMException=P}),D.createCoreModule("DomRange",["DomUtil"],function(t,e){function n(t,e){return 3!=t.nodeType&&(V(t,e.startContainer)||V(t,e.endContainer))}function i(t){return t.document||W(t.startContainer)}function o(t){return G(t.startContainer)}function r(t){return new L(t.parentNode,B(t))}function s(t){return new L(t.parentNode,B(t)+1)}function a(t,e,n){var i=11==t.nodeType?t.firstChild:t;return z(e)?n==e.length?H.insertAfter(t,e):e.parentNode.insertBefore(t,0==n?e:U(e,n)):n>=e.childNodes.length?e.appendChild(t):e.insertBefore(t,e.childNodes[n]),i}function l(t,e,n){if(_(t),_(e),i(e)!=i(t))throw new F("WRONG_DOCUMENT_ERR");var o=j(t.startContainer,t.startOffset,e.endContainer,e.endOffset),r=j(t.endContainer,t.endOffset,e.startContainer,e.startOffset);return n?0>=o&&r>=0:0>o&&r>0}function c(t){for(var e,n,o,r=i(t.range).createDocumentFragment();n=t.next();){if(e=t.isPartiallySelectedSubtree(),n=n.cloneNode(!e),e&&(o=t.getSubtreeIterator(),n.appendChild(c(o)),o.detach()),10==n.nodeType)throw new F("HIERARCHY_REQUEST_ERR");r.appendChild(n)}return r}function u(t,e,n){var i,o;n=n||{stop:!1};for(var r,s;r=t.next();)if(t.isPartiallySelectedSubtree()){if(e(r)===!1)return void(n.stop=!0);if(s=t.getSubtreeIterator(),u(s,e,n),s.detach(),n.stop)return}else for(i=H.createIterator(r);o=i.next();)if(e(o)===!1)return void(n.stop=!0)}function h(t){for(var e;t.next();)t.isPartiallySelectedSubtree()?(e=t.getSubtreeIterator(),h(e),e.detach()):t.remove()}function d(t){for(var e,n,o=i(t.range).createDocumentFragment();e=t.next();){if(t.isPartiallySelectedSubtree()?(e=e.cloneNode(!1),n=t.getSubtreeIterator(),e.appendChild(d(n)),n.detach()):t.remove(),10==e.nodeType)throw new F("HIERARCHY_REQUEST_ERR");
o.appendChild(e)}return o}function f(t,e,n){var i,o=!(!e||!e.length),r=!!n;o&&(i=new RegExp("^("+e.join("|")+")$"));var s=[];return u(new g(t,!1),function(e){if((!o||i.test(e.nodeType))&&(!r||n(e))){var a=t.startContainer;if(e!=a||!z(a)||t.startOffset!=a.length){var l=t.endContainer;e==l&&z(l)&&0==t.endOffset||s.push(e)}}}),s}function p(t){var e="undefined"==typeof t.getName?"Range":t.getName();return"["+e+"("+H.inspectNode(t.startContainer)+":"+t.startOffset+", "+H.inspectNode(t.endContainer)+":"+t.endOffset+")]"}function g(t,e){if(this.range=t,this.clonePartiallySelectedTextNodes=e,!t.collapsed){this.sc=t.startContainer,this.so=t.startOffset,this.ec=t.endContainer,this.eo=t.endOffset;var n=t.commonAncestorContainer;this.sc===this.ec&&z(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||z(this.sc)?X(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||z(this.ec)?X(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}function m(t){return function(e,n){for(var i,o=n?e:e.parentNode;o;){if(i=o.nodeType,q(t,i))return o;o=o.parentNode}return null}}function v(t,e){if(ot(t,e))throw new F("INVALID_NODE_TYPE_ERR")}function y(t,e){if(!q(e,t.nodeType))throw new F("INVALID_NODE_TYPE_ERR")}function w(t,e){if(0>e||e>(z(t)?t.length:t.childNodes.length))throw new F("INDEX_SIZE_ERR")}function b(t,e){if(nt(t,!0)!==nt(e,!0))throw new F("WRONG_DOCUMENT_ERR")}function C(t){if(it(t,!0))throw new F("NO_MODIFICATION_ALLOWED_ERR")}function x(t,e){if(!t)throw new F(e)}function S(t,e){return e<=(z(t)?t.length:t.childNodes.length)}function T(t){return!!t.startContainer&&!!t.endContainer&&!($&&(H.isBrokenNode(t.startContainer)||H.isBrokenNode(t.endContainer)))&&G(t.startContainer)==G(t.endContainer)&&S(t.startContainer,t.startOffset)&&S(t.endContainer,t.endOffset)}function _(t){if(!T(t))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+t.inspect()+")")}function E(t,e){_(t);var n=t.startContainer,i=t.startOffset,o=t.endContainer,r=t.endOffset,s=n===o;z(o)&&r>0&&r<o.length&&U(o,r,e),z(n)&&i>0&&i<n.length&&(n=U(n,i,e),s?(r-=i,o=n):o==n.parentNode&&r>=B(n)&&r++,i=0),t.setStartAndEnd(n,i,o,r)}function k(t){_(t);var e=t.commonAncestorContainer.parentNode.cloneNode(!1);return e.appendChild(t.cloneContents()),e.innerHTML}function R(t){t.START_TO_START=ut,t.START_TO_END=ht,t.END_TO_END=dt,t.END_TO_START=ft,t.NODE_BEFORE=pt,t.NODE_AFTER=gt,t.NODE_BEFORE_AND_AFTER=mt,t.NODE_INSIDE=vt}function A(t){R(t),R(t.prototype)}function P(t,e){return function(){_(this);var n,i,o=this.startContainer,r=this.startOffset,a=this.commonAncestorContainer,l=new g(this,!0);o!==a&&(n=X(o,a,!0),i=s(n),o=i.node,r=i.offset),u(l,C),l.reset();var c=t(l);return l.detach(),e(this,o,r,o,r),c}}function N(e,i){function o(t,e){return function(n){y(n,Q),y(G(n),Z);var i=(t?r:s)(n);(e?a:l)(this,i.node,i.offset)}}function a(t,e,n){var o=t.endContainer,r=t.endOffset;e===t.startContainer&&n===t.startOffset||(G(e)==G(o)&&1!=j(e,n,o,r)||(o=e,r=n),i(t,e,n,o,r))}function l(t,e,n){var o=t.startContainer,r=t.startOffset;e===t.endContainer&&n===t.endOffset||(G(e)==G(o)&&-1!=j(e,n,o,r)||(o=e,r=n),i(t,o,r,e,n))}var c=function(){};c.prototype=t.rangePrototype,e.prototype=new c,I.extend(e.prototype,{setStart:function(t,e){v(t,!0),w(t,e),a(this,t,e)},setEnd:function(t,e){v(t,!0),w(t,e),l(this,t,e)},setStartAndEnd:function(){var t=arguments,e=t[0],n=t[1],o=e,r=n;switch(t.length){case 3:r=t[2];break;case 4:o=t[2],r=t[3]}i(this,e,n,o,r)},setBoundary:function(t,e,n){this["set"+(n?"Start":"End")](t,e)},setStartBefore:o(!0,!0),setStartAfter:o(!1,!0),setEndBefore:o(!0,!1),setEndAfter:o(!1,!1),collapse:function(t){_(this),t?i(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):i(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(t){v(t,!0),i(this,t,0,t,Y(t))},selectNode:function(t){v(t,!1),y(t,Q);var e=r(t),n=s(t);i(this,e.node,e.offset,n.node,n.offset)},extractContents:P(d,i),deleteContents:P(h,i),canSurroundContents:function(){_(this),C(this.startContainer),C(this.endContainer);var t=new g(this,!0),e=t._first&&n(t._first,this)||t._last&&n(t._last,this);return t.detach(),!e},splitBoundaries:function(){E(this)},splitBoundariesPreservingPositions:function(t){E(this,t)},normalizeBoundaries:function(){_(this);var t,e=this.startContainer,n=this.startOffset,o=this.endContainer,r=this.endOffset,s=function(t){var e=t.nextSibling;e&&e.nodeType==t.nodeType&&(o=t,r=t.length,t.appendData(e.data),K(e))},a=function(t){var i=t.previousSibling;if(i&&i.nodeType==t.nodeType){e=t;var s=t.length;if(n=i.length,t.insertData(0,i.data),K(i),e==o)r+=n,o=e;else if(o==t.parentNode){var a=B(t);r==a?(o=t,r=s):r>a&&r--}}},l=!0;if(z(o))r==o.length?s(o):0==r&&(t=o.previousSibling,t&&t.nodeType==o.nodeType&&(r=t.length,e==o&&(l=!1),t.appendData(o.data),K(o),o=t));else{if(r>0){var c=o.childNodes[r-1];c&&z(c)&&s(c)}l=!this.collapsed}if(l){if(z(e))0==n?a(e):n==e.length&&(t=e.nextSibling,t&&t.nodeType==e.nodeType&&(o==t&&(o=e,r+=e.length),e.appendData(t.data),K(t)));else if(n<e.childNodes.length){var u=e.childNodes[n];u&&z(u)&&a(u)}}else e=o,n=r;i(this,e,n,o,r)},collapseToPoint:function(t,e){v(t,!0),w(t,e),this.setStartAndEnd(t,e)}}),A(e)}function O(t){t.collapsed=t.startContainer===t.endContainer&&t.startOffset===t.endOffset,t.commonAncestorContainer=t.collapsed?t.startContainer:H.getCommonAncestor(t.startContainer,t.endContainer)}function D(t,e,n,i,o){t.startContainer=e,t.startOffset=n,t.endContainer=i,t.endOffset=o,t.document=H.getDocument(e),O(t)}function M(t){this.startContainer=t,this.startOffset=0,this.endContainer=t,this.endOffset=0,this.document=t,O(this)}var H=t.dom,I=t.util,L=H.DomPosition,F=t.DOMException,z=H.isCharacterDataNode,B=H.getNodeIndex,V=H.isOrIsAncestorOf,W=H.getDocument,j=H.comparePoints,U=H.splitDataNode,X=H.getClosestAncestorIn,Y=H.getNodeLength,q=H.arrayContains,G=H.getRootContainer,$=t.features.crashyTextNodes,K=H.removeNode;g.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var t=this._current=this._next;return t&&(this._next=t!==this._last?t.nextSibling:null,z(t)&&this.clonePartiallySelectedTextNodes&&(t===this.ec&&(t=t.cloneNode(!0)).deleteData(this.eo,t.length-this.eo),this._current===this.sc&&(t=t.cloneNode(!0)).deleteData(0,this.so))),t},remove:function(){var t,e,n=this._current;!z(n)||n!==this.sc&&n!==this.ec?n.parentNode&&K(n):(t=n===this.sc?this.so:0,e=n===this.ec?this.eo:n.length,t!=e&&n.deleteData(t,e-t))},isPartiallySelectedSubtree:function(){var t=this._current;return n(t,this.range)},getSubtreeIterator:function(){var t;if(this.isSingleCharacterDataNode)t=this.range.cloneRange(),t.collapse(!1);else{t=new M(i(this.range));var e=this._current,n=e,o=0,r=e,s=Y(e);V(e,this.sc)&&(n=this.sc,o=this.so),V(e,this.ec)&&(r=this.ec,s=this.eo),D(t,n,o,r,s)}return new g(t,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var Q=[1,3,4,5,7,8,10],Z=[2,9,11],J=[5,6,10,12],tt=[1,3,4,5,7,8,10,11],et=[1,3,4,5,7,8],nt=m([9,11]),it=m(J),ot=m([6,10,12]),rt=document.createElement("style"),st=!1;try{rt.innerHTML="<b>x</b>",st=3==rt.firstChild.nodeType}catch(at){}t.features.htmlParsingConforms=st;var lt=st?function(t){var e=this.startContainer,n=W(e);if(!e)throw new F("INVALID_STATE_ERR");var i=null;return 1==e.nodeType?i=e:z(e)&&(i=H.parentElement(e)),i=null===i||"HTML"==i.nodeName&&H.isHtmlNamespace(W(i).documentElement)&&H.isHtmlNamespace(i)?n.createElement("body"):i.cloneNode(!1),i.innerHTML=t,H.fragmentFromNodeChildren(i)}:function(t){var e=i(this),n=e.createElement("body");return n.innerHTML=t,H.fragmentFromNodeChildren(n)},ct=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],ut=0,ht=1,dt=2,ft=3,pt=0,gt=1,mt=2,vt=3;I.extend(t.rangePrototype,{compareBoundaryPoints:function(t,e){_(this),b(this.startContainer,e.startContainer);var n,i,o,r,s=t==ft||t==ut?"start":"end",a=t==ht||t==ut?"start":"end";return n=this[s+"Container"],i=this[s+"Offset"],o=e[a+"Container"],r=e[a+"Offset"],j(n,i,o,r)},insertNode:function(t){if(_(this),y(t,tt),C(this.startContainer),V(t,this.startContainer))throw new F("HIERARCHY_REQUEST_ERR");var e=a(t,this.startContainer,this.startOffset);this.setStartBefore(e)},cloneContents:function(){_(this);var t,e;if(this.collapsed)return i(this).createDocumentFragment();if(this.startContainer===this.endContainer&&z(this.startContainer))return t=this.startContainer.cloneNode(!0),t.data=t.data.slice(this.startOffset,this.endOffset),e=i(this).createDocumentFragment(),e.appendChild(t),e;var n=new g(this,!0);return t=c(n),n.detach(),t},canSurroundContents:function(){_(this),C(this.startContainer),C(this.endContainer);var t=new g(this,!0),e=t._first&&n(t._first,this)||t._last&&n(t._last,this);return t.detach(),!e},surroundContents:function(t){if(y(t,et),!this.canSurroundContents())throw new F("INVALID_STATE_ERR");var e=this.extractContents();if(t.hasChildNodes())for(;t.lastChild;)t.removeChild(t.lastChild);a(t,this.startContainer,this.startOffset),t.appendChild(e),this.selectNode(t)},cloneRange:function(){_(this);for(var t,e=new M(i(this)),n=ct.length;n--;)t=ct[n],e[t]=this[t];return e},toString:function(){_(this);var t=this.startContainer;if(t===this.endContainer&&z(t))return 3==t.nodeType||4==t.nodeType?t.data.slice(this.startOffset,this.endOffset):"";var e=[],n=new g(this,!0);return u(n,function(t){3!=t.nodeType&&4!=t.nodeType||e.push(t.data)}),n.detach(),e.join("")},compareNode:function(t){_(this);var e=t.parentNode,n=B(t);if(!e)throw new F("NOT_FOUND_ERR");var i=this.comparePoint(e,n),o=this.comparePoint(e,n+1);return 0>i?o>0?mt:pt:o>0?gt:vt},comparePoint:function(t,e){return _(this),x(t,"HIERARCHY_REQUEST_ERR"),b(t,this.startContainer),j(t,e,this.startContainer,this.startOffset)<0?-1:j(t,e,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:lt,toHtml:function(){return k(this)},intersectsNode:function(t,e){if(_(this),G(t)!=o(this))return!1;var n=t.parentNode,i=B(t);if(!n)return!0;var r=j(n,i,this.endContainer,this.endOffset),s=j(n,i+1,this.startContainer,this.startOffset);return e?0>=r&&s>=0:0>r&&s>0},isPointInRange:function(t,e){return _(this),x(t,"HIERARCHY_REQUEST_ERR"),b(t,this.startContainer),j(t,e,this.startContainer,this.startOffset)>=0&&j(t,e,this.endContainer,this.endOffset)<=0},intersectsRange:function(t){return l(this,t,!1)},intersectsOrTouchesRange:function(t){return l(this,t,!0)},intersection:function(t){if(this.intersectsRange(t)){var e=j(this.startContainer,this.startOffset,t.startContainer,t.startOffset),n=j(this.endContainer,this.endOffset,t.endContainer,t.endOffset),i=this.cloneRange();return-1==e&&i.setStart(t.startContainer,t.startOffset),1==n&&i.setEnd(t.endContainer,t.endOffset),i}return null},union:function(t){if(this.intersectsOrTouchesRange(t)){var e=this.cloneRange();return-1==j(t.startContainer,t.startOffset,this.startContainer,this.startOffset)&&e.setStart(t.startContainer,t.startOffset),1==j(t.endContainer,t.endOffset,this.endContainer,this.endOffset)&&e.setEnd(t.endContainer,t.endOffset),e}throw new F("Ranges do not intersect")},containsNode:function(t,e){return e?this.intersectsNode(t,!1):this.compareNode(t)==vt},containsNodeContents:function(t){return this.comparePoint(t,0)>=0&&this.comparePoint(t,Y(t))<=0},containsRange:function(t){var e=this.intersection(t);return null!==e&&t.equals(e)},containsNodeText:function(t){var e=this.cloneRange();e.selectNode(t);var n=e.getNodes([3]);if(n.length>0){e.setStart(n[0],0);var i=n.pop();return e.setEnd(i,i.length),this.containsRange(e)}return this.containsNodeContents(t)},getNodes:function(t,e){return _(this),f(this,t,e)},getDocument:function(){return i(this)},collapseBefore:function(t){this.setEndBefore(t),this.collapse(!1)},collapseAfter:function(t){this.setStartAfter(t),this.collapse(!0)},getBookmark:function(e){var n=i(this),o=t.createRange(n);e=e||H.getBody(n),o.selectNodeContents(e);var r=this.intersection(o),s=0,a=0;return r&&(o.setEnd(r.startContainer,r.startOffset),s=o.toString().length,a=s+r.toString().length),{start:s,end:a,containerNode:e}},moveToBookmark:function(t){var e=t.containerNode,n=0;this.setStart(e,0),this.collapse(!0);for(var i,o,r,s,a=[e],l=!1,c=!1;!c&&(i=a.pop());)if(3==i.nodeType)o=n+i.length,!l&&t.start>=n&&t.start<=o&&(this.setStart(i,t.start-n),l=!0),l&&t.end>=n&&t.end<=o&&(this.setEnd(i,t.end-n),c=!0),n=o;else for(s=i.childNodes,r=s.length;r--;)a.push(s[r])},getName:function(){return"DomRange"},equals:function(t){return M.rangesEqual(this,t)},isValid:function(){return T(this)},inspect:function(){return p(this)},detach:function(){}}),N(M,D),I.extend(M,{rangeProperties:ct,RangeIterator:g,copyComparisonConstants:A,createPrototypeRange:N,inspect:p,toHtml:k,getRangeDocument:i,rangesEqual:function(t,e){return t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset}}),t.DomRange=M}),D.createCoreModule("WrappedRange",["DomRange"],function(t,e){var n,i,o=t.dom,r=t.util,s=o.DomPosition,a=t.DomRange,l=o.getBody,c=o.getContentDocument,u=o.isCharacterDataNode;if(t.features.implementsDomRange&&!function(){function i(t){for(var e,n=d.length;n--;)e=d[n],t[e]=t.nativeRange[e];t.collapsed=t.startContainer===t.endContainer&&t.startOffset===t.endOffset}function s(t,e,n,i,o){var r=t.startContainer!==e||t.startOffset!=n,s=t.endContainer!==i||t.endOffset!=o,a=!t.equals(t.nativeRange);(r||s||a)&&(t.setEnd(i,o),t.setStart(e,n))}var u,h,d=a.rangeProperties;n=function(t){if(!t)throw e.createError("WrappedRange: Range must be specified");this.nativeRange=t,i(this)},a.createPrototypeRange(n,s),u=n.prototype,u.selectNode=function(t){this.nativeRange.selectNode(t),i(this)},u.cloneContents=function(){return this.nativeRange.cloneContents()},u.surroundContents=function(t){this.nativeRange.surroundContents(t),i(this)},u.collapse=function(t){this.nativeRange.collapse(t),i(this)},u.cloneRange=function(){return new n(this.nativeRange.cloneRange())},u.refresh=function(){i(this)},u.toString=function(){return this.nativeRange.toString()};var f=document.createTextNode("test");l(document).appendChild(f);var p=document.createRange();p.setStart(f,0),p.setEnd(f,0);try{p.setStart(f,1),u.setStart=function(t,e){this.nativeRange.setStart(t,e),i(this)},u.setEnd=function(t,e){this.nativeRange.setEnd(t,e),i(this)},h=function(t){return function(e){this.nativeRange[t](e),i(this)}}}catch(g){u.setStart=function(t,e){try{this.nativeRange.setStart(t,e)}catch(n){this.nativeRange.setEnd(t,e),this.nativeRange.setStart(t,e)}i(this)},u.setEnd=function(t,e){try{this.nativeRange.setEnd(t,e)}catch(n){this.nativeRange.setStart(t,e),this.nativeRange.setEnd(t,e)}i(this)},h=function(t,e){return function(n){try{this.nativeRange[t](n)}catch(o){this.nativeRange[e](n),this.nativeRange[t](n)}i(this)}}}u.setStartBefore=h("setStartBefore","setEndBefore"),u.setStartAfter=h("setStartAfter","setEndAfter"),u.setEndBefore=h("setEndBefore","setStartBefore"),u.setEndAfter=h("setEndAfter","setStartAfter"),u.selectNodeContents=function(t){this.setStartAndEnd(t,0,o.getNodeLength(t))},p.selectNodeContents(f),p.setEnd(f,3);var m=document.createRange();m.selectNodeContents(f),m.setEnd(f,4),m.setStart(f,2),-1==p.compareBoundaryPoints(p.START_TO_END,m)&&1==p.compareBoundaryPoints(p.END_TO_START,m)?u.compareBoundaryPoints=function(t,e){return e=e.nativeRange||e,t==e.START_TO_END?t=e.END_TO_START:t==e.END_TO_START&&(t=e.START_TO_END),this.nativeRange.compareBoundaryPoints(t,e)}:u.compareBoundaryPoints=function(t,e){return this.nativeRange.compareBoundaryPoints(t,e.nativeRange||e)};var v=document.createElement("div");v.innerHTML="123";var y=v.firstChild,w=l(document);w.appendChild(v),p.setStart(y,1),p.setEnd(y,2),p.deleteContents(),"13"==y.data&&(u.deleteContents=function(){this.nativeRange.deleteContents(),i(this)},u.extractContents=function(){var t=this.nativeRange.extractContents();return i(this),t}),w.removeChild(v),w=null,r.isHostMethod(p,"createContextualFragment")&&(u.createContextualFragment=function(t){return this.nativeRange.createContextualFragment(t)}),l(document).removeChild(f),u.getName=function(){return"WrappedRange"},t.WrappedRange=n,t.createNativeRange=function(t){return t=c(t,e,"createNativeRange"),t.createRange()}}(),t.features.implementsTextRange){var h=function(t){var e=t.parentElement(),n=t.duplicate();n.collapse(!0);var i=n.parentElement();n=t.duplicate(),n.collapse(!1);var r=n.parentElement(),s=i==r?i:o.getCommonAncestor(i,r);return s==e?s:o.getCommonAncestor(e,s)},d=function(t){return 0==t.compareEndPoints("StartToEnd",t)},f=function(t,e,n,i,r){var a=t.duplicate();a.collapse(n);var l=a.parentElement();if(o.isOrIsAncestorOf(e,l)||(l=e),!l.canHaveHTML){var c=new s(l.parentNode,o.getNodeIndex(l));return{boundaryPosition:c,nodeInfo:{nodeIndex:c.offset,containerElement:c.node}}}var h=o.getDocument(l).createElement("span");h.parentNode&&o.removeNode(h);for(var d,f,p,g,m,v=n?"StartToStart":"StartToEnd",y=r&&r.containerElement==l?r.nodeIndex:0,w=l.childNodes.length,b=w,C=b;;){if(C==w?l.appendChild(h):l.insertBefore(h,l.childNodes[C]),a.moveToElementText(h),d=a.compareEndPoints(v,t),0==d||y==b)break;if(-1==d){if(b==y+1)break;y=C}else b=b==y+1?y:C;C=Math.floor((y+b)/2),l.removeChild(h)}if(m=h.nextSibling,-1==d&&m&&u(m)){a.setEndPoint(n?"EndToStart":"EndToEnd",t);var x;if(/[\r\n]/.test(m.data)){var S=a.duplicate(),T=S.text.replace(/\r\n/g,"\r").length;for(x=S.moveStart("character",T);-1==(d=S.compareEndPoints("StartToEnd",S));)x++,S.moveStart("character",1)}else x=a.text.length;g=new s(m,x)}else f=(i||!n)&&h.previousSibling,p=(i||n)&&h.nextSibling,g=p&&u(p)?new s(p,0):f&&u(f)?new s(f,f.data.length):new s(l,o.getNodeIndex(h));return o.removeNode(h),{boundaryPosition:g,nodeInfo:{nodeIndex:C,containerElement:l}}},p=function(t,e){var n,i,r,s,a=t.offset,c=o.getDocument(t.node),h=l(c).createTextRange(),d=u(t.node);return d?(n=t.node,i=n.parentNode):(s=t.node.childNodes,n=a<s.length?s[a]:null,i=t.node),r=c.createElement("span"),r.innerHTML="&#feff;",n?i.insertBefore(r,n):i.appendChild(r),h.moveToElementText(r),h.collapse(!e),i.removeChild(r),d&&h[e?"moveStart":"moveEnd"]("character",a),h};i=function(t){this.textRange=t,this.refresh()},i.prototype=new a(document),i.prototype.refresh=function(){var t,e,n,i=h(this.textRange);d(this.textRange)?e=t=f(this.textRange,i,!0,!0).boundaryPosition:(n=f(this.textRange,i,!0,!1),t=n.boundaryPosition,e=f(this.textRange,i,!1,!1,n.nodeInfo).boundaryPosition),this.setStart(t.node,t.offset),this.setEnd(e.node,e.offset)},i.prototype.getName=function(){return"WrappedTextRange"},a.copyComparisonConstants(i);var g=function(t){if(t.collapsed)return p(new s(t.startContainer,t.startOffset),!0);var e=p(new s(t.startContainer,t.startOffset),!0),n=p(new s(t.endContainer,t.endOffset),!1),i=l(a.getRangeDocument(t)).createTextRange();return i.setEndPoint("StartToStart",e),i.setEndPoint("EndToEnd",n),i};if(i.rangeToTextRange=g,i.prototype.toTextRange=function(){return g(this)},t.WrappedTextRange=i,!t.features.implementsDomRange||t.config.preferTextRange){var m=function(t){return t("return this;")()}(Function);"undefined"==typeof m.Range&&(m.Range=i),t.createNativeRange=function(t){return t=c(t,e,"createNativeRange"),l(t).createTextRange()},t.WrappedRange=i}}t.createRange=function(n){return n=c(n,e,"createRange"),new t.WrappedRange(t.createNativeRange(n))},t.createRangyRange=function(t){return t=c(t,e,"createRangyRange"),new a(t)},r.createAliasForDeprecatedMethod(t,"createIframeRange","createRange"),r.createAliasForDeprecatedMethod(t,"createIframeRangyRange","createRangyRange"),t.addShimListener(function(e){var n=e.document;"undefined"==typeof n.createRange&&(n.createRange=function(){return t.createRange(n)}),n=e=null})}),D.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(t,e){function n(t){return"string"==typeof t?/^backward(s)?$/i.test(t):!!t}function i(t,n){if(t){if(R.isWindow(t))return t;if(t instanceof v)return t.win;var i=R.getContentDocument(t,e,n);return R.getWindow(i)}return window}function o(t){return i(t,"getWinSelection").getSelection()}function r(t){return i(t,"getDocSelection").document.selection}function s(t){var e=!1;return t.anchorNode&&(e=1==R.comparePoints(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset)),e}function a(t,e,n){var i=n?"end":"start",o=n?"start":"end";t.anchorNode=e[i+"Container"],t.anchorOffset=e[i+"Offset"],t.focusNode=e[o+"Container"],t.focusOffset=e[o+"Offset"]}function l(t){var e=t.nativeSelection;t.anchorNode=e.anchorNode,t.anchorOffset=e.anchorOffset,t.focusNode=e.focusNode,t.focusOffset=e.focusOffset}function c(t){t.anchorNode=t.focusNode=null,t.anchorOffset=t.focusOffset=0,t.rangeCount=0,t.isCollapsed=!0,t._ranges.length=0}function u(e){var n;return e instanceof N?(n=t.createNativeRange(e.getDocument()),n.setEnd(e.endContainer,e.endOffset),n.setStart(e.startContainer,e.startOffset)):e instanceof O?n=e.nativeRange:H.implementsDomRange&&e instanceof R.getWindow(e.startContainer).Range&&(n=e),n}function h(t){if(!t.length||1!=t[0].nodeType)return!1;for(var e=1,n=t.length;n>e;++e)if(!R.isAncestorOf(t[0],t[e]))return!1;return!0}function d(t){var n=t.getNodes();if(!h(n))throw e.createError("getSingleElementFromRange: range "+t.inspect()+" did not consist of a single element");return n[0]}function f(t){return!!t&&"undefined"!=typeof t.text}function p(t,e){var n=new O(e);t._ranges=[n],a(t,n,!1),t.rangeCount=1,t.isCollapsed=n.collapsed}function g(e){if(e._ranges.length=0,"None"==e.docSelection.type)c(e);else{var n=e.docSelection.createRange();if(f(n))p(e,n);else{e.rangeCount=n.length;for(var i,o=L(n.item(0)),r=0;r<e.rangeCount;++r)i=t.createRange(o),i.selectNode(n.item(r)),e._ranges.push(i);e.isCollapsed=1==e.rangeCount&&e._ranges[0].collapsed,a(e,e._ranges[e.rangeCount-1],!1)}}}function m(t,n){for(var i=t.docSelection.createRange(),o=d(n),r=L(i.item(0)),s=F(r).createControlRange(),a=0,l=i.length;l>a;++a)s.add(i.item(a));try{s.add(o)}catch(c){throw e.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}s.select(),g(t)}function v(t,e,n){this.nativeSelection=t,this.docSelection=e,this._ranges=[],this.win=n,this.refresh()}function y(t){t.win=t.anchorNode=t.focusNode=t._ranges=null,t.rangeCount=t.anchorOffset=t.focusOffset=0,t.detached=!0}function w(t,e){for(var n,i,o=et.length;o--;)if(n=et[o],i=n.selection,"deleteAll"==e)y(i);else if(n.win==t)return"delete"==e?(et.splice(o,1),!0):i;return"deleteAll"==e&&(et.length=0),null}function b(t,n){for(var i,o=L(n[0].startContainer),r=F(o).createControlRange(),s=0,a=n.length;a>s;++s){i=d(n[s]);try{r.add(i)}catch(l){throw e.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}r.select(),g(t)}function C(t,e){if(t.win.document!=L(e))throw new D("WRONG_DOCUMENT_ERR")}function x(e){return function(n,i){var o;this.rangeCount?(o=this.getRangeAt(0),o["set"+(e?"Start":"End")](n,i)):(o=t.createRange(this.win.document),o.setStartAndEnd(n,i)),this.setSingleRange(o,this.isBackward())}}function S(t){var e=[],n=new M(t.anchorNode,t.anchorOffset),i=new M(t.focusNode,t.focusOffset),o="function"==typeof t.getName?t.getName():"Selection";if("undefined"!=typeof t.rangeCount)for(var r=0,s=t.rangeCount;s>r;++r)e[r]=N.inspect(t.getRangeAt(r));return"["+o+"(Ranges: "+e.join(", ")+")(anchor: "+n.inspect()+", focus: "+i.inspect()+"]"}t.config.checkSelectionRanges=!0;var T,_,E="boolean",k="number",R=t.dom,A=t.util,P=A.isHostMethod,N=t.DomRange,O=t.WrappedRange,D=t.DOMException,M=R.DomPosition,H=t.features,I="Control",L=R.getDocument,F=R.getBody,z=N.rangesEqual,B=P(window,"getSelection"),V=A.isHostObject(document,"selection");H.implementsWinGetSelection=B,H.implementsDocSelection=V;var W=V&&(!B||t.config.preferTextRange);if(W)T=r,t.isSelectionValid=function(t){var e=i(t,"isSelectionValid").document,n=e.selection;return"None"!=n.type||L(n.createRange().parentElement())==e};else{if(!B)return e.fail("Neither document.selection or window.getSelection() detected."),!1;T=o,t.isSelectionValid=function(){return!0}}t.getNativeSelection=T;var j=T();if(!j)return e.fail("Native selection was null (possibly issue 138?)"),!1;var U=t.createNativeRange(document),X=F(document),Y=A.areHostProperties(j,["anchorNode","focusNode","anchorOffset","focusOffset"]);H.selectionHasAnchorAndFocus=Y;var q=P(j,"extend");H.selectionHasExtend=q;var G=typeof j.rangeCount==k;H.selectionHasRangeCount=G;var $=!1,K=!0,Q=q?function(e,n){var i=N.getRangeDocument(n),o=t.createRange(i);o.collapseToPoint(n.endContainer,n.endOffset),e.addRange(u(o)),e.extend(n.startContainer,n.startOffset)}:null;A.areHostMethods(j,["addRange","getRangeAt","removeAllRanges"])&&typeof j.rangeCount==k&&H.implementsDomRange&&!function(){var e=window.getSelection();if(e){for(var n=e.rangeCount,i=n>1,o=[],r=s(e),a=0;n>a;++a)o[a]=e.getRangeAt(a);var l=R.createTestElement(document,"",!1),c=l.appendChild(document.createTextNode("")),u=document.createRange();if(u.setStart(c,1),u.collapse(!0),e.removeAllRanges(),e.addRange(u),K=1==e.rangeCount,e.removeAllRanges(),!i){var h=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(h&&parseInt(h[1])>=36)$=!1;else{var d=u.cloneRange();u.setStart(c,0),d.setEnd(c,3),d.setStart(c,2),e.addRange(u),e.addRange(d),$=2==e.rangeCount}}for(R.removeNode(l),e.removeAllRanges(),a=0;n>a;++a)0==a&&r?Q?Q(e,o[a]):(t.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),e.addRange(o[a])):e.addRange(o[a])}}(),H.selectionSupportsMultipleRanges=$,H.collapsedNonEditableSelectionsSupported=K;var Z,J=!1;X&&P(X,"createControlRange")&&(Z=X.createControlRange(),A.areHostProperties(Z,["item","add"])&&(J=!0)),H.implementsControlRange=J,_=Y?function(t){return t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset}:function(t){return t.rangeCount?t.getRangeAt(t.rangeCount-1).collapsed:!1};var tt;P(j,"getRangeAt")?tt=function(t,e){try{return t.getRangeAt(e)}catch(n){return null}}:Y&&(tt=function(e){var n=L(e.anchorNode),i=t.createRange(n);return i.setStartAndEnd(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset),i.collapsed!==this.isCollapsed&&i.setStartAndEnd(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset),i}),v.prototype=t.selectionPrototype;var et=[],nt=function(t){if(t&&t instanceof v)return t.refresh(),t;t=i(t,"getNativeSelection");var e=w(t),n=T(t),o=V?r(t):null;return e?(e.nativeSelection=n,e.docSelection=o,e.refresh()):(e=new v(n,o,t),et.push({win:t,selection:e})),e};t.getSelection=nt,A.createAliasForDeprecatedMethod(t,"getIframeSelection","getSelection");var it=v.prototype;if(!W&&Y&&A.areHostMethods(j,["removeAllRanges","addRange"])){it.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),c(this)};var ot=function(t,e){Q(t.nativeSelection,e),t.refresh()};G?it.addRange=function(e,i){if(J&&V&&this.docSelection.type==I)m(this,e);else if(n(i)&&q)ot(this,e);else{var o;$?o=this.rangeCount:(this.removeAllRanges(),o=0);var r=u(e).cloneRange();try{this.nativeSelection.addRange(r)}catch(s){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==o+1){if(t.config.checkSelectionRanges){var l=tt(this.nativeSelection,this.rangeCount-1);l&&!z(l,e)&&(e=new O(l))}this._ranges[this.rangeCount-1]=e,a(this,e,at(this.nativeSelection)),this.isCollapsed=_(this)}else this.refresh()}}:it.addRange=function(t,e){n(e)&&q?ot(this,t):(this.nativeSelection.addRange(u(t)),this.refresh())},it.setRanges=function(t){if(J&&V&&t.length>1)b(this,t);else{this.removeAllRanges();for(var e=0,n=t.length;n>e;++e)this.addRange(t[e])}}}else{if(!(P(j,"empty")&&P(U,"select")&&J&&W))return e.fail("No means of selecting a Range or TextRange was found"),!1;it.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var t;if(this.anchorNode)t=L(this.anchorNode);else if(this.docSelection.type==I){var e=this.docSelection.createRange();e.length&&(t=L(e.item(0)))}if(t){var n=F(t).createTextRange();n.select(),this.docSelection.empty()}}}catch(i){}c(this)},it.addRange=function(e){this.docSelection.type==I?m(this,e):(t.WrappedTextRange.rangeToTextRange(e).select(),this._ranges[0]=e,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,a(this,e,!1))},it.setRanges=function(t){this.removeAllRanges();var e=t.length;e>1?b(this,t):e&&this.addRange(t[0])}}it.getRangeAt=function(t){if(0>t||t>=this.rangeCount)throw new D("INDEX_SIZE_ERR");return this._ranges[t].cloneRange()};var rt;if(W)rt=function(e){var n;t.isSelectionValid(e.win)?n=e.docSelection.createRange():(n=F(e.win.document).createTextRange(),n.collapse(!0)),e.docSelection.type==I?g(e):f(n)?p(e,n):c(e)};else if(P(j,"getRangeAt")&&typeof j.rangeCount==k)rt=function(e){if(J&&V&&e.docSelection.type==I)g(e);else if(e._ranges.length=e.rangeCount=e.nativeSelection.rangeCount,e.rangeCount){for(var n=0,i=e.rangeCount;i>n;++n)e._ranges[n]=new t.WrappedRange(e.nativeSelection.getRangeAt(n));a(e,e._ranges[e.rangeCount-1],at(e.nativeSelection)),e.isCollapsed=_(e)}else c(e)};else{if(!Y||typeof j.isCollapsed!=E||typeof U.collapsed!=E||!H.implementsDomRange)return e.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;rt=function(t){var e,n=t.nativeSelection;n.anchorNode?(e=tt(n,0),t._ranges=[e],t.rangeCount=1,l(t),t.isCollapsed=_(t)):c(t)}}it.refresh=function(t){var e=t?this._ranges.slice(0):null,n=this.anchorNode,i=this.anchorOffset;if(rt(this),t){var o=e.length;if(o!=this._ranges.length)return!0;if(this.anchorNode!=n||this.anchorOffset!=i)return!0;for(;o--;)if(!z(e[o],this._ranges[o]))return!0;return!1}};var st=function(t,e){var n=t.getAllRanges();t.removeAllRanges();for(var i=0,o=n.length;o>i;++i)z(e,n[i])||t.addRange(n[i]);t.rangeCount||c(t)};J&&V?it.removeRange=function(t){if(this.docSelection.type==I){for(var e,n=this.docSelection.createRange(),i=d(t),o=L(n.item(0)),r=F(o).createControlRange(),s=!1,a=0,l=n.length;l>a;++a)e=n.item(a),e!==i||s?r.add(n.item(a)):s=!0;r.select(),g(this)}else st(this,t)}:it.removeRange=function(t){st(this,t)};var at;!W&&Y&&H.implementsDomRange?(at=s,it.isBackward=function(){return at(this)}):at=it.isBackward=function(){return!1},it.isBackwards=it.isBackward,it.toString=function(){for(var t=[],e=0,n=this.rangeCount;n>e;++e)t[e]=""+this._ranges[e];return t.join("")},it.collapse=function(e,n){C(this,e);var i=t.createRange(e);i.collapseToPoint(e,n),this.setSingleRange(i),this.isCollapsed=!0},it.collapseToStart=function(){if(!this.rangeCount)throw new D("INVALID_STATE_ERR");var t=this._ranges[0];this.collapse(t.startContainer,t.startOffset)},it.collapseToEnd=function(){if(!this.rangeCount)throw new D("INVALID_STATE_ERR");var t=this._ranges[this.rangeCount-1];this.collapse(t.endContainer,t.endOffset)},it.selectAllChildren=function(e){C(this,e);var n=t.createRange(e);n.selectNodeContents(e),this.setSingleRange(n)},it.deleteFromDocument=function(){if(J&&V&&this.docSelection.type==I){for(var t,e=this.docSelection.createRange();e.length;)t=e.item(0),e.remove(t),R.removeNode(t);this.refresh()}else if(this.rangeCount){var n=this.getAllRanges();if(n.length){this.removeAllRanges();for(var i=0,o=n.length;o>i;++i)n[i].deleteContents();this.addRange(n[o-1])}}},it.eachRange=function(t,e){for(var n=0,i=this._ranges.length;i>n;++n)if(t(this.getRangeAt(n)))return e},it.getAllRanges=function(){var t=[];return this.eachRange(function(e){t.push(e)}),t},it.setSingleRange=function(t,e){this.removeAllRanges(),this.addRange(t,e)},it.callMethodOnEachRange=function(t,e){var n=[];return this.eachRange(function(i){n.push(i[t].apply(i,e||[]))}),n},it.setStart=x(!0),it.setEnd=x(!1),t.rangePrototype.select=function(t){
nt(this.getDocument()).setSingleRange(this,t)},it.changeEachRange=function(t){var e=[],n=this.isBackward();this.eachRange(function(n){t(n),e.push(n)}),this.removeAllRanges(),n&&1==e.length?this.addRange(e[0],"backward"):this.setRanges(e)},it.containsNode=function(t,e){return this.eachRange(function(n){return n.containsNode(t,e)},!0)||!1},it.getBookmark=function(t){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[t])}},it.moveToBookmark=function(e){for(var n,i,o=[],r=0;n=e.rangeBookmarks[r++];)i=t.createRange(this.win),i.moveToBookmark(n),o.push(i);e.backward?this.setSingleRange(o[0],"backward"):this.setRanges(o)},it.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},it.restoreRanges=function(t){this.removeAllRanges();for(var e,n=0;e=t.ranges[n];++n)this.addRange(e,t.backward&&0==n)},it.toHtml=function(){var t=[];return this.eachRange(function(e){t.push(N.toHtml(e))}),t.join("")},H.implementsTextRange&&(it.getNativeTextRange=function(){var n;if(n=this.docSelection){var i=n.createRange();if(f(i))return i;throw e.createError("getNativeTextRange: selection is a control selection")}if(this.rangeCount>0)return t.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw e.createError("getNativeTextRange: selection contains no range")}),it.getName=function(){return"WrappedSelection"},it.inspect=function(){return S(this)},it.detach=function(){w(this.win,"delete"),y(this)},v.detachAll=function(){w(null,"deleteAll")},v.inspect=S,v.isDirectionBackward=n,t.Selection=v,t.selectionPrototype=it,t.addShimListener(function(t){"undefined"==typeof t.getSelection&&(t.getSelection=function(){return nt(t)}),t=null})});var F=!1,z=function(t){F||(F=!0,!D.initialized&&D.config.autoInitialize&&h())};return N&&("complete"==document.readyState?z():(t(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",z,!1),H(window,"load",z))),D},this)},{}],undo:[function(t,e,n){(function(){function t(t,e){var n,i;for(n in e)i=e[n],void 0!==i&&(t[n]=i);return t}var e,i=function(){},o=function(e,n){var o;return o=n&&n.hasOwnProperty("constructor")?n.constructor:function(){return e.apply(this,arguments)},i.prototype=e.prototype,o.prototype=new i,n&&t(o.prototype,n),o.prototype.constructor=o,o.__super__=e.prototype,o};e="undefined"!=typeof n?n:this.Undo={},e.Stack=function(){this.commands=[],this.stackPosition=-1,this.savePosition=-1,this.ignoreCommand=!1},t(e.Stack.prototype,{execute:function(t){this._clearRedo(),t.execute(),this.commands.push(t),this.stackPosition++,this.changed()},undo:function(){this.ignoreCommand=!0,this.commands[this.stackPosition].undo(),this.stackPosition--,this.changed(),this.ignoreCommand=!1,console.log(this.commands.length)},canUndo:function(){return this.stackPosition>=0},redo:function(){this.ignoreCommand=!0,this.stackPosition++,this.commands[this.stackPosition].redo(),this.changed(),this.ignoreCommand=!1,console.log(this.commands.length)},canRedo:function(){return this.stackPosition<this.commands.length-1},save:function(){this.savePosition=this.stackPosition,this.changed()},dirty:function(){return this.stackPosition!=this.savePosition},_clearRedo:function(){this.commands=this.commands.slice(0,this.stackPosition+1)},changed:function(){}}),e.Command=function(t){this.name=t};var r=new Error("override me!");t(e.Command.prototype,{execute:function(){this.timestamp=(new Date).getTime()},undo:function(){throw r},redo:function(){this.execute()},type:"default",timestamp:0}),e.Command.extend=function(t){var n=o(this,t);return n.extend=e.Command.extend,n}}).call(this)},{}]},{},["backbone","chartist-plugin-tooltip","chartist","Draggable","Dropzone","EasePack","handsontable","jpicker","jquery.classygradient","jquery.colorpicker","kdTree","medium","minicolors","rangy-classapplier","rangy-selectionsavestore","rangy","TimelineLite","TweenLite","undo"]);